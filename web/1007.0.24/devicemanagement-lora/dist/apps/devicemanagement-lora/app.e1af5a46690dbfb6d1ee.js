(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1012:function(e,t,n){"use strict";this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),n(1013),n(700),n(2313),n(2343),n(2352),n(2365),n(2372),n(2378),n(2387),n(2396),n(2402),n(2411),n(2436),n(2441),n(2446),n(2451),n(2453),n(2458),n(419),n(345),n(2630),n(2636),n(703),n(2673),n(2675),n(2700),n(2768),n(704),n(2775),n(2829),n(2833),n(705),n(2847),n(2860),n(2871),n(2876),n(2880),n(2888),n(2895),n(2900),n(2903),n(2907),n(2917),n(2920),n(2928),n(2930),n(2977),n(2979),n(2981),n(3069),n(3076),n(709),n(3087),n(3108),n(3117)},1014:function(e,t,n){var r={"./af":544,"./af.js":544,"./ar":545,"./ar-dz":546,"./ar-dz.js":546,"./ar-kw":547,"./ar-kw.js":547,"./ar-ly":548,"./ar-ly.js":548,"./ar-ma":549,"./ar-ma.js":549,"./ar-sa":550,"./ar-sa.js":550,"./ar-tn":551,"./ar-tn.js":551,"./ar.js":545,"./az":552,"./az.js":552,"./be":553,"./be.js":553,"./bg":554,"./bg.js":554,"./bm":555,"./bm.js":555,"./bn":556,"./bn.js":556,"./bo":557,"./bo.js":557,"./br":558,"./br.js":558,"./bs":559,"./bs.js":559,"./ca":560,"./ca.js":560,"./cs":561,"./cs.js":561,"./cv":562,"./cv.js":562,"./cy":563,"./cy.js":563,"./da":564,"./da.js":564,"./de":565,"./de-at":566,"./de-at.js":566,"./de-ch":567,"./de-ch.js":567,"./de.js":565,"./dv":568,"./dv.js":568,"./el":569,"./el.js":569,"./en-SG":570,"./en-SG.js":570,"./en-au":571,"./en-au.js":571,"./en-ca":572,"./en-ca.js":572,"./en-gb":573,"./en-gb.js":573,"./en-ie":574,"./en-ie.js":574,"./en-il":575,"./en-il.js":575,"./en-nz":576,"./en-nz.js":576,"./eo":577,"./eo.js":577,"./es":578,"./es-do":579,"./es-do.js":579,"./es-us":580,"./es-us.js":580,"./es.js":578,"./et":581,"./et.js":581,"./eu":582,"./eu.js":582,"./fa":583,"./fa.js":583,"./fi":584,"./fi.js":584,"./fo":585,"./fo.js":585,"./fr":586,"./fr-ca":587,"./fr-ca.js":587,"./fr-ch":588,"./fr-ch.js":588,"./fr.js":586,"./fy":589,"./fy.js":589,"./ga":590,"./ga.js":590,"./gd":591,"./gd.js":591,"./gl":592,"./gl.js":592,"./gom-latn":593,"./gom-latn.js":593,"./gu":594,"./gu.js":594,"./he":595,"./he.js":595,"./hi":596,"./hi.js":596,"./hr":597,"./hr.js":597,"./hu":598,"./hu.js":598,"./hy-am":599,"./hy-am.js":599,"./id":600,"./id.js":600,"./is":601,"./is.js":601,"./it":602,"./it-ch":603,"./it-ch.js":603,"./it.js":602,"./ja":604,"./ja.js":604,"./jv":605,"./jv.js":605,"./ka":606,"./ka.js":606,"./kk":607,"./kk.js":607,"./km":608,"./km.js":608,"./kn":609,"./kn.js":609,"./ko":610,"./ko.js":610,"./ku":611,"./ku.js":611,"./ky":612,"./ky.js":612,"./lb":613,"./lb.js":613,"./lo":614,"./lo.js":614,"./lt":615,"./lt.js":615,"./lv":616,"./lv.js":616,"./me":617,"./me.js":617,"./mi":618,"./mi.js":618,"./mk":619,"./mk.js":619,"./ml":620,"./ml.js":620,"./mn":621,"./mn.js":621,"./mr":622,"./mr.js":622,"./ms":623,"./ms-my":624,"./ms-my.js":624,"./ms.js":623,"./mt":625,"./mt.js":625,"./my":626,"./my.js":626,"./nb":627,"./nb.js":627,"./ne":628,"./ne.js":628,"./nl":629,"./nl-be":630,"./nl-be.js":630,"./nl.js":629,"./nn":631,"./nn.js":631,"./pa-in":632,"./pa-in.js":632,"./pl":633,"./pl.js":633,"./pt":634,"./pt-br":635,"./pt-br.js":635,"./pt.js":634,"./ro":636,"./ro.js":636,"./ru":637,"./ru.js":637,"./sd":638,"./sd.js":638,"./se":639,"./se.js":639,"./si":640,"./si.js":640,"./sk":641,"./sk.js":641,"./sl":642,"./sl.js":642,"./sq":643,"./sq.js":643,"./sr":644,"./sr-cyrl":645,"./sr-cyrl.js":645,"./sr.js":644,"./ss":646,"./ss.js":646,"./sv":647,"./sv.js":647,"./sw":648,"./sw.js":648,"./ta":649,"./ta.js":649,"./te":650,"./te.js":650,"./tet":651,"./tet.js":651,"./tg":652,"./tg.js":652,"./th":653,"./th.js":653,"./tl-ph":654,"./tl-ph.js":654,"./tlh":655,"./tlh.js":655,"./tr":656,"./tr.js":656,"./tzl":657,"./tzl.js":657,"./tzm":658,"./tzm-latn":659,"./tzm-latn.js":659,"./tzm.js":658,"./ug-cn":660,"./ug-cn.js":660,"./uk":661,"./uk.js":661,"./ur":662,"./ur.js":662,"./uz":663,"./uz-latn":664,"./uz-latn.js":664,"./uz.js":663,"./vi":665,"./vi.js":665,"./x-pseudo":666,"./x-pseudo.js":666,"./yo":667,"./yo.js":667,"./zh-cn":668,"./zh-cn.js":668,"./zh-hk":669,"./zh-hk.js":669,"./zh-tw":670,"./zh-tw.js":670};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=1014},3126:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0});var s=n(130),c=n(724),l=n(178),d=n(350),u=n(157),p=n(774),f=n(3670),h=n(778),v=n(843),m=n(3671),y=n(3821),b=n(513),g=n(3672),w=n(3819),j=n(3673),C=n(3674),S=n(3675),I=n(3676),_=n(3809),M=n(3811),D=n(3812),x=n(3814),k=n(3816),E=n(148),P=n(160),T=n(279),O=n(3818),R={onMonacoLoad:function(){console.log(window.monaco),monaco.languages.typescript.javascriptDefaults.addExtraLib("\nclass IManagedObject {\n  id: string;\n  name: string;\n}\nlet device: IManagedObject;\nlet payload: string;\nlet time: Date;\nlet fport: number;\nclass C8YData {\n  morToUpdate?: IManagedObject;\n  addMeasurement(mor: IManagedObject, fragment: string, series: string, unit: string, value: number, time: Date): void;\n  addMeasurements(mor: IManagedObject, fragment: string, serieses: string[], units: string[], values: number[], time: Date): void;\n  addEvent(mor: IManagedObject, eventType: string, eventText: string, properties: {}, dateTime: Date): void;\n  addAlarm(mor: IManagedObject, alarmType: string, alarmText: string, severity: Severity, dateTime: Date): void;\n  clearAlarm(alarmType: string): void;\n}\nclass DownlinkData {\n  devEui: string;\n  fport: number;\n  payload: string;\n}\n"),monaco.languages.typescript.javascriptDefaults.addExtraLib("// Buffer class\ntype BufferEncoding = \"ascii\" | \"utf8\" | \"utf16le\" | \"ucs2\" | \"base64\" | \"latin1\" | \"binary\" | \"hex\";\ninterface Buffer extends Uint8Array {\n    write(string: string, offset?: number, length?: number, encoding?: string): number;\n    toString(encoding?: string, start?: number, end?: number): string;\n    toJSON(): { type: 'Buffer', data: any[] };\n    equals(otherBuffer: Uint8Array): boolean;\n    compare(otherBuffer: Uint8Array, targetStart?: number, targetEnd?: number, sourceStart?: number, sourceEnd?: number): number;\n    copy(targetBuffer: Uint8Array, targetStart?: number, sourceStart?: number, sourceEnd?: number): number;\n    slice(start?: number, end?: number): Buffer;\n    writeUIntLE(value: number, offset: number, byteLength: number, noAssert?: boolean): number;\n    writeUIntBE(value: number, offset: number, byteLength: number, noAssert?: boolean): number;\n    writeIntLE(value: number, offset: number, byteLength: number, noAssert?: boolean): number;\n    writeIntBE(value: number, offset: number, byteLength: number, noAssert?: boolean): number;\n    readUIntLE(offset: number, byteLength: number, noAssert?: boolean): number;\n    readUIntBE(offset: number, byteLength: number, noAssert?: boolean): number;\n    readIntLE(offset: number, byteLength: number, noAssert?: boolean): number;\n    readIntBE(offset: number, byteLength: number, noAssert?: boolean): number;\n    readUInt8(offset: number, noAssert?: boolean): number;\n    readUInt16LE(offset: number, noAssert?: boolean): number;\n    readUInt16BE(offset: number, noAssert?: boolean): number;\n    readUInt32LE(offset: number, noAssert?: boolean): number;\n    readUInt32BE(offset: number, noAssert?: boolean): number;\n    readInt8(offset: number, noAssert?: boolean): number;\n    readInt16LE(offset: number, noAssert?: boolean): number;\n    readInt16BE(offset: number, noAssert?: boolean): number;\n    readInt32LE(offset: number, noAssert?: boolean): number;\n    readInt32BE(offset: number, noAssert?: boolean): number;\n    readFloatLE(offset: number, noAssert?: boolean): number;\n    readFloatBE(offset: number, noAssert?: boolean): number;\n    readDoubleLE(offset: number, noAssert?: boolean): number;\n    readDoubleBE(offset: number, noAssert?: boolean): number;\n    swap16(): Buffer;\n    swap32(): Buffer;\n    swap64(): Buffer;\n    writeUInt8(value: number, offset: number, noAssert?: boolean): number;\n    writeUInt16LE(value: number, offset: number, noAssert?: boolean): number;\n    writeUInt16BE(value: number, offset: number, noAssert?: boolean): number;\n    writeUInt32LE(value: number, offset: number, noAssert?: boolean): number;\n    writeUInt32BE(value: number, offset: number, noAssert?: boolean): number;\n    writeInt8(value: number, offset: number, noAssert?: boolean): number;\n    writeInt16LE(value: number, offset: number, noAssert?: boolean): number;\n    writeInt16BE(value: number, offset: number, noAssert?: boolean): number;\n    writeInt32LE(value: number, offset: number, noAssert?: boolean): number;\n    writeInt32BE(value: number, offset: number, noAssert?: boolean): number;\n    writeFloatLE(value: number, offset: number, noAssert?: boolean): number;\n    writeFloatBE(value: number, offset: number, noAssert?: boolean): number;\n    writeDoubleLE(value: number, offset: number, noAssert?: boolean): number;\n    writeDoubleBE(value: number, offset: number, noAssert?: boolean): number;\n    fill(value: any, offset?: number, end?: number): this;\n    indexOf(value: string | number | Uint8Array, byteOffset?: number, encoding?: string): number;\n    lastIndexOf(value: string | number | Uint8Array, byteOffset?: number, encoding?: string): number;\n    entries(): IterableIterator<[number, number]>;\n    includes(value: string | number | Buffer, byteOffset?: number, encoding?: string): boolean;\n    keys(): IterableIterator<number>;\n    values(): IterableIterator<number>;\n}\n\n/**\n * Raw data is stored in instances of the Buffer class.\n * A Buffer is similar to an array of integers but corresponds to a raw memory allocation outside the V8 heap.  A Buffer cannot be resized.\n * Valid string encodings: 'ascii'|'utf8'|'utf16le'|'ucs2'(alias of 'utf16le')|'base64'|'binary'(deprecated)|'hex'\n */\ndeclare var Buffer: {\n    /**\n     * Allocates a new buffer containing the given {str}.\n     *\n     * @param str String to store in buffer.\n     * @param encoding encoding to use, optional.  Default is 'utf8'\n     * @deprecated since v10.0.0 - Use `Buffer.from(string[, encoding])` instead.\n     */\n    new(str: string, encoding?: string): Buffer;\n    /**\n     * Allocates a new buffer of {size} octets.\n     *\n     * @param size count of octets to allocate.\n     * @deprecated since v10.0.0 - Use `Buffer.alloc()` instead (also see `Buffer.allocUnsafe()`).\n     */\n    new(size: number): Buffer;\n    /**\n     * Allocates a new buffer containing the given {array} of octets.\n     *\n     * @param array The octets to store.\n     * @deprecated since v10.0.0 - Use `Buffer.from(array)` instead.\n     */\n    new(array: Uint8Array): Buffer;\n    /**\n     * Produces a Buffer backed by the same allocated memory as\n     * the given {ArrayBuffer}.\n     *\n     *\n     * @param arrayBuffer The ArrayBuffer with which to share memory.\n     * @deprecated since v10.0.0 - Use `Buffer.from(arrayBuffer[, byteOffset[, length]])` instead.\n     */\n    new(arrayBuffer: ArrayBuffer): Buffer;\n    /**\n     * Allocates a new buffer containing the given {array} of octets.\n     *\n     * @param array The octets to store.\n     * @deprecated since v10.0.0 - Use `Buffer.from(array)` instead.\n     */\n    new(array: any[]): Buffer;\n    /**\n     * Copies the passed {buffer} data onto a new {Buffer} instance.\n     *\n     * @param buffer The buffer to copy.\n     * @deprecated since v10.0.0 - Use `Buffer.from(buffer)` instead.\n     */\n    new(buffer: Buffer): Buffer;\n    prototype: Buffer;\n    /**\n     * When passed a reference to the .buffer property of a TypedArray instance,\n     * the newly created Buffer will share the same allocated memory as the TypedArray.\n     * The optional {byteOffset} and {length} arguments specify a memory range\n     * within the {arrayBuffer} that will be shared by the Buffer.\n     *\n     * @param arrayBuffer The .buffer property of a TypedArray or a new ArrayBuffer()\n     */\n    from(arrayBuffer: ArrayBuffer, byteOffset?: number, length?: number): Buffer;\n    /**\n     * Creates a new Buffer using the passed {data}\n     * @param data data to create a new Buffer\n     */\n    from(data: any[] | string | ArrayBuffer | Uint8Array /*| TypedArray*/): Buffer;\n    /**\n     * Creates a new Buffer containing the given JavaScript string {str}.\n     * If provided, the {encoding} parameter identifies the character encoding.\n     * If not provided, {encoding} defaults to 'utf8'.\n     */\n    from(str: string, encoding?: string): Buffer;\n    /**\n     * Returns true if {obj} is a Buffer\n     *\n     * @param obj object to test.\n     */\n    isBuffer(obj: any): obj is Buffer;\n    /**\n     * Returns true if {encoding} is a valid encoding argument.\n     * Valid string encodings in Node 0.12: 'ascii'|'utf8'|'utf16le'|'ucs2'(alias of 'utf16le')|'base64'|'binary'(deprecated)|'hex'\n     *\n     * @param encoding string to test.\n     */\n    isEncoding(encoding: string): boolean | undefined;\n    /**\n     * Gives the actual byte length of a string. encoding defaults to 'utf8'.\n     * This is not the same as String.prototype.length since that returns the number of characters in a string.\n     *\n     * @param string string to test. (TypedArray is also allowed, but it is only available starting ES2017)\n     * @param encoding encoding used to evaluate (defaults to 'utf8')\n     */\n    byteLength(string: string | Buffer | DataView | ArrayBuffer, encoding?: string): number;\n    /**\n     * Returns a buffer which is the result of concatenating all the buffers in the list together.\n     *\n     * If the list has no items, or if the totalLength is 0, then it returns a zero-length buffer.\n     * If the list has exactly one item, then the first item of the list is returned.\n     * If the list has more than one item, then a new Buffer is created.\n     *\n     * @param list An array of Buffer objects to concatenate\n     * @param totalLength Total length of the buffers when concatenated.\n     *   If totalLength is not provided, it is read from the buffers in the list. However, this adds an additional loop to the function, so it is faster to provide the length explicitly.\n     */\n    concat(list: Uint8Array[], totalLength?: number): Buffer;\n    /**\n     * The same as buf1.compare(buf2).\n     */\n    compare(buf1: Uint8Array, buf2: Uint8Array): number;\n    /**\n     * Allocates a new buffer of {size} octets.\n     *\n     * @param size count of octets to allocate.\n     * @param fill if specified, buffer will be initialized by calling buf.fill(fill).\n     *    If parameter is omitted, buffer will be filled with zeros.\n     * @param encoding encoding used for call to buf.fill while initalizing\n     */\n    alloc(size: number, fill?: string | Buffer | number, encoding?: string): Buffer;\n    /**\n     * Allocates a new buffer of {size} octets, leaving memory not initialized, so the contents\n     * of the newly created Buffer are unknown and may contain sensitive data.\n     *\n     * @param size count of octets to allocate\n     */\n    allocUnsafe(size: number): Buffer;\n    /**\n     * Allocates a new non-pooled buffer of {size} octets, leaving memory not initialized, so the contents\n     * of the newly created Buffer are unknown and may contain sensitive data.\n     *\n     * @param size count of octets to allocate\n     */\n    allocUnsafeSlow(size: number): Buffer;\n    /**\n     * This is the number of bytes used to determine the size of pre-allocated, internal Buffer instances used for pooling. This value may be modified.\n     */\n    poolSize: number;\n};\n")}},A=function(e){function t(t){var n=e.call(this)||this;return n.upgrade=t,n}return o(t,e),t.ctorParameters=function(){return[{type:d.UpgradeModule}]},t=i([s.NgModule({declarations:[I.GroupsComponent,_.DevicesComponent,D.LoraDevicesComponent,k.LNSComponent,x.LoraCodecsComponent],entryComponents:[I.GroupsComponent,_.DevicesComponent],imports:[w.UpgradeModule,c.BrowserAnimationsModule,u.RouterModule.forRoot(),l.RouterModule.forRoot([{path:"lora-device",component:D.LoraDevicesComponent},{path:"lns",component:k.LNSComponent},{path:"codecs",component:x.LoraCodecsComponent},{path:"lora_command",component:I.GroupsComponent}].concat(w.UPGRADE_ROUTES),{enableTracing:!1,useHash:!0}),u.CoreModule.forRoot(),p.AssetsNavigatorModule.config({smartGroups:!0}),v.OperationsModule,y.OpcuaProtocolModule,m.ImpactProtocolModule,g.TrustedCertificatesModule,f.DeviceGridExampleModule,d.UpgradeModule,w.DashboardUpgradeModule,b.RepositoryModule,h.DeviceProfileModule,j.ProductExperienceModule,C.BinaryFileDownloadModule,O.MonacoEditorModule.forRoot(R),E.BsDatepickerModule.forRoot(),T.TimepickerModule.forRoot(),P.ModalModule.forRoot()],providers:[M.LoraGuard,{provide:u.HOOK_NAVIGATOR_NODES,useClass:S.LoraNavigationFactory,multi:!0},{provide:u.HOOK_ONCE_ROUTE,useValue:[{context:u.ViewContext.Group,path:"health",component:I.GroupsComponent,label:"Health",priority:100,icon:"heart"}],multi:!0},{provide:u.HOOK_ONCE_ROUTE,useValue:[{context:u.ViewContext.Device,path:"lora_command",component:_.DevicesComponent,label:"LoRa",priority:100,icon:"c8y-energy",canActivate:[M.LoraGuard]}],multi:!0}]}),a("design:paramtypes",[d.UpgradeModule])],t)}(w.HybridAppModule);t.AppModule=A},3675:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0});var i=n(130),a=n(157),s=function(){function e(){this.nav=[];var e=new a.NavigatorNode({label:a._("LoRa devices"),icon:"c8y-device",path:"/lora-device",priority:0,routerLinkExact:!1}),t=new a.NavigatorNode({label:a._("LoRa network servers"),icon:"c8y-saas",path:"/lns",priority:1,routerLinkExact:!1}),n=new a.NavigatorNode({label:a._("Custom codecs"),icon:"c8y-business-rules",path:"/codecs",priority:2,routerLinkExact:!1}),r=new a.NavigatorNode({label:a._("LoRa"),icon:"wifi",name:"lora",children:[e,t,n],priority:2,routerLinkExact:!1});this.nav.push(r)}return e.prototype.get=function(){return this.nav},e=r([i.Injectable(),o("design:paramtypes",[])],e)}();t.LoraNavigationFactory=s},3676:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(157),l=n(130),d=n(132),u=n(178),p=n(3677),f=function(){function e(e,t,n){this.route=e,this.inventory=t,this.fetch=n,this.lnss={},this.codecs={},this.dateFrom=new Date,this.dateTo=new Date,this.bsConfig={containerClass:"theme-orange",dateInputFormat:"DD-MM-YYYY"},this.showMeridian=!1,this.showSpinners=!1,this.battery=100,this.color="green",this.filter={fragmentType:"c8y_IsDevice",type:"c8y_LoRaDevice",withTotalPages:!0,pageSize:100},console.log(e.snapshot.parent.data.contextData.id),this.informationText=c._("Ooops! It seems that there is no device to display."),this.dateFrom.setDate(this.dateTo.getDate()-1),this.dates=[this.dateFrom,this.dateTo],console.log(this.dateFrom),console.log(this.dateTo)}return e.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){return this.loadDevices(),this.loadMeasurements(),this.chart=new p.default(document.getElementById("chartContainer"),{legend:{horizontalAlignment:"center",verticalAlignment:"bottom",itemTextPosition:"right"},series:[{type:"line",name:"Aggregated RSSI",argumentField:"time",valueField:"rssi",axis:"dBm"},{type:"line",name:"Aggregated SNR",argumentField:"time",valueField:"snr",axis:"dB"},{type:"line",name:"Aggregated Noise",argumentField:"time",valueField:"noise",axis:"dBm"},{type:"line",name:"Aggregated Signal",argumentField:"time",valueField:"signal",axis:"dBm"}],tooltip:{enabled:!0,customizeTooltip:function(e){return{text:e.argumentText+": "+e.valueText}}},loadingIndicator:{show:!0,enabled:!0},commonAxisSettings:{label:{overlappingBehavior:"rotate",rotationAngle:30}},valueAxis:[{name:"dBm",title:{text:"RSSI, Noise and Signl in dBm"}},{name:"dB",title:{text:"SNR in dB"}}]}),[2]}))}))},e.prototype.loadDevices=function(){return i(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return[4,this.inventory.list(this.filter)];case 1:return e=n.sent(),t=e.data,e.res,e.paging,this.devices=t,[2]}}))}))},e.prototype.loadMeasurements=function(){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i,s;return a(this,(function(a){switch(a.label){case 0:return e=this.route.snapshot.parent.data.contextData.id,[4,this.fetch.fetch("service/measurement-aggregator/mean?groupId="+e+"&fromDate="+this.dateFrom.toISOString()+"&toDate="+this.dateTo.toISOString()+"&interval=3600000&fragmentType=c8y_SignalStrength&series=rssi,snr,noise,signal")];case 1:return t=a.sent(),[4,this.fetch.fetch("service/measurement-aggregator/mean?groupId="+e+"&fromDate="+this.dateFrom.toISOString()+"&toDate="+this.dateTo.toISOString()+"&interval=3600000&fragmentType=c8y_Battery&series=level")];case 2:return n=a.sent(),o=(r=this.chart).option,i=["dataSource"],[4,t.json()];case 3:return o.apply(r,i.concat([a.sent()])),[4,n.json()];case 4:return s=a.sent(),this.battery=s[s.length-1].level,this.color=this.battery>75?"green":this.battery>50?"yellow":this.battery>25?"orange":"red",[2]}}))}))},e.ctorParameters=function(){return[{type:u.ActivatedRoute},{type:d.InventoryService},{type:d.FetchClient}]},e=r([l.Component({selector:"groups",template:s(n(3807)).default,styles:[s(n(3808)).default]}),o("design:paramtypes",[u.ActivatedRoute,d.InventoryService,d.FetchClient])],e)}();t.GroupsComponent=f},3807:function(e,t,n){"use strict";n.r(t),t.default='<c8y-title translate>Group health</c8y-title>\n<div class="row">\n    <div class="col-md-8">\n        <div class="card">\n            <div class="card-header">\n                <h4 class="card-title">Average signal quality</h4>\n            </div>\n            <div class="card-header separator">\n                <div class="measurements-time-control card-subtitle">\n                    <div class="measurements-date-from datetime-picker">\n                        <label class="right-m-xs">From</label>\n                        <div class="form-group datepicker">\n                            <input type="text" placeholder="Range" class="form-control" bsDatepicker\n                                [(ngModel)]="dateFrom" [bsConfig]="bsConfig" (bsValueChange)="loadMeasurements()">\n                        </div>\n                        <timepicker [(ngModel)]="dateFrom" [showMeridian]="showMeridian" [showSpinners]="showSpinners"\n                            (bsValueChange)="loadMeasurements()"></timepicker>\n                    </div>\n                    <div class="measurements-date-to datetime-picker">\n                        <label class="right-m-xs">To</label>\n                        <div class="form-group datepicker">\n                            <input type="text" placeholder="Range" class="form-control" bsDatepicker\n                                [(ngModel)]="dateTo" [bsConfig]="bsConfig" (bsValueChange)="loadMeasurements()">\n                        </div>\n                        <timepicker [(ngModel)]="dateTo" [showMeridian]="showMeridian" [showSpinners]="showSpinners"\n                            (bsValueChange)="loadMeasurements()"></timepicker>\n                    </div>\n                </div>\n            </div>\n            <div class="card-block">\n                <div id="chartContainer"></div>\n            </div>\n        </div>\n    </div>\n    <div class="col-md-4">\n        <div class="card">\n            <div class="card-header separator">\n                <h4 class="card-title">Average battery status</h4>\n            </div>\n            <div class="card-block">\n                <svg viewBox="0 0 377.021 377.021">\n                    <path xmlns="http://www.w3.org/2000/svg"\n                        d="M279.522,36.163h-22.086V20c0-11.028-8.972-20-20-20h-97.85c-11.028,0-20,8.972-20,20v16.163H97.5   c-16.542,0-30,13.458-30,30v280.858c0,16.542,13.458,30,30,30h182.022c16.542,0,30-13.458,30-30V66.163   C309.522,49.621,296.064,36.163,279.522,36.163z M97.5,347.021V66.163h182.022l0.003,280.858H97.5z"\n                        [attr.fill]="color" />\n                    <rect *ngIf="battery>25" xmlns="http://www.w3.org/2000/svg" x="122.586" y="266.5" width="131.85"\n                        height="59.663" [attr.fill]="color" />\n                    <rect *ngIf="battery>50" xmlns="http://www.w3.org/2000/svg" x="122.586" y="176.63" width="131.85"\n                        height="59.663" [attr.fill]="color" />\n                    <rect *ngIf="battery>75" xmlns="http://www.w3.org/2000/svg" x="122.586" y="86.76" width="131.85"\n                        height="59.663" [attr.fill]="color" />\n                </svg>\n            </div>\n            <div class="card-footer">\n                <h1 class="card-title" style="text-align: center;font-weight: bolder;">{{battery}}%</h1>\n            </div>\n        </div>\n    </div>\n</div>'},3809:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(130),l=n(132),d=n(178),u=n(160),p=function(){function e(e,t,n,r,o,i,a){this.route=e,this.inventory=t,this.identity=n,this.operationService=r,this.fetch=o,this.modalService=i,this.eventService=a,this.codecsFilter={type:"Device Codec",withTotalPages:!0,pageSize:100},console.log(e.snapshot.parent.data.contextData.id),this.loadCommands(),this.loadCodecs()}return e.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e.prototype.loadCommands=function(){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i=this;return a(this,(function(a){switch(a.label){case 0:return e=this.route.snapshot.parent.data.contextData.id,[4,this.inventory.detail(e)];case 1:return t=a.sent(),n=t.data,t.res,t.paging,this.device=n,this.getUnprocessPayloads(),this.device.codec&&(this.codec=this.device.codec,this.loadModels(this.device.codec)),this.model=void 0!==this.device.c8y_Hardware&&this.device.c8y_Hardware.model||"a",[4,this.fetch.fetch("service/lora-codec-"+this.device.codec+"/operations/"+this.model)];case 2:return r=a.sent(),o=this,[4,r.json()];case 3:return o.commands=a.sent(),[4,this.identity.list(e)];case 4:return a.sent().data.forEach((function(e){"LoRa devEUI"===e.type&&(i.devEui=e.externalId)})),[2]}}))}))},e.prototype.preview=function(e,t){return i(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return n=t?JSON.stringify(t):"{}",r={devEui:this.devEui,operation:'{"'+e+'":'+n+"}",model:void 0!==this.device.c8y_Hardware&&this.device.c8y_Hardware.model||"a"},console.log(r),[4,this.fetch.fetch("service/lora-codec-"+this.device.codec+"/encode",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})];case 1:return o=a.sent(),i=this,[4,o.json()];case 2:return i.previewCommand=a.sent(),this.previewCommand.success||(this.errorModalRef=this.modalService.show(this.errorModal)),[2]}}))}))},e.prototype.send=function(e,t){return i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){return n=t?JSON.stringify(t):"{}",r={deviceId:this.device.id,c8y_Command:{text:'{"'+e+'":'+n+"}"},description:"Execute command "+e},this.operationService.create(r),[2]}))}))},e.prototype.loadCodecs=function(){return i(this,void 0,void 0,(function(){var e,t,n=this;return a(this,(function(r){switch(r.label){case 0:return[4,this.inventory.list(this.codecsFilter)];case 1:return e=r.sent(),t=e.data,e.res,e.paging,this.codecs=t,this.codecMap={},t.forEach((function(e){return n.codecMap[e.lora_codec_DeviceCodecRepresentation.id]=e.lora_codec_DeviceCodecRepresentation})),[2]}}))}))},e.prototype.loadModels=function(e){return i(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return console.log("Loading models for codec "+e),[4,this.fetch.fetch("service/lora-codec-"+e+"/models")];case 1:if(!(t=r.sent()))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),n=this,[4,t.json()];case 3:return n.models=r.sent(),[3,5];case 4:return r.sent(),this.models=[],[3,5];case 5:return[3,7];case 6:this.models=[],r.label=7;case 7:return[2]}}))}))},e.prototype.updateDeviceCodec=function(){var e={id:this.device.id,codec:this.codec,c8y_Hardware:{model:this.model}};this.inventory.update(e),this.loadCommands()},e.prototype.getUnprocessPayloads=function(){var e=this;this.unprocessedPayloads=new Array,this.eventService.list({source:this.device.id,type:"LoRaPayload",pageSize:1e3}).then((function(t){t.data.forEach((function(t){t.processed||e.unprocessedPayloads.push(t)}))}))},e.prototype.processPayloads=function(){return i(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){return this.unprocessedPayloads.forEach((function(t){return i(e,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e={deveui:this.devEui,model:this.model,fPort:t.port,payload:t.payload,updateTime:new Date(t.time).getTime()},console.log(e),[4,this.fetch.fetch("service/lora-codec-"+this.device.codec+"/decode",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[4,n.sent().json()];case 2:return n.sent().success?(t.processed=!0,t.creationTime=null,t.time=null,t.type=null,t.source=null,[4,this.eventService.update(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))})),this.getUnprocessPayloads(),[2]}))}))},e.ctorParameters=function(){return[{type:d.ActivatedRoute},{type:l.InventoryService},{type:l.IdentityService},{type:l.OperationService},{type:l.FetchClient},{type:u.BsModalService},{type:l.EventService}]},r([c.ViewChild("errorModal",{static:!1}),o("design:type",c.TemplateRef)],e.prototype,"errorModal",void 0),e=r([c.Component({selector:"devices",template:s(n(3810)).default}),o("design:paramtypes",[d.ActivatedRoute,l.InventoryService,l.IdentityService,l.OperationService,l.FetchClient,u.BsModalService,l.EventService])],e)}();t.DevicesComponent=p},3810:function(e,t,n){"use strict";n.r(t),t.default='<c8y-title translate>LoRa device operations</c8y-title>\n\n<div class="row">\n    <div class="card col-sm-4" *ngIf="device != undefined">\n        <div class="card-header separator">\n            <h4 class="card-title">{{\'Configure device codec\' | translate}}</h4>\n        </div>\n        <div class="card-block">\n            <div class="col-sm-12">\n                <div class="c8y-select-wrapper">\n                    <label for="model">Type:</label>\n                    <select class="form-control" [(ngModel)]="codec" (change)="loadModels(codec)"\n                        required>\n                        <option>Please select a type</option>\n                        <option *ngFor="let codec of codecs" [value]="codec.lora_codec_DeviceCodecRepresentation.id">\n                            {{codec.lora_codec_DeviceCodecRepresentation.name}}</option>\n                    </select>\n                </div>\n            </div>\n            <div class="col-sm-12">\n                <div class="c8y-select-wrapper">\n                    <label for="model">Model:</label>\n                    <select class="form-control" [(ngModel)]="model">\n                        <option value="-">Please select a model</option>\n                        <option *ngFor="let m of models" [value]="m">{{m}}</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class="card-footer">\n            <div class="form-group">\n                <button type="button" (click)="updateDeviceCodec()" class="btn btn-primary">\n                    Update device codec\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="col-sm-1"></div>\n    <div class="card col-sm-4">\n        <div class="card-header separator">\n            <h4 class="card-title">{{\'Unprocessed payloads\' | translate}}</h4>\n        </div>\n        <div class="card-block"><span>{{unprocessedPayloads? unprocessedPayloads.length : 0}}</span> unprocessed payloads</div>\n        <div class="card-footer">\n            <div class="form-group">\n                <button type="button" (click)="processPayloads()" class="btn btn-primary" [disabled]="!unprocessedPayloads">\n                    Process unprocessed payloads\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row">\n    <div class="card col-sm-9">\n        <div class="card-header separator">\n            <h4 class="card-title">{{\'Send a command to the device\' | translate}}</h4>\n        </div>\n        <div class="card-block">\n            <div class="col-sm-12">\n                <div class="c8y-select-wrapper">\n                    <label for="model">Command:</label>\n                    <select class="form-control" #commandChoice>\n                        <option value="">Please select a command</option>\n                        <option *ngFor="let command of commands | keyvalue" [value]="command.value.id">\n                            {{command.value.name}}</option>\n                    </select>\n                </div>\n            </div>\n            <form #parameterValues="ngForm">\n                <div *ngIf="commandChoice.value !== \'\'">\n                    <div *ngFor="let parameter of commands[commandChoice.value].params" class="col-sm-6">\n                        <div class="form-group" *ngIf="parameter.type === \'STRING\'">\n                            <label for="{{parameter.id}}">{{parameter.name}}:</label>\n                            <input name="{{parameter.id}}" #{{parameter.id}}="ngModel" ngModel required />\n                        </div>\n                        <div class="form-group" *ngIf="parameter.type === \'INTEGER\'">\n                            <label for="{{parameter.id}}">{{parameter.name}}:</label>\n                            <input type="number" name="{{parameter.id}}" #{{parameter.id}}="ngModel" ngModel required />\n                        </div>\n                        <div class="form-group" *ngIf="parameter.type === \'FLOAT\'">\n                            <label for="{{parameter.id}}">{{parameter.name}}:</label>\n                            <input type="number" step="0.01" name="{{parameter.id}}" #{{parameter.id}}="ngModel" ngModel\n                                required />\n                        </div>\n                        <div class="form-group" *ngIf="parameter.type === \'BOOL\'">\n                            <label class="c8y-checkbox"><input type="checkbox" name="{{parameter.id}}"\n                                    #{{parameter.id}}="ngModel" ngModel\n                                    required /><span></span>{{parameter.name}}</label>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div class="card-footer">\n            <div class="form-group">\n                <button type="button" (click)="preview(commandChoice.value, parameterValues.value)"\n                    class="btn btn-primary">\n                    Preview command\n                </button>\n                <button type="button" (click)="send(commandChoice.value, parameterValues.value)"\n                    class="btn btn-primary">\n                    Send command\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="card col-sm-12" *ngIf="previewCommand !== undefined && previewCommand.success">\n        <div class="card-header separator">\n            <h4 class="card-title">{{\'Preview\' | translate}}</h4>\n        </div>\n        <div class="card-block">\n            <div class="col-sm-12">\n                fPort: {{previewCommand.response.fport}}\n            </div>\n            <div class="col-sm-12">\n                Payload: {{previewCommand.response.payload}}\n            </div>\n        </div>\n    </div>\n    <ng-template #errorModal>\n        <div class="modal-header">\n            <h4 id="dialog-name" class="modal-title pull-left"><span class="label label-danger">Error</span>\n            </h4>\n        </div>\n        <div class="modal-body">\n            An error occurred while parsing the command: {{previewCommand.response}}<br>\n            Cause: {{previewCommand.message}}<br>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-default" (click)="errorModalRef.hide()" translate=""\n                ng-reflect-translate="">Close</button>\n        </div>\n    </ng-template>\n</div>'},3811:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0});var o=n(130),i=function(){function e(){}return e.prototype.canActivate=function(e){return"c8y_LoRaDevice"===(e.data.contextData||e.parent.data.contextData).type},e=r([o.Injectable()],e)}();t.LoraGuard=i},3812:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(157),d=n(130),u=n(132),p=n(160),f=n(184),h=function(){function e(e,t,n,r){var o=this;this.inventory=e,this.identityService=t,this.fetchClient=n,this.modalService=r,this.columns=[{name:"deveui",header:"Dev EUI",path:"id"},{name:"name",header:"Name",path:"name",cellCSSClassName:"data-record-header",filterable:!0},{name:"type",header:"Type",path:"codec"},{name:"model",header:"Model",path:"c8y_Hardware.model"},{name:"lnstype",header:"LNS Type",path:"lnsConnectorId"},{name:"lnsname",header:"LNS Name",path:"lnsConnectorId"}],this.pagination={pageSize:30,currentPage:1},this.actionControls=[{type:"DELETE",callback:function(e){return o.delete(e)}}],this.bulkActionControls=[{type:"DELETE",callback:function(e){return console.dir(e)}}],this.onColumnsChange=new d.EventEmitter,this.onDeviceQueryStringChange=new d.EventEmitter,this.codecsFilter={type:"Device Codec",withTotalPages:!0,pageSize:1e3},this.lnsProxyFilter={type:"LoRa Network Server agent",withTotalPages:!0,pageSize:1e3},this.instanceFilter={type:"LNS Connector",withTotalPages:!0,pageSize:1e3},this.informationText=l._("Ooops! It seems that there is no device to display."),this.serverSideDataCallback=this.onDataSourceModifier.bind(this),this.queriesUtil=new u.QueriesUtil,this.init()}return e.prototype.onDataSourceModifier=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,i,a;return s(this,(function(s){switch(s.label){case 0:return[4,this.loadDevices(e.columns,e.pagination)];case 1:return t=s.sent(),n=t.res,r=t.data,o=t.paging,[4,this.getDevicesCount(e.columns,e.pagination)];case 2:return i=s.sent(),[4,this.getDevicesTotal()];case 3:return a=s.sent(),this.onColumnsChange.emit(e.columns),this.onDeviceQueryStringChange.emit(this.getDeviceQueryString(e.columns)),[2,{res:n,data:r,paging:o,filteredSize:i,size:a}]}}))}))},e.prototype.updateFiltering=function(e,t){t.type===l.FilteringActionType.ResetFilter?this.dataGrid.clearFilters():this.dataGrid.updateFiltering(e,t)},e.prototype.init=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.loadCodecs()];case 1:return e.sent(),[4,this.loadProxies()];case 2:return e.sent(),[4,this.loadInstances()];case 3:return e.sent(),[2]}}))}))},e.prototype.getDeviceQueryString=function(e){return console.dir(this.getQueryObj(e)),this.queriesUtil.buildQuery(this.getQueryObj(e))},e.prototype.getDevicesFilters=function(e,t){var n=this.getDeviceQueryString(e);return console.dir(n),{q:this.getDeviceQueryString(e),pageSize:t.pageSize,currentPage:t.currentPage,withTotalPages:!0}},e.prototype.getQueryObj=function(e){var t=this;return f.transform(e,(function(e,n){return t.extendQueryByColumn(e,n)}),{__filter:{type:"c8y_LoRaDevice"},__orderby:[]})},e.prototype.extendQueryByColumn=function(e,t){if(t.filterable&&t.filterPredicate){var n={};n[t.path]=t.filterPredicate,f.assign(e.__filter,n)}return e},e.prototype.getDevices=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(o){return n=r({},this.getDevicesFilters(e,t),{withParents:!0}),[2,this.inventory.list(n)]}))}))},e.prototype.getDevicesCount=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(o){switch(o.label){case 0:return n=r({},this.getDevicesFilters(e,t),{pageSize:1,currentPage:1}),[4,this.inventory.list(n)];case 1:return[2,o.sent().paging.totalPages]}}))}))},e.prototype.getDevicesTotal=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e={fragmentType:"c8y_IsDevice",type:"c8y_LoRaDevice",pageSize:1,withTotalPages:!0},[4,this.inventory.list(e)];case 1:return[2,t.sent().paging.totalPages]}}))}))},e.prototype.loadDevices=function(e,t){return a(this,void 0,void 0,(function(){var n,r=this;return s(this,(function(o){switch(o.label){case 0:return[4,this.getDevices(e,t)];case 1:return n=o.sent(),this.devices=n.data,this.devEUIs={},n.data.forEach((function(e){return a(r,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return t=this.devEUIs,n=e.id,[4,this.getDevEUI(e)];case 1:return[2,t[n]=r.sent()]}}))}))})),[2,n]}}))}))},e.prototype.loadCodecs=function(){return a(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.inventory.list(this.codecsFilter)];case 1:return e=r.sent(),t=e.data,e.res,e.paging,this.codecs=t,this.codecMap={},t.forEach((function(e){return n.codecMap[e.lora_codec_DeviceCodecRepresentation.id]=e.lora_codec_DeviceCodecRepresentation})),[2]}}))}))},e.prototype.loadProxies=function(){return a(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.inventory.list(this.lnsProxyFilter)];case 1:return e=r.sent(),t=e.data,e.res,e.paging,this.lnsProxies=t,this.proxyMap={},t.forEach((function(e){return n.proxyMap[e.lnsType]=e})),[2]}}))}))},e.prototype.loadInstances=function(){return a(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.inventory.list(this.instanceFilter)];case 1:return e=r.sent(),t=e.data,e.res,e.paging,this.lnsInstances=t,this.instanceMap={},t.forEach((function(e){return n.instanceMap[e.id]=e})),[2]}}))}))},e.prototype.addDevice=function(e,t,n,r,o,i,c){return a(this,void 0,void 0,(function(){var a,l,d,u;return s(this,(function(s){switch(s.label){case 0:return c?(this.provision({name:e,devEUI:t.toLowerCase(),appEUI:n.toLowerCase(),appKey:r.toLowerCase(),codec:o,model:i},c),[3,4]):[3,1];case 1:return a={c8y_IsDevice:{},devEUI:t.toLowerCase(),appEUI:n.toLowerCase(),appKey:r.toLowerCase(),codec:o,type:"c8y_LoRaDevice",c8y_Hardware:{model:i},c8y_LpwanDevice:{provisioned:!1},c8y_SupportedOperations:["c8y_Command"],battery:100},e&&e.length>0&&(a=Object.assign({name:e},a)),[4,this.inventory.create(a)];case 2:return l=s.sent().data,d=l.id,u={type:"LoRa devEUI",externalId:t.toLowerCase(),managedObject:{id:d}},[4,this.identityService.create(u)];case 3:s.sent(),s.label=4;case 4:return this.dataGrid.reload(),[2]}}))}))},e.prototype.delete=function(e){this.deviceToDelete=e,this.deleteDeviceModalRef=this.modalService.show(this.deleteDeviceModal,{backdrop:!0,ignoreBackdropClick:!0})},e.prototype.endDelete=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e?[4,this.deprovision(this.deviceToDelete)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,this.inventory.delete(this.deviceToDelete)];case 3:return t.sent(),this.deleteDeviceModalRef.hide(),this.dataGrid.reload(),[2]}}))}))},e.prototype.getDevEUI=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.identityService.list(e.id)];case 1:return t=r.sent().data.filter((function(e){return"LoRa devEUI"===e.type})),n="-",t.length>0&&(n=t[0].externalId),[2,n]}}))}))},e.prototype.loadModels=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.fetchClient.fetch("service/lora-codec-"+e+"/models")];case 1:if(!(t=r.sent()))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),n=this,[4,t.json()];case 3:return n.models=r.sent(),[3,5];case 4:return r.sent(),this.models=[],[3,5];case 5:return[3,7];case 6:this.models=[],r.label=7;case 7:return[2]}}))}))},e.prototype.changeListener=function(e){var t=this;if(console.log(e),e&&e.length>0){var n=e.item(0),r=new FileReader;r.readAsText(n),r.onload=function(e){t.fileContent=[],r.result.split("\n").forEach((function(e){t.fileContent.push(e.split(";"))}))}}},e.prototype.addDevices=function(){var e=this;this.fileContent.forEach((function(t){console.log("Will add device: "+t),e.addDevice(t[3],t[0],t[1],t[2],t[4],t[5],t.length>6?t[6]:null)}))},e.prototype.provision=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return console.log("Will provision device on LNS instance "+t),n=this.instanceMap[t],[4,this.fetchClient.fetch("service/lora-ns-"+n.lnsType+"/"+t+"/devices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[4,r.sent().json()];case 2:return[2,r.sent().data]}}))}))},e.prototype.deprovision=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(o){switch(o.label){case 0:return n=(t=this.fetchClient).fetch,r="service/lora-ns-"+this.instanceMap[e.lnsConnectorId].lnsType+"/"+e.lnsConnectorId+"/devices/",[4,this.getDevEUI(e)];case 1:return[4,n.apply(t,[r+o.sent(),{method:"DELETE"}])];case 2:return o.sent(),[2]}}))}))},e.ctorParameters=function(){return[{type:u.InventoryService},{type:u.IdentityService},{type:u.FetchClient},{type:p.BsModalService}]},o([d.ViewChild("deleteDeviceModal",{static:!1}),i("design:type",d.TemplateRef)],e.prototype,"deleteDeviceModal",void 0),o([d.Output(),i("design:type",d.EventEmitter)],e.prototype,"onColumnsChange",void 0),o([d.Output(),i("design:type",d.EventEmitter)],e.prototype,"onDeviceQueryStringChange",void 0),o([d.ViewChild(l.DataGridComponent,{static:!0}),i("design:type",l.DataGridComponent)],e.prototype,"dataGrid",void 0),e=o([d.Component({selector:"devices",template:c(n(3813)).default}),i("design:paramtypes",[u.InventoryService,u.IdentityService,u.FetchClient,p.BsModalService])],e)}();t.LoraDevicesComponent=h},3813:function(e,t,n){"use strict";n.r(t),t.default='<c8y-title translate>All devices</c8y-title>\n\n<div class="row">\n    <div class="card col-sm-4">\n        <div class="card-header separator">\n            <h4 class="card-title">{{\'Create a new device\' | translate}}</h4>\n        </div>\n        <div class="card-block">\n            <div class="form-group col-sm-6">\n                <label for="deviceName">Name:</label>\n                <input #deviceName required />\n            </div>\n            <div class="form-group col-sm-6">\n                <label for="devEUI">Dev EUI:</label>\n                <input #devEUI required />\n            </div>\n            <div class="form-group col-sm-6">\n                <label for="appEUI">App EUI:</label>\n                <input #appEUI required />\n            </div>\n            <div class="form-group col-sm-6">\n                <label for="appKey">App Key:</label>\n                <input #appKey required />\n            </div>\n            <div class="col-sm-12">\n                <div class="c8y-select-wrapper">\n                    <label for="model">Type:</label>\n                    <select class="form-control" #type (change)="loadModels(type.value)" required>\n                        <option>Please select a type</option>\n                        <option *ngFor="let codec of codecs" [value]="codec.lora_codec_DeviceCodecRepresentation.id">\n                            {{codec.lora_codec_DeviceCodecRepresentation.name}}</option>\n                    </select>\n                </div>\n            </div>\n            <div class="col-sm-12">\n                <div class="c8y-select-wrapper">\n                    <label for="model">Model:</label>\n                    <select class="form-control" #model>\n                        <option value="-">Please select a model</option>\n                        <option *ngFor="let model of models" [value]="model">{{model}}</option>\n                    </select>\n                </div>\n            </div>\n            <div class="col-sm-12">\n                <label class="c8y-checkbox"><input type="checkbox" #provision /><span></span>Provision device on\n                    LoRa network server</label>\n            </div>\n            <div class="col-sm-12" [hidden]="!provision.checked">\n                <div class="c8y-select-wrapper">\n                    <label for="instanceSelect">LoRa network server connectors:</label>\n                    <select class="form-control" #instanceSelect>\n                        <option value="">Please select a connector</option>\n                        <option *ngFor="let instance of lnsInstances" [value]="instance.id">\n                            {{instance.name}} -\n                            {{proxyMap[instance.lnsType].name}}</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class="card-footer">\n            <div class="form-group">\n                <button type="button"\n                    (click)="addDevice(deviceName.value, devEUI.value, appEUI.value, appKey.value, type.value, model.value, instanceSelect.value)"\n                    class="btn btn-primary">\n                    Add device\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="col-sm-4">\n        <h1 style="text-align: center;vertical-align: middle;">or</h1>\n    </div>\n    <div class="card col-sm-4">\n        <div class="card-header separator">\n            <h4 class="card-title">Upload a CSV file</h4>\n        </div>\n        <div class="card-block">\n            <div class="col-sm-12">\n                <input type="file" (change)="changeListener($event.target.files)">\n            </div>\n            <div *ngIf="fileContent !== undefined && fileContent.length > 0" class="col-sm-12">\n                {{fileContent.length}} devices detected\n            </div>\n        </div>\n        <div class="card-footer" *ngIf="fileContent !== undefined && fileContent.length > 0">\n            <div class="form-group">\n                <button type="button" (click)="addDevices()" class="btn btn-primary">\n                    Add devices\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="split-scroll">\n    <c8y-data-grid\n      [title]="\'Devices\' | translate"\n      class="scroll-column"\n      [noMatchingItemsLabel]="\'No matching devices.\' | translate"\n      [columns]="columns"\n      [pagination]="pagination"\n      [selectable]="true"\n      [actionControls]="actionControls"\n      [bulkActionControls]="bulkActionControls"\n      [serverSideDataCallback]="serverSideDataCallback"\n    >\n      <c8y-column name="deveui">\n        <ng-container *c8yCellRendererDef="let context">\n            <a [routerLink]="[\'/device\', context.value]">{{devEUIs[context.value]}}</a>\n        </ng-container>\n      </c8y-column>\n      <c8y-column name="type">\n        <ng-container *c8yCellRendererDef="let context">\n            {{codecMap[context.value] && codecMap[context.value].name}}\n        </ng-container>\n      </c8y-column>\n      <c8y-column name="lnstype">\n        <ng-container *c8yCellRendererDef="let context">\n            {{instanceMap[context.value] && proxyMap[instanceMap[context.value].lnsType] && proxyMap[instanceMap[context.value].lnsType].name}}\n        </ng-container>\n      </c8y-column>\n      <c8y-column name="lnsname">\n        <ng-container *c8yCellRendererDef="let context">\n            {{instanceMap[context.value] && instanceMap[context.value].name}}\n        </ng-container>\n      </c8y-column>\n    </c8y-data-grid>\n  </div>\n\x3c!--  \n<div *ngIf="devices === undefined || devices.length === 0">\n    {{informationText | translate}}\n</div>\n\n<table class="table table-striped" *ngIf="devices !== undefined && devices.length > 0">\n    <tr>\n        <th translate>Dev EUI</th>\n        <th translate>Name</th>\n        <th translate>Type</th>\n        <th translate>Model</th>\n        <th translate>LNS type</th>\n        <th translate>LNS name</th>\n        <th></th>\n    </tr>\n    <tr *ngFor="let device of devices">\n        <td>\n            <a [routerLink]="[\'/device\', device.id]">{{devEUIs[device.id]}}</a>\n        </td>\n        <td *ngIf="device.name !== undefined">{{device.name}}</td>\n        <td *ngIf="device.name === undefined"> - </td>\n        <td *ngIf="device.codec !== undefined">{{codecMap[device.codec].name}}</td>\n        <td *ngIf="device.codec === undefined"> - </td>\n        <td *ngIf="device.c8y_Hardware !== undefined">{{device.c8y_Hardware.model}}</td>\n        <td *ngIf="device.c8y_Hardware === undefined"> - </td>\n        <td *ngIf="device.lnsConnectorId !== undefined">\n            {{proxyMap[instanceMap[device.lnsConnectorId].lnsType].name}}</td>\n        <td *ngIf="device.lnsConnectorId === undefined"> - </td>\n        <td *ngIf="device.lnsConnectorId !== undefined">{{instanceMap[device.lnsConnectorId].name}}\n        </td>\n        <td *ngIf="device.lnsConnectorId === undefined"> - </td>\n        <td ng-class="{&quot;text-center&quot;:true}" class="ng-scope text-center">\n            <div style="max-width:240px;" class="text-truncate">\n                <button class="btn-dot showOnHover" uib-tooltip="Delete device" tooltip-append-to-body="true"\n                    tooltip-placement="left" (click)="delete(device)">\n                    <i c8y-icon="minus-circle" class="text-danger fa fw fa-minus-circle"></i>\n                </button>\n            </div>\n        </td>\n    </tr>\n</table>\n--\x3e\n\n<ng-template #deleteDeviceModal>\n    <div class="modal-header">\n        <h4 id="dialog-name" class="modal-title pull-left">Confirm device\n            deletion\n        </h4>\n    </div>\n    <div class="modal-body">\n        Device will be removed from inventory<br>\n        <div class="form-group">\n            <label class="c8y-checkbox"><input type="checkbox" #deprovision /><span></span>Deprovision device from\n                LoRa network server</label>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" (click)="endDelete(deprovision.checked)" translate=""\n            ng-reflect-translate="">Confirm</button>\n        <button class="btn btn-primary" (click)="deleteDeviceModalRef.hide()" translate=""\n            ng-reflect-translate="">Cancel</button>\n    </div>\n</ng-template>'},3814:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(130),l=n(132),d=function(){function e(e,t){this.inventory=e,this.fetchClient=t,this.codecsFilter={type:"CustomCodec",withTotalPages:!0,pageSize:1e3},this.codecs=new Map,this.editorOptions={theme:"vs-dark",language:"javascript",onMonacoLoad:function(){console.log("In monaco onload")}},this.code='function x() {\nconsole.log("Hello world!");\n}',this.codeStart="function decode(mo: IManagedObject, fport: number, time: Date, payload: string) {\n    /*multiLineEditableArea#actualCode=",this.codeEnd="\n*/\n}",this.uplink="active",this.downlink="",this.loadCodecs()}return e.prototype.loadCodecs=function(){return i(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){switch(t.label){case 0:return[4,this.inventory.list(this.codecsFilter)];case 1:return t.sent().data.forEach((function(t){e.codecs.set(t.id,t)})),this.codecs.size>0&&this.changeCodec(this.codecs.values().next().value.id),[2]}}))}))},e.prototype.changeCodec=function(e){console.log(e),this.currentCodec=e,this.code=this.codecs.get(this.currentCodec).decodeString},e.prototype.removeCodec=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return console.log("Will delete codec "+this.codecs.get(this.currentCodec).name),[4,this.fetchClient.fetch("service/lora-codec-custom/model/"+this.codecs.get(this.currentCodec).name,{method:"DELETE"})];case 1:return e.sent(),this.codecs.delete(this.currentCodec),this.codecs.size>0&&this.changeCodec(this.codecs.values().next().value.id),[2]}}))}))},e.prototype.onUploadEditorLoad=function(e){console.log("In onUploadEditorLoad"),console.log(e)},e.prototype.goToUplink=function(){this.uplink="active",this.downlink=""},e.prototype.goToDownlink=function(){this.uplink="",this.downlink="active"},e.prototype.createCodec=function(e){return i(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:console.log("Will create new codec "+e),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this.fetchClient.fetch("service/lora-codec-custom/model",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e})})];case 2:return[4,r.sent().json()];case 3:return t=r.sent(),this.codecs.set(t.id,t),this.changeCodec(t.id),[3,5];case 4:return n=r.sent(),console.error(n),[3,5];case 5:return[2]}}))}))},e.prototype.saveDecoder=function(){this.codecs.get(this.currentCodec).decodeString=this.code,this.fetchClient.fetch("service/lora-codec-custom/model/decoder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this.currentCodec,decodeString:this.code})})},e.ctorParameters=function(){return[{type:l.InventoryService},{type:l.FetchClient}]},e=r([c.Component({selector:"codecs",template:s(n(3815)).default}),o("design:paramtypes",[l.InventoryService,l.FetchClient])],e)}();t.LoraCodecsComponent=d},3815:function(e,t,n){"use strict";n.r(t),t.default='<c8y-title translate>Custom Codecs</c8y-title>\n<div class="row">\n    <div class="col-sm-3"></div>\n    <div class="tabContainer hidden-xs col-sm-9">\n        <ul class="nav nav-tabs nav-tabsc8y">\n            <li [class]="uplink">\n                <a routerlinkactive="" title="Uplink" (click)="goToUplink()"><i class="fa fw fa-upload"></i><span class="txt">Uplink</span></a>\n            </li>\n            <li [class]="downlink">\n                <a routerlinkactive="" title="Downlink" (click)="goToDownlink()"><i class="fa fw fa-download"></i><span\n                        class="txt">Downlink</span></a>\n            </li>\n        </ul>\n    </div>\n</div>\n<div class="row">\n    <div class="card col-sm-3">\n        <div class="card-block">\n            <div class="form-group col-sm-12">\n                <div class="c8y-select-wrapper">\n                <label for="codec">Select Codec:</label>\n                <select #codec class="form-control" (change)="changeCodec(codec.value)" [(ngModel)]="currentCodec">\n                    <option *ngFor="let c of codecs | keyvalue" [value]="c.key">{{c.value.name}}</option>\n                </select>\n            </div>\n            </div>\n            <div class="form-group col-sm-12">\n                <button type="button" class="btn btn-danger" (click)="removeCodec()">Remove current codec</button>\n            </div>\n            <div class="form-group col-sm-12">\n                <label for="newCodec">New codec name:</label>\n                <input #newCodec required placeholder="codec name"/>\n            </div>\n            <div class="form-group col-sm-12">\n                <button type="button" class="btn btn-primary" (click)="createCodec(newCodec.value)">Add new codec</button>\n            </div>\n        </div>\n    </div>\n    <div class="card col-sm-9" *ngIf="uplink === \'active\'">\n        <div class="card-header" style="height: 60px">\n            <h3>Decoding function</h3>\n        </div>\n        <div class="card-header separator" style="height: 40px;font-family: Consolas, \'Courier New\', monospace; color: rgb(212, 212, 212); background-color: black;">\n            decode(device: IManagedObject, fport: number, time: Date, payload: string): C8YData\n        </div>\n        <div class="card-block" style="overflow: visible">\n            <div class="card" style="height: 400px">\n                <ngx-monaco-editor style="height: 100%" [options]="editorOptions" [(ngModel)]="code">\n                </ngx-monaco-editor>\n            </div>\n        </div>\n        <div class="card-footer">\n            <div class="form-group col-sm-12">\n                <button type="button" class="btn btn-primary" (click)="saveDecoder()">Save codec</button>\n            </div>\n        </div>\n    </div>\n    <div class="card col-sm-9" *ngIf="downlink === \'active\'">\n        <div class="card-header separator" style="height: 100px">\n            WIP\n        </div>\n        <div class="card-block" style="overflow: visible">\n            <div class="card" style="height: 400px">\n                <ngx-monaco-editor style="height: 100%" [options]="editorOptions" [(ngModel)]="code">\n                </ngx-monaco-editor>\n            </div>\n        </div>\n        <div class="card-footer">\n            <div class="form-group col-sm-12">\n                <button type="button" class="btn btn-primary">Save codec</button>\n            </div>\n        </div>\n    </div>\n</div>'},3816:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(157),d=n(130),u=n(132),p=n(160),f=function(){function e(e,t,n,r){this.inventory=e,this.identity=t,this.fetchClient=n,this.modalService=r,this.currentStep=0,this.stepValues=[],this.instanceProperties={value:{}},this.allProperties={},this.lnsProxyFilter={type:"LoRa Network Server agent",withTotalPages:!0,pageSize:100},this.instanceFilter={type:"LNS Connector",withTotalPages:!0,pageSize:100},this.informationText=l._("Ooops! It seems that there is no network server to display."),this.loadProxies(),this.loadInstances()}return e.prototype.loadProxies=function(){return a(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){switch(r.label){case 0:return[4,this.inventory.list(this.lnsProxyFilter)];case 1:return e=r.sent(),t=e.data,e.res,e.paging,this.lnsProxies=t,this.proxyMap={},t.forEach((function(e){n.proxyMap[e.lnsType]=e})),[2]}}))}))},e.prototype.loadInstances=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,this.inventory.list(this.instanceFilter)];case 1:return e=n.sent(),t=e.data,e.res,e.paging,this.lnsInstances=t,[2]}}))}))},e.prototype.addInstance=function(e,t,n){return a(this,void 0,void 0,(function(){var o;return s(this,(function(i){switch(i.label){case 0:return this.allProperties=r({},this.allProperties,n),this.stepValues[this.currentStep]=n,o={properties:this.allProperties,name:t},[4,this.fetchClient.fetch("service/lora-ns-"+e+"/lnsinstances",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})];case 1:return i.sent(),this.loadInstances(),[2]}}))}))},e.prototype.deleteDevice=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e&&e.length>0?[4,this.inventory.delete(e)]:[3,2];case 1:t.sent(),this.loadProxies(),t.label=2;case 2:return[2]}}))}))},e.prototype.getDevEUI=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.identity.list(e.id)];case 1:return t=r.sent().data.filter((function(e){return"LoRa devEUI"===e.type})),n="-",t.length>0&&(n=t[0].externalId),console.log(n),[2,n]}}))}))},e.prototype.loadProperties=function(e){return a(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){return this.properties=this.wizard[this.currentStep].propertyDescriptions,console.log(this.allProperties),this.properties.forEach((function(n){return a(t,void 0,void 0,(function(){var t,r;return s(this,(function(o){switch(o.label){case 0:return"LIST"!==n.type?[3,3]:[4,this.fetchClient.fetch("service/lora-ns-"+e+n.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.allProperties)})];case 1:return t=o.sent(),r=n,[4,t.json()];case 2:r.values=o.sent(),o.label=3;case 3:return[2]}}))}))})),[2]}))}))},e.prototype.previousStep=function(e,t){this.currentStep>0&&(this.currentStep--,this.instanceProperties.value=this.stepValues[this.currentStep],this.loadProperties(e))},e.prototype.nextStep=function(e,t){this.allProperties=r({},this.allProperties,t),this.stepValues[this.currentStep]=t,this.currentStep<this.wizard.length&&(this.currentStep++,this.loadProperties(e))},e.prototype.loadWizard=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return this.currentStep=0,""===e?[3,3]:[4,this.fetchClient.fetch("service/lora-ns-"+e+"/wizard")];case 1:return t=r.sent(),n=this,[4,t.json()];case 2:return n.wizard=r.sent(),this.loadProperties(e),[3,4];case 3:this.properties=[],r.label=4;case 4:return[2]}}))}))},e.prototype.delete=function(e){this.lnsToDelete=e,this.deleteLNSModalRef=this.modalService.show(this.deleteLNSModal,{backdrop:!0,ignoreBackdropClick:!0})},e.prototype.endDelete=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.inventory.delete(this.lnsToDelete)];case 1:return e.sent(),this.deleteLNSModalRef.hide(),this.loadProxies(),this.loadInstances(),[2]}}))}))},e.ctorParameters=function(){return[{type:u.InventoryService},{type:u.IdentityService},{type:u.FetchClient},{type:p.BsModalService}]},o([d.ViewChild("deleteLNSModal",{static:!1}),i("design:type",d.TemplateRef)],e.prototype,"deleteLNSModal",void 0),e=o([d.Component({selector:"lns",template:c(n(3817)).default}),i("design:paramtypes",[u.InventoryService,u.IdentityService,u.FetchClient,p.BsModalService])],e)}();t.LNSComponent=f},3817:function(e,t,n){"use strict";n.r(t),t.default='<c8y-title translate>All LoRa network servers</c8y-title>\n\n<div class="row">\n    <div class="card col-sm-6">\n        <div class="card-header separator">\n            <h4 class="card-title">{{\'Add a new LoRa network server connector\' | translate}}</h4>\n        </div>\n        <div class="card-block">\n            <div class="col-sm-12">\n                <div class="form-group">\n                    <label for="instanceName">Name:</label>\n                    <input #instanceName required />\n                </div>\n            </div>\n            <div class="col-sm-12">\n                <div class="c8y-select-wrapper">\n                    <label for="model">LoRa network server:</label>\n                    <select class="form-control" #model (change)="loadWizard(model.value)">\n                        <option value="">Please select a provider</option>\n                        <option *ngFor="let proxy of lnsProxies" [value]="proxy.lnsType">\n                            {{proxy.name}}</option>\n                    </select>\n                </div>\n            </div>\n            <form #instanceProperties="ngForm">\n                <div *ngIf="properties !== undefined">\n                    <div *ngFor="let property of properties" class="col-sm-6">\n                        <div class="form-group" *ngIf="property.type === \'STRING\' || property.type === \'TEXT\'">\n                            <label for="{{property.name}}">{{property.label}}:</label>\n                            <input [ngModel]="allProperties[property.name]" name="{{property.name}}"\n                                #{{property.name}}="ngModel" ngModel required />\n                        </div>\n                        <div class="form-group" *ngIf="property.type === \'PASSWORD\'">\n                            <label for="{{property.name}}">{{property.label}}:</label>\n                            <input type="password" [ngModel]="allProperties[property.name]" name="{{property.name}}"\n                                #{{property.name}}="ngModel" ngModel required />\n                        </div>\n                        <div class="form-group" *ngIf="property.type === \'NUMBER\'">\n                            <label for="{{property.name}}">{{property.label}}:</label>\n                            <input type="number" step="0.1" [ngModel]="allProperties[property.name]"\n                                name="{{property.name}}" #{{property.name}}="ngModel" ngModel required />\n                        </div>\n                        <div class="form-group" *ngIf="property.type === \'INTEGER\'">\n                            <label for="{{property.name}}">{{property.label}}:</label>\n                            <input type="number" [ngModel]="allProperties[property.name]" name="{{property.name}}"\n                                #{{property.name}}="ngModel" ngModel required />\n                        </div>\n                        <div class="form-group" *ngIf="property.type === \'BOOLEAN\'">\n                            <label class="c8y-checkbox"><input type="checkbox" [ngModel]="allProperties[property.name]"\n                                    name="{{property.name}}" #{{property.name}}="ngModel" ngModel\n                                    required /><span></span>Provision device on\n                                LoRa network server</label>\n                        </div>\n                        <div class="form-group" *ngIf="property.type === \'LIST\'">\n                            <label for="{{property.name}}">{{property.label}}:</label>\n                            <select [ngModel]="allProperties[property.name]" class="form-control"\n                                name="{{property.name}}" #{{property.name}}="ngModel" ngModel required>\n                                <option value="">Please select {{property.name}}</option>\n                                <option *ngFor="let v of property.values" [value]="v.id">{{v.name}}</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div class="card-footer">\n            <div class="form-group" *ngIf="wizard !== undefined">\n                <button *ngIf="currentStep < wizard.length-1" type="button"\n                    (click)="nextStep(model.value, instanceProperties.value)" class="btn btn-primary">\n                    Next step\n                </button>\n                <button *ngIf="currentStep > 0" type="button"\n                    (click)="previousStep(model.value, instanceProperties.value)" class="btn btn-primary">\n                    Previous step\n                </button>\n                <button *ngIf="wizard.length === currentStep + 1" type="button"\n                    (click)="addInstance(model.value, instanceName.value, instanceProperties.value)"\n                    class="btn btn-primary">\n                    Add instance\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div *ngIf="lnsInstances === undefined || lnsInstances.length === 0">\n    {{informationText | translate}}\n</div>\n\n<table class="table" *ngIf="lnsInstances !== undefined && lnsInstances.length > 0">\n    <tr>\n        <th translate>Name</th>\n        <th translate>Type</th>\n        <th></th>\n    </tr>\n    <tr *ngFor="let instance of lnsInstances">\n        <td>{{instance.name}}</td>\n        <td>{{proxyMap[instance.lnsType].name}}</td>\n        <td ng-class="{&quot;text-center&quot;:true}" class="ng-scope text-center">\n            <div style="max-width:240px;" class="text-truncate">\n                <button class="btn-dot showOnHover" uib-tooltip="Delete LNS connector" tooltip-append-to-body="true"\n                    tooltip-placement="left" (click)="delete(instance)">\n                    <i c8y-icon="minus-circle" class="text-danger fa fw fa-minus-circle"></i>\n                </button>\n            </div>\n        </td>\n    </tr>\n</table>\n\n\n<ng-template #deleteLNSModal>\n    <div class="modal-header">\n        <h4 id="dialog-name" class="modal-title pull-left">Confirm LNS connector\n            deletion\n        </h4>\n    </div>\n    <div class="modal-body">\n        LNS connector will be removed\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" (click)="endDelete()" translate=""\n            ng-reflect-translate="">Confirm</button>\n        <button class="btn btn-primary" (click)="deleteLNSModalRef.hide()" translate=""\n            ng-reflect-translate="">Cancel</button>\n    </div>\n</ng-template>'},3837:function(e,t,n){"use strict";this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),n(858),n(1012);var r=n(130),o=n(3124),i=n(3126);r.enableProdMode(),t.bootstrap=function(){o.platformBrowserDynamic().bootstrapModule(i.AppModule).catch((function(e){return console.log(e)}))}},723:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=723},858:function(e,t,n){"use strict";this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),n(859),n(874),n(995),window.__Zone_disable_requestAnimationFrame=!0,window.__zone_symbol__BLACK_LISTED_EVENTS=["scroll","mousemove","message","mouseover","mouseout","mouseenter","mouseleave"],n(1006),n(1007),n(1008).addPolyfills()}}]);