"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){_defineProperty(t,e,r[e])})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){e.$inject=["c8yDeviceTypeProtocolBaseProvider","gettext"];var r="c8yOPCUADevice";function e(e,i){t.$inject=["c8yDeviceDatabase","c8yDeviceControl","gettextCatalog","c8yDevices","c8yBase","c8yUser"];var c={label:i("OPC UA legacy"),fieldbusType:"opcua",serviceName:r};return e.getDeviceTypeProtocolProvider(c,t);function t(e,s,t,u,l,n){var r=_objectSpread({},c,{options:!1,discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{sectionTitle:i("Variables"),noRegistersDefinedMessage:i("No variables defined."),elementTypeLabel:i("Variable"),newRegisterModalTitle:i("New variable"),editRegisterModalTitle:i('Edit variable: "{{name}}"'),addRegisterButtonLabel:i("Add variable"),validation:{invalidName:i("Name must be unique among variables."),invalidMeasurement:i("Selected measurement type and series are already used by another variable.")},browsePath:!0,nodeType:!0,attributeType:!0,multiplier:{min:1,step:1},divisor:!0,decimalPlaces:!0,unit:!0,options:{signed:!0,enumType:!0},functionalities:{showStatus:!0,updateStatus:!0,sendMeasurement:!0,raiseAlarm:!0,sendEvent:!0}},inputRegisters:!1,deviceFragments:["c8y_OPCUADevice","c8y_OPCUAGateway"],deviceConfiguration:{fragment:"c8y_OPCUAGateway",icon:"cogs"}});return{registerFeaturesManifest:function(){e.registerFeaturesManifest(a().then(function(e){return e&&r}))},isAvailable:a,create:function(a,i){var c,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d(a,i));case 2:return c=e.sent,e.t0=l,e.next=6,regeneratorRuntime.awrap(u.createConfirm(c));case 6:return e.t1=e.sent,o=e.t0.getResData.call(e.t0,e.t1),e.next=10,regeneratorRuntime.awrap(u.addChildDevice(a,o));case 10:return o.owner=a.owner,e.next=13,regeneratorRuntime.awrap(u.save(o));case 13:return e.abrupt("return",s.create((t=a,r=i.deviceType,n=o,{deviceId:t.id,description:'Added new child device to "'.concat(t.name,'" (ID: ').concat(t.id,")."),c8y_OPCUADevice:{id:n.id,name:n.name,browsePath:n.c8y_OPCUADevice.browsePath,type:"/inventory/managedObjects/".concat(r.id)}})));case 14:case"end":return e.stop()}var t,r,n},null,null,null,Promise)},isOpcua:function(e){return!!(e||{}).c8y_OPCUADevice}};function a(){return e.isFeatureFieldbus4Available()}function d(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(n.current());case 2:return r=e.sent,e.abrupt("return",{name:t.name,type:t.deviceType.name,c8y_OPCUADevice:{browsePath:t.directoryPath,type:"/inventory/managedObjects/".concat(t.deviceType.id)},owner:r.id});case 4:case"end":return e.stop()}},null,null,null,Promise)}}}angular.module("c8y.opcua").provider(r,e)}();