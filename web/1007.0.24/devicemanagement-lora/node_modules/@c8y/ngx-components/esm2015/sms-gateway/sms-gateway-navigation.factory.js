var SmsGatewayNavigationFactory_1;
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { gettext, NavigatorNode } from '@c8y/ngx-components';
import { ApplicationService } from '@c8y/client';
let SmsGatewayNavigationFactory = SmsGatewayNavigationFactory_1 = class SmsGatewayNavigationFactory {
    constructor(applicationService) {
        this.applicationService = applicationService;
    }
    get() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (!this.nodeItem) {
                const showSMSProvider = (yield this.applicationService.isAvailable(SmsGatewayNavigationFactory_1.applicationName)).data;
                if (showSMSProvider) {
                    this.nodeItem = new NavigatorNode({
                        label: gettext('SMS provider'),
                        path: 'smsgateway',
                        icon: 'envelope-o',
                        parent: gettext('Settings'),
                        priority: 1000
                    });
                }
            }
            return this.nodeItem;
        });
    }
};
SmsGatewayNavigationFactory.applicationName = 'sms-gateway';
SmsGatewayNavigationFactory.ctorParameters = () => [
    { type: ApplicationService }
];
SmsGatewayNavigationFactory = SmsGatewayNavigationFactory_1 = tslib_1.__decorate([
    Injectable()
], SmsGatewayNavigationFactory);
export { SmsGatewayNavigationFactory };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21zLWdhdGV3YXktbmF2aWdhdGlvbi5mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy9zbXMtZ2F0ZXdheS8iLCJzb3VyY2VzIjpbInNtcy1nYXRld2F5LW5hdmlnYXRpb24uZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQXdCLE1BQU0scUJBQXFCLENBQUM7QUFDbkYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sYUFBYSxDQUFDO0FBR2pELElBQWEsMkJBQTJCLG1DQUF4QyxNQUFhLDJCQUEyQjtJQUl0QyxZQUFvQixrQkFBc0M7UUFBdEMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFvQjtJQUFHLENBQUM7SUFDeEQsR0FBRzs7WUFDUCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDbEIsTUFBTSxlQUFlLEdBQVksQ0FBQyxNQUFNLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQ3pFLDZCQUEyQixDQUFDLGVBQWUsQ0FDNUMsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFFUixJQUFJLGVBQWUsRUFBRTtvQkFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGFBQWEsQ0FBQzt3QkFDaEMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxjQUFjLENBQUM7d0JBQzlCLElBQUksRUFBRSxZQUFZO3dCQUNsQixJQUFJLEVBQUUsWUFBWTt3QkFDbEIsTUFBTSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUM7d0JBQzNCLFFBQVEsRUFBRSxJQUFJO3FCQUNmLENBQUMsQ0FBQztpQkFDSjthQUNGO1lBQ0QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3ZCLENBQUM7S0FBQTtDQUNGLENBQUE7QUF0QnlCLDJDQUFlLEdBQUcsYUFBYSxDQUFDOztZQUdoQixrQkFBa0I7O0FBSi9DLDJCQUEyQjtJQUR2QyxVQUFVLEVBQUU7R0FDQSwyQkFBMkIsQ0F1QnZDO1NBdkJZLDJCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGdldHRleHQsIE5hdmlnYXRvck5vZGUsIE5hdmlnYXRvck5vZGVGYWN0b3J5IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBBcHBsaWNhdGlvblNlcnZpY2UgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBTbXNHYXRld2F5TmF2aWdhdGlvbkZhY3RvcnkgaW1wbGVtZW50cyBOYXZpZ2F0b3JOb2RlRmFjdG9yeSB7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IGFwcGxpY2F0aW9uTmFtZSA9ICdzbXMtZ2F0ZXdheSc7XG4gIHByaXZhdGUgbm9kZUl0ZW06IE5hdmlnYXRvck5vZGU7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHBsaWNhdGlvblNlcnZpY2U6IEFwcGxpY2F0aW9uU2VydmljZSkge31cbiAgYXN5bmMgZ2V0KCkge1xuICAgIGlmICghdGhpcy5ub2RlSXRlbSkge1xuICAgICAgY29uc3Qgc2hvd1NNU1Byb3ZpZGVyOiBib29sZWFuID0gKGF3YWl0IHRoaXMuYXBwbGljYXRpb25TZXJ2aWNlLmlzQXZhaWxhYmxlKFxuICAgICAgICBTbXNHYXRld2F5TmF2aWdhdGlvbkZhY3RvcnkuYXBwbGljYXRpb25OYW1lXG4gICAgICApKS5kYXRhO1xuXG4gICAgICBpZiAoc2hvd1NNU1Byb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMubm9kZUl0ZW0gPSBuZXcgTmF2aWdhdG9yTm9kZSh7XG4gICAgICAgICAgbGFiZWw6IGdldHRleHQoJ1NNUyBwcm92aWRlcicpLFxuICAgICAgICAgIHBhdGg6ICdzbXNnYXRld2F5JyxcbiAgICAgICAgICBpY29uOiAnZW52ZWxvcGUtbycsXG4gICAgICAgICAgcGFyZW50OiBnZXR0ZXh0KCdTZXR0aW5ncycpLFxuICAgICAgICAgIHByaW9yaXR5OiAxMDAwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5ub2RlSXRlbTtcbiAgfVxufVxuIl19