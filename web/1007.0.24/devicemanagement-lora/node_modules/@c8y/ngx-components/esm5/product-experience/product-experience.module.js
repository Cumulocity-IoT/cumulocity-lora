import * as tslib_1 from "tslib";
import { NgModule } from '@angular/core';
import { CoreModule, AppStateService } from '@c8y/ngx-components';
import { filter } from 'rxjs/operators';
import { GainsightService } from './gainsight.service';
/**
 * This module enables an tenant to activate the product experience
 * software [Gainsight](https://www.gainsight.com/product-experience/) to help
 * and track user actions. Gainsight is only activated, if the tenant custom
 * property `gainsightEnabled` is set to true.
 */
var ProductExperienceModule = /** @class */ (function () {
    function ProductExperienceModule(appState, gainsightService) {
        appState.currentTenant
            .pipe(filter(Boolean))
            .subscribe(function (_a) {
            var customProperties = _a.customProperties, name = _a.name;
            if (customProperties && customProperties.gainsightEnabled) {
                gainsightService.loadTag(name);
            }
        });
    }
    ProductExperienceModule.ctorParameters = function () { return [
        { type: AppStateService },
        { type: GainsightService }
    ]; };
    ProductExperienceModule = tslib_1.__decorate([
        NgModule({
            declarations: [],
            imports: [CoreModule],
            exports: [],
            providers: [GainsightService]
        })
    ], ProductExperienceModule);
    return ProductExperienceModule;
}());
export { ProductExperienceModule };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC1leHBlcmllbmNlLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvcHJvZHVjdC1leHBlcmllbmNlLyIsInNvdXJjZXMiOlsicHJvZHVjdC1leHBlcmllbmNlLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6QyxPQUFPLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUV4QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV2RDs7Ozs7R0FLRztBQU9IO0lBQ0UsaUNBQVksUUFBeUIsRUFBRSxnQkFBa0M7UUFDdkUsUUFBUSxDQUFDLGFBQWE7YUFDbkIsSUFBSSxDQUFDLE1BQU0sQ0FBaUIsT0FBTyxDQUFDLENBQUM7YUFDckMsU0FBUyxDQUFDLFVBQUMsRUFBMEI7Z0JBQXhCLHNDQUFnQixFQUFFLGNBQUk7WUFDbEMsSUFBSSxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDekQsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2hDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDOztnQkFScUIsZUFBZTtnQkFBb0IsZ0JBQWdCOztJQUQ5RCx1QkFBdUI7UUFObkMsUUFBUSxDQUFDO1lBQ1IsWUFBWSxFQUFFLEVBQUU7WUFDaEIsT0FBTyxFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ3JCLE9BQU8sRUFBRSxFQUFFO1lBQ1gsU0FBUyxFQUFFLENBQUMsZ0JBQWdCLENBQUM7U0FDOUIsQ0FBQztPQUNXLHVCQUF1QixDQVVuQztJQUFELDhCQUFDO0NBQUEsQUFWRCxJQVVDO1NBVlksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvcmVNb2R1bGUsIEFwcFN0YXRlU2VydmljZSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgSUN1cnJlbnRUZW5hbnQgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBHYWluc2lnaHRTZXJ2aWNlIH0gZnJvbSAnLi9nYWluc2lnaHQuc2VydmljZSc7XG5cbi8qKlxuICogVGhpcyBtb2R1bGUgZW5hYmxlcyBhbiB0ZW5hbnQgdG8gYWN0aXZhdGUgdGhlIHByb2R1Y3QgZXhwZXJpZW5jZVxuICogc29mdHdhcmUgW0dhaW5zaWdodF0oaHR0cHM6Ly93d3cuZ2FpbnNpZ2h0LmNvbS9wcm9kdWN0LWV4cGVyaWVuY2UvKSB0byBoZWxwXG4gKiBhbmQgdHJhY2sgdXNlciBhY3Rpb25zLiBHYWluc2lnaHQgaXMgb25seSBhY3RpdmF0ZWQsIGlmIHRoZSB0ZW5hbnQgY3VzdG9tXG4gKiBwcm9wZXJ0eSBgZ2FpbnNpZ2h0RW5hYmxlZGAgaXMgc2V0IHRvIHRydWUuXG4gKi9cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW10sXG4gIGltcG9ydHM6IFtDb3JlTW9kdWxlXSxcbiAgZXhwb3J0czogW10sXG4gIHByb3ZpZGVyczogW0dhaW5zaWdodFNlcnZpY2VdXG59KVxuZXhwb3J0IGNsYXNzIFByb2R1Y3RFeHBlcmllbmNlTW9kdWxlIHtcbiAgY29uc3RydWN0b3IoYXBwU3RhdGU6IEFwcFN0YXRlU2VydmljZSwgZ2FpbnNpZ2h0U2VydmljZTogR2FpbnNpZ2h0U2VydmljZSkge1xuICAgIGFwcFN0YXRlLmN1cnJlbnRUZW5hbnRcbiAgICAgIC5waXBlKGZpbHRlcjxJQ3VycmVudFRlbmFudD4oQm9vbGVhbikpXG4gICAgICAuc3Vic2NyaWJlKCh7IGN1c3RvbVByb3BlcnRpZXMsIG5hbWUgfSkgPT4ge1xuICAgICAgICBpZiAoY3VzdG9tUHJvcGVydGllcyAmJiBjdXN0b21Qcm9wZXJ0aWVzLmdhaW5zaWdodEVuYWJsZWQpIHtcbiAgICAgICAgICBnYWluc2lnaHRTZXJ2aWNlLmxvYWRUYWcobmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG4iXX0=