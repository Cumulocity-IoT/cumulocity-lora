!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@c8y/ngx-components"),require("ngx-bootstrap/dropdown"),require("ngx-bootstrap/popover"),require("ngx-bootstrap/tooltip"),require("ngx-bootstrap/buttons"),require("@angular/forms"),require("@angular/common"),require("@c8y/client"),require("ngx-bootstrap/modal"),require("lodash-es"),require("rxjs"),require("rxjs/operators"),require("@c8y/ngx-components/repository"),require("@ngx-translate/core"),require("ngx-bootstrap")):"function"==typeof define&&define.amd?define("@c8y/ngx-components/device-profile",["exports","@angular/core","@angular/router","@c8y/ngx-components","ngx-bootstrap/dropdown","ngx-bootstrap/popover","ngx-bootstrap/tooltip","ngx-bootstrap/buttons","@angular/forms","@angular/common","@c8y/client","ngx-bootstrap/modal","lodash-es","rxjs","rxjs/operators","@c8y/ngx-components/repository","@ngx-translate/core","ngx-bootstrap"],t):t(((e=e||self).c8y=e.c8y||{},e.c8y["ngx-components"]=e.c8y["ngx-components"]||{},e.c8y["ngx-components"]["device-profile"]={}),e.ng.core,e.ng.router,e.c8y["ngx-components"],e.dropdown,e.popover,e.tooltip,e.buttons,e.ng.forms,e.ng.common,e.client,e.modal,e.lodashEs,e.rxjs,e.rxjs.operators,e.c8y["ngx-components"].repository,e.core$1,e.ngxBootstrap)}(this,(function(e,t,i,n,r,o,c,s,a,l,d,p,f,v,u,y,m,h){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function g(e,t,i,n){var r,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(o<3?r(c):o>3?r(t,i,c):r(t,i))||c);return o>3&&c&&Object.defineProperty(t,i,c),c}function b(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{a(n.next(e))}catch(e){o(e)}}function s(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,s)}a((n=n.apply(e,t||[])).next())}))}function P(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var w,x=function(){function e(e){var i=this;this.repositoryService=e,this.title=n.gettext("Select configuration"),this.load=new v.Subject,this.configurations=this.load.pipe(u.switchMap((function(){return i.getItems()})),u.map((function(e){var t=e.data;return i.aggregate(t)}))),this.resultEmitter=new t.EventEmitter,this.deviceTypeQuery={},this.searchQuery={},this.labels={ok:n.gettext("Save")},this.queriesUtil=new d.QueriesUtil}return e.prototype.search=function(e){this.searchQuery=e?this.queriesUtil.addOrFilter({name:"*"+e+"*"},{configurationType:"*"+e+"*"}):{},this.load.next()},e.prototype.result=function(e){this.resultEmitter.emit(e)},e.prototype.getItems=function(){return this.repositoryService.listRepositoryEntries(y.RepositoryType.CONFIGURATION,{query:this.queriesUtil.addOrFilter(this.deviceTypeQuery,this.searchQuery),params:{pageSize:100}})},e.prototype.aggregate=function(e){var t=this.selected;return e.reduce((function(e,i){i.configurationType=i.configurationType||i.name;var n=t&&t.filter((function(e){return e.url===i.url})).length>0,r={body:[{value:i.name}],obj:i,selected:n},o=e.find((function(e){return e.body[0].value===i.configurationType}));return o?o.options.push(r):(o={groupId:i.id,body:[{value:i.configurationType}],options:[r]},e.push(o)),e}),[])},e.ctorParameters=function(){return[{type:y.RepositoryService}]},e=g([t.Component({selector:"c8y-select-configuration-modal",template:'<c8y-select-modal\n  [icon]="\'gears\'"\n  [title]="title"\n  [items]="configurations | async"\n  [mode]="\'multi\'"\n  (result)="result($event)"\n  (search)="search($event)"\n  [disableSelected]="true"\n  [labels]="labels"\n>\n</c8y-select-modal>\n'})],e)}(),_=function(){function e(e,t,i,r,o,c,s){this.route=e,this.alertService=t,this.inventoryService=i,this.location=r,this.breadcrumbService=o,this.bsModal=c,this.repositoryService=s,this.DEVICE_TYPE_POPOVER=n.gettext("The device profile will be available for assignments on devices of the specified type. Otherwise, it will be available for all device types."),this.queriesUtil=new d.QueriesUtil}return e.prototype.ngOnInit=function(){return b(this,void 0,void 0,(function(){var e,t;return P(this,(function(i){switch(i.label){case 0:return e=this.route.snapshot.paramMap.get("id"),t=this,[4,this.getDeviceProfile(e)];case 1:return t.deviceProfile=i.sent(),this.deviceProfile&&(this.profileName=this.deviceProfile.name,this.deviceProfile.c8y_DeviceProfile.software||(this.deviceProfile.c8y_DeviceProfile.software=[]),this.deviceProfile.c8y_DeviceProfile.configuration||(this.deviceProfile.c8y_DeviceProfile.configuration=[])),[2]}}))}))},e.prototype.addFirmware=function(){var e=this,t={deviceTypeQuery:this.getDeviceTypeQuery(y.RepositoryType.FIRMWARE),repositoryType:y.RepositoryType.FIRMWARE,repositoryEntriesWithVersionsFn$:function(t){return e.getRepositoryEntriesWithVersions$(t.content.searchTerm,y.RepositoryType.FIRMWARE)},icon:"c8y-firmware",title:n.gettext("Select firmware"),mode:n.ModalSelectionMode.SINGLE},i=this.bsModal.show(y.RepositorySelectModalComponent,{ignoreBackdropClick:!0,initialState:t});t.repositoryEntriesWithVersionsFn$&&(i.content.repositoryEntriesWithVersions$=t.repositoryEntriesWithVersionsFn$(i)),i.content.load.next(),i.content.resultEmitter.pipe(u.take(1)).subscribe((function(t){if(t){var i={c8y_DeviceProfile:e.deviceProfile.c8y_DeviceProfile||{}};f.assign(i.c8y_DeviceProfile,{firmware:{name:t.name,version:t.version,url:t.url,isPatch:t.isPatch,patchDependency:t.patchDependency}}),e.updateDeviceProfile(i)}}))},e.prototype.getRepositoryEntriesWithVersions$=function(e,t){var i=this;return e.pipe(u.distinctUntilChanged(),u.switchMap((function(e){return i.repositoryService.listRepositoryEntries(t,{partialName:e,params:{pageSize:100},skipLegacy:!0})})),u.map((function(e){return e.data})),u.map((function(e){return i.getAndAssignRepositoryBinaries(e)})),u.shareReplay(1))},e.prototype.getAndAssignRepositoryBinaries=function(e){var t=this;return e.forEach((function(e){e.versions=t.repositoryService.listBaseVersions(e)})),e},e.prototype.addConfiguration=function(){var e=this,t=this.bsModal.show(x,{ignoreBackdropClick:!0});t.content.deviceTypeQuery=this.getDeviceTypeQuery(y.RepositoryType.CONFIGURATION),t.content.selected=this.deviceProfile.c8y_DeviceProfile.configuration,t.content.load.next(),t.content.resultEmitter.pipe(u.take(1)).subscribe((function(t){var i=t.map((function(e){return f.assign({url:e.url,name:e.name},e.configurationType?{type:e.configurationType}:{})})),n=f.concat(i,e.deviceProfile.c8y_DeviceProfile.configuration||[]),r=f.uniqWith(n,(function(e,t){return e.type&&t.type&&e.type===t.type})),o={c8y_DeviceProfile:e.deviceProfile.c8y_DeviceProfile||{}};f.assign(o.c8y_DeviceProfile,{configuration:r}),e.updateDeviceProfile(o)}))},e.prototype.addSoftware=function(){var e=this,t={deviceTypeQuery:this.getDeviceTypeQuery(y.RepositoryType.SOFTWARE),repositoryType:y.RepositoryType.SOFTWARE,repositoryEntriesWithVersionsFn$:function(t){return e.getRepositoryEntriesWithVersions$(t.content.searchTerm,y.RepositoryType.SOFTWARE)},selected:this.deviceProfile.c8y_DeviceProfile.software,icon:"c8y-tools",title:n.gettext("Select software"),mode:n.ModalSelectionMode.MULTI},i=this.bsModal.show(y.RepositorySelectModalComponent,{ignoreBackdropClick:!0,initialState:t});t.repositoryEntriesWithVersionsFn$&&(i.content.repositoryEntriesWithVersions$=t.repositoryEntriesWithVersionsFn$(i)),i.content.load.next(),i.content.resultEmitter.pipe(u.take(1)).subscribe((function(t){var i=t.map((function(e){return{name:e.name,version:e.version,url:e.url,action:"install"}})),n=f.concat(i,e.deviceProfile.c8y_DeviceProfile.software||[]),r=f.uniqWith(n,(function(e,t){return e.name&&t.name&&e.name===t.name})),o={c8y_DeviceProfile:e.deviceProfile.c8y_DeviceProfile||{}};f.assign(o.c8y_DeviceProfile,{software:r}),e.updateDeviceProfile(o)}))},Object.defineProperty(e.prototype,"isDeviceProfileEmpty",{get:function(){var e=this.deviceProfile.c8y_DeviceProfile.software&&this.deviceProfile.c8y_DeviceProfile.software.length>0,t=Boolean(this.deviceProfile.c8y_DeviceProfile.firmware),i=this.deviceProfile.c8y_DeviceProfile.configuration&&this.deviceProfile.c8y_DeviceProfile.configuration.length>0;return e||t||i},enumerable:!0,configurable:!0}),e.prototype.removeItem=function(e,t){var i={c8y_DeviceProfile:this.deviceProfile.c8y_DeviceProfile},n=i.c8y_DeviceProfile[t].filter((function(t){return!f.isEqual(e,t)}));i.c8y_DeviceProfile[t]=n,this.updateDeviceProfile(i)},e.prototype.removeFirmware=function(){delete this.deviceProfile.c8y_DeviceProfile.firmware,this.updateDeviceProfile({c8y_DeviceProfile:this.deviceProfile.c8y_DeviceProfile})},e.prototype.updateDeviceProfile=function(e){return b(this,void 0,void 0,(function(){var t,i;return P(this,(function(r){switch(r.label){case 0:e.c8y_Filter&&""===e.c8y_Filter.type&&delete e.c8y_Filter.type,Object.assign(e,{id:this.deviceProfile.id}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.inventoryService.update(e)];case 2:return t=r.sent().data,this.deviceProfile=t,this.profileName=this.deviceProfile.name,this.alertService.success(n.gettext("Device profile changed.")),[3,4];case 3:return i=r.sent(),this.alertService.addServerFailure(i),[3,4];case 4:return[2]}}))}))},e.prototype.getDeviceProfile=function(e){return b(this,void 0,void 0,(function(){var t;return P(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.inventoryService.detail(e)];case 1:return[2,i.sent().data];case 2:return t=i.sent(),this.alertService.addServerFailure(t),[3,3];case 3:return[2]}}))}))},e.prototype.getDeviceTypeQuery=function(e){return f.has(this.deviceProfile,"c8y_Filter.type")&&!f.isEmpty(this.deviceProfile.c8y_Filter.type)?e===y.RepositoryType.CONFIGURATION?this.queriesUtil.addOrFilter({deviceType:this.deviceProfile.c8y_Filter.type},{__not:{__has:"deviceType"}}):this.queriesUtil.addOrFilter({"c8y_Filter.type":this.deviceProfile.c8y_Filter.type},{__not:{__has:"c8y_Filter.type"}}):{}},e.ctorParameters=function(){return[{type:i.ActivatedRoute},{type:n.AlertService},{type:d.InventoryService},{type:l.Location},{type:n.BreadcrumbService},{type:p.BsModalService},{type:y.RepositoryService}]},e=g([t.Component({selector:"c8y-device-profile",template:'<c8y-title>{{ profileName }}</c8y-title>\n<c8y-breadcrumb>\n  <c8y-breadcrumb-item\n    [icon]="\'c8y-device-profile\'"\n    [label]="\'Device profiles\' | translate"\n    [path]="\'device-profiles\'"\n  ></c8y-breadcrumb-item>\n</c8y-breadcrumb>\n\n<div *ngIf="deviceProfile">\n  <div class="card m-b-4" *ngIf="deviceProfile">\n    <div class="card-header separator">\n      <h4 translate>Name and device type</h4>\n    </div>\n    <div class="card-block">\n      <div class="row">\n        <div class="col-md-4">\n          <form #editNameForm="ngForm">\n            <c8y-form-group>\n              <label class="control-label" translate>\n                Name\n              </label>\n              <div class="input-group input-group-editable">\n                <input\n                  type="text"\n                  class="form-control"\n                  [(ngModel)]="deviceProfile.name"\n                  name="name"\n                  required\n                />\n                <span></span>\n                <div class="input-group-btn">\n                  <button\n                    (click)="\n                      updateDeviceProfile({ name: deviceProfile.name });\n                      editNameForm.form.markAsPristine()\n                    "\n                    class="btn btn-primary"\n                    title="{{ \'Save\' | translate }}"\n                  >\n                    {{ \'Save\' | translate }}\n                  </button>\n                </div>\n              </div>\n            </c8y-form-group>\n          </form>\n        </div>\n        <div class="col-md-4">\n          <form #editTypeForm="ngForm">\n            <c8y-form-group>\n              <label class="control-label">\n                {{ \'Device type\' | translate }}\n                <button\n                  class="btn btn-clean text-primary"\n                  popover="{{ DEVICE_TYPE_POPOVER | translate }}"\n                  triggers="focus"\n                  container="body"\n                  placement="right"\n                >\n                  <i [c8yIcon]="\'question-circle-o\'"></i>\n                </button>\n              </label>\n              <div class="input-group input-group-editable">\n                <input\n                  type="text"\n                  class="form-control"\n                  [(ngModel)]="deviceProfile.c8y_Filter.type"\n                  name="type"\n                  placeholder="{{ \'e.g.\' | translate }} c8y_Linux"\n                  [disabled]="isDeviceProfileEmpty"\n                />\n                <span></span>\n                <div class="input-group-btn">\n                  <button\n                    (click)="\n                      updateDeviceProfile({ c8y_Filter: { type: deviceProfile.c8y_Filter.type } });\n                      editTypeForm.form.markAsPristine()\n                    "\n                    class="btn btn-primary"\n                    title="{{ \'Save\' | translate }}"\n                    [disabled]="isDeviceProfileEmpty"\n                  >\n                    {{ \'Save\' | translate }}\n                  </button>\n                </div>\n              </div>\n            </c8y-form-group>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="card m-b-4">\n    <div class="card-header separator">\n      <div class="card-icon">\n        <i [c8yIcon]="\'c8y-firmware\'" class="c8y-icon-duocolor"></i>\n      </div>\n      <h4 class="card-title" translate>\n        Firmware\n      </h4>\n    </div>\n    <div class="card-block p-t-0">\n      <c8y-list-group *ngIf="deviceProfile.c8y_DeviceProfile.firmware">\n        <c8y-li>\n          <c8y-li-icon>\n            <i [c8yIcon]="\'c8y-firmware\'"></i>\n          </c8y-li-icon>\n          <c8y-li-body class="content-flex-50 left-m-xs">\n            <div class="col-6">\n              <span\n                class="text-truncate"\n                title="{{ deviceProfile.c8y_DeviceProfile.firmware.name }}"\n              >\n                {{ deviceProfile.c8y_DeviceProfile.firmware.name }}\n              </span>\n            </div>\n            <div class="col-5 flex-row">\n              <span\n                class="text-truncate"\n                title="{{ deviceProfile.c8y_DeviceProfile.firmware.version }}"\n              >\n                <span class="text-label-small m-r-4" translate>Version</span>\n                {{ deviceProfile.c8y_DeviceProfile.firmware.version }}\n              </span>\n              <button\n                class="btn btn-danger btn-xs visible-xs flex-item-right m-r-8 m-t-8"\n                title="{{ \'Remove`firmware`\' | translate }}"\n                (click)="removeFirmware()"\n              >\n                <i c8yIcon="minus-circle"></i> {{ \'Remove`firmware`\' | translate }}\n              </button>\n            </div>\n            <div class="flex-item-right p-r-8 hidden-xs">\n              <button\n                class="btn btn-dot showOnHover"\n                title="{{ \'Remove`firmware`\' | translate }}"\n                (click)="removeFirmware()"\n              >\n                <i class="text-danger" c8yIcon="minus-circle"></i>\n              </button>\n            </div>\n          </c8y-li-body>\n        </c8y-li>\n      </c8y-list-group>\n      <div class="p-t-8" *ngIf="!deviceProfile.c8y_DeviceProfile.firmware">\n        <button\n          title="{{ \'Add firmware\' | translate }}"\n          class="btn-add-block"\n          (click)="addFirmware()"\n        >\n          <i c8yIcon="plus-square"></i> {{ \'No firmware defined. Add firmware\' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class="card m-b-4">\n    <div class="card-header separator">\n      <div class="card-icon">\n        <i [c8yIcon]="\'c8y-tools\'" class="c8y-icon-duocolor"></i>\n      </div>\n      <h4 class="card-title" translate>\n        Software\n      </h4>\n    </div>\n    <div class="card-block p-t-0">\n      <c8y-list-group>\n        <c8y-li *ngFor="let software of deviceProfile.c8y_DeviceProfile.software;">\n          <c8y-li-icon>\n            <i [c8yIcon]="\'c8y-tools\'"></i>\n          </c8y-li-icon>\n          <c8y-li-body class="content-flex-50 left-m-xs">\n            <div class="col-6">\n              <span class="text-truncate" title="{{ software.name }}">\n                {{ software.name }}\n              </span>\n            </div>\n            <div class="col-5 flex-row">\n              <span class="text-truncate" title="{{ software.version }}">\n                <span class="text-label-small m-r-8" translate>Version</span>\n                {{ software.version }}\n              </span>\n              <button\n                class="btn btn-danger btn-xs visible-xs flex-item-right m-r-8 m-t-8"\n                title="{{ \'Remove`software`\' | translate }}"\n                ((click)="removeItem(software, \'software\')"\n              >\n                <i c8yIcon="minus-circle"></i> {{ \'Remove`software`\' | translate }}\n              </button>\n            </div>\n            <div class="flex-item-right p-r-8 hidden-xs ">\n              <button\n                class="btn btn-dot showOnHover text-danger"\n                title="{{ \'Remove`software`\' | translate }}"\n                (click)="removeItem(software, \'software\')"\n              >\n                <i c8yIcon="minus-circle"></i>\n              </button>\n            </div>\n          </c8y-li-body>\n        </c8y-li>\n      </c8y-list-group>\n      <div class="p-t-8">\n        <button\n          title="{{ \'Add software\' | translate }}"\n          class="btn-add-block m-b-0"\n          (click)="addSoftware()"\n        >\n          <i c8yIcon="plus-square"></i>\n          <span *ngIf="deviceProfile.c8y_DeviceProfile.software?.length === 0">\n            {{ \'No software defined.\' | translate }}&nbsp;\n          </span>\n          {{ \'Add software\' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class="card">\n    <div class="card-header separator">\n      <div class="card-icon">\n        <i [c8yIcon]="\'gears\'" class="c8y-icon-duocolor"></i>\n      </div>\n      <h4 class="card-title" translate>\n        Configuration\n      </h4>\n    </div>\n    <div class="card-block p-t-0">\n      <c8y-list-group class="m-b-8">\n        <c8y-li\n          *ngFor="let configuration of deviceProfile.c8y_DeviceProfile.configuration;"\n        >\n          <c8y-li-icon>\n            <i [c8yIcon]="\'gears\'"></i>\n          </c8y-li-icon>\n          <c8y-li-body class="content-flex-50">\n            <div class="col-6">\n              <span class="text-truncate" title="{{ configuration.name }}">\n                {{ configuration.name }}\n              </span>\n            </div>\n            <div class="col-5 flex-row">\n              <span class="label label-info">{{ configuration.type }}</span>\n              <button\n                class="btn btn-danger btn-xs visible-xs flex-item-right m-r-8 m-t-8"\n                title="{{ \'Remove`configuration`\' | translate }}"\n                (click)="removeItem(configuration, \'configuration\')"\n              >\n                <i c8yIcon="minus-circle"></i> {{ \'Remove`configuration`\' | translate }}\n              </button>\n            </div>\n            <div class="flex-item-right p-r-8 hidden-xs">\n              <button\n                class="btn btn-dot showOnHover text-danger"\n                title="{{ \'Remove`configuration`\' | translate }}"\n                (click)="removeItem(configuration, \'configuration\')"\n              >\n                <i c8yIcon="minus-circle"></i>\n              </button>\n            </div>\n          </c8y-li-body>\n        </c8y-li>\n      </c8y-list-group>\n      <div class="p-t-8">\n        <button\n          title="{{ \'Add configuration\' | translate }}"\n          class="btn-add-block m-b-0"\n          (click)="addConfiguration()"\n        >\n          <i c8yIcon="plus-square"></i>\n          <span *ngIf="deviceProfile.c8y_DeviceProfile.configuration?.length === 0">\n            {{ \'No configuration defined.\' | translate }}&nbsp;</span\n          >\n          {{ \'Add configuration\' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n'})],e)}(),I=function(){function e(e,t,i){this.inventoryService=e,this.operationService=t,this.alertService=i,this.dateFrom=new Date(0),this.dateTo=new Date(Date.now()+864e5),this.queriesUtil=new d.QueriesUtil}return e.prototype.createDeviceProfile=function(e){return this.inventoryService.create(e)},e.prototype.getDeviceProfilesByDeviceType=function(e){var t={__or:[{"c8y_Filter.type":e},{__not:{__has:"c8y_Filter.type"}}]};return this.getDeviceProfiles(t)},e.prototype.getDeviceProfiles=function(e){var t={type:"c8y_Profile"};return t=this.queriesUtil.addAndFilter(t,e||{}),this.inventoryService.listQuery(t,{pageSize:100,withTotalPages:!0})},e.prototype.getProfileOperation=function(e){return b(this,void 0,void 0,(function(){var t,i;return P(this,(function(n){switch(n.label){case 0:return t={deviceId:e,fragmentType:"c8y_DeviceProfile",dateFrom:this.dateFrom.toISOString(),dateTo:this.dateTo.toISOString(),revert:!0,pageSize:1},[4,this.operationService.list(t)];case 1:return[2,(i=n.sent().data[0])&&i.status!==d.OperationStatus.SUCCESSFUL?i:void 0]}}))}))},e.prototype.createProfileOperation=function(e,t){return b(this,void 0,void 0,(function(){var i,n,r,o;return P(this,(function(c){switch(c.label){case 0:n={deviceId:e.id,profileId:t.id,profileName:t.name,c8y_DeviceProfile:t.c8y_DeviceProfile,description:"Assign device profile "+t.name+" to device "+e.name},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.operationService.create(n)];case 2:return r=c.sent().data,i=r,[3,4];case 3:return o=c.sent(),this.alertService.addServerFailure(o),[3,4];case 4:return[2,i]}}))}))},e.prototype.getFirmwareItems=function(e,t){var i=e.c8y_Firmware,n=f.get(t,"c8y_DeviceProfile.firmware"),r=[],o=[];return i&&r.push(i),n&&o.push(n),this.createProfileComparison(r,o,"version")},e.prototype.getSoftwareItems=function(e,t){var i=e.c8y_SoftwareList,n=f.get(t,"c8y_DeviceProfile.software");return this.createProfileComparison(i,n,"version")},e.prototype.getConfigurationItems=function(e,t){var i=[];Object.keys(e).forEach((function(t){"c8y_Configuration_"===t.slice(0,18)&&i.push(e[t])}));var n=f.get(t,"c8y_DeviceProfile.configuration");return this.createProfileComparison(i,n,"type")},e.prototype.createProfileComparison=function(e,t,i){void 0===e&&(e=[]),void 0===t&&(t=[]);var n=this.createProfileComparisonFromDeviceItems(e,i),r=this.extendProfileComparisonWithProfileItems(n,t,i);return f.sortBy(f.toArray(r),"name")},e.prototype.createProfileComparisonFromDeviceItems=function(e,t){var i={};return e.forEach((function(e){var n;Object.assign(i,((n={})[e.name]={name:e.name,profileVersion:void 0,deviceVersion:e[t]},n))})),i},e.prototype.extendProfileComparisonWithProfileItems=function(e,t,i){return t.forEach((function(t){var n;e[t.name]?e[t.name].profileVersion=t[i]:Object.assign(e,((n={})[t.name]={name:t.name,profileVersion:t[i],deviceVersion:void 0},n))})),e},e.ctorParameters=function(){return[{type:d.InventoryService},{type:d.OperationService},{type:n.AlertService}]},e=g([t.Injectable()],e)}(),S=function(){function e(e,t){var i=this;this.modal=e,this.deviceProfileService=t,this.DEVICE_TYPE_POPOVER=n.gettext("The device profile will be available for assignments on devices of the specified type. Otherwise, it will be available for all device types."),this.deviceProfile={name:"",type:"c8y_Profile",c8y_Filter:{},c8y_DeviceProfile:{}},this.result=new Promise((function(e,t){i._save=e,i._cancel=t}))}return e.prototype.create=function(){return b(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return[4,this.deviceProfileService.createDeviceProfile(this.deviceProfile)];case 1:return e=t.sent().data,this._save(e.id),[2]}}))}))},e.prototype.close=function(){this._cancel(),this.modal.hide()},e.ctorParameters=function(){return[{type:h.BsModalRef},{type:I}]},e=g([t.Component({selector:"c8y-add-device-profile",template:'<div class="viewport-modal">\n  <div class="modal-header dialog-header">\n    <i [c8yIcon]="\'c8y-device-profile\'"></i>\n    <h4 translate>\n      Add device profile\n    </h4>\n  </div>\n\n  <div class="modal-inner-scroll">\n    <div class="modal-body">\n      <form #createDeviceProfile="ngForm">\n        <c8y-form-group>\n          <label translate for="name">Name</label>\n          <input\n            id="name"\n            type="text"\n            class="form-control"\n            autocomplete="off"\n            name="name"\n            [(ngModel)]="deviceProfile.name"\n            placeholder="{{ \'e.g. My device profile\' | translate }}"\n            required\n          />\n        </c8y-form-group>\n        <c8y-form-group>\n          <label>\n            {{ \'Device type\' | translate }}\n            <button\n              class="btn btn-clean"\n              popover="{{ DEVICE_TYPE_POPOVER | translate }}"\n              triggers="focus"\n            >\n              <i [c8yIcon]="\'question-circle-o\'"></i>\n            </button>\n          </label>\n          <input\n            id="deviceType"\n            class="form-control"\n            name="deviceType"\n            [(ngModel)]="deviceProfile.c8y_Filter.type"\n            placeholder="{{ \'e.g.\' | translate }} c8y_Linux"\n          />\n        </c8y-form-group>\n      </form>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button title="{{ \'Cancel\' | translate }}" class="btn btn-default" (click)="close()" translate>\n      Cancel\n    </button>\n\n    <button\n      title="{{ \'Continue\' | translate }}"\n      class="btn btn-primary"\n      (click)="create()"\n      [disabled]="createDeviceProfile.form.invalid"\n      translate\n    >\n      Continue\n    </button>\n  </div>\n</div>\n'})],e)}(),D=function(){function e(e,t,i,n,r,o,c){var s=this;this.inventoryService=e,this.translateService=t,this.modalService=i,this.alertService=n,this.bsModalService=r,this.router=o,this.deviceProfileService=c,this.reloading=!1,this.reload=new v.BehaviorSubject(null),this.deviceProfiles$=this.reload.pipe(u.tap((function(){return s.reloading=!0})),u.switchMap((function(){return s.deviceProfileService.getDeviceProfiles()})),u.tap((function(){return s.reloading=!1})))}return e.prototype.ngOnInit=function(){this.loadDeviceProfiles()},e.prototype.loadDeviceProfiles=function(){this.reload.next()},e.prototype.createDeviceProfile=function(){return b(this,void 0,void 0,(function(){var e,t;return P(this,(function(i){switch(i.label){case 0:e=this.bsModalService.show(S,{class:"modal-sm"}).content,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.result];case 2:return t=i.sent(),e.close(),this.router.navigateByUrl("/device-profiles/"+t),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.duplicateDeviceProfile=function(e){return b(this,void 0,void 0,(function(){var t,i;return P(this,(function(n){switch(n.label){case 0:return(t=f.cloneDeep(e)).id=null,t.name="Duplicate of "+e.name,[4,this.deviceProfileService.createDeviceProfile(t)];case 1:return i=n.sent().data,this.router.navigateByUrl("/device-profiles/"+i.id),[2]}}))}))},e.prototype.deleteDeviceProfile=function(e){return b(this,void 0,void 0,(function(){var t,i,r,o;return P(this,(function(c){switch(c.label){case 0:t=e.name,i=n.gettext("Delete device profile"),r=this.translateService.instant(n.gettext('You are about to delete a device profile "{{ deviceProfileName }}".'),{deviceProfileName:t}),o=this.translateService.instant(n.gettext("Do you want to proceed?")),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,this.modalService.confirm(i,r+" "+o,n.Status.DANGER,{ok:n.gettext("Delete")})];case 2:return c.sent(),[4,this.delete(e.id)];case 3:return c.sent(),this.reload.next(),[3,5];case 4:return c.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.delete=function(e){return b(this,void 0,void 0,(function(){var t;return P(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.inventoryService.delete(e)];case 1:return i.sent(),this.alertService.success(n.gettext("Device profile deleted.")),[3,3];case 2:return t=i.sent(),this.alertService.addServerFailure(t),[3,3];case 3:return[2]}}))}))},e.ctorParameters=function(){return[{type:d.InventoryService},{type:m.TranslateService},{type:n.ModalService},{type:n.AlertService},{type:h.BsModalService},{type:i.Router},{type:I}]},e=g([t.Component({selector:"c8y-device-profile-list",template:'<c8y-title>{{ \'Device profiles\' | translate }}</c8y-title>\n\n<c8y-action-bar-item [placement]="\'right\'">\n  <button\n    class="btn btn-link"\n    (click)="createDeviceProfile()"\n    title="{{ \'Add device profile\' | translate }}"\n  >\n    <i c8yIcon="plus-square"></i> {{ \'Add device profile\' | translate }}\n  </button>\n</c8y-action-bar-item>\n<c8y-action-bar-item [placement]="\'right\'">\n  <button class="btn btn-link" (click)="loadDeviceProfiles()" title="{{ \'Reload\' | translate }}">\n    <i c8yIcon="refresh" [ngClass]="{ \'fa-spin\': reloading }"></i>\n    {{ \'Reload\' | translate }}\n  </button>\n</c8y-action-bar-item>\n\n\x3c!-- EMPTY STATE --\x3e\n<div class="c8y-empty-state text-left" *ngIf="(deviceProfiles$ | async)?.data.length === 0">\n  <h1 [c8yIcon]="\'c8y-device-profile\'" class="c8y-icon-duocolor"></h1>\n  <h3 translate>No device profiles available.</h3>\n  <p translate>Add a new device profile by clicking below.</p>\n  <p>\n    <button\n      title="{{ \'Add device profile\' | translate }}"\n      (click)="createDeviceProfile()"\n      class="btn btn-primary"\n      translate\n    >\n      Add device profile\n    </button>\n  </p>\n</div>\n\n\x3c!-- DEVICE PROFILES LIST --\x3e\n<c8y-list-group>\n  <c8y-li *c8yFor="let deviceProfile of deviceProfiles$">\n    <c8y-li-icon>\n      <i c8yIcon="c8y-device-profile"></i>\n    </c8y-li-icon>\n\n    <c8y-li-body class="content-flex-50">\n      <div class="col-6" title="{{ deviceProfile.name }}">\n        <button class="btn-clean" routerLink="/device-profiles/{{ deviceProfile.id }}" style="max-width: inherit;">\n          <span class="text-truncate">{{ deviceProfile.name }}</span>\n        </button>\n      </div>\n      <div class="col-6" title="{{ deviceProfile.c8y_Filter?.type || \'-\' }}">\n        <span class="text-label-small m-r-4" translate>Device type</span>\n        {{ deviceProfile.c8y_Filter?.type || \'-\' }}\n      </div>\n    </c8y-li-body>\n\n    <c8y-li-action\n      routerLink="/device-profiles/{{ deviceProfile.id }}"\n      icon="pencil"\n      label="{{ \'Edit\' | translate }}"\n    >\n    </c8y-li-action>\n    <c8y-li-action\n      (click)="duplicateDeviceProfile(deviceProfile)"\n      icon="copy"\n      label="{{ \'Duplicate\' | translate }}"\n    >\n    </c8y-li-action>\n    <c8y-li-action\n      (click)="deleteDeviceProfile(deviceProfile)"\n      icon="trash"\n      label="{{ \'Delete\' | translate }}"\n    >\n    </c8y-li-action>\n  </c8y-li>\n</c8y-list-group>\n'})],e)}(),T=function(){function e(){}return e.prototype.get=function(){return b(this,void 0,void 0,(function(){return P(this,(function(e){return this.nodeItem||(this.nodeItem=new n.NavigatorNode({label:n.gettext("Device profiles"),path:"/device-profiles",icon:"c8y-device-profile",parent:n.gettext("Management")})),[2,this.nodeItem]}))}))},e=g([t.Injectable()],e)}();!function(e){e.APPLY_PROFILE="c8y_DeviceProfile"}(w||(w={}));var E=function(){function e(){}return e.prototype.canActivate=function(e,t){var i=e.data.contextData||e.parent.data.contextData;return!!i&&this.hasSupportedOperation(i,w.APPLY_PROFILE)},e.prototype.hasSupportedOperation=function(e,t){var i=e.c8y_SupportedOperations||[];return!!i&&!!i.find((function(e){return e===t}))},e=g([t.Injectable()],e)}(),F=function(){function e(e,t,i){this.deviceProfileService=e,this.route=t,this.realtime=i,this.firmwareItems=[],this.softwareItems=[],this.configurationItems=[],this.pattern="",this.reloading=!1}return e.prototype.ngOnInit=function(){return b(this,void 0,void 0,(function(){return P(this,(function(e){return this.device=this.route.snapshot.parent.data.contextData,this.getDeviceProfilesAndUpdateProfileItems(),[2]}))}))},e.prototype.getDeviceProfilesAndUpdateProfileItems=function(){return b(this,void 0,void 0,(function(){var e,t,i;return P(this,(function(n){switch(n.label){case 0:return this.reloading=!0,e=this,[4,this.deviceProfileService.getDeviceProfilesByDeviceType(this.device.type)];case 1:return e.deviceProfiles=n.sent(),this.device.c8y_Profile&&(t=this.device.c8y_Profile.profileId,this.selectedProfile=this.deviceProfiles.data.find((function(e){return e.id===t}))),this.updateProfileItems(this.device,this.selectedProfile),i=this,[4,this.deviceProfileService.getProfileOperation(this.device.id)];case 2:return i.operation=n.sent(),this.subscribeToOperations(),this.reloading=!1,[2]}}))}))},e.prototype.selectProfile=function(e){this.selectedProfile=e,this.updateProfileItems(this.device,this.selectedProfile)},e.prototype.createOperation=function(){return b(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return e=this,[4,this.deviceProfileService.createProfileOperation(this.device,this.selectedProfile)];case 1:return e.operation=t.sent(),[2]}}))}))},e.prototype.setPipe=function(e){this.pattern=e,this.filterPipe=v.pipe(u.map((function(t){return t.filter((function(t){return t.name&&t.name.toLowerCase().indexOf(e.toLowerCase())>-1}))})))},e.prototype.ngOnDestroy=function(){this.operationsSubscription.unsubscribe()},e.prototype.updateProfileItems=function(e,t){this.firmwareItems=this.deviceProfileService.getFirmwareItems(e,t),this.softwareItems=this.deviceProfileService.getSoftwareItems(e,t),this.configurationItems=this.deviceProfileService.getConfigurationItems(e,t)},e.prototype.subscribeToOperations=function(){var e=this,t="/operations/"+this.device.id;this.operationsSubscription=this.realtime.observable(t).pipe(u.filter((function(e){return e.data.c8y_DeviceProfile}))).subscribe((function(t){var i=t.data;e.operation=i}))},e.ctorParameters=function(){return[{type:I},{type:i.ActivatedRoute},{type:d.Realtime}]},e=g([t.Component({selector:"c8y-device-tab-profile",template:'<c8y-action-bar-item [placement]="\'right\'">\n  <button class="btn btn-link" title="{{ \'Reload\' | translate }}" (click)="getDeviceProfilesAndUpdateProfileItems()">\n    <i c8yIcon="refresh" [ngClass]="{ \'fa-spin\': reloading }"></i>\n    {{ \'Reload\' | translate }}\n  </button>\n</c8y-action-bar-item>\n\n<div class="card card--grid--fullpage card--grid--fullpage card--grid grid__row--2-10">\n  <div class="card--grid grid__col--6-6">\n    \x3c!-- AVAILABLE PROFILES --\x3e\n    <div class="bg-white">\n      <div class="card-header separator">\n        <h4 class="card-title" translate>Device profile</h4>\n      </div>\n      <div class="p-16">\n        <form #deviceProfileForm="ngForm">\n          <div class="input-group">\n            <c8y-typeahead\n              class="flex-grow"\n              [(selected)]="selectedProfile"\n              placeholder="{{ \'Select device profile\' | translate }}"\n              (onSearch)="setPipe($event)"\n              [allowFreeEntries]="false"\n            >\n              <c8y-li\n                *c8yFor="let profile of deviceProfiles; pipe: filterPipe"\n                class="p-l-8 p-r-8 c8y-list__item--link"\n                (click)="selectProfile(profile); setPipe(\'\')"\n              >\n                <c8y-highlight\n                  [text]="profile.name || \'&#45;&#45;\'"\n                  [pattern]="pattern"\n                ></c8y-highlight>\n              </c8y-li>\n            </c8y-typeahead>\n            <div class="input-group-btn">\n              <button\n                class="btn btn-primary"\n                (click)="createOperation()"\n                title="{{ \'Assign device profile\' | translate }}"\n                [disabled]="!selectedProfile?.id"\n                translate\n              >\n                Assign device profile\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    \x3c!-- INSTALL PROFILE OPERATION --\x3e\n    <div class="bg-gray-white">\n      <div class="card-header separator">\n        <h4 class="card-title" translate>Currently installed</h4>\n      </div>\n      <div class="card-block">\n        <c8y-single-operation [operation]="operation"></c8y-single-operation>\n      </div>\n    </div>\n  </div>\n  <div class="card--grid__inner-scroll flex-col no-align-items">\n    <div class="d-contents">\n      \x3c!-- FIRMWARE --\x3e\n      <c8y-device-tab-profile-detail\n        [sectionTitle]="\'Firmware\' | translate"\n        [sectionIcon]="\'c8y-firmware\'"\n        [emptyStateText]="\'No firmware to display.\' | translate"\n        [emptyStateDetails]="\'No firmware assigned.\' | translate"\n        [isProfileSelected]="!!selectedProfile"\n        [items]="firmwareItems"\n        [isEmpty]="!selectedProfile?.c8y_DeviceProfile?.firmware?.name"\n        class="d-contents"\n      ></c8y-device-tab-profile-detail>\n    </div>\n    <div class="d-contents">\n      \x3c!-- SOFTWARE --\x3e\n      <c8y-device-tab-profile-detail\n        [sectionTitle]="\'Software\' | translate"\n        [sectionIcon]="\'c8y-tools\'"\n        [emptyStateText]="\'No software to display.\' | translate"\n        [emptyStateDetails]="\'No software assigned.\' | translate"\n        [isProfileSelected]="!!selectedProfile"\n        [items]="softwareItems"\n        [isEmpty]="\n          !selectedProfile?.c8y_DeviceProfile?.software ||\n          selectedProfile?.c8y_DeviceProfile?.software?.length === 0\n        "\n        class="d-contents"\n      ></c8y-device-tab-profile-detail>\n    </div>\n    <div class="d-contents">\n      \x3c!-- CONFIGURATION --\x3e\n      <c8y-device-tab-profile-detail\n        [sectionTitle]="\'Configuration\' | translate"\n        [sectionIcon]="\'gears\'"\n        [emptyStateText]="\'No configuration to display\' | translate"\n        [emptyStateDetails]="\'No configuration assigned\' | translate"\n        [isProfileSelected]="!!selectedProfile"\n        [items]="configurationItems"\n        [isEmpty]="\n          !selectedProfile?.c8y_DeviceProfile?.configuration ||\n          selectedProfile?.c8y_DeviceProfile?.configuration?.length === 0\n        "\n        [showTextLabel]="false"\n        class="d-contents"\n      ></c8y-device-tab-profile-detail>\n    </div>\n    \x3c!-- fill in the remanining vertical space when empty --\x3e\n    <div class="card--grid grid__col--6-6 flex-grow">\n      <div class="bg-white"></div>\n      <div class="bg-gray-white"></div>\n    </div>\n  </div>\n</div>\n'})],e)}(),R=function(){function e(){this.emptyStateText="",this.emptyStateDetails="",this.showTextLabel=!0}return g([t.Input()],e.prototype,"sectionTitle",void 0),g([t.Input()],e.prototype,"sectionIcon",void 0),g([t.Input()],e.prototype,"emptyStateText",void 0),g([t.Input()],e.prototype,"emptyStateDetails",void 0),g([t.Input()],e.prototype,"isProfileSelected",void 0),g([t.Input()],e.prototype,"isEmpty",void 0),g([t.Input()],e.prototype,"items",void 0),g([t.Input()],e.prototype,"showTextLabel",void 0),e=g([t.Component({selector:"c8y-device-tab-profile-detail",template:'<div class="card--grid grid__col--6-6">\n  <div class="bg-white card-block sticky-top">\n    <h5 class="legend form-block">{{ sectionTitle | translate }}</h5>\n  </div>\n  <div class="bg-gray-white  card-block sticky-top hidden-xs hidden-sm">\n    <h5 class="legend form-block">{{ sectionTitle | translate }}</h5>\n  </div>\n  <div class="bg-white p-l-16 p-r-16">\n    <hr class="m-0" />\n  </div>\n  <div class="bg-gray-white p-l-16 p-r-16">\n    <hr class="m-0" />\n  </div>\n  <div class="d-contents" *ngIf="!isProfileSelected || isEmpty">\n    <div class="p-l-16 p-r-16">\n      <div class="c8y-empty-state text-left">\n        <h1 [c8yIcon]="sectionIcon" class="c8y-icon-duocolor"></h1>\n        <p>\n          <span>{{ emptyStateText | translate }}</span\n          ><br />\n          <small *ngIf="isProfileSelected; else noItems">\n            {{ emptyStateDetails | translate }}\n          </small>\n          <ng-template #noItems>\n            <small translate>No device profile selected</small>\n          </ng-template>\n        </p>\n      </div>\n    </div>\n  </div>\n  <div class="bg-gray-white" *ngIf="items.length === 0"></div>\n  <c8y-device-profile-item-list\n    *ngIf="items.length > 0"\n    [icon]="sectionIcon"\n    [items]="items"\n    [showProfileItems]="isProfileSelected && !isEmpty"\n    [showTextLabel]="showTextLabel"\n    class="d-contents"\n  ></c8y-device-profile-item-list>\n  <div class="bg-white p-t-24" *ngIf="isProfileSelected && !isEmpty"></div>\n  <div class="bg-gray-white p-t-24" *ngIf="isProfileSelected && !isEmpty"></div>\n</div>\n'})],e)}(),O=function(){function e(){}return g([t.Input()],e.prototype,"icon",void 0),g([t.Input()],e.prototype,"items",void 0),g([t.Input()],e.prototype,"showProfileItems",void 0),g([t.Input()],e.prototype,"showTextLabel",void 0),e=g([t.Component({selector:"c8y-device-profile-item-list",template:'<div *ngFor="let item of items" class="d-contents">\n  <div class="p-l-16 p-r-16" *ngIf="showProfileItems">\n    <div class="c8y-list__item v-fit">\n      <div class="c8y-list__item__block" *ngIf="item.profileVersion">\n        <div class="c8y-list__item__icon">\n          <i [c8yIcon]="icon"></i>\n        </div>\n        <div class="c8y-list__item__body">\n          <div class="content-flex-40">\n            <div class="col-7">\n              <span class="text-truncate" title="{{ item.name }}">\n                {{ item.name }}\n              </span>\n            </div>\n            <div class="col-5">\n              <span *ngIf="showTextLabel; else showInfoLabel">\n                <span translate class="text-label-small m-r-4">Version</span>\n                {{ item.profileVersion }}\n              </span>\n              <ng-template #showInfoLabel>\n                <span class="label label-info">{{ item.profileVersion }}</span>\n              </ng-template>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="p-l-16 p-r-16 bg-gray-white">\n    <div\n      class="c8y-list__item bg-gray-white"\n      [ngClass]="{\n        \'has-warning\':\n          !item.deviceVersion || (item.deviceVersion && item.deviceVersion !== item.profileVersion)\n      }"\n    >\n      <div class="c8y-list__item__block">\n        <div class="c8y-list__item__icon">\n          <i [c8yIcon]="icon"></i>\n        </div>\n        <div class="c8y-list__item__body">\n          <div class="content-flex-40">\n            <div class="col-7">\n              <span class="text-truncate" title="{{ item.name }}">\n                {{ item.name }}\n              </span>\n            </div>\n            <div class="col-5">\n              <span *ngIf="showTextLabel && item.deviceVersion; else showInfoLabel">\n                <span translate class="text-label-small m-r-4">Version</span>\n                {{ item.deviceVersion }}\n              </span>\n              <ng-template #showInfoLabel>\n                <span class="label label-info">{{ item.deviceVersion }}</span>\n              </ng-template>\n            </div>\n          </div>\n          <c8y-messages\n            class="m-0"\n            style="margin-bottom: calc(var(--margin-base, 8px) * -1);"\n            *ngIf="\n              item.profileVersion &&\n              item.deviceVersion &&\n              item.deviceVersion !== item.profileVersion\n            "\n          >\n            <c8y-message translate>\n              Version mismatch\n            </c8y-message>\n          </c8y-messages>\n          <c8y-messages\n            class="m-0"\n            style="margin-bottom: calc(var(--margin-base, 8px) * -1);"\n            *ngIf="!item.deviceVersion"\n          >\n            <c8y-message translate>\n              Not installed on the device\n            </c8y-message>\n          </c8y-messages>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="p-l-16 p-r-16 bg-white hidden-xs hidden-sm" *ngIf="!showProfileItems"></div>\n</div>\n'})],e)}(),k=[{path:"device-profiles/:id",component:_},{path:"device-profiles",component:D}],A=[{context:n.ViewContext.Device,path:"device-profile",component:F,label:n.gettext("Device profile"),icon:"c8y-device-profile",canActivate:[E]}],C=function(){function e(){}return e=g([t.NgModule({declarations:[_,D,S,x,F,R,O],exports:[],imports:[n.CoreModule,n.CommonModule,y.RepositoryModule,i.RouterModule.forChild(k),r.BsDropdownModule.forRoot(),c.TooltipModule,a.ReactiveFormsModule,s.ButtonsModule,o.PopoverModule],entryComponents:[S,x,F],providers:[{provide:n.HOOK_NAVIGATOR_NODES,useClass:T,multi:!0},{provide:n.HOOK_ONCE_ROUTE,useValue:A,multi:!0},I,E]})],e)}();e.DeviceProfileModule=C,e.DeviceProfileService=I,e.ɵ0=A,e.ɵa=_,e.ɵb=D,e.ɵc=S,e.ɵd=x,e.ɵe=F,e.ɵf=R,e.ɵg=O,e.ɵh=T,e.ɵi=E,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=c8y-ngx-components-device-profile.umd.min.js.map