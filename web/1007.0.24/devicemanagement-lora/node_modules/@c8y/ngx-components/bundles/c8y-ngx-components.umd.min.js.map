{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@c8y/ngx-components/core/common/extension-hooks.ts","ng://@c8y/ngx-components/core/common/state-service.abstract.ts","ng://@c8y/ngx-components/core/action-bar/action-bar.service.ts","ng://@c8y/ngx-components/core/action/action.service.ts","ng://@c8y/ngx-components/core/i18n/gettext.ts","ng://@c8y/ngx-components/core/alert/alert.service.ts","ng://@c8y/ngx-components/core/common/ApplicationOptions.ts","ng://@c8y/ngx-components/core/common/options.service.ts","ng://@c8y/ngx-components/core/common/ui-state.service.ts","ng://@c8y/ngx-components/core/navigator/navigator-node.ts","ng://@c8y/ngx-components/core/navigator/navigator-node-root.ts","ng://@c8y/ngx-components/core/navigator/navigator.service.ts","ng://@c8y/ngx-components/core/header/header.service.ts","ng://@c8y/ngx-components/core/tabs/tabs.service.ts","ng://@c8y/ngx-components/core/bootstrap/bootstrap.component.ts","ng://@c8y/ngx-components/core/breadcrumb/breadcrumb.service.ts","ng://@c8y/ngx-components/core/i18n/languages.ts","ng://@c8y/ngx-components/core/i18n/locale.path.ts","ng://@c8y/ngx-components/core/i18n/patterns-message.hook.ts","ng://@c8y/ngx-components/core/i18n/pattern-messages.service.ts","ng://@c8y/ngx-components/core/i18n/missing-translation-custom.handler.ts","ng://@c8y/ngx-components/core/i18n/pattern-messages.data.ts","ng://@c8y/ngx-components/core/i18n/translate.loader.ts","ng://@c8y/ngx-components/core/i18n/translate.parser.ts","ng://@c8y/ngx-components/core/i18n/i18n.module.ts","ng://@c8y/ngx-components/core/i18n/load-locale.ts","ng://@c8y/ngx-components/core/i18n/parse-module.ts","ng://@c8y/ngx-components/core/i18n/translate.service.ts","ng://@c8y/ngx-components/core/common/status.model.ts","ng://@c8y/ngx-components/core/common/date.pipe.ts","ng://@c8y/ngx-components/core/common/load-more.component.ts","ng://@c8y/ngx-components/core/common/forOf.directive.ts","ng://@c8y/ngx-components/core/common/humanize-app-name.pipe.ts","ng://@c8y/ngx-components/core/common/humanize.pipe.ts","ng://@c8y/ngx-components/core/common/icon.directive.ts","ng://@c8y/ngx-components/core/common/map-function.pipe.ts","ng://@c8y/ngx-components/core/common/outlet.directive.ts","ng://@c8y/ngx-components/core/common/progress-bar.component.ts","ng://@c8y/ngx-components/core/common/shorten-user-name.pipe.ts","ng://@c8y/ngx-components/core/common/single-operation.component.ts","ng://@c8y/ngx-components/core/common/user-preferences/user-preferences-storage-local.ts","ng://@c8y/ngx-components/core/common/user-preferences/user-preferences-store-inventory.ts","ng://@c8y/ngx-components/core/common/user-preferences/user-preferences.service.ts","ng://@c8y/ngx-components/core/common/common.module.ts","ng://@c8y/ngx-components/core/login/login.model.ts","ng://@c8y/ngx-components/core/action-bar/action-bar-item.component.ts","ng://@c8y/ngx-components/core/action-bar/action-bar.component.ts","ng://@c8y/ngx-components/core/action-bar/action-bar.module.ts","ng://@c8y/ngx-components/core/action/action-outlet.component.ts","ng://@c8y/ngx-components/core/action/action.component.ts","ng://@c8y/ngx-components/core/action/action.module.ts","ng://@c8y/ngx-components/core/alert/alert-details.component.ts","ng://@c8y/ngx-components/core/alert/alert-outlet.component.ts","ng://@c8y/ngx-components/core/alert/alert-text.component.ts","ng://@c8y/ngx-components/core/alert/alert.component.ts","ng://@c8y/ngx-components/core/alert/alert.module.ts","ng://@c8y/ngx-components/core/audit-log/audit-log.component.ts","ng://@c8y/ngx-components/core/audit-log/audit-log.module.ts","ng://@c8y/ngx-components/core/login/login.service.ts","ng://@c8y/ngx-components/core/data-grid/data-grid.model.ts","ng://@c8y/ngx-components/core/authentication/password-confirm-modal.component.ts","ng://@c8y/ngx-components/core/authentication/password.service.ts","ng://@c8y/ngx-components/core/authentication/password-check-list.component.ts","ng://@c8y/ngx-components/core/authentication/password-confirm.directive.ts","ng://@c8y/ngx-components/core/authentication/password-strength-checker.service.ts","ng://@c8y/ngx-components/core/authentication/password-strength.component.ts","ng://@c8y/ngx-components/core/authentication/new-password.component.ts","ng://@c8y/ngx-components/core/modal/modal-confirm.component.ts","ng://@c8y/ngx-components/core/modal/modal.component.ts","ng://@c8y/ngx-components/core/modal/modal.service.ts","ng://@c8y/ngx-components/core/modal/popover-confirm.component.ts","ng://@c8y/ngx-components/core/modal/modal.module.ts","ng://@c8y/ngx-components/core/forms/phone-validation.directive.ts","ng://@c8y/ngx-components/core/forms/validation-pattern.ts","ng://@c8y/ngx-components/core/forms/default-validation.directive.ts","ng://@c8y/ngx-components/core/forms/min-validation.directive.ts","ng://@c8y/ngx-components/core/forms/max-validation.directive.ts","ng://@c8y/ngx-components/core/forms/message.directive.ts","ng://@c8y/ngx-components/core/forms/messages.component.ts","ng://@c8y/ngx-components/core/forms/form-group.component.ts","ng://@c8y/ngx-components/core/forms/input-group-list.component.ts","ng://@c8y/ngx-components/core/forms/input-group-list-container.directive.ts","ng://@c8y/ngx-components/core/forms/json-validation-prettifier.directive.ts","ng://@c8y/ngx-components/core/forms/text-area-row-height.directive.ts","ng://@c8y/ngx-components/core/forms/required-input-placeholder.directive.ts","ng://@c8y/ngx-components/core/forms/ip-range-input-list.component.ts","ng://@c8y/ngx-components/core/forms/filter-input.component.ts","ng://@c8y/ngx-components/core/forms/forms.module.ts","ng://@c8y/ngx-components/core/authentication/totp-challenge.component.ts","ng://@c8y/ngx-components/core/authentication/sms-challenge.component.ts","ng://@c8y/ngx-components/core/authentication/totp-setup.component.ts","ng://@c8y/ngx-components/core/authentication/provide-phone-number.component.ts","ng://@c8y/ngx-components/core/authentication/authentication.module.ts","ng://@c8y/ngx-components/core/breadcrumb/breadcrumb-item.component.ts","ng://@c8y/ngx-components/core/breadcrumb/breadcrumb-outlet.component.ts","ng://@c8y/ngx-components/core/breadcrumb/breadcrumb.component.ts","ng://@c8y/ngx-components/core/breadcrumb/breadcrumb.module.ts","ng://@c8y/ngx-components/core/search/search-outlet.component.ts","ng://@c8y/ngx-components/core/search/search.service.ts","ng://@c8y/ngx-components/core/search/search.component.ts","ng://@c8y/ngx-components/core/search/highlight.component.ts","ng://@c8y/ngx-components/core/search/search-result-empty.component.ts","ng://@c8y/ngx-components/core/search/search.module.ts","ng://@c8y/ngx-components/core/user/user-menu.service.ts","ng://@c8y/ngx-components/core/user/user-menu-item.component.ts","ng://@c8y/ngx-components/core/user/user-edit-modal.component.ts","ng://@c8y/ngx-components/core/user/user-totp-setup.component.ts","ng://@c8y/ngx-components/core/user/user-edit.component.ts","ng://@c8y/ngx-components/core/user/user-menu-outlet.component.ts","ng://@c8y/ngx-components/core/user/user-totp-revoke.component.ts","ng://@c8y/ngx-components/core/user/user.module.ts","ng://@c8y/ngx-components/core/header/application/app-icon.component.ts","ng://@c8y/ngx-components/core/header/application/app-switcher.component.ts","ng://@c8y/ngx-components/core/docs/defaults.items.ts","ng://@c8y/ngx-components/core/docs/docs.models.ts","ng://@c8y/ngx-components/core/docs/docs.service.ts","ng://@c8y/ngx-components/core/header/header-bar/header-bar.component.ts","ng://@c8y/ngx-components/core/header/title/title-outlet.component.ts","ng://@c8y/ngx-components/core/header/title/title.component.ts","ng://@c8y/ngx-components/core/navigator/navigator-entry.component.ts","ng://@c8y/ngx-components/core/navigator/navigator-icon.component.ts","ng://@c8y/ngx-components/core/navigator/navigator-node.component.ts","ng://@c8y/ngx-components/core/navigator/navigator-outlet.component.ts","ng://@c8y/ngx-components/core/navigator/navigator.module.ts","ng://@c8y/ngx-components/core/header/right-drawer/right-drawer.component.ts","ng://@c8y/ngx-components/core/header/header.module.ts","ng://@c8y/ngx-components/core/login/change-password.component.ts","ng://@c8y/ngx-components/core/login/credentials.component.ts","ng://@c8y/ngx-components/core/login/login.component.ts","ng://@c8y/ngx-components/core/login/recover-password.component.ts","ng://@c8y/ngx-components/core/login/totp-auth.component.ts","ng://@c8y/ngx-components/core/login/login.module.ts","ng://@c8y/ngx-components/core/tabs/tab.component.ts","ng://@c8y/ngx-components/core/tabs/tabs-outlet.component.ts","ng://@c8y/ngx-components/core/tabs/tabs.module.ts","ng://@c8y/ngx-components/core/bootstrap/cookie-banner/cookie-banner.component.ts","ng://@c8y/ngx-components/core/bootstrap/bootstrap.module.ts","ng://@c8y/ngx-components/core/dynamic-component/dynamic-component.model.ts","ng://@c8y/ngx-components/core/dynamic-component/dynamic-component.service.ts","ng://@c8y/ngx-components/core/dynamic-component/dynamic-component.component.ts","ng://@c8y/ngx-components/core/dynamic-component/dynamic-component.module.ts","ng://@c8y/ngx-components/core/dashboard/dashboard-child-action.component.ts","ng://@c8y/ngx-components/core/dashboard/dashboard-child-title.component.ts","ng://@c8y/ngx-components/core/dashboard/dashboard.component.ts","ng://@c8y/ngx-components/core/dashboard/dashboard-child-change.ts","ng://@c8y/ngx-components/core/dashboard/dashboard-child.component.ts","ng://@c8y/ngx-components/core/dashboard/widgets-dashboard.component.ts","ng://@c8y/ngx-components/core/docs/guide-href.directive.ts","ng://@c8y/ngx-components/core/docs/guide-docs.component.ts","ng://@c8y/ngx-components/core/docs/docs.module.ts","ng://@c8y/ngx-components/core/dashboard/dashboard.module.ts","ng://@c8y/ngx-components/core/data-grid/column/cell-renderer.ts","ng://@c8y/ngx-components/core/data-grid/column/filtering-form-renderer.ts","ng://@c8y/ngx-components/core/data-grid/column/column.directive.ts","ng://@c8y/ngx-components/core/data-grid/grid-data-source.ts","ng://@c8y/ngx-components/core/device-status/device-availability.ts","ng://@c8y/ngx-components/core/data-grid/data-grid.component.ts","ng://@c8y/ngx-components/core/data-grid/column/cell-renderer.component.ts","ng://@c8y/ngx-components/core/data-grid/column/filtering-form-renderer.component.ts","ng://@c8y/ngx-components/core/data-grid/data-grid.module.ts","ng://@c8y/ngx-components/core/drop-area/drop-area.component.ts","ng://@c8y/ngx-components/core/device-status/device-status.component.ts","ng://@c8y/ngx-components/core/device-status/device-status.module.ts","ng://@c8y/ngx-components/core/drop-area/drop-area.module.ts","ng://@c8y/ngx-components/core/select-modal/select-modal.model.ts","ng://@c8y/ngx-components/core/file-picker/file-picker.component.ts","ng://@c8y/ngx-components/core/file-picker/file-picker.module.ts","ng://@c8y/ngx-components/core/list-group/list-group.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-action.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-collapse.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-footer.component.ts","ng://@c8y/ngx-components/core/list-group/list-item.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-icon.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-body.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-checkbox.component.ts","ng://@c8y/ngx-components/core/list-group/list-item-radio.component.ts","ng://@c8y/ngx-components/core/list-group/list-group.module.ts","ng://@c8y/ngx-components/core/realtime/realtime-button.component.ts","ng://@c8y/ngx-components/core/realtime/realtime.module.ts","ng://@c8y/ngx-components/core/router/router.models.ts","ng://@c8y/ngx-components/core/select-modal/select-modal.component.ts","ng://@c8y/ngx-components/core/select-modal/select-modal-filter.pipe.ts","ng://@c8y/ngx-components/core/select-modal/select-modal.module.ts","ng://@c8y/ngx-components/core/select/select.component.ts","ng://@c8y/ngx-components/core/select/typeahead.component.ts","ng://@c8y/ngx-components/core/select/select.module.ts","ng://@c8y/ngx-components/core/stepper/stepper-icon.directive.ts","ng://@c8y/ngx-components/core/stepper/stepper.component.ts","ng://@c8y/ngx-components/core/stepper/stepper-progress.component.ts","ng://@c8y/ngx-components/core/stepper/stepper-buttons.component.ts","ng://@c8y/ngx-components/core/stepper/stepper.module.ts","ng://@c8y/ngx-components/core/date-picker/date-picker.component.ts","ng://@c8y/ngx-components/core/date-picker/date-picker.module.ts","ng://@c8y/ngx-components/core/core.module.ts","ng://@c8y/ngx-components/core/router/router-tabs.resolver.ts","ng://@c8y/ngx-components/core/router/view-context.service.ts","ng://@c8y/ngx-components/core/router/context-route.service.ts","ng://@c8y/ngx-components/core/router/router.service.ts","ng://@c8y/ngx-components/core/router/context-route.component.ts","ng://@c8y/ngx-components/api/api.service.ts","ng://@c8y/ngx-components/api/data.module.ts","ng://@c8y/ngx-components/core/router/context-route.guard.ts","ng://@c8y/ngx-components/core/router/empty.component.ts","ng://@c8y/ngx-components/core/router/router.module.ts","ng://@c8y/ngx-components/core/quicklink/quick-link.component.ts","ng://@c8y/ngx-components/core/quicklink/quick-link.module.ts","ng://@c8y/ngx-components/core/realtime/realtime.service.ts","ng://@c8y/ngx-components/core/realtime/operation-bulk-realtime.service.ts","ng://@c8y/ngx-components/core/realtime/realtime.model.ts","ng://@c8y/ngx-components/core/common/memoize.decorator.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","ar","error","__spread","concat","fromTrigger","router","refresh","factories","events","pipe","filter","evt","NavigationEnd","merge","startWith","switchMap","fromFactories","withFirstEmpty","isArray","of","defer","factoryObservables","resolveInjectedFactories","map","factoryResult","observable","isObservable","forceObservable","from","withEmptyFirst","race","item","toObservable","isFunction","get","getActivatedRoute","combineLatest","results","sortByPriority","flatten","stateToFactory","componentsState","components$","componentSet","items","sortBy","routerState","root","route","firstChild","StateService","mappedProperty","state$","distinctUntilChanged","emitNewState","state","HOOK_ACTION_BAR","InjectionToken","ActionBarService","_super","injector","_this","refreshTrigger","Subject","BehaviorSubject","Set","items$","shareReplay","tslib_1.__extends","add","remove","delete","Injector","Router","Injectable","providedIn","HOOK_ACTION","ActionService","gettext","str","AlertService","MAX_ALERTS","ALERT_TIMEOUT","alert","addAlert","addByText","type","txt","detailedData","text","list","changeAlerts","areSame","update","fieldsToUpdate","removeLastDanger","firstDangerAlarm","reverse","find","_a","alarm","saveSuccess","savedObject","createSuccess","createdObject","clearAll","success","danger","info","warning","addServerFailure","data","res","message","exceptionMessage","hasRelevantMessage","status","statusText","url","alert1","alert2","onClose","onDetail","newAlerts","Error","hideAutomaticallyIfNeeded","removeOldestIfMax","isSuccess","noDetails","alertTimeout","timeout","setTimeout","firstRemoved","slice","ApplicationOptions","HOOK_OPTIONS","OptionsService","options","systemOptionsService","tenantOptionService","setupOptions","optionKey","defaultValue","camelCase","set","getSupportUrl","isUndefined","supportUrl","getTenantOption","_b","getActivateSupportUser","getSystemOption","category","getOptionFromService","forEach","optionMap","keys","service","detail","parseOptionRawValue","rawValue","JSON","parse","Optional","Inject","args","SystemOptionsService","TenantOptionsService","tslib_1.__param","AppStateService","applicationService","apiService","fetchClient","app","name","contextPath","getCurrentContextPath","lang","langs","getLangs","langsDetail","languages","loginOptions","activateSupportUserAvailable","undefined","versions","backend","ui","ngx","hidePowered","isLoading","showRightDrawer","rightDrawer","loginExtraLink","newsletter","currentSupportUserName","currentUser","currentTenant","calls","test","phase","scan","count","subscribe","assignApplicationKeyToDefaultHeaders","isDevMode","defaultHeaders","X-Cumulocity-Application-Key","k","version","ng1","loadManifest","application","manifest","loadDefaultOptions","isApplicationAvailable","listByUser","pageSize","some","setUser","userInfo","supportUserName","user","match","window","location","pathname","_d","_c","showIncompatibleVersionsError","ex","uiVersion","backendVersion","uiVersionArray","replace","split","Number","beVersionArray","multiplier","Math","pow","ceil","log10","max","sumReducer","acc","cur","calculateVersionMapper","curr","idx","reduce","errorContent","console","log","ApplicationService","ApiService","FetchClient","NavigatorNode","children","parents","routerLinkExact","open","hidden","draggable","droppable","dragged","draggedHover","confirm","_priority","snakeCase","childrenPriorities","priority","openOnStart","node","indexOf","updateChildren","ix","pix","splice","updateHidden","predicate","compareLabel_1","toLocaleLowerCase","toLowerCase","matches","found","child","empty","click","drop","$event","stopPropagation","clearTimeout","expandDragTimeout","dragStart","dataTransfer","setData","dragEnd","clearData","path","dragEnter","preventDefault","expand","dragLeave","expander","traverse","callback","destroy","sort","a","NavigatorNodeRoot","addRoot","nodeData","localParent","parent","createNode","HOOK_NAVIGATOR_NODES","NavigatorService","firstUrl","rootNode","nodes","noParent","withParent","sortedNodes","openOnFirstUrl","isActive","HeaderService","navigatorService","hasItemsInNavigator$","title","nav","header$","header","navigatorOpen$","hasItems","titleReference","document","querySelector","elementRef","originalValue","innerText","hideNavigator","documentElement","clientWidth","largeWidth","navigatorHiddenOnStartup","toggleNavigator","closeNavigator","configNavigator","config","changeTitle","newTitle","changePageTitle","verifyIfNavOpen","debounceTime","shouldToggle","shouldShowBreadcrumbs","breadcrumbs","HOOK_TABS","TabsService","translateService","tabs","prepareTabs","orientation$","firstTabWithDefinedOrientation","tab","orientation","tabsHorizontal","sortTabs","template","ViewContainerRef","index","self","findIndex","priorityOrder","aTranslatedLabel","instant","bTranslatedLabel","translatedLabelOrder","localeCompare","Boolean","first","TranslateService","BootstrapComponent","navigator","actionBar","headerService","noAppsMargin$","hiddenOnStartup","tabsOrientation","Component","selector","HOOK_BREADCRUMB","BreadcrumbService","sortByPreferredPath","selectPreferredByPath","preferredPath","bc","LANGUAGES","LOCALE_PATH","HOOK_PATTERN_MESSAGES","PatternMessagesService","patterns","pipes","absoluteDate","date","formatDate","currentLang","translate","each","pattern","translation","translateWithPatterns","translatedMessage","patternCfg","globalMatch","globalRegExp","RegExp","exec","localMatch","placeholderValues","mapValues","placeholders","placeholder","expr","capture","replacement","translateWithParams","params","defaultLang","compiler","translations","store","defaultTranslations","originalKey","interpolateParams","noPatternMessages","pipeRegex","paramName","pipeName","compile","MissingTranslationCustomHandler","parser","patternMessagesService","cache","handle","messageKey","getFromCache","patternMessageTranslation","getPatternMessageTranslation","interpolate","addToCache","getCacheKey","stringify","TranslateParser","bulkOperationAuditLogTextPlaceholders","updatesList","status='(.+?)'","generalStatus='(.+?)'","generalStatus","progress='(.+?)'","progress","note=(.+?)","note","MESSAGES","^Access is denied$","^Alarm created$","^Alarm updated$","^API is not available with the new domain$","^Application with given name already exist$","^Application with id (.+?) is already assigned to the tenant (.+?)$","tenant","^Apply software changes: (.+?)\\.?$","softwareChanges","install \"(.+?)\" \\(version: (.+?)\\)","softwareName","softwareVersion","install \"([^\"]+)\"(?! \\(version: .+?\\))","delete \"(.+?)\" \\(version: (.+?)\\)","delete \"([^\"]+)\"(?! \\(version: .+?\\))","^Assign device profile (.+?) to device (.+?)$","profileName","deviceName","^(.+)pplication for tenant (.+) with properties \\( (.+?) \\) already exists$","valuesList","^Authentication failed! : User account is locked$","^Availability monitoring record$","^Can not activate a certificate which is either expired or not yet valid$","^Cannot add certificate - certificate with (.+?) fingerprint already exists. : Certificate with (.+?) fingerprint already exists.","fingerprint","^Cannot change password. : Provided token does not exist.$","^Cannot deploy module (.*)$","errorMessage","^Cannot deploy module (.+?)! : Compilation failed in module '(.+?)' in expression '(.+?)' : Incorrect syntax near '(.+?)' at line (\\d+) column (\\d+) \\[([\\S\\s]+?)\\]$","moduleName","expression","incorrectExpression","line","column","^Cannot deploy module (.+?)! : Compilation failed in module '(.+?)' in expression '(.+?)' : Incorrect syntax near '(.+?)' at line (\\d+) column (\\d+) near reserved keyword '(.+?)' \\[([\\S\\s]+?)\\]$","keyword","^Cannot deploy module (.+?)! : Compilation failed in module '(.+?)' in expression '(.+?)' : Incorrect syntax near '(.+?)' at line (\\d+) column (\\d+), please check the where clause \\[([\\S\\s]+?)\\]$","^Cannot deploy module (.+?)! : Deployment failed in module '(.+?)' in expression '(.+?)' : Exception compiling script '(.+?)' of dialect '(.+?)': missing (.+?) before statement \\((.+?)\\) \\[([\\S\\s]+?)\\]$","scriptName","scriptDialect","missingSyntax","affectedStatement","^Cannot execute bulk operation on empty group. Group with id='(\\d+?)' doesn't have child assets.$","groupId","^Cannot execute bulk operation on empty group. DynamicGroup with id='(\\d+?)' doesn't have child assets$","^Cannot parse X509 certificate. : Could not parse certificate: (.+?)$","failureReason","^Cannot reschedule bulk operation. All its operations are successful$","^Cannot reset user password : Cannot find user with such email.$","^Cannot update/delete application binary via this endpoint$","^Can't delete user because it is used by another managed object$","^Cep module created$","^Cep module updated$","^Cep module deleted$","^Cep module \"(.+?)\" created$","^Cep module \"(.+?)\" updated$","^Cep module \"(.+?)\" deleted$","^Command state is invalid: (.+)$","violations","(\\w+?) - may not be null","field","^Could not connect to endpoint (.+)\\. Could not verify `(.+)` host key with fingerprint `(.+)` for `(.+)` on port (.+)\\. If you expected that key, please remove the previous one from configuration to allow for connection\\.$","endpointName","keyType","host","port","^Could not login to ssh server on endpoint \"(.+)\"\\. Provided credential for user \"(.+)\" is incorrect\\.$","userName","^Could not save object remoteAccessUpdate: (.+)$","errorMessages","Could not recognize host-key format","Could not recognize key-pair format","^Could not update user. : Error persisting user (.+?)!$","username","ˆCreate bulk operation$","^Create bulk operation: (.+)$","^Creation ramp must be greater than (\\d+?)$","minSeconds","^Created container$","^Created pod: (.+)$","imageName","^CSV file contained empty dataset$","^Cycle detected for route (.+?)!$","^Data broker processing is currently overloaded and may stop forwarding your data\\. Please contact support\\.$","^Data broker processing is not able to connect do destination tenant, thus data forwarding is not working\\. Please contact support\\.$","^Delete bulk operation$","^Delete bulk operation: (.+)$","^Device id '(.+?)' contains '(.+?)' character which is not permitted.$","deviceId","invalidCharacter","^Device name: '(.+?)', alarm text: '(.+?)'$","alarmText","^Display name$","^Domain name in uploaded certificate differs from the one in use$","^Domain name is already in use by another tenant!$","^Duplicated connector for instanceUrl (.+?)!$","targetUrl","^Duplicated connector for name (.+?)!$","^Entry is outside of the target dir: (.+)$","^Error during password validation. : Password must have at least (\\d+?) characters and no more than (\\d+?) and must contain only Latin1 characters.$","minCharactersCount","maxCharactersCount","^Error during password validation. : Your password has been used already. Choose another.$","^Error in statement (.+?):(.+?)! : Incorrect syntax near '(.+?)' near reserved keyword '(.+?)' \\[([\\S\\s]+?)\\]$","statementNumber","^External id not found; external id = ID \\[type=(.+?), value=(.+?)\\]$","^Error occurred when trying to find an Application for id ID (.+) : Could not find application by ID (\\d+)$","applicationId","^Http status code: 404\n{error=\"options/Not Found\",message=\"Unable to find option by given key: sigfox-agent/provider.token\",info=\"https://www.cumulocity.com/guides/reference-guide/#error_reporting\",details=\"null\"}","^Failed to delete application.  : Cannot remove application assigned to other tenants.$","^Failed to extract certificate from PKCS12$","^Failed to update domain at the platform$","^Finding device data from database failed : No managedObject for id '(.+?)'!$","^Following mandatory fields should be included: (.+?)$","fields","^Global Role updated$","^Global Role (.+?) updated$","^Global Role (.+?) updated: (.+)$","applications \\[([^\\]]+?)\\] added","applications \\[([^\\]]+?)\\] removed","roles \\[([^\\]]+?)\\] added","roles \\[([^\\]]+?)\\] removed","^Global Roles$","^Operation updated: (.+)$","description='(.+?)'","description","device name='(.+?)'","failure reason='(.+?)'","^ID \\[type=(.+?), value=(.+?)\\] was already bound to different Global ID.$","^Invalid credentials! : Bad credentials$","^Invalid credentials! : No phone number provided$","^Inventory Role removed$","^Inventory Role (.+?) removed","^Inventory Role updated$","^Inventory Role (.+?) updated","^I/O error: Connection refused; nested exception is Connection refused : Connection refused","^I/O error: Read timed out; nested exception is Read timed out : Read timed out","^Log file requested$","^Managed object deleted$","^Managed object \"(.+?)\" deleted$","^Maximum file size exceeded$","^Message with ID (.+?) doesn't exist in smart rest template (.+?)$","messageId","templateId","^NewDeviceRequest for id = (.+?) already exists.$","id","^No communication with device since (.+?)$","timestamp","^No data received from device within required interval.$","^No LoRa provider settings are found. Please configure the connectivity settings.$","^Not within any context!$","^Maximum age cannot be bigger than 10 years.$","^Microservice application name incorrect. Please use only lower-case letters, digits and dashes. Maximum length is (\\d+) characters.$","maxLength","^Microservice not available.*$","^Operation created$","^Operation updated$","^Operation created: status='(.+?)'.","^Option created$","^Option \"(.+?)\" created$","option","^Option deleted$","^Option \"(.+?)\" deleted$","^Owner field error. : Cannot introduce cyclic dependency.","^Password change is temporary blocked.$","^Password cipher does not match","^Platform application cannot be added to, nor removed from any tenant.$","^Private key must be provided in KEY_PAIR credentials$","^Private key cipher does not match","^Protocol \"(.+?)\" does not support \"(.+?)\" credentials type$","protocol","credentialsType","^pulling image \"(.+)\"$","^Real-time event processing is currently overloaded and may stop processing your events\\. Please contact support\\.$","^Resource ID \\[type=com_cumulocity_model_idtype_GId, value=(.+?)\\] for this request not found.$","^Retrieve configuration snapshot from device (.+?)","^Retrieve (.+?) configuration snapshot from device (.+?)","configurationType","^Scaled up replica set (.+) to (\\d+)$","replicaSetName","scaleNumber","^Send configuration snapshot (.+?) of configuration type (.+?) to device (.+?)","snapshotName","^Send configuration snapshot (.+?) to device (.+?)","^Simulator state is invalid: (.+)$","(\\w+?) - must be less than or equal to (\\d+)","maxValue","(\\w+?) - should not contain null values","^Smart rest template (.+?) doesn't exist$","^Smart rule created$","^Smart rule updated$","^Smart rule enabled$","^Smart rule disabled$","^Smart rule deleted$","^Smart rule \"(.+?)\" created$","^Smart rule \"(.+?)\" updated$","^Smart rule \"(.+?)\" enabled$","^Smart rule \"(.+?)\" disabled$","^Smart rule \"(.+?)\" deleted$","^Started container$","^Successfully assigned (.+) to (.+)$","address","^Successfully pulled image \"(.+)\"$","^Tenant creation failed. : Tenant with given id already exists.$","^Tenant id cannot be a reserved sql keyword \"(.+?)\".$","tenantId","^Tenant \"(.+?)\" activated$","^Tenant (.+?) has sub-tenants, please remove them first!$","^Tenant activated$","^Tenant \"(.+?)\" created$","^Tenant created$","^Tenant \"(.+?)\" deleted$","^Tenant deleted$","^Tenant \"(.+?)\" suspended$","^Tenant suspended$","^Tenant \"(.+?)\" updated: (.+?)$","properties","^Tenant updated$","^Too Many Requests$","^User alias equals username '(.+)'$","^User created$","^User (.+?) created$","^User deleted$","^User (.+?) deleted$","^User updated$","^User (.+?) updated: (.+)$","delegatedBy='(.+?)'","delegate","owner='(.+?)'","owner","inventory assignment \\[(.+?)\\] added","inventoryAssignment","inventory assignment \\[(.+?)\\] removed","applications \\[(.+?)\\] added$","applicationsList","applications \\[(.+?)\\] removed$","global roles \\[(.+?)\\] added$","globalRolesList","global roles \\[(.+?)\\] removed$","^User with username '(.+?)' already exists! : Duplicated: (.+?)$","^User with username or alias '(.+)' already exists! : Duplicated: (.+)$","usernameOrAlias","^User with email '(.+?)' already exists! : Duplicated: (.+?)$","email","^unable to find option with given key (.+?) : Could not find entity Option by ID (.+?)!$","^unable to find option with given key (.+?) : There is no system property for key (.+?)$","^Write failed with error code 16733 and error message 'trying to index text where term list is too big, max is 4mb _id: \"(.+?)\"'$","^Write failed with error code 17280 and error message 'WiredTigerIndex::insert: key too large to index, failing (.+?) { : \"(.+?)\" }'$","^You have reached devices limit. No more devices can be registered.$","^(.+) succeeded for volume \"(.+)\"","operation","volume","^Exception on tenant (.+) in statement '(.+)': Invocation exception when invoking method '(.+)' of class '(.+)' passing parameters \\[(.+)\\] for statement '(.+)': (.+) : (.+)$","methodName","classPath","parameters","statement","exceptionType","^No nodes are available that match all of the predicates: (.+).$","predicates","^Readiness probe failed: (.+) (.+): (.+): request canceled while waiting for connection \\(Client.Timeout exceeded while awaiting headers\\)$","requestMethod","uri","^Liveness probe failed: (.+) (.+): (.+): request canceled while waiting for connection \\(Client.Timeout exceeded while awaiting headers\\)$","^Error syncing pod$","^Failed create pod sandbox.$","^Exception on tenant (.+) in statement '(.+)': Http status code: (\\d+) \\{error=\"alarm/Unprocessable Entity\",message=\"(.+)\",info=\"https://www.cumulocity.com/guides/reference-guide/#error_reporting\",details=\"null\"\\}$","httpStatusCode","^User '(.+)' is managed by a remote identity management service defined by an administrator, direct update is forbidden$","^Added new child device to \"(.+)\" \\(ID: (.+)\\).$","parentDeviceName","parentDeviceId","^Updated child device of \"(.+)\" \\(ID: (.+)\\).$","^Added child device \"(.+)\" \\(ID: (.+)\\).$","^Removed child device \"(.+)\" \\(ID: (.+)\\).$","^Change value of \"(.+)\" to (.+) (.+).$","unit","^Change value of \"(.+)\" to (.+).$","^Change status of \"(.+)\" to \"(.+)\".$","^Send message \"(.+)\".$","^Close relay (.+).$","number","^Open relay (.+).$","^Change trace status to (.+).$","^Change relay status to (.+).$","^Closing relay (.+).$","^Opening relay (.+).$","^Update bulk operation$","^Update bulk operation: (.+)$","^Update firmware to: \"?(.+?)\"? \\(version: (.+)\\)\\.?$","^Update firmware to: \"?(.+?)\"?\\.?$","^Update configuration to (.+).$","^Apply device profile: (.+).?$","^Execute generic command: (.+).?$","command","^Failed to refresh application. : Cannot refresh non local-hosted application.$","^Failed to refresh application. : Cannot refresh application without active version id.$","^Scaled down replica set (.+) to (\\d+)$","^Deleted pod: (.+)$","^Container image \"(.+)\" already present on machine$","^Error updating tenant! Cannot insert second configuration for Password code grant internal/Bad Request$","TranslateCustomLoader","http","optionsService","getTranslation","langsDetails","catchError","HttpClient","TranslateParserCustom","getValue","translated","TranslateDefaultParser","require","angularLocalesLanguageMap","en","en-EN","translateLoaderFactory","httpClient","localePath","localePathFactory","languagesFactory","localeId","appStateService","getAngularLocalesLanguageString","toString","language","I18nModule","providers","provide","LOCALE_ID","useFactory","deps","useValue","multi","TranslateLoader","TranslateCompiler","useClass","TranslateFakeCompiler","MissingTranslationHandler","TranslateStore","NgxTranslateService","USE_STORE","USE_DEFAULT_LANG","USE_EXTEND","DEFAULT_LANGUAGE","forRoot","ngModule","I18nModule_1","NgModule","exports","TranslateModule","imports","HttpClientModule","Map","loadLocale","moduleLang","has","fetch","src","module","moduleSrc","l","trim","join","Function","fn","catch","Status","ngxTranslate","DEFAULT_SEPARATOR","queryStringLang","saveInLocalStorage","localStorage","getItem","TranslateService_1","SAVE_LANGUAGE_KEY","switchToLanguage","loadLocales","lessSpecificModuleLang","shift","e_1","setDefaultLang","use","registerLocaleData","default","firstSupportedLanguage","localStorageLang","browserLangs","isSupported","convertToLanguageCodePO","sep","langMain","langSpecific","getNativeLanguage","nativeName","setItem","includes","getQueryParameter","property","propertyLanguages","queryKey","search","substring","pair","DatePipe","locale","transform","format","timezone","valueInBounds","valueBefore","valueBeyond","isNaN","min","Pipe","NgDatePipe","LoadMoreComponent","element","useIntersection","class","maxIterations","onLoad","EventEmitter","counter","showNoMoreDataHint","LOAD_SAME_PAGE_THRESHOLD","hasMore","paging","totalPages","currentPage","nextPage","ngAfterContentInit","intersectionObserver","IntersectionObserver","event","buttonInView","container","nativeElement","observe","shouldShowNoMoreDataHint","ngOnDestroy","disconnect","loadMore","emit","intersectionLoading","loadUntilIntersected","getLoadingThreshold","shouldSwitchMode","noMoreDataHint","isIntersecting","ElementRef","tslib_1.__decorate","Input","Output","HostBinding","ForOfDirective","tpl","vcr","componentFactoryResolver","cachedData","loadMoreMode","dataPipe","tap","unsubscribe$","fetchData","obs$","notFoundTemplate","source","realtime","comparator","ngOnInit","handleRealtime","ngOnChanges","changes","c8yForPipe","c8yForOf","unsubscribePaging","reRender_1","hasMoreData","pagingSub","render","complete","onCreate$","takeUntil","insert","onUpdate$","onDelete$","coerceNumberProperty","reRender","clear","context","$implicit","createEmbeddedView","shouldUseLoadMoreButton","createLoadMoreButtonComponent","append","loadMoreData","componentFactory","resolveComponentFactory","instance","createComponent","checkForDuplicates","comparisionResult","view","itemB","viewRef","updatedItem","forMatchingEmbeddedViewRef","markForCheck","idToRemove","NaN","cached","unsubscribe","TemplateRef","ComponentFactoryResolver","Directive","HumanizeAppNamePipe","internalApps","administration","cockpit","devicemanagement","appNameOrApp","appName","getAppName","isPublicApp","getFirstDefined","values","negate","HumanizePipe","humanize","upperFirst","HumanizePipe_1","IconDirective","el","renderer","c8yMatch","klasses","currentClasses","icon","updateIcon","isC8y","getClasses","classes","_icon","newClasses","klass","removeClass","addClass","Renderer2","ICONS","MapFunctionPipe","mappingFunction","OutletDirective","viewContainer","resolver","_element","Element","removeChild","parentElement","parent_1","parentNode","insertBefore","factory","component","_parent","ProgressBarComponent","ShortenUserNamePipe","firstName","lastName","parsedFirstName","substr","parsedLastName","statusIcons","SUCCESS","WARNING","DANGER","INFO","statusClasses","statusAlert","operationStatusIcons","OperationStatus","PENDING","EXECUTING","SUCCESSFUL","FAILED","operationStatusClasses","_e","SingleOperationComponent","UserPreferencesStorageLocal","LOCAL_STORAGE_KEY","jsonStore","saveJsonStore","UserPreferencesStorageInventory","inventory","TYPE","fragmentType","updateMo","out","UserPreferencesService","appState","storage","local","getForUser","setForUser","rawKey","getRawKey","getStorage","hasAllRoles","UserService","InventoryService","initializeServices","userPreferences","queryStringLanguage","firstLanguage","u","ICON_LIST","CommonModule","DataModule","C8Y_APP","APP_INITIALIZER","CommonModule_1","NgCommonModule","TooltipModule","declarations","entryComponents","LoginViews","ActionBarItemComponent","actionBarService","placement","itemClass","ngAfterViewInit","viewInitTimeout","ViewChild","static","ActionBarComponent","navigatorOpen","hasTabs","isTabsHorizontal","isPageToolbarExpanded","uiActionBar","getSortedItems","byPriority","ActionBarModule","BsDropdownModule","CollapseModule","RouterModule","forChild","ActionOutletComponent","getByPriority","invoke","action","ActionComponent","actionService","disabled","ActionModule","AlertDetailsComponent","AlertOutletComponent","position","alertService","detailDisplayedAlert","isStatic","getClass","close","showDetails","mode","setDetailsContent","isTemplateRef","contents","hasDetails","closeDetails","isDetailsShow","content","Attribute","AlertTextComponent","AlertComponent","containDetailsComponent","ContentChild","AlertModule","AuditLogComponent","audit","withTotalPages","records","AuditService","AuditLogModule","FilteringActionType","LoginService","client","basicAuth","cookieAuth","api","tenantLoginOptionsService","rememberMe","TOKEN_KEY","TFATOKEN_KEY","OAUTH2_INTERNAL_TYPE","isFirstLogin","GREEN_MIN_LENGTH_DEFAULT","ERROR_MESSAGES","minlength","password_missmatch","maxlength","password_strength","remote_error","password_change","password_reset_token_expired","tfa_pin_invalid","pattern_phonenumber","pattern_newPassword","international_number_required","phone_number_error","pinAlreadySent","passwordConfirm","tfaExpired","SUCCESS_MESSAGES","password_changed","password_reset_requested","resend_sms","send_sms","passwordStrengthSetting","enforcePasswordStrength","greenMinLength","localhostRegExp","localhostIpRegExp","showTenantRegExp","autoLogout","initLoginOptions","getTenant","isOAuth2","grantType","loginMode","oauthOptions","redirectToOauth","initRequest","fullPath","_platformLocation","href","redirectUrl","encodeURIComponent","originUriParam","errorPattern","isTfaExpired","hookResponse","response","EMPTY","apiCall","willLogout","json","clone","logout","getGreenMinLength","loginOption","getLoginOption","getEnforcePasswordStrength","cleanMessages","addSuccessMessage","successKey","successMessage","getAuthStrategy","authStrategy","token","getStoredToken","tfa","getStoredTfaToken","setCredentials","useBasicAuth","credentials","login","auth","setAuth","current","tenantRes","switchLoginMode","userRes","verifyAppAccess","getSupportUserName","storeBasicAuthToken","authFulfilled","isPasswordGrantLogin","URLSearchParams","grant_type","password","tfa_code","urlParams","method","headers","content-type","ok","cleanLocalStorage","isSupportUser","showTenant","isLocal","isShowTenant","reload","resData","reset","tslib_1.__read","redirect","cleanSessionStorage","all","saveTFAToken","tfaToken","ex_3","updateCredentials","newCredentials","hostname","saveToken","sessionStorage","removeItem","getStoredCredentials","decodeToken","decodeURIComponent","escape","atob","BasicAuth","CookieAuth","TenantService","Realtime","TenantLoginOptionsService","LocationStrategy","PasswordConfirmModalComponent","loginService","passwordConfirmedEmitter","loading","userId","strategy","createNewClient","baseUrl","emitSuccessAndClose","cancel","modal","_dismiss","Client","PasswordService","modalService","GREEN","colorName","color","passwordStrength","PasswordStrength","YELLOW","RED","confirmPassword","show","take","hasLowerCase","hasUpperCase","hasNumbers","hasSpecialChars","getStrengthColor","BsModalService","PasswordCheckListComponent","passwordStrengthChecker","minGreenLength","checklist","check","contextualColor","onPasswordChange","requirement","checked","PasswordConfirm","validate","abControl","controlToCompareWith","PasswordConfirm_1","NG_VALIDATORS","useExisting","PasswordStrengthCheckerService","PasswordStrengthComponent","passwordStrengthCheckerService","strength","model","NewPasswordComponent","systemOptions","changePassword","loadEnforcePasswordStrength","newPasswordChanged","newPassword","toggleChangePassword","viewProviders","ControlContainer","NgForm","ConfirmModalComponent","_labels","dismiss","hide","labels","BsModalRef","ModalComponent","onDismiss","customFooter","_close","onEnterKeyDown","hasOnlyOneButton","isEmpty","isCancelClickable","isOkClickable","HostListener","ModalService","modalLabels","initialState","acknowledge","acknowledgeLabel","PopoverConfirmComponent","buttons","isOpen","containerClass","outsideClick","buttonStatus","handleOutsideClick","PopoverDirective","ModalModule","BsModalModule","PopoverModule","PhoneValidationDirective","control","validateInternationalPhoneNumber","internationalPhoneNumber","numberValid","phoneNumber","parsePhoneNumberFromString","isValid","setValue","emitEvent","emitModelToViewChange","PhoneValidationDirective_1","ValidationPattern","rules","messages","domain","loginAlias","opcuaBrowsePath","required","urlSegment","groupName","ip","DefaultValidationDirective","c8yDefaultValidation","validation","valid","minLength","DefaultValidationDirective_1","MinValidationDirective","parsedMin","parseInt","MinValidationDirective_1","MaxValidationDirective","parsedMax","MaxValidationDirective_1","MessageDirective","MessagesComponent","defaults","messageMap","customMessages","directive","changVisibility","toMessage","ContentChildren","FormGroupComponent","hasError","hasWarning","hasSuccess","novalidation","VALIDATION_DEBOUNCE_MS","initNgModel","valueAccessor","registerOnTouched","dirty","markAsDirty","updateValueAndValidity","onlySelf","subscription","valueChanges","statusChanges","debounce","timer","customErrorMessage","errors","NgModel","InputGroupListComponent","plus","minus","onRemove","onAdd","InputGroupListContainerDirective","listProjections","last","elements","JsonValidationPrettifierDirective","ngCtrl","invalidJSON","debounceTimeInMs","abstractCtrl","clearValidationMessage","validateInputAndPrettify","closed","validJsonObject","pretty","setErrorAndValidationMessage","setErrors","invalidBodyTemplate","NgControl","TextAreaRowHeightDirective","elem","rows","minHeightPerRow","convertedValue","heightPerRow","setHeight","setStyle","RequiredInputPlaceholderDirective","translationService","shouldSkipRequiredHint","closest","ngAfterContentChecked","req","updatePlaceholder","getTextForPlaceholder","requiredText","requiredTextIndex","lastIndexOf","setAttribute","IpRangeInputListComponent","ipRangeList","cidr","FilterInputComponent","onSearch","filterChange$","filterTerm","CARRIAGE_RETURN_KEY","CARRIAGE_RETURN_CODE","code","keyCode","FormsModule","NgFormsModule","TotpChallengeComponent","users","verify","onSuccess","verifyCode","verifyTotpCode","SmsChallengeComponent","onCancel","smsToken","resendTfa","verifyTFACode","useOAuthInternal","verifyCodeWithOauth","verifyCodeWithBasicAuth","resendTFASms","e_2","loginWithTFA","e_3","e_4","TotpSetupComponent","totpSecret","secretQrUrl","rawSecret","generateTotpSecret","ex_1","ProvidePhoneNumberComponent","userService","onChangeView","requestInProgress","sendTfa","sendTFASms","save","savePhoneNumber","SmsChallenge","AuthenticationModule","BreadcrumbItemComponent","BreadcrumbOutletComponent","showAll","normalizePath","BreadcrumbComponent","breadcrumbService","contentChildItems","toArray","BreadcrumbModule","SearchOutletComponent","openSearch","focusInputBox","closeDropdown","dropdown","verifyNotEmpty","term","elementToFocus","focus","HOOK_SEARCH","SearchService","SearchComponent","searchService","HighlightComponent","domSanitizer","elementClass","highlightedText","sanitize","SecurityContext","HTML","DomSanitizer","read","SearchResultEmptyComponent","NO_RESULT_FOUND","msg","SearchModule","UserMenuService","userMenuItems","UserMenuItemComponent","onClick","UserEditModalComponent","onHide","reason","changedLang","updateUserInAppState","onLanguage","updateAndClose","updateCurrent","persistLanguage","currentUserResult","UserTotpSetupComponent","totpSetupVerified","activateTotp","UserEditComponent","passwordService","modalConfirmService","bsModalService","onUser","userHasActiveTotp","userCanSetupTotp","isPhoneRequired","_user","userIsExternal","customProperties","userOrigin","twoFactorAuthenticationEnabled","initializeTotpSettings","setupTotp","saveAfterPasswordConfirmation","onNewPasswordChanged","canUserSetupTotp","getActivityTotp","totpActivity","tfaStrategy","confirmed","UserMenuOutletComponent","tenantService","copyIt","copied","handler","handleEvent","clipboardData","addEventListener","execCommand","removeEventListener","editUser","activateSupportAccess","companyName","successMsg","enableSupportUser","refreshCurrentUser","deactivateSupportAccess","textWithCompany","textWithoutCompany","hasRole","isTenantAdmin","disableSupportUser","UserTotpRevokeComponent","revokeEmitter","revoke","totpRevokeSecret","UserModule","AppIconComponent","appIcon","showIcon","iconClass","appNameAbbr","iconStyle","c8yAppIconsList","analyticsbuilder","analytics-builder","apamaepl","white","defaultIconStyle","background-repeat","background-size","height","width","iconFromAppDefinition","findStaticIcon","iconUrl","iconUrlFromAppDefinition","background-image","appContextPathNormalized","cp","iconClassProperty","iconUrlProperty","AppSwitcherComponent","applications","listAppsForUser","getHref","apps","orderApps","filterApps","filterVisible","filterCloud","filterDuplicates","visibleApplicationTypes","noAppSwitcher","hideCloudApps","filterFn","cloud","oneCloudApps","otherApp","orderBy","documentationItems","HOOK_DOCS","DocsService","getBaseUrl","getUserGuideLink","link","getLink","templateStr","toPromise","links","noDefault","excludeDefault","staticLinks","lnk","partialLink","prefixWithSlash","HeaderBarComponent","userMenuService","docs","canToggle$","appState$","drawerOpen","headerOpen","toggle","TitleOutletComponent","zone","title$","runOutsideAngular","NgZone","TitleComponent","NavigatorItemComponent","iconTemplate","NavigatorIconComponent","NavigatorNodeComponent","nodeClick","childrenNodes","expandParentIfActive","expandCollapse","routerLinkActive","recursive","forNode","updateIconTemplate","updateIconComponent","componentType","iconComponent","iconSlot","iconComponentFactory","RouterLinkActive","ViewChildren","NavigatorNodeComponent_1","NavigatorOutletComponent","collapseNavigator","trackByPathOrLabel","NavigatorModule","RightDrawerComponent","quickLinks","helpAndSupport","HeaderModule","ChangePasswordComponent","passwordPattern","newPasswordConfirm","emailReadOnly","TOKEN_PARAM","EMAIL_PARAM","passwordStrengthColor","resetPassword","Credentials","CredentialsComponent","LOGIN_VIEWS","showLoginForm","showBasicAuth","PASSWORD_RESET_HEADER_NAME","NO_PHONE_HEADER_NAME","visibleOnLoginPage","handlePasswordReset","handleSmsChallenge","handleTotpChallenge","handleNoPhoneNumberProvided","ChangePassword","TotpSetup","TotpChallenge","ProvidePhoneNumber","LoginComponent","currentView","None","displayAlerts","getResetPasswordToken","loginAutomatically","handleLoginTemplate","onkeyup","setView","RecoverPasswordComponent","sendPasswordResetMail","TotpAuthComponent","onTotpSuccess","isSetup","LoginModule","LoginModule_1","C8yFormsModule","TabComponent","TabsOutletComponent","showLeft","showRight","scrollSubscription","scrollSubscribe","navigateTo","navigate","scroll","direction","getDimensions","widthScroll","targetScroll","scrollLeft","unlisten","fromEvent","fromEventPattern","listen","updateScroll","elTabs","tabsContainer","scrollWidth","TabsModule","CookieBannerComponent","storageKey","acceptValue","settings","cookieBannerText","showBanner","acceptCookies","BootstrapModule","HOOK_COMPONENTS","HOOK_COMPONENT","DynamicComponentService","getComponentsViaDeprecatedHook","cmps","cmp","componentsViaDeprecatedHook","__MODE__","warn","getById$","size","mergeMap","DynamicComponentComponent","dynamicComponentService","notFoundError","expandErrorDetails","callLifeCycleHooks","callOnBeforeSaveHook","componentId","loadComponent","dynamicComponent","configComponent","componentRef","hook","onBeforeSave","DynamicComponentModule","DashboardChildActionComponent","DashboardChildTitleComponent","DashboardComponent","sanitizer","columns","gap","dashboardChange","lastRow","DEFAULT_ROW_SIZE","dashboardRect","calculateRowSize","bypassSecurityTrustStyle","rowSize","onResize","getLastRow","updateRectSize","widget","ele","getBoundingClientRect","emitChange","forwardRef","DashboardChildComponent","changeDetection","ChangeDetectionStrategy","OnPush","DashboardChildChange","childToChange","MIN_WIDTH","MIN_HEIGHT","PIXEL_SIZE_THRESHOLD","diffX","diffY","dashboard","dragSource","moved","move","getPixelSize","resizeDimension","setPixelSize","getDimensionSize","prev","dimension","setDimension","arrangePipe","getDimensionPosition","x","findFreeDimension","getCollided","collapseUpAll","w","ds","newPosition","collapseUp","arrangeAll","arrange","spacing","origin","dimensions","notIfColliding","columnSize","pxWidth","pxHeight","moveEvent","draggedElement","rect","left","top","pointerPosition","round","pointer","resizePosition","row","nextElementSibling","doesCollide","currentDimension","actions","isResize","isDragging","_pxWidth","_pxHeight","margin","isFrozen","changeStart","changeEnd","intersected","card","card-dashboard","on-resize","setDynamicDimension","intersectionObserver_1","childInView","resizeStarted","positioning","changeSubscription","resize$","dragStarted","drag$","observer","unobserve","WidgetsDashboardComponent","isDisabled","widgetMargin","translateWidgetTitle","defaultHeight","defaultWidth","allowFullscreen","canDelete","onAddWidget","onEditWidget","onDeleteWidget","onChangeDashboard","onEditDashboard","onDeleteDashboard","onFreeze","onChangeStart","onChangeEnd","toggleFullscreen","doc","fullScreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","ALLOW_KEYBOARD_INPUT","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","style","GuideHrefDirective","htmlAnchor","hasAttribute","c8yGuideHref","GuideDocsComponent","guide","baseHref","descendants","DocsModule","DashboardModule","DragDropModule","CellRendererDefDirective","HeaderCellRendererDefDirective","FilteringFormRendererDefDirective","ColumnDirective","ratiosByColumnTypes","numeric","text-short","text-long","GridDataSource","loadingSubject","dataSourceSubject","dataStatsSubject","filteredSize","currentPageSize","firstPageSize","dataSelectionSubject","filteredDataIds","resultListSubject","loading$","asObservable","data$","stats$","selection$","resultList$","connect","collectionViewer","loadData","pagination","searchText","serverSideDataCallback","selectable","selectionPrimaryKey","infiniteScroll","clientSideData$","initialData","transformedData","flow","doClientSideSearch","doClientSideFiltering","doClientSideSorting","doClientSidePagination","serverSideData$","selection","enabled","primaryKey","err","finalize","resolveValue","resolveFunction","normalizeNil","isNil","filterPredicate","propPaths","regexSearch","createRegexSearch","itemWithResolvedValues","pick","omitBy","cellValue","actives","sortOrder","sortingState","paths","orders","chunk","filterValue","escapeRegExpPattern","PushStatusLabels","SendStatusLabels","DataGridComponent","hostRef","cd","cfr","loadMoreItemsLabel","loadingItemsLabel","noMatchingItemsLabel","dataSource","filteringLabelsParams","filteredItemsCount","allItemsCount","paginationLabelParams","pageFirstItemIdx","pageLastItemIdx","itemsTotal","possiblePageSizes","minPossiblePageSize","displayOptions","striped","bordered","gridHeader","rowMouseOver","rowMouseLeave","rowClick","itemsSelect","columnNames","styles","tableCursor","gridTemplateColumns","gridInfiniteScrollColumn","searchText$","filteringApplied","totalPagesCount","Infinity","selectedItemIds","currentPageSelectionState","allSelected","allDeselected","builtInActionType","Edit","Delete","Export","resizeHandleMouseDown$","resizeHandleContainerMouseMove$","resizeHandleContainerMouseUp$","possiblePageSize","actionControls","bulkActionControls","currentPageEmpty","every","isItemSelected","stats","createLoadMoreComponent","updateFilteringLabelsParams","updatePaginationLabelParams","updateColumns","updateGridColumnsSize","thEls","thRefs","setupResizeHandle","trackByName","resolveCellValue","changeSortOrder","columnName","updateSorting","applyFilter","filteringModifier","updateFiltering","ApplyFilter","payload","resetFilter","ResetFilter","clearFilters","externalFilterQuery","updateFilteringApplied","isColumnFilteringApplied","filterable","updatePagination","itemsPerPage","page","recreateLoadMoreComponent","scrollToTop","loadNextPage","tslib_1.__assign","bind","getCellRendererSpec","_getCellRendererSpec","getHeaderCellRendererSpec","getFilteringFormRendererSpec","getColumnRenderer","filteringFormRendererComponent","setAllItemsSelected","selected","setItemsSelected","setAllItemsInCurrentPageSelected","itemIds","union","without","onColumnDrop","previousIndex","currentIndex","updateColumnNames","visible","gridTrackSize","specialColumn","sortable","positionFixed","tslib_1.__spread","withColumnDefaults","dataType","headerCSSClassName","cellCSSClassName","clearMouseHighlights","targetColumnName","headerBeingResized","requestAnimationFrame","wrapper","horizontalOffset","clientX","offsetLeft","startsWith","_parseInt","getSelection","removeAllRanges","columnRenderer","rendererTemplate","cellRendererComponent","headerCellRendererComponent","columnRenderers","loadMoreComponent","infiniteScrollContainer","loadNextLabel","loadingLabel","scrollContainer","scrollTop","ChangeDetectorRef","CdkHeaderCell","CellRendererComponent","spec","prevSpec","rendererType","Type","rendererInjector","CellRendererContext","ngDoCheck","FilteringFormRendererComponent","defaultRendererFilterText","FilteringFormRendererContext","DataGridModule","CdkTableModule","ReactiveFormsModule","C8YCommonModule","PaginationModule","deviceAvailabilityIconMap","sendData","AVAILABLE","UNAVAILABLE","UNKNOWN","NOT_MONITORED","CONNECTED","DISCONNECTED","MAINTENANCE","device","lastMessage","Date","tooltips","sendStatusConnected","ɵ0","sendStatusDisconnected","pushStatusConnected","pushStatusDisconnected","maintenance","ReadAsType","DeviceStatusComponent","_mo","mo","setStatusProperites","requiredAvailability","availabilityStatus","pushStatus","sendStatus","getMaintenanceStatus","getSendPushStatus","maintenanceStatus","tooltip","getSendStatusTooltip","getPushStatusTooltip","availability","c8y_Availability","DeviceStatusModule","DropAreaComponent","loadingMessage","alwaysShow","clickToOpen","dropped","maxAllowedFiles","isOver","area","files","onFilesSelected","offsetHeight","onOver","showPicker","picker","onPick","onDrop","stopDragging","filesNameString","getFilesNamesAsString","isFilesArrayEmpty","isTooManyFiles","hasEmptyFiles","compose","isAnyFileEmpty","shouldShowFilesList","onDelete","clearErrors","file","readAsJson","TEXT","readAsText","readAsArrayBuffer","ARRAY_BUFFER","readAsBinaryString","BINARY_STRING","readAsDataURL","DATA_URL","reader","FileReader","onload","readyState","ModalSelectionMode","DropAreaModule","FilePickerComponent","onFilesPicked","uploadChoice","fileBinary","droppedFiles","onFileDropped","clearInputFromUrl","fileUrl","fileToSave","clearSelectedFiles","dropArea","onFileUrlChange","urlStr","FilePickerModule","C8yCommonModule","ListGroupComponent","ListItemActionComponent","ListItemCollapseComponent","ListItemFooterComponent","ListItemComponent","active","collapsed","collapsedChange","showFooter","showActions","showCollapse","dropdownUp","pulse$","destroy$","ACTION_ITEM_HEIGHT","classList","delay","itemActions","itemFooter","itemCollapse","showDropdownUp","bottom","innerHeight","toggleCollapsed","pulse","ListItemIconComponent","ListItemBodyComponent","ListItemCheckboxComponent","onSelect","firstChange","currentValue","ListItemRadioComponent","radio","ListGroupModule","RealtimeButtonComponent","stop","start","RealtimeModule","ViewContext","SelectModalComponent","bsModalRef","subTitle","MULTI","disableSelected","showFilter","areMoreEntries","listItems","debouncer","itemsPromise","selectedId","obj","updatePipe","updateChoice","select","outputArray","getOutput","output","selectedOption","SelectModalFilterPipe","extractValues","filterContainString","SelectModalModule","SelectComponent","applyLabel","onChange","textFilter","labelText","filteredItems","searchFilter","sizeToShowFilter","labelsForSelectAll","allFiltered","showAllLabel","itemsSelected","stopClicks","preventClick","isOpenChange","updateSelected","outterSelected","isSelected","isAllItemsSelected","isAllFilteredSelected","applyChanges","selectAll","onChangeItem","updateFiltered","search_1","getSelectAllToggleStatus","getLabel","isAllSelected","indeterminate","updateLabel","selectedLabel","BsDropdownDirective","TypeaheadComponent","allowFreeEntries","displayProperty","selectedChange","KEYCODE_UP","KEYCODE_DOWN","KEYCODE_TAB","KEYCODE_ENTER","KEYCODE_ESC","writeValue","registerOnChange","onTouched","doBlur","getDisplayProperty","onShown","searchControl","handleKeyboard","blur","upOrDown","ctrl","notExisting","TypeaheadComponent_1","NG_VALUE_ACCESSOR","SelectModule","C8yStepperIcon","templateRef","C8yStepper","disableDefaultIcons","edit","onStepChange","_iconOverrides","_stepIndex","_icons","_stepIndexSubscription","getIndicatorType","_state","_getIndicatorType","STEP_STATE","EDIT","DONE","setIndex","C8yStepper_1","CdkStepper","C8yStepperProgress","onStepClicked","stepSelected","C8yStepperButtons","stepper","pending","onNext","onBack","onCustom","showBtns","back","custom","observers","steps","stepControl","invalid","statusChangeSubscription","completed","previous","Host","CdkStep","displayDefaultIndicatorType","StepperModule","CdkStepperModule","STEPPER_GLOBAL_OPTIONS","ɵ0$1","DatePickerComponent","onDateSelected","fgDatePicker","FormGroup","dateFrom","FormControl","dateTo","clearFilter","DatePickerModule","BsDatepickerModule","CoreModule","CoreModule_1","c8yFormsModule","c8yStepperModule","RouterTabsResolver","snapshot","latestChildren","routeConfig","getGuards","guard","canActivate","routerStateSnapshot","guards","showIf","ViewContextServices","contextToService","services","Device","Group","User","Application","SubscribedApplications","Tenant","ContextRouteService","tabsResolver","tabsService","lastAddedTabs","init","routerSubscription","redirectToFirstTab","dataSubscription","updatedContext","updateTabs","refreshContext","serviceInstance","detailsUrlRegex","getDetailUrl","contextData","contextRegex_1","childrenRegex_1","contextChanged","childrenAffected","NEVER","needsRedirect","firstTab$","navigateByUrl","replaceUrl","parseUrl","PRIMARY_OUTLET","segments","HOOK_ONCE_ROUTE","RouterService","contextRouteService","routes","addRoute","addRoutes","emptyRoute","resetConfig","convertRoute","initialConfig","ContextRouteComponent","refreshTabs","ActivatedRoute","callsSubject","hookIntoClientFetch","hookFilter","hookRequest","onFinish","onStart","resolveData","cb","fetchPromise","responseInterceptor","DataModule_1","ContextRouteGuard","caches","paramMap","clearDetailCached","detailCached","getCache","withChildren","EmptyComponent","routerService","RouterModule_1","NgRouterModule","QuickLinkComponent","kebabCase","QuickLinkModule","RealtimeService","subjects$","onAll$","entityOrId","subject$","getSubjectForChannel","channel","realtimeAction","getIdString","reference","String","getChannel","RealtimeSubject","realtimeChannel","realtimeSubscription","OperationBulkRealtimeService","fnName","descriptor","_i","memoizedFnName","_memoize"],"mappings":"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AAG2M,SAAQ,SAACw1B,GACxDr7B,EAAK06B,SAASY,YAAYt7B,EAAKy6B,GAAGhG,cAAe4G,MAEnDD,EAAWtwB,MAAM,MAAMjO,QAAO,SAAC3D,GAAM,OAAAA,KAAG2M,SAAQ,SAACw1B,GAC/Cr7B,EAAK06B,SAASa,SAASv7B,EAAKy6B,GAAGhG,cAAe4G,MAEhDtjC,KAAK8iC,eAAiBO,6CA5BZ9F,EAAAA,kBACMkG,EAAAA,aARpBjG,GAAAA,CADCC,EAAAA,qCAFUgF,EAAa3hC,GAAA,CAHzB0gC,EAAAA,UAAU,CACT7kB,SAAU,eAEC8lB,GAAb,GA2CaiB,GAAQ,CACZ,OACA,KACA,cACA,QACA,aACA,OACA,eACA,aACA,iBACA,QACA,YACA,UACA,SACA,SACA,SACA,SACA,OACA,YACA,SACA,cACA,UACA,QACA,OACA,WACA,MACA,OACA,SACA,QACA,OACA,OACA,SACA,MACA,OACA,SACA,MACA,OACA,QACA,UACA,WACA,SACA,WACA,eACA,iBACA,QACA,UACA,UACA,SACA,OACA,OACA,SACA,OACA,WACA,cACA,MACA,WACA,SACA,WACA,MACA,OACA,eACA,gBACA,YACA,UACA,WACA,QACA,cACA,QACA,UACA,WACA,YACA,aACA,WACA,OACA,YACA,SACA,WACA,QACA,QACA,QACA,YACA,cACA,QACA,OACA,SACA,WACA,SACA,WACA,aACA,aACA,cACA,UACA,OACA,QACA,UACA,SACA,OACA,UACA,YACA,aACA,aACA,MACA,QACA,UACA,UACA,uBCpJT,SAAAC,KAQA,OAHEA,EAAAzjC,UAAAy6B,UAAA,SAAUt4B,EAAOuhC,EAAoC/hC,GACnD,OAAO+hC,EAAgB/iC,MAAMgB,GAAW7B,KAAML,MAAM2F,QAAQjD,GAASA,EAAQ,CAACA,KANrEshC,EAAe7iC,GAAA,CAH3Bq6B,EAAAA,KAAK,CACJjsB,KAAM,SAEKy0B,MCabE,GAAA,WAIE,SAAAA,EACUC,EACAC,EACApB,EACAD,GAHA1iC,KAAA8jC,cAAAA,EACA9jC,KAAA+jC,SAAAA,EACA/jC,KAAA2iC,SAAA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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\nimport { flatten, isFunction, sortBy } from 'lodash-es';\nimport { combineLatest, defer, from, isObservable, Observable, of, race } from 'rxjs';\nimport { filter, map, merge, startWith, switchMap } from 'rxjs/operators';\n\nexport function fromTrigger(router, refresh, factories) {\n  return router.events.pipe(\n    filter(evt => evt instanceof NavigationEnd),\n    merge(refresh),\n    startWith(1),\n    switchMap(() => fromFactories(factories, router))\n  );\n}\nexport function fromFactories<T>(\n  factories?,\n  router?: Router,\n  withFirstEmpty = true\n): Observable<T[]> {\n  return !Array.isArray(factories) || factories.length < 1\n    ? of([])\n    : defer(() => {\n        const factoryObservables = resolveInjectedFactories(factories).map(f => {\n          return toObservable(\n            Array.isArray(f) ? f : f && isFunction(f.get) ? f.get(getActivatedRoute(router)) : [f],\n            withFirstEmpty\n          );\n        });\n        return combineLatest(...factoryObservables);\n      }).pipe(map(results => sortByPriority([].concat(...results))));\n}\n\nexport function resolveInjectedFactories(factories) {\n  return flatten(factories.map(f => (isFunction(f) ? f() : [f])));\n}\n\nexport function stateToFactory<T>(componentsState): ExtensionFactory<T> {\n  const components$ = componentsState.pipe(map((componentSet: Set<T>) => Array.from(componentSet)));\n  return { get: () => components$ };\n}\n\nexport function sortByPriority(items) {\n  return sortBy(items, 'priority');\n}\n\nfunction toObservable(factoryResult, withFirstEmpty) {\n  let observable;\n  if (!factoryResult) {\n    return of([]);\n  } else if (typeof factoryResult.then === 'function' || isObservable(factoryResult)) {\n    if (withFirstEmpty) {\n      const forceObservable = from(factoryResult);\n      const withEmptyFirst = forceObservable.pipe(startWith([]));\n      observable = race(forceObservable, withEmptyFirst);\n    } else {\n      observable = from(factoryResult);\n    }\n  } else {\n    observable = of(factoryResult);\n  }\n  return observable.pipe(\n    map(result => (Array.isArray(result) ? result : [result]).filter(item => !!item))\n  );\n}\n\n/**\n * Allows to extend the existing applications from a module.\n */\nexport interface ExtensionFactory<T> {\n  /**\n   * Allows to resolve the data of an extension point.\n   * The return value can be a Promise or Observable\n   * (allowing for asynchronous data resolution).\n   *\n   * @param activatedRoute The current activated route (if possible to resolve).\n   */\n  get(activatedRoute?: ActivatedRoute): Observable<T[] | T> | Promise<T[] | T> | T[] | T;\n}\n\n/**\n * Extension points allow to extend the application from\n * any module\n */\nexport interface ExtensionPoint<T> {\n  /**\n   * Observable that emits of array of extensions active at any give time\n   */\n  readonly items$: Observable<T[]>;\n  /**\n   * Call the extension factories to refresh them.\n   */\n  refresh();\n}\n\n/**\n * Helper function to get the activated route in\n * a service (as ActivatedRoute injection only\n * works in components). Works as long as we only use\n * a tree and no child is active at the same time.\n *\n * @param router The current router\n */\nexport function getActivatedRoute(router: Router) {\n  if (router && router.routerState && router.routerState.root) {\n    let route = router.routerState.root;\n    while (route.firstChild) {\n      route = route.firstChild;\n    }\n    return route;\n  }\n}\n","import { Observable, BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\n/**\n * A abstract state which should be included in each state.\n * @abstract\n */\nexport abstract class StateService {\n  /**\n   * Saves the state. Should not be accessible directly. Use map or the getter to access\n   * the state. Use functions in the implementation to change the state.\n   */\n  protected abstract state$: BehaviorSubject<any> | any;\n\n  /**\n   * Should return the current state of this StateService\n   */\n  abstract get state();\n\n  /**\n   * Maps to a property and just returns that property.\n   * @param mappedProperty The property to map to.\n   */\n  map(mappedProperty: (stateProperty) => any): Observable<any> {\n    return this.state$.pipe(map(mappedProperty), distinctUntilChanged());\n  }\n\n  /**\n   * Emits a new state.\n   */\n  protected emitNewState() {\n    this.state$.next(this.state);\n  }\n}\n","import { Injectable, InjectionToken, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport {\n  ExtensionPoint,\n  fromTrigger,\n  sortByPriority,\n  stateToFactory\n} from '../common/extension-hooks';\nimport { StateService } from '../common/state-service.abstract';\nimport { ActionBarItem } from './action-bar.model';\n\n/**\n * A hook to use for Multi Provider extension.\n */\nexport const HOOK_ACTION_BAR = new InjectionToken('ActionBarFactory');\n\n/**\n * A service which defines action-bar items.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ActionBarService extends StateService implements ExtensionPoint<ActionBarItem> {\n  items$: Observable<ActionBarItem[]>;\n  readonly refreshTrigger = new Subject();\n  protected state$ = new BehaviorSubject<Set<ActionBarItem>>(new Set<ActionBarItem>());\n\n  constructor(private injector: Injector, router: Router) {\n    super();\n    this.items$ = fromTrigger(router, this.refreshTrigger, [\n      () => this.injector.get(HOOK_ACTION_BAR, []),\n      stateToFactory(this.state$)\n    ]).pipe(\n      map((items: ActionBarItem[]) => sortByPriority(items)),\n      shareReplay(1)\n    );\n  }\n\n  /**\n   * Returns the current state.\n   * @readonly\n   * @returns The current set of actions.\n   */\n  get state(): Set<ActionBarItem> {\n    return this.state$.value;\n  }\n\n  refresh() {\n    this.refreshTrigger.next();\n  }\n\n  /**\n   * Adds a new item to the action bar in the header and emits a state change.\n   * @param item The item to add.\n   */\n  add(item: ActionBarItem) {\n    this.state.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes an action bar item from the header and emits a state change.\n   * @param item The item to remove.\n   */\n  remove(item: ActionBarItem) {\n    this.state.delete(item);\n    this.emitNewState();\n  }\n}\n","import { Injector, Injectable, InjectionToken } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { StateService } from '../common/state-service.abstract';\nimport { Action, ActionFactory } from './action.model';\nimport {\n  fromTrigger,\n  ExtensionPoint,\n  stateToFactory,\n  sortByPriority\n} from '../common/extension-hooks';\nimport { map, shareReplay } from 'rxjs/operators';\n\n/**\n * A hook to use for Multi Provider extension.\n */\nexport const HOOK_ACTION = new InjectionToken('ActionFactory');\n\n/**\n * A service which defines global actions.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ActionService extends StateService implements ExtensionPoint<Action> {\n  items$: Observable<Action[]>;\n  readonly refreshTrigger = new Subject();\n  readonly state$ = new BehaviorSubject<Set<Action>>(new Set<Action>());\n\n  constructor(private injector: Injector, router: Router) {\n    super();\n    this.items$ = fromTrigger(router, this.refreshTrigger, [\n      () => this.injector.get(HOOK_ACTION, []),\n      stateToFactory(this.state$)\n    ]).pipe(\n      map((items: Action[]) => sortByPriority(items)),\n      shareReplay(1)\n    );\n  }\n\n  /**\n   * Refresh the extension factories\n   */\n  refresh() {\n    this.refreshTrigger.next(1);\n  }\n\n  /**\n   * Returns the current state.\n   * @readonly\n   * @returns The current set of actions.\n   */\n  get state(): Set<Action> {\n    return this.state$.value;\n  }\n\n  /**\n   * Adds a new item to the actions in the header and emits a state change.\n   * @param item The item to add.\n   */\n  add(item: Action) {\n    this.state.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes an action from the header and emits a state change.\n   * @param item The item to remove.\n   */\n  remove(item: Action) {\n    this.state.delete(item);\n    this.emitNewState();\n  }\n}\n","// Just for translation annotation\n// Note: Own file because of conflicts if put in barrel directly.\nexport const _ = (str) => str;\nexport function gettext(str) {\n          return str;\n}\n","import { Alert } from './alert.model';\nimport { BehaviorSubject } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { StateService } from '../common/state-service.abstract';\nimport { gettext } from '../i18n/gettext';\n\ntype alertType = 'success' | 'warning' | 'danger' | 'info' | 'system';\n/**\n * A service which allows to display alerts.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class AlertService extends StateService {\n  /**\n   * Returns all alerts.\n   * @readonly\n   */\n  get state() {\n    return this.state$.value;\n  }\n  state$ = new BehaviorSubject<Alert[]>([]);\n\n  private MAX_ALERTS = 3;\n  private ALERT_TIMEOUT = 3000;\n\n  /**\n   * Adds a new alert to the current state.\n   */\n  add(alert: Alert) {\n    this.addAlert(alert);\n  }\n\n  /**\n   * Adds a alert by text.\n   */\n  addByText(type: alertType, txt: string, detailedData?: string): void {\n    this.addAlert({ text: txt, type, detailedData });\n  }\n\n  /**\n   * Returns all alerts.\n   * @deprecated Use alertService.alerts instead.\n   */\n  list(): Alert[] {\n    return this.state;\n  }\n\n  /**\n   * Remove an alert from the current state.\n   */\n  remove(alert: Alert) {\n    this.changeAlerts(this.state.filter(item => !this.areSame(alert, item)));\n  }\n\n  /**\n   * Updates matching alert with provided values.\n   */\n  update(alert: Alert, fieldsToUpdate: Partial<Alert>) {\n    this.changeAlerts(\n      this.state.map(item => {\n        if (this.areSame(alert, item)) {\n          Object.assign(item, fieldsToUpdate);\n        }\n        return item;\n      })\n    );\n  }\n\n  /**\n   * Removes last danger alert. Replacement for silentError.\n   *\n   * @example\n   * ```typescript\n   *  try {\n   *    // something that might throw a danger server msg\n   *  } catch (ex) {\n   *   this.alarmService.removeLastDanger();\n   *  }\n   * ```\n   */\n  removeLastDanger() {\n    const firstDangerAlarm = this.state.reverse().find(({ type }) => type === 'danger');\n    this.changeAlerts(this.state.filter(alarm => alarm !== firstDangerAlarm));\n  }\n\n  /**\n   * Shorthand for a save successful alert.\n   * @param savedObject The object which was saved.\n   * @return A function that can be executed to show the msg.\n   */\n  saveSuccess(savedObject: string) {\n    return () => {\n      const text = `${savedObject} saved successfully`;\n      this.addByText('success', text);\n    };\n  }\n\n  /**\n   * Shorthand for a create successful alert.\n   * @param createdObject The object which was created.\n   * @return A function that can be executed to show the msg.\n   */\n  createSuccess(createdObject) {\n    return () => {\n      const text = `${createdObject} created successfully`;\n      this.addByText('success', text);\n    };\n  }\n\n  /**\n   * Clears all alerts.\n   */\n  clearAll() {\n    this.changeAlerts([]);\n  }\n\n  /**\n   * A shorthand to display a simple success message.\n   * @param text The success text.\n   * @param detailedData The text with additional information.\n   */\n  success(text: string, detailedData?: string) {\n    this.addByText('success', text, detailedData);\n  }\n\n  /**\n   * A shorthand to display a simple danger message.\n   * @param text The danger text.\n   * @param detailedData The text with additional information.\n   */\n  danger(text: string, detailedData?: string) {\n    this.addByText('danger', text, detailedData);\n  }\n\n  /**\n   * A shorthand to display a simple info message.\n   * @param text The info text.\n   * @param detailedData The text with additional information.\n   */\n  info(text: string, detailedData?: string) {\n    this.addByText('info', text, detailedData);\n  }\n\n  /**\n   * A shorthand to display a simple warning message.\n   * @param text The warning text.\n   * @param detailedData The text with additional information.\n   */\n  warning(text: string, detailedData?: string) {\n    this.addByText('warning', text, detailedData);\n  }\n\n  addServerFailure(error: any, type: alertType = 'danger') {\n    const { data, res } = error;\n    let text = data && data.message ? data.message : null;\n    let detailedData;\n    if (data) {\n      if (typeof data === 'object') {\n        detailedData = data.exceptionMessage;\n      } else if (typeof data === 'string') {\n        detailedData = data;\n      }\n    }\n    const hasRelevantMessage = !!(text || detailedData);\n    if (!text) {\n      text = gettext('A server error occurred.');\n    }\n    if (!hasRelevantMessage) {\n      detailedData = {\n        status: res.status,\n        statusText: res.statusText,\n        url: res.url\n      };\n    }\n\n    this.addAlert({\n      type,\n      text,\n      detailedData\n    });\n  }\n\n  areSame(alert1: Alert, alert2: Alert) {\n    return (\n      alert1.text === alert2.text &&\n      alert1.type === alert2.type &&\n      alert1.detailedData === alert2.detailedData &&\n      alert1.onClose === alert2.onClose &&\n      alert1.onDetail === alert2.onDetail\n    );\n  }\n\n  private changeAlerts(newAlerts: Alert[]) {\n    this.state$.next(newAlerts);\n  }\n\n  private addAlert(alert: Alert): void {\n    if (!alert.text && !alert.type) {\n      throw new Error('Cannot add empty alert');\n    }\n\n    const alertAlreadyAdded = this.state.find(item => this.areSame(alert, item));\n    if (alertAlreadyAdded) {\n      return;\n    }\n\n    this.changeAlerts([...this.state, alert]);\n    this.hideAutomaticallyIfNeeded(alert);\n    this.removeOldestIfMax();\n  }\n\n  private hideAutomaticallyIfNeeded(alert: Alert) {\n    const isSuccess = alert.type === 'success';\n    const noDetails = !alert.detailedData;\n    let alertTimeout = isSuccess && noDetails ? this.ALERT_TIMEOUT : 0;\n    if (typeof alert.timeout !== 'undefined') {\n      alertTimeout = alert.timeout;\n    }\n    if (alertTimeout) {\n      setTimeout(() => this.remove(alert), alertTimeout);\n    }\n  }\n\n  private removeOldestIfMax() {\n    if (this.state.length > this.MAX_ALERTS) {\n      const [, ...firstRemoved] = this.state;\n      this.changeAlerts(firstRemoved);\n    }\n  }\n}\n","/*\n * -----------------------------WARNING---------------------------------\n * This file has an *exact* copy in packages/cli/src/webpack.\n * Any changes to this file must be reflected there, too.\n */\nexport class ApplicationOptions {\n  /** Application name (saved to the server). */\n  name: string;\n  /** Application context path (saved to the server). */\n  contextPath: string;\n  /** Application key (saved to the server). */\n  key: string;\n  /** Set to `true` if the application is hybrid and uses Angular and AngularJS simultaneously. */\n  upgrade?: boolean;\n  /** Path to the branding entry file. */\n  brandingEntry?: string;\n  /** Path to tsccnfig.json file if TypeScript is used (default: ./tsconfig.json). */\n  tsConfigPath?: string;\n  /** Entry module for Angular compiler (only used with lazy loaded routes), e.g. `'app.module.ts#AppModule'`. */\n  entryModule?: string;\n  /** Path to custom index.html (otherwise default one will be used). */\n  indexTemplate?: string;\n  /** URL to dynamically fetched options. */\n  dynamicOptionsUrl?: string;\n  /** URL to favicon. */\n  faviconUrl?: string;\n  /** URL to *.css file which will replace default branding. */\n  brandingUrl?: string;\n  /** Object with properties that will be converted to CSS custom variables. */\n  brandingCssVars?: {\n    [key: string]: string;\n  };\n  /**\n   * Allows for adding or overriding languages available in the application.\n   *\n   * Its keys are language codes and its values are objects with the following properties:\n   *\n   * - `name`: English name of the language,\n   * - `nativeName`: native name of the language,\n   * - `url`: full URL to JSON file with compiled translations;\n   *    if not defined, translations will be loaded from `${localePath}/${langCode}.json`.\n   *\n   * Example:\n   * ```json\n   * \"languages\": {\n   *   \"de\": {\n   *     \"name\": \"German\",\n   *     \"nativeName\": \"Deutsch\",\n   *     \"url\": \"/apps/public/ui-assets/de.json\"\n   *   }\n   * }\n   * ```\n   */\n  languages?: {\n    [langCode: string]: {\n      name: string;\n      nativeName: string;\n      url: string;\n    };\n  };\n  /**\n   * Allows for adding custom translations. It is an optional property.\n   *\n   * Its keys are language codes (https://cumulocity.com/guides/users-guide/getting-started/#a-name-languages-a-available-languages)\n   * and its values are objects with key-value pairs, where the key is the original string in English and the value - its translation.\n   *\n   * - `Home`: \"Startseite\"\n   *\n   * For example you can add the translation of your custom cookie banner configured in the branding settings:\n   * ```json\n   * \"i18nExtra\": {\n   *   \"de\": {\n   *     \"About cookies on Cumulocity IoT\": \"Informationen zu Cookies in Cumulocity IoT\",\n   *     \"Click Agree and Proceed to accept cookies and go directly to the platform or click on Privacy Policy to see detailed descriptions of the used cookies.\": \"Klicken Sie auf Zustimmen und fortfahren, um Cookies zu akzeptieren und direkt zur Plattform zu gelangen, oder klicken Sie auf Datenschutzrichtlinie, um detaillierte Beschreibungen der verwendeten Cookies anzuzeigen.\"\n   *   }\n   * }\n   * ```\n   */\n  i18nExtra?: {\n    [langCode: string]: {\n      [key: string]: string;\n    };\n  };\n  /** Path to the folder from which *.po files will be loaded. */\n  localePath?: string;\n  /** Array of URLs to additional *.css files to be loaded at runtime. */\n  extraCssUrls?: string[];\n  /** Documentation links settings. */\n  docs?: {\n    /** Hide default links to documentation. */\n    noDefault: boolean;\n    /** List of regex strings. Matching default docs URLs will be hidden. */\n    excludeDefault: string[];\n    /** Additional links to be displayed. */\n    links: Array<{\n      /** Icon classes with `c8y-icon`, e.g. `c8y-icon c8y-icon-add-user` or `c8y-icon c8y-icon-device-connect`. */\n      icon: string;\n      label: string;\n      url: string;\n      type: 'doc' | 'quicklink';\n    }>;\n  };\n  /** Application icon to be displayed in app switcher and header bar. */\n  icon?: {\n    class?: string;\n    url?: string;\n  };\n\n  // These are the old options\n  /** Hide application in app switcher (saved to the server). */\n  noAppSwitcher?: boolean;\n  /** HTML page title. */\n  globalTitle?: string;\n  /** Hide \"powered by\" and version info at the bottom of the navigator and in the user menu. */\n  hidePowered?: boolean;\n  /** URL to support page (set to `false` to hide the link). */\n  supportUrl?: boolean | string;\n  /**\n   * Replacement string for `user` field in audit logs for actions performed by a support user\n   * (available placeholders: `{{support_user}}`, `{{supported_user}}`).\n   */\n  supportUserString?: string;\n  /** Enable or disable the right drawer. */\n  rightDrawer?: boolean;\n  /** Enable or disable breadcrumbs in the header for groups and devices (default: false). */\n  breadcrumbs?: boolean;\n  /** Collapse navigator on initial load. */\n  hideNavigator?: boolean;\n  /** Show tabs horizontally or vertically. */\n  tabsHorizontal?: boolean;\n  /** Additional link to display on login screen. */\n  loginExtraLink?: {\n    url: string;\n    label: string;\n  };\n  /** Enable or disable storage limitation feature. */\n  storageLimitationFeatureEnabled?: boolean;\n  /** Name of company handling support requests from app users (displayed in notification message). */\n  companyName?: string;\n  /** URL template for documentation links (default: `'${docsBaseUrl}${partialUrl}'`). */\n  guideHrefTemplate?: string;\n  /** Base URL for documentation links. */\n  docsBaseUrl?: string;\n  /** CSP string to be added to `index.html`. */\n  contentSecurityPolicy?: string;\n  /** Enables cloud sensor wizard */\n  sensorPhone?: boolean;\n  /** Legacy list of imported plugins. */\n  imports?: string[];\n  /** Show or hide a newsletter subscription checkbox in edit user modal. */\n  newsletter?: boolean;\n  /** Indicates whether the entry point is traversed from legacy cumulocity*.json app manifest. */\n  legacy?: boolean;\n  /** Path to the root node_modules dir (useful when working in monorepo setup, e.g. yarn workspaces). */\n  rootNodeModulesPath?: string;\n  /** Cookie Banner configuration */\n  cookieBanner?: {\n    cookieBannerTitle?: string;\n    cookieBannerText?: string;\n    policyUrl?: string;\n  };\n  /** A key for the product experience software Gainsight. */\n  gainsightKey?: string;\n}\n","import { InjectionToken, Optional, Inject, Injectable } from '@angular/core';\nimport { camelCase, isUndefined } from 'lodash-es';\nimport { ApplicationOptions } from './ApplicationOptions';\nimport { ExtensionFactory } from './extension-hooks';\nimport { SystemOptionsService, TenantOptionsService } from '@c8y/ngx-components/api';\n\nexport const HOOK_OPTIONS = new InjectionToken<ExtensionFactory<ApplicationOptions>>('App options');\n\n/**\n * A service that allows to set or get application options\n * which configure the default behavior of the UI.\n */\n@Injectable()\nexport class OptionsService extends ApplicationOptions {\n  [key: string]: any;\n  constructor(\n    @Optional() @Inject(HOOK_OPTIONS) options,\n    private systemOptionsService: SystemOptionsService,\n    private tenantOptionService: TenantOptionsService\n  ) {\n    super();\n    this.setupOptions(options);\n  }\n\n  /**\n   * Returns an application option used to configure the UI.\n   * @param optionKey The application options key.\n   * @param defaultValue A value to return if non is set.\n   */\n  get(optionKey: keyof OptionsService, defaultValue?: any) {\n    let value = this[optionKey];\n    if (typeof value === 'undefined') {\n      value = this[camelCase(optionKey)];\n    }\n    return typeof value !== 'undefined' ? value : defaultValue;\n  }\n\n  /**\n   * Sets an application option.\n   * @param key The key to set.\n   * @param value The value to set.\n   */\n  set(key: string, value: any) {\n    this[camelCase(key)] = value;\n  }\n\n  /**\n   * Gets support url from tenant options.\n   * If response returns '404 not found' it gets the support url from application options.\n   * If the support link within application options is not provided the UI will use the system options.\n   * Is the support link explicitly set to false it will be hidden.\n   * NOTE: The tenant option endpoint returns the system option setting if non is set on the tenant.\n   *\n   * @returns Returns support url or false.\n   */\n  async getSupportUrl() {\n    if (isUndefined(this.supportUrl)) {\n      this.supportUrl = await this.getTenantOption('configuration', 'system.support.url');\n    }\n    return isUndefined(this.supportUrl) ? false : this.supportUrl;\n  }\n\n  /**\n   * Returns if the tenant allows to show the activate-support user menu entry.\n   * Note: Only if system-level support-user/enabled is false we can activate it at tenant level.\n   */\n  async getActivateSupportUser() {\n    const option = await this.getSystemOption('support-user', 'enabled', true);\n    return !option;\n  }\n\n  /**\n   * Gets a value from the system service and parses it.\n   *\n   * @param category The category for this option.\n   * @param key The key for that option.\n   * @param defaultValue The default if the option was not found.\n   */\n  async getSystemOption(category: string, key: string, defaultValue?: any) {\n    return this.getOptionFromService(category, key, this.systemOptionsService, defaultValue);\n  }\n\n  /**\n   * Gets a value from the tenant service and parses it.\n   *\n   * @param category The category for this option.\n   * @param key The key for that option.\n   * @param defaultValue The default if the option was not found.\n   */\n  async getTenantOption(category: string, key: string, defaultValue?: any) {\n    return this.getOptionFromService(category, key, this.tenantOptionService, defaultValue);\n  }\n\n  private setupOptions(options: any[] | null) {\n    if (options) {\n      if (!Array.isArray(options)) {\n        options = [options];\n      }\n      options.forEach(optionMap => {\n        if (optionMap) {\n          Object.keys(optionMap).forEach(key => {\n            this[camelCase(key)] = optionMap[key];\n          });\n        }\n      });\n    }\n  }\n\n  private async getOptionFromService(category, key, service, defaultValue) {\n    try {\n      const { data } = await service.detail({ category, key });\n      return this.parseOptionRawValue(data.value, defaultValue);\n    } catch (ex) {\n      return defaultValue;\n    }\n  }\n\n  private parseOptionRawValue(rawValue, defaultValue) {\n    let value;\n    try {\n      value = JSON.parse(rawValue);\n    } catch (e) {\n      value = isUndefined(rawValue) ? defaultValue : rawValue;\n    }\n    return value;\n  }\n}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { keys } from 'lodash-es';\nimport { BehaviorSubject } from 'rxjs';\nimport { scan, distinctUntilChanged, map, filter } from 'rxjs/operators';\nimport { StateService } from './state-service.abstract';\nimport { OptionsService } from './options.service';\nimport { FetchClient } from '@c8y/client';\n\nimport { ApplicationService, IUser, ICurrentTenant } from '@c8y/client';\nimport { ApiService } from '@c8y/ngx-components/api';\n\n@Injectable()\nexport class AppStateService extends StateService {\n  state$: BehaviorSubject<any> = new BehaviorSubject<any>({\n    app: {\n      name: this.options.name,\n      contextPath: this.getCurrentContextPath() || this.options.contextPath\n    },\n    supportUrl: this.options.supportUrl,\n    lang: this.options.get('defaultLanguage', 'en'),\n    langs: this.getLangs(),\n    langsDetail: this.options.languages,\n    loginOptions: this.options.loginOptions,\n    activateSupportUserAvailable: undefined,\n    versions: {\n      backend: undefined,\n      ui: this.options.versions || { ngx: undefined }\n    },\n    hidePowered: this.options.hidePowered,\n    isLoading: false,\n    showRightDrawer: this.options.rightDrawer,\n    loginExtraLink: this.options.get('login_extra_link'),\n    newsletter: this.options.newsletter\n  });\n  currentSupportUserName: BehaviorSubject<string | null> = new BehaviorSubject(null);\n  currentUser: BehaviorSubject<IUser | null> = new BehaviorSubject(null);\n  currentTenant: BehaviorSubject<ICurrentTenant | null> = new BehaviorSubject(null);\n\n  constructor(\n    private applicationService: ApplicationService,\n    public apiService: ApiService,\n    private options: OptionsService,\n    private fetchClient: FetchClient\n  ) {\n    super();\n    this.apiService.calls\n      .pipe(\n        filter(({ url }) => !/cep\\/realtime/.test(url)),\n        map(({ phase }) => (phase === 'start' ? 1 : -1)),\n        scan((count, item) => count + item, 0),\n        map(count => count > 0),\n        distinctUntilChanged()\n      )\n      .subscribe(isLoading => (this.state.isLoading = isLoading));\n\n    this.assignApplicationKeyToDefaultHeaders();\n  }\n\n  assignApplicationKeyToDefaultHeaders() {\n    if (!isDevMode()) {\n      this.fetchClient.defaultHeaders = {\n        ...(this.fetchClient.defaultHeaders || {}),\n        'X-Cumulocity-Application-Key': this.options.key\n      };\n    }\n  }\n\n  /**\n   * Returns the current state.\n   */\n  get state() {\n    return this.state$.value;\n  }\n\n  getLangs() {\n    const { languages } = this.options;\n    return languages ? keys(languages).filter(k => languages[k]) : [];\n  }\n\n  /**\n   * Returns the correct UI version. In hybrid mode for angular and ngx.\n   */\n  get uiVersion() {\n    const version = this.state.versions.ui;\n    return version.ngx || version.ng1;\n  }\n\n  /**\n   * Loads the app manifest. If no access -> throw an error to verify app access.\n   */\n  async loadManifest() {\n    try {\n      const { application } = (await this.applicationService.detail(\n        `${this.state.app.contextPath}/manifest`\n      )).data as any;\n      this.state.app.manifest = application;\n      this.loadDefaultOptions();\n    } catch (ex) {\n      throw ex;\n    }\n  }\n\n  /**\n   * Checks current users application list and matches it against given application name.\n   * Returns true if application is in the list.\n   * @param name application name\n   */\n  async isApplicationAvailable(name: string) {\n    const { data } = await this.applicationService.listByUser(undefined, { pageSize: 100 });\n    return data.some(app => app.name === name);\n  }\n\n  /**\n   * Sets current user (including support user).\n   * @param userInfo Info about current user and support user to be set.\n   */\n  setUser(userInfo: { user: IUser; supportUserName: string }) {\n    this.currentSupportUserName.next(userInfo.supportUserName || null);\n    this.currentUser.next(userInfo.user);\n  }\n\n  private getCurrentContextPath() {\n    const match = window.location.pathname.match(/\\/apps\\/(public\\/){0,1}(.+?)(\\/|\\?|#|$)/);\n    return match && match[2];\n  }\n\n  private async loadDefaultOptions() {\n    this.state.supportUrl = await this.options.getSupportUrl();\n    this.state.activateSupportUserAvailable = await this.options.getActivateSupportUser();\n    this.state.versions.backend = await this.options.getSystemOption('system', 'version');\n    try {\n      this.showIncompatibleVersionsError();\n    } catch (ex) {\n      // ignore this\n    }\n    this.emitNewState();\n  }\n\n  private showIncompatibleVersionsError() {\n    const uiVersion = this.state.versions.ui.ngx;\n    const backendVersion = this.state.versions.backend;\n    const uiVersionArray = uiVersion\n      .replace(/[^\\d.]/g, '')\n      .split('.')\n      .map(Number);\n    const beVersionArray = backendVersion\n      .replace(/[^\\d.]/g, '')\n      .split('.')\n      .map(Number);\n    const multiplier = Math.pow(\n      10,\n      Math.ceil(Math.log10(Math.max(...uiVersionArray, ...beVersionArray) + 1))\n    );\n    const sumReducer = (acc, cur) => acc + cur;\n    const calculateVersionMapper = (curr, idx) => curr * (multiplier / Math.pow(10, idx));\n    const uiVersionNumber = uiVersionArray.map(calculateVersionMapper).reduce(sumReducer);\n    const beVersionNumber = beVersionArray.map(calculateVersionMapper).reduce(sumReducer);\n    const showError = uiVersionNumber > beVersionNumber;\n    if (showError) {\n      const errorContent = `You are running version ${uiVersion} of the UI and version ${backendVersion} of backend!`;\n      console.log('%c ' + errorContent, 'font-weight: bold; font-size: 30px; color: red;');\n    }\n  }\n}\n","import { TemplateRef, Type } from '@angular/core';\nimport { matches, snakeCase } from 'lodash-es';\nimport { NavigatorNodeData } from './navigator-node-data';\nimport { PopoverConfirmComponent } from '../modal/popover-confirm.component';\n\nexport interface ClickOptions {\n  icon?: boolean;\n  expander?: boolean;\n  open?: boolean;\n  $event?: any; // TODO: add proper type\n}\n\nexport class NavigatorNode {\n  icon: string;\n  iconTemplate?: TemplateRef<any>;\n  iconComponent?: Type<any>;\n  children: NavigatorNode[] = [];\n  label;\n  path: string;\n  parents: NavigatorNode[] = [];\n  loading?: boolean;\n  routerLinkExact: boolean = true;\n  open: boolean = false;\n  hidden: boolean = false;\n  draggable: boolean = false;\n  droppable: boolean = false;\n  dragged = false;\n  draggedHover = false;\n  confirm: PopoverConfirmComponent = undefined;\n  private _priority: number = 0;\n  private expandDragTimeout;\n\n  get hasChildren() {\n    return this.children.length > 0;\n  }\n\n  get id() {\n    return 'navigator_node_' + snakeCase(this.label);\n  }\n\n  get priority() {\n    if (this._priority) {\n      return this._priority;\n    } else {\n      const childrenPriorities = this.children.map(({ priority }) => priority || 0);\n      if (childrenPriorities.length) {\n        return childrenPriorities.length ? Math.max(...childrenPriorities) : 0;\n      }\n      return 0;\n    }\n  }\n\n  set priority(priority) {\n    this._priority = priority;\n  }\n\n  constructor(data?: NavigatorNodeData) {\n    this.update(data);\n  }\n\n  openOnStart(url: string) {\n    return false;\n  }\n\n  add(node: NavigatorNode) {\n    if (node === this) {\n      throw new Error('Adding node to itself');\n    }\n    if (this.children.indexOf(node) === -1) {\n      this.children.push(node);\n    }\n    if (node.parents.indexOf(this) === -1) {\n      node.parents.push(this);\n    }\n    this.updateChildren();\n  }\n\n  remove(node: NavigatorNode) {\n    const ix = this.children.indexOf(node);\n    const pix = node.parents.indexOf(this);\n    if (ix > -1) {\n      this.children.splice(ix, 1);\n    }\n    if (pix > -1) {\n      node.parents.splice(pix, 1);\n    }\n    this.updateChildren();\n  }\n\n  update(data?: NavigatorNodeData) {\n    if (data) {\n      Object.assign(this, data);\n      if (data.hidden !== undefined) {\n        this.parents.forEach(p => {\n          p.updateHidden();\n        });\n      }\n    }\n  }\n\n  find(predicate) {\n    if (typeof predicate === 'string') {\n      const compareLabel = predicate.toLocaleLowerCase();\n      predicate = ({ label }) => compareLabel === label.toLowerCase();\n    }\n    if (typeof predicate === 'object') {\n      predicate = matches(predicate);\n    }\n    if (typeof predicate !== 'function') {\n      throw new Error('Invalid search predicate');\n    }\n    return this.children.reduce(\n      (found, child) => found || child.find(predicate),\n      this.children.find(predicate)\n    );\n  }\n\n  empty() {\n    this.children.length = 0;\n  }\n\n  click(options: ClickOptions = {}) {\n    // do nothing\n  }\n\n  drop($event) {\n    $event.stopPropagation();\n    clearTimeout(this.expandDragTimeout);\n  }\n\n  dragStart($event) {\n    $event.stopPropagation();\n    // we can't pass a object to setData, so we do it via service\n    // set data is still needed, to make the drag&drop work\n    $event.dataTransfer.setData('node', 'node');\n    this.dragged = true;\n  }\n\n  dragEnd($event) {\n    $event.stopPropagation();\n    this.dragged = false;\n    $event.dataTransfer.clearData();\n  }\n\n  get canDrop() {\n    return this.droppable;\n  }\n\n  get canNavigate() {\n    return typeof this.path !== 'undefined';\n  }\n\n  dragEnter($event) {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.draggedHover = true;\n    if (!this.open) {\n      this.expandDragTimeout = setTimeout(() => this.expand(), 1000);\n    }\n  }\n\n  dragLeave($event) {\n    $event.preventDefault();\n    $event.stopPropagation();\n    this.draggedHover = false;\n    clearTimeout(this.expandDragTimeout);\n  }\n\n  expand() {\n    if (!this.open) {\n      this.open = true;\n      this.click({ open: true, expander: true });\n    }\n  }\n\n  traverse(callback) {\n    if (this.children) {\n      this.children.forEach(child => {\n        callback(child);\n        child.traverse(callback);\n      });\n    }\n  }\n\n  destroy() {\n    // nothing todo here\n  }\n\n  protected updateChildren() {\n    this.sort();\n    this.updateHidden();\n  }\n\n  protected sort() {\n    this.children.sort((a, b) => {\n      if (a.priority > b.priority) {\n        return -1;\n      } else if (a.priority < b.priority) {\n        return 1;\n      } else if ((a.label || '').toLowerCase() < (b.label || '').toLowerCase()) {\n        return -1;\n      } else if ((a.label || '').toLowerCase() > (b.label || '').toLowerCase()) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n  }\n\n  protected updateHidden() {\n    if (typeof this.path === 'undefined') {\n      this.hidden = !this.children.some(({ hidden }) => !hidden);\n    }\n  }\n}\n","import { NavigatorNode } from './navigator-node';\nimport { NavigatorNodeData } from './navigator-node-data';\nimport { assign } from 'lodash-es';\n\nexport class NavigatorNodeRoot extends NavigatorNode {\n  addRoot(nodeData: Partial<NavigatorNodeData>) {\n    const { parent } = nodeData;\n    const node = this.createNode(nodeData);\n    let localParent;\n\n    if (parent) {\n      if (typeof parent === 'object') {\n        localParent = this.find(parent.label);\n        if (localParent) {\n          localParent.update(parent);\n        }\n      } else if (typeof parent === 'string' || typeof parent === 'function') {\n        localParent = this.find(parent);\n      }\n\n      if (!localParent) {\n        localParent = this.createNode(parent);\n        if (!this.find((n) => localParent === n)) {\n          this.add(localParent);\n        }\n      }\n    }\n\n    (localParent || this).add(node);\n    return node;\n  }\n\n  createNode(nodeData) {\n    if (nodeData instanceof NavigatorNode) {\n      return nodeData;\n    }\n    if (typeof nodeData === 'string') {\n      return new NavigatorNode({ label: nodeData });\n    }\n    if (typeof nodeData === 'object') {\n      return new NavigatorNode({ ...nodeData, parent: undefined });\n    }\n    throw new Error('Wrong type of node data');\n  }\n}\n","import { Injectable, InjectionToken, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { ExtensionPoint, fromTrigger, sortByPriority, stateToFactory } from '../common/extension-hooks';\nimport { StateService } from '../common/state-service.abstract';\nimport { NavigatorNode } from './navigator-node';\nimport { NavigatorNodeData } from './navigator-node-data';\nimport { NavigatorNodeRoot } from './navigator-node-root';\n\n/**\n * A hook to use for Multi Provider extension.\n */\nexport const HOOK_NAVIGATOR_NODES = new InjectionToken('NavigatorNodesFactory');\n\n/**\n * A service which defines the navigator.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class NavigatorService extends StateService implements ExtensionPoint<NavigatorNode> {\n  items$: Observable<NavigatorNode[]>;\n  readonly refreshTrigger = new Subject();\n  readonly state$ = new BehaviorSubject<Set<NavigatorNode>>(new Set<NavigatorNode>());\n  firstUrl = true;\n\n  constructor(\n    private injector: Injector,\n    private router: Router\n  ) {\n    super();\n    const rootNode = new NavigatorNodeRoot();\n    this.items$ = fromTrigger(router, this.refreshTrigger, [\n      () => this.injector.get(HOOK_NAVIGATOR_NODES, []),\n      stateToFactory(this.state$),\n    ]).pipe(\n      map((nodes: Partial<NavigatorNodeData[]>) => {\n        const noParent = nodes.filter(node => !node.parent);\n        const withParent = nodes.filter(node => node.parent);\n\n        // Based on the sortedNodes array, the nodes are sequentially created.\n        // Nodes sorting is done in two steps to have the top-level nodes first.\n        // This way, by the time we are adding a child node, the parent node is already present.\n        const sortedNodes = sortByPriority(noParent).concat(sortByPriority(withParent));\n        rootNode.empty();\n        sortedNodes.forEach((node) => rootNode.addRoot(node));\n        return rootNode.children;\n      }),\n      shareReplay(1)\n    );\n  }\n\n  openOnFirstUrl(node: NavigatorNode) {\n    if (this.firstUrl && !!node.path) {\n      return this.router.isActive(node.path, node.routerLinkExact) || node.openOnStart(this.router.url);\n    }\n    return false;\n  }\n\n  /**\n   * Returns the current state.\n   * @readonly\n   * @returns The current set of actions.\n   */\n  get state(): Set<NavigatorNode> {\n    return this.state$.value;\n  }\n\n  /**\n   * Refresh the extension factories\n   */\n  refresh() {\n    this.refreshTrigger.next(1);\n  }\n\n  /**\n   * Adds a new node to the navigator.\n   * @param nav The node to add.\n   */\n  add(item: NavigatorNode) {\n    this.state.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes a node from the navigator.\n   * @param nav The node ro remove.\n   */\n  remove(item: NavigatorNode) {\n    this.state.delete(item);\n    this.emitNewState();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, map, combineLatest, debounceTime } from 'rxjs/operators';\nimport { OptionsService } from '../common/options.service';\nimport { StateService } from '../common/state-service.abstract';\nimport { NavigatorService } from '../navigator/navigator.service';\nimport { Header } from './header.model';\n\n/**\n * A service which defines header functions.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class HeaderService extends StateService {\n  header$: Observable<Header>;\n  navigatorOpen$: Observable<boolean>;\n\n  hasItemsInNavigator$ = this.navigatorService.items$.pipe(\n    map(({ length }) => !!length),\n    distinctUntilChanged()\n  );\n\n  state$: BehaviorSubject<Header> = new BehaviorSubject<Header>({\n    title: undefined,\n    nav: {\n      open: false\n    }\n  });\n\n  title = undefined;\n\n  constructor(private navigatorService: NavigatorService, private options: OptionsService) {\n    super();\n    this.header$ = this.map((header: Header) => header);\n    this.navigatorOpen$ = this.map(({ nav }) => nav.open).pipe(\n      combineLatest(this.hasItemsInNavigator$),\n      map(([open, hasItems]) => open && hasItems)\n    );\n    const titleReference = document.querySelector('title');\n    this.title = {\n      elementRef: titleReference,\n      originalValue: titleReference && titleReference.innerText\n    };\n  }\n\n  get state() {\n    return this.state$.value;\n  }\n\n  get navigatorHiddenOnStartup() {\n    return this.options.hideNavigator;\n  }\n\n  get largeWidth() {\n    return document.documentElement.clientWidth > 1200;\n  }\n\n  get shouldToggle() {\n    return this.largeWidth && !this.navigatorHiddenOnStartup && !this.state.nav.open;\n  }\n\n  /**\n   * Toggles the navigator open status.\n   */\n  toggleNavigator() {\n    this.state.nav.open = !this.state.nav.open;\n    this.emitNewState();\n  }\n\n  /**\n   * Force to close the navigator.\n   */\n  closeNavigator() {\n    this.state.nav.open = false;\n    this.emitNewState();\n  }\n\n  /**\n   * Configures navigation options.\n   * @param config Object with the properties:\n   * - open: Boolean\n   */\n  configNavigator(config: any = {}) {\n    this.state.nav = Object.assign(this.state.nav, config);\n    this.emitNewState();\n  }\n\n  /**\n   * Change the application title.\n   * @param newTitle The new title of the application.\n   */\n  changeTitle(newTitle?: any) {\n    this.state.title = newTitle;\n    this.emitNewState();\n  }\n\n  /**\n   * Change the page title.\n   * @param newTitle The new title of the page.\n   */\n  changePageTitle(newTitle?: string) {\n    this.title.elementRef.innerText = newTitle\n      ? `${newTitle} / ${this.title.originalValue}`\n      : `${this.title.originalValue}`;\n  }\n\n  /**\n   * This methods checks if the navigator toggles on startup\n   * or if an item is added to the navigator node.\n   * Delay of 300ms is intended for animation purpose.\n   */\n  verifyIfNavOpen() {\n    this.hasItemsInNavigator$\n      .pipe(debounceTime(300))\n      .subscribe(hasItems => hasItems && this.shouldToggle && this.toggleNavigator());\n  }\n\n  shouldShowBreadcrumbs() {\n    return this.options.breadcrumbs;\n  }\n}\n","import { Injectable, InjectionToken, Injector, ViewContainerRef } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { distinctUntilChanged, filter, first, map, shareReplay } from 'rxjs/operators';\nimport { ExtensionPoint, fromTrigger, stateToFactory } from '../common/extension-hooks';\nimport { StateService } from '../common/state-service.abstract';\nimport { Tab } from './tab.model';\nimport { OptionsService } from '../common/options.service';\n\nexport const HOOK_TABS = new InjectionToken('TabsFactory');\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TabsService extends StateService implements ExtensionPoint<Tab> {\n  items$: Observable<Tab[]>;\n  orientation$: Observable<string>;\n  readonly refreshTrigger = new Subject();\n  readonly state$ = new BehaviorSubject<Set<Tab>>(new Set<Tab>());\n\n  constructor(\n    private injector: Injector,\n    router: Router,\n    private translateService: TranslateService,\n    private options: OptionsService\n  ) {\n    super();\n    this.items$ = fromTrigger(router, this.refreshTrigger, [\n      () => this.injector.get(HOOK_TABS, []),\n      stateToFactory(this.state$)\n    ]).pipe(\n      map(tabs => this.prepareTabs(tabs)),\n      shareReplay(1),\n      distinctUntilChanged()\n    );\n\n    this.orientation$ = this.items$.pipe(\n      map((tabs: Tab[]) => {\n        const firstTabWithDefinedOrientation = tabs.find(tab => tab.orientation);\n        if (firstTabWithDefinedOrientation) {\n          return firstTabWithDefinedOrientation.orientation;\n        }\n        return this.options.tabsHorizontal ? 'horizontal' : 'vertical';\n      }),\n      distinctUntilChanged()\n    );\n  }\n\n  prepareTabs(tabs) {\n    return this.sortTabs(\n      tabs\n        .map(tab => ({\n          ...tab,\n          template: tab.template instanceof ViewContainerRef ? tab.template : undefined\n        }))\n        .filter((tab, index, self) => index === self.findIndex(t => t.path === tab.path))\n    );\n  }\n\n  sortTabs(tabs) {\n    return tabs.sort((a, b) => {\n      const priorityOrder = (b.priority || 0) - (a.priority || 0);\n\n      const aTranslatedLabel = this.translateService.instant(a.label);\n      const bTranslatedLabel = this.translateService.instant(b.label);\n      const translatedLabelOrder = aTranslatedLabel.localeCompare(bTranslatedLabel);\n\n      return priorityOrder || translatedLabelOrder;\n    });\n  }\n\n  /**\n   * Refresh the extension factories\n   */\n  refresh() {\n    this.refreshTrigger.next(1);\n  }\n\n  /**\n   * Returns the current state.\n   * @readonly\n   * @returns The current set of actions.\n   */\n  get state(): Set<Tab> {\n    return this.state$.value;\n  }\n\n  /**\n   * Adds a new item to tabs and emits state change\n   * @param item The item to add.\n   */\n  add(item: Tab) {\n    this.state.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes a tab and emits a state change.\n   * @param item The item to remove.\n   */\n  remove(item: Tab) {\n    this.state.delete(item);\n    this.emitNewState();\n  }\n\n  get firstTab$() {\n    return this.items$.pipe(\n      map(tabs => tabs[0]),\n      filter(Boolean),\n      first()\n    );\n  }\n}\n","import { combineLatest, distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { ActionBarService } from '../action-bar/action-bar.service';\nimport { AppStateService } from '../common/ui-state.service';\nimport { Component } from '@angular/core';\nimport { HeaderService } from '../header/header.service';\nimport { NavigatorService } from '../navigator/navigator.service';\nimport { Observable } from 'rxjs';\nimport { OptionsService } from '../common/options.service';\nimport { TabsService } from '../tabs/tabs.service';\n\n@Component({\n  selector: 'c8y-bootstrap',\n  templateUrl: './bootstrap.template.html'\n})\nexport class BootstrapComponent {\n  navigatorOpen$: Observable<boolean>;\n  noAppsMargin$: Observable<boolean>;\n  tabsOrientation: string;\n\n  get showPoweredBy() {\n    return !this.options.get('hidePowered');\n  }\n\n  constructor(\n    public tabs: TabsService,\n    public ui: AppStateService,\n    public navigator: NavigatorService,\n    public actionBar: ActionBarService,\n    private options: OptionsService,\n    public headerService: HeaderService\n  ) {\n      this.noAppsMargin$ = this.headerService.map(({ nav }) => !nav.open && nav.hiddenOnStartup);\n      this.tabsOrientation = this.options.tabsHorizontal ? 'horizontal' : 'vertical';\n      this.ui.map(({ lang }) => lang).pipe(\n        distinctUntilChanged(),\n      ).subscribe(() => {\n        this.actionBar.refresh();\n      });\n    }\n}\n","import { Injectable, InjectionToken, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { fromTrigger, stateToFactory } from '../common/extension-hooks';\nimport { StateService } from '../common/state-service.abstract';\nimport { Breadcrumb, BreadcrumbItem } from './breadcrumb.model';\n\nexport const HOOK_BREADCRUMB = new InjectionToken('BreadcrumbFactory');\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BreadcrumbService extends StateService {\n  items$: Observable<Breadcrumb[]>;\n  readonly refreshTrigger = new Subject();\n  readonly state$ = new BehaviorSubject<Set<Breadcrumb>>(new Set<Breadcrumb>());\n  private preferredPath: string;\n\n  constructor(private injector: Injector, router: Router) {\n    super();\n    this.items$ = fromTrigger(router, this.refreshTrigger, [\n      () => this.injector.get(HOOK_BREADCRUMB, []),\n      stateToFactory(this.state$)\n    ]).pipe(\n      map(breadcrumbs => this.sortByPreferredPath(breadcrumbs)),\n      shareReplay(1)\n    );\n  }\n\n  get state() {\n    return this.state$.value;\n  }\n\n  /**\n   * Adds a new item to the action bar in the header.\n   * @param item The item to add.\n   */\n  add(item: Breadcrumb) {\n    this.state.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes an action bar item from the header.\n   * @param item The item to remove.\n   */\n  remove(item: Breadcrumb) {\n    this.state.delete(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Refresh the extension factories\n   */\n  refresh() {\n    this.refreshTrigger.next(1);\n  }\n\n  /**\n   * Sets the crumb that contains that path to the top.\n   * @param path The path to prefer.\n   */\n  selectPreferredByPath(path: string) {\n    this.preferredPath = path;\n    this.refresh();\n  }\n\n  sortByPreferredPath(breadcrumbs) {\n    if (this.preferredPath) {\n      return breadcrumbs.sort(bc =>\n        bc.items.find((item: BreadcrumbItem) => !!item.path.match(this.preferredPath)) ? -1 : 1\n      );\n    }\n    return breadcrumbs;\n  }\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const LANGUAGES = new InjectionToken('Languages');\n","import { InjectionToken } from '@angular/core';\n\nexport const LOCALE_PATH = new InjectionToken('Locale path');\n","import { InjectionToken } from '@angular/core';\n\nexport const HOOK_PATTERN_MESSAGES = new InjectionToken('Pattern Messages');\n","import { Injectable, Inject } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { mapValues, each } from 'lodash-es';\nimport { HOOK_PATTERN_MESSAGES } from './patterns-message.hook';\nimport { formatDate } from '@angular/common';\n\n/**\n * A service to translate messages by using regexp patterns.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class PatternMessagesService {\n  translateService: TranslateService;\n  patterns: any = {};\n  pipes = {\n    absoluteDate: (date: string|number|Date) =>\n      formatDate(date, 'medium', this.translateService.currentLang),\n    translate: (key) =>\n      this.translateService.instant(key)\n  };\n\n  constructor(\n    @Inject(HOOK_PATTERN_MESSAGES) patterns\n  ) {\n    each(patterns, (pattern) => {\n      Object.assign(this.patterns, pattern);\n    });\n  }\n\n  translate(message: string) {\n    const translation = this.translateWithPatterns(message);\n    return (translation !== message) ? translation : '';\n  }\n\n  private translateWithPatterns(message, patterns = this.patterns) {\n    let translatedMessage = message;\n\n    each(patterns, (patternCfg, pattern) => {\n      const globalRegExp = new RegExp(pattern, 'g');\n      let globalMatch;\n\n      if (!globalRegExp.test(translatedMessage)) {\n        return;\n      }\n      globalRegExp.test(''); // reset the regexp\n      globalMatch = globalRegExp.exec(translatedMessage);\n      while (globalMatch !== null) {\n        const [ localMatch ] = globalMatch;\n\n        const placeholderValues = mapValues(patternCfg.placeholders, (placeholder) => {\n          const expr = placeholder.capture || placeholder;\n          let replacement = localMatch.replace(new RegExp(pattern, 'g'), expr);\n\n          if (placeholder.translate) {\n            replacement = this.translateWithPatterns(replacement, placeholder.translate);\n          }\n\n          return replacement;\n        });\n        translatedMessage = translatedMessage.replace(\n          localMatch,\n          this.translateWithParams(patternCfg, placeholderValues)\n        );\n\n        globalMatch = globalRegExp.exec(translatedMessage);\n      }\n    });\n    return translatedMessage;\n  }\n\n  private translateWithParams(patternCfg: any, params: any = {}) {\n    const { defaultLang, currentLang, compiler } = this.translateService;\n    const translations = this.translateService.store.translations[currentLang];\n    const defaultTranslations = this.translateService.store.translations[defaultLang];\n    const originalKey = patternCfg.gettext;\n\n    let originalValue = originalKey;\n    if (translations) {\n      if (translations[originalKey]) {\n        originalValue = translations[originalKey];\n      } else if (defaultTranslations) {\n        if (defaultTranslations[originalKey]) {\n          originalValue = defaultTranslations[originalKey];\n        }\n      }\n    }\n\n    let key = originalKey;\n    let value = originalValue;\n    const interpolateParams = {\n      ...params,\n      noPatternMessages: true\n    };\n\n    let match;\n    const pipeRegex = RegExp('{{\\\\s*([^\\\\s]+)\\\\s*\\\\|\\\\s*([^\\\\s]+)\\\\s*}}', 'g');\n    // tslint:disable-next-line:no-conditional-assignment\n    while ((match = pipeRegex.exec(originalKey)) !== null) {\n      const [placeholder, paramName, pipeName] = match;\n      if (this.pipes[pipeName]) {\n        key = key.replace(placeholder, `{{${paramName}}}`);\n        value = value.replace(placeholder, `{{${paramName}}}`);\n        interpolateParams[paramName] = this.pipes[pipeName](params[paramName]);\n      }\n    }\n\n    if (translations) {\n      translations[key] = compiler.compile(value, currentLang);\n    }\n    return this.translateService.instant(key, interpolateParams);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { PatternMessagesService } from './pattern-messages.service';\nimport {\n  MissingTranslationHandler,\n  MissingTranslationHandlerParams,\n  TranslateParser,\n  TranslateService\n} from '@ngx-translate/core';\n\n@Injectable()\nexport class MissingTranslationCustomHandler implements MissingTranslationHandler {\n  translateService: TranslateService;\n  cache: any = {};\n\n  constructor(\n    private parser: TranslateParser,\n    private patternMessagesService: PatternMessagesService\n  ) {}\n\n  handle(params: MissingTranslationHandlerParams) {\n    const { key: messageKey, interpolateParams, translateService } = params;\n    this.translateService = translateService;\n\n    let translation = this.getFromCache(messageKey, interpolateParams);\n\n    if (!translation) {\n      const patternMessageTranslation = this.getPatternMessageTranslation(messageKey, interpolateParams);\n      if (patternMessageTranslation) {\n        translation = patternMessageTranslation;\n      } else {\n        translation = this.parser.interpolate(messageKey, interpolateParams);\n      }\n\n      this.addToCache(messageKey, interpolateParams, translation);\n    }\n\n    return translation;\n  }\n\n  private getFromCache(messageKey: string, interpolateParams: object): string {\n    const { currentLang } = this.translateService;\n    const currentCache = this.cache[currentLang] || {};\n    const cacheKey = this.getCacheKey(messageKey, interpolateParams);\n    return currentCache[cacheKey];\n  }\n\n  private addToCache(messageKey: string, interpolateParams: object, translation: string) {\n    const { currentLang } = this.translateService;\n    const currentCache = this.cache[currentLang] = this.cache[currentLang] || {};\n    const cacheKey = this.getCacheKey(messageKey, interpolateParams);\n    currentCache[cacheKey] = translation;\n  }\n\n  private getCacheKey(messageKey: string, interpolateParams: object): string {\n    return interpolateParams ? `${messageKey} ${JSON.stringify(interpolateParams)}` : messageKey;\n  }\n\n  private getPatternMessageTranslation(messageKey: string, interpolateParams: object): string {\n    const shouldTryPatternMessages = !interpolateParams || !((interpolateParams as any).noPatternMessages);\n\n    if (shouldTryPatternMessages) {\n      if (!this.patternMessagesService.translateService) {\n        this.patternMessagesService.translateService = this.translateService;\n      }\n      return this.patternMessagesService.translate(messageKey);\n    }\n\n    return undefined;\n  }\n}\n","/* tslint:disable:max-line-length */\nimport { gettext } from './gettext';\n\nconst bulkOperationAuditLogTextPlaceholders = {\n  updatesList: {\n    capture: '$1',\n    translate: {\n      \"status='(.+?)'\": {\n        gettext: gettext('status=\"{{status | translate}}\"'),\n        placeholders: {\n          status: '$1'\n        }\n      },\n      \"generalStatus='(.+?)'\": {\n        gettext: gettext('generalStatus=\"{{generalStatus | translate}}\"'),\n        placeholders: {\n          generalStatus: '$1'\n        }\n      },\n      \"progress='(.+?)'\": {\n        gettext: gettext('progress=\"{{progress}}\"'),\n        placeholders: {\n          progress: '$1'\n        }\n      },\n      'note=(.+?)': {\n        gettext: gettext('note=\"{{note}}\"'),\n        placeholders: {\n          note: '$1'\n        }\n      }\n    }\n  }\n};\n\nexport const MESSAGES = {\n  '^Access is denied$': {\n    gettext: gettext('Access denied.')\n  },\n  '^Alarm created$': {\n    gettext: gettext('Alarm created')\n  },\n  '^Alarm updated$': {\n    gettext: gettext('Alarm updated')\n  },\n  '^API is not available with the new domain$': {\n    gettext: gettext('Could not activate custom domain. DNS setup is incorrect.')\n  },\n  '^Application with given name already exist$': {\n    gettext: gettext('Application with given name already exists.')\n  },\n  '^Application with id (.+?) is already assigned to the tenant (.+?)$': {\n    gettext: gettext('This application is already assigned to tenant \"{{tenant}}\".'),\n    placeholders: {\n      tenant: '$2'\n    }\n  },\n  '^Apply software changes: (.+?)\\\\.?$': {\n    gettext: gettext('Apply software changes: {{ softwareChanges }}'),\n    placeholders: {\n      softwareChanges: {\n        capture: '$1',\n        translate: {\n          'install \"(.+?)\" \\\\(version: (.+?)\\\\)': {\n            gettext: gettext('install \"{{ softwareName }}\" (version: {{ softwareVersion }})'),\n            placeholders: {\n              softwareName: '$1',\n              softwareVersion: '$2'\n            }\n          },\n          'install \"([^\"]+)\"(?! \\\\(version: .+?\\\\))': {\n            gettext: gettext('install \"{{ softwareName }}\"'),\n            placeholders: {\n              softwareName: '$1'\n            }\n          },\n          'delete \"(.+?)\" \\\\(version: (.+?)\\\\)': {\n            gettext: gettext('delete \"{{ softwareName }}\" (version: {{ softwareVersion }})'),\n            placeholders: {\n              softwareName: '$1',\n              softwareVersion: '$2'\n            }\n          },\n          'delete \"([^\"]+)\"(?! \\\\(version: .+?\\\\))': {\n            gettext: gettext('delete \"{{ softwareName }}\"'),\n            placeholders: {\n              softwareName: '$1'\n            }\n          }\n        }\n      }\n    }\n  },\n  '^Assign device profile (.+?) to device (.+?)$': {\n    gettext: gettext('Assign device profile {{profileName}} to device {{deviceName}}'),\n    placeholders: {\n      profileName: '$1',\n      deviceName: '$2'\n    }\n  },\n  '^(.+)pplication for tenant (.+) with properties \\\\( (.+?) \\\\) already exists$': {\n    gettext: gettext(\n      'Application for tenant \"{{tenant}}\" with the following values ({{valuesList}}) already exists.'\n    ),\n    placeholders: {\n      tenant: '$2',\n      valuesList: '$3'\n    }\n  },\n  '^Authentication failed! : User account is locked$': {\n    gettext: gettext('Authentication failed due to: user account is locked.')\n  },\n  '^Availability monitoring record$': {\n    gettext: gettext('Availability monitoring record')\n  },\n  '^Can not activate a certificate which is either expired or not yet valid$': {\n    gettext: gettext('Cannot activate a certificate which is either expired or not yet valid.')\n  },\n  '^Cannot add certificate - certificate with (.+?) fingerprint already exists. : Certificate with (.+?) fingerprint already exists.': {\n    gettext: gettext(\n      'Could not add certificate. Certificate with {{fingerprint}} fingerprint already exists.'\n    ),\n    placeholders: {\n      fingerprint: '$1'\n    }\n  },\n  '^Cannot change password. : Provided token does not exist.$': {\n    gettext: gettext('Cannot change password: provided token is invalid.')\n  },\n  '^Cannot deploy module (.*)$': {\n    gettext: gettext('Cannot deploy module due to error: \"{{ errorMessage | translate }}\".'),\n    placeholders: {\n      errorMessage: '$1'\n    }\n  },\n  \"^Cannot deploy module (.+?)! : Compilation failed in module '(.+?)' in expression '(.+?)' : Incorrect syntax near '(.+?)' at line (\\\\d+) column (\\\\d+) \\\\[([\\\\S\\\\s]+?)\\\\]$\": {\n    gettext: gettext(\n      'Could not deploy module \"{{moduleName}}\". Compilation failed in expression \"{{expression}}\": incorrect syntax near \"{{incorrectExpression}}\" at line {{line}} column {{column}}.'\n    ),\n    placeholders: {\n      moduleName: '$1',\n      expression: '$3',\n      incorrectExpression: '$4',\n      line: '$5',\n      column: '$6'\n    }\n  },\n  \"^Cannot deploy module (.+?)! : Compilation failed in module '(.+?)' in expression '(.+?)' : Incorrect syntax near '(.+?)' at line (\\\\d+) column (\\\\d+) near reserved keyword '(.+?)' \\\\[([\\\\S\\\\s]+?)\\\\]$\": {\n    gettext: gettext(\n      'Could not deploy module \"{{moduleName}}\". Compilation failed in expression \"{{expression}}\": incorrect syntax near \"{{incorrectExpression}}\" at line {{line}} column {{column}} near reserved keyword \"{{keyword}}\".'\n    ),\n    placeholders: {\n      moduleName: '$1',\n      expression: '$3',\n      incorrectExpression: '$4',\n      line: '$5',\n      column: '$6',\n      keyword: '$7'\n    }\n  },\n  \"^Cannot deploy module (.+?)! : Compilation failed in module '(.+?)' in expression '(.+?)' : Incorrect syntax near '(.+?)' at line (\\\\d+) column (\\\\d+), please check the where clause \\\\[([\\\\S\\\\s]+?)\\\\]$\": {\n    gettext: gettext(\n      'Could not deploy module \"{{moduleName}}\". Compilation failed in expression \"{{expression}}\": incorrect syntax near \"{{incorrectExpression}}\" at line {{line}} column {{column}}, check \"where\" clause.'\n    ),\n    placeholders: {\n      moduleName: '$1',\n      expression: '$3',\n      incorrectExpression: '$4',\n      line: '$5',\n      column: '$6'\n    }\n  },\n  \"^Cannot deploy module (.+?)! : Deployment failed in module '(.+?)' in expression '(.+?)' : Exception compiling script '(.+?)' of dialect '(.+?)': missing (.+?) before statement \\\\((.+?)\\\\) \\\\[([\\\\S\\\\s]+?)\\\\]$\": {\n    gettext: gettext(\n      'Could not deploy module \"{{moduleName}}\". Compilation failed in expression \"{{expression}}\": exception compiling script \"{{scriptName}}\" of dialect \"{{scriptDialect}}\": missing \"{{missingSyntax}}\" before statement \"{{affectedStatement}}\".'\n    ),\n    placeholders: {\n      moduleName: '$1',\n      expression: '$3',\n      scriptName: '$4',\n      scriptDialect: '$5',\n      missingSyntax: '$6',\n      affectedStatement: '$7'\n    }\n  },\n  \"^Cannot execute bulk operation on empty group. Group with id='(\\\\d+?)' doesn't have child assets.$\": {\n    gettext: gettext(\n      'Could not execute bulk operation on an empty group. Group with ID \"{{groupId}}\" has no child assets.'\n    ),\n    placeholders: {\n      groupId: '$1'\n    }\n  },\n  \"^Cannot execute bulk operation on empty group. DynamicGroup with id='(\\\\d+?)' doesn't have child assets$\": {\n    gettext: gettext(\n      'Could not execute bulk operation on an empty group. Smart group with ID \"{{groupId}}\" has no child assets.'\n    ),\n    placeholders: {\n      groupId: '$1'\n    }\n  },\n  '^Cannot parse X509 certificate. : Could not parse certificate: (.+?)$': {\n    gettext: gettext('Could not parse X.509 certificate: {{ failureReason | translate }}.'),\n    placeholders: {\n      failureReason: '$1'\n    }\n  },\n  '^Cannot reschedule bulk operation. All its operations are successful$': {\n    gettext: gettext('Cannot reschedule bulk operation. All its operations are already successful.')\n  },\n  '^Cannot reset user password : Cannot find user with such email.$': {\n    gettext: gettext('Cannot reset password for user with such email: email not found.')\n  },\n  '^Cannot update/delete application binary via this endpoint$': {\n    gettext: gettext('Cannot update/delete application binary via this endpoint')\n  },\n  \"^Can't delete user because it is used by another managed object$\": {\n    gettext: gettext(\n      'Cannot delete device with associated device owner because this owner is still assigned to other device(s). Try to remove only the device.'\n    )\n  },\n  '^Cep module created$': {\n    gettext: gettext('CEP module created')\n  },\n  '^Cep module updated$': {\n    gettext: gettext('CEP module updated')\n  },\n  '^Cep module deleted$': {\n    gettext: gettext('CEP module deleted')\n  },\n  '^Cep module \"(.+?)\" created$': {\n    gettext: gettext('CEP module \"{{name}}\" created'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Cep module \"(.+?)\" updated$': {\n    gettext: gettext('CEP module \"{{name}}\" updated'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Cep module \"(.+?)\" deleted$': {\n    gettext: gettext('CEP module \"{{name}}\" deleted'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Command state is invalid: (.+)$': {\n    gettext: gettext('Command state is invalid: {{violations}}'),\n    placeholders: {\n      violations: {\n        capture: '$1',\n        translate: {\n          '(\\\\w+?) - may not be null': {\n            gettext: gettext('\"{{field}}\" must not be null'),\n            placeholders: {\n              field: '$1'\n            }\n          }\n        }\n      }\n    }\n  },\n  '^Could not connect to endpoint (.+)\\\\. Could not verify `(.+)` host key with fingerprint `(.+)` for `(.+)` on port (.+)\\\\. If you expected that key, please remove the previous one from configuration to allow for connection\\\\.$': {\n    gettext: gettext(\n      'Could not connect to endpoint \"{{endpointName}}\". Could not verify {{keyType}} host key with fingerprint {{fingerprint}} for host {{host}} on port {{port}}. If you expected this key, please remove the previous one from configuration to allow for connection.'\n    ),\n    placeholders: {\n      endpointName: '$1',\n      keyType: '$2',\n      fingerprint: '$3',\n      host: '$4',\n      port: '$5'\n    }\n  },\n  '^Could not login to ssh server on endpoint \"(.+)\"\\\\. Provided credential for user \"(.+)\" is incorrect\\\\.$': {\n    gettext: gettext(\n      'Could not access SSH server on endpoint \"{{endpointName}}\". Provided credentials for user \"{{userName}}\" are incorrect.'\n    ),\n    placeholders: {\n      endpointName: '$1',\n      userName: '$2'\n    }\n  },\n  '^Could not save object remoteAccessUpdate: (.+)$': {\n    gettext: '{{errorMessages}}',\n    placeholders: {\n      errorMessages: {\n        capture: '$1',\n        translate: {\n          'Could not recognize host-key format': {\n            gettext: gettext('Could not recognize \"Host key\" format')\n          },\n          'Could not recognize key-pair format': {\n            gettext: gettext('Could not recognize the format of \"Public key\" or \"Private key\"')\n          }\n        }\n      }\n    }\n  },\n  '^Could not update user. : Error persisting user (.+?)!$': {\n    gettext: gettext('Could not update user \"{{username}}\".'),\n    placeholders: {\n      username: '$1'\n    }\n  },\n  'ˆCreate bulk operation$': {\n    gettext: gettext('Create bulk operation')\n  },\n  '^Create bulk operation: (.+)$': {\n    gettext: gettext('Create bulk operation: {{updatesList}}'),\n    placeholders: bulkOperationAuditLogTextPlaceholders\n  },\n  '^Creation ramp must be greater than (\\\\d+?)$': {\n    gettext: gettext('Bulk operation delay must be greater than {{minSeconds}} seconds.'),\n    placeholders: {\n      minSeconds: '$1'\n    }\n  },\n  '^Created container$': {\n    gettext: gettext('Container created.')\n  },\n  '^Created pod: (.+)$': {\n    gettext: gettext('Pod \"{{imageName}}\" created.'),\n    placeholders: {\n      imageName: '$1'\n    }\n  },\n  '^CSV file contained empty dataset$': {\n    gettext: gettext('No entries found in uploaded CSV file.')\n  },\n  '^Cycle detected for route (.+?)!$': {\n    gettext: gettext('Cycle detected for route {{route}}.'),\n    placeholders: {\n      route: '$1'\n    }\n  },\n  '^Data broker processing is currently overloaded and may stop forwarding your data\\\\. Please contact support\\\\.$': {\n    gettext: gettext(\n      'Data broker processing is currently overloaded and may stop forwarding your data. Please contact support.'\n    )\n  },\n  '^Data broker processing is not able to connect do destination tenant, thus data forwarding is not working\\\\. Please contact support\\\\.$': {\n    gettext: gettext(\n      'Data broker processing is not able to connect to destination tenant, thus data forwarding is not working. Please contact support.'\n    )\n  },\n  '^Delete bulk operation$': {\n    gettext: gettext('Delete bulk operation')\n  },\n  '^Delete bulk operation: (.+)$': {\n    gettext: gettext('Delete bulk operation: {{updatesList}}'),\n    placeholders: bulkOperationAuditLogTextPlaceholders\n  },\n  \"^Device id '(.+?)' contains '(.+?)' character which is not permitted.$\": {\n    gettext: gettext('ID \"{{deviceId}}\" contains invalid character: \"{{invalidCharacter}}\".'),\n    placeholders: {\n      deviceId: '$1',\n      invalidCharacter: '$2'\n    }\n  },\n  \"^Device name: '(.+?)', alarm text: '(.+?)'$\": {\n    gettext: gettext('Device name: \"{{deviceName}}\", alarm text: \"{{alarmText | translate}}\"'),\n    placeholders: {\n      deviceName: '$1',\n      alarmText: '$2'\n    }\n  },\n  '^Display name$': {\n    gettext: gettext('Login alias')\n  },\n  '^Domain name in uploaded certificate differs from the one in use$': {\n    gettext: gettext(\n      'Domain name in uploaded certificate differs from the one in use. Please deactivate the custom domain before uploading new certificate.'\n    )\n  },\n  '^Domain name is already in use by another tenant!$': {\n    gettext: gettext('Domain name is already used by another tenant.')\n  },\n  '^Duplicated connector for instanceUrl (.+?)!$': {\n    gettext: gettext('Target URL {{targetUrl}} already used by another connector.'),\n    placeholders: {\n      targetUrl: '$1'\n    }\n  },\n  '^Duplicated connector for name (.+?)!$': {\n    gettext: gettext('Connector name \"{{name}}\" already used by another connector.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Entry is outside of the target dir: (.+)$': {\n    gettext: gettext('File entry outside of the target directory: \"{{path}}\".'),\n    placeholders: {\n      path: '$1'\n    }\n  },\n  '^Error during password validation. : Password must have at least (\\\\d+?) characters and no more than (\\\\d+?) and must contain only Latin1 characters.$': {\n    gettext: gettext(\n      'Password is invalid. It must have at least {{minCharactersCount}} and no more than {{maxCharactersCount}} characters.'\n    ),\n    placeholders: {\n      minCharactersCount: '$1',\n      maxCharactersCount: '$2'\n    }\n  },\n  '^Error during password validation. : Your password has been used already. Choose another.$': {\n    gettext: gettext('This password has already been used earlier. Use a different one.')\n  },\n  \"^Error in statement (.+?):(.+?)! : Incorrect syntax near '(.+?)' near reserved keyword '(.+?)' \\\\[([\\\\S\\\\s]+?)\\\\]$\": {\n    gettext: gettext(\n      'Error in statement {{moduleName}}:{{statementNumber}}. Incorrect syntax near expression \"{{expression}}\" near reserved keyword \"{{keyword}}\".'\n    ),\n    placeholders: {\n      moduleName: '$1',\n      statementNumber: '$2',\n      expression: '$3',\n      keyword: '$4'\n    }\n  },\n  '^External id not found; external id = ID \\\\[type=(.+?), value=(.+?)\\\\]$': {\n    gettext: gettext('External ID not found for type \"{{type}}\" and value \"{{value}}\".'),\n    placeholders: {\n      type: '$1',\n      value: '$2'\n    }\n  },\n  '^Error occurred when trying to find an Application for id ID (.+) : Could not find application by ID (\\\\d+)$': {\n    gettext: gettext('Could not find application by ID {{applicationId}}.'),\n    placeholders: {\n      applicationId: '$2'\n    }\n  },\n  '^Http status code: 404\\n{error=\"options/Not Found\",message=\"Unable to find option by given key: sigfox-agent/provider.token\",info=\"https://www.cumulocity.com/guides/reference-guide/#error_reporting\",details=\"null\"}': {\n    gettext: gettext('Unable to find option by given key: sigfox-agent/provider.token')\n  },\n  '^Failed to delete application.  : Cannot remove application assigned to other tenants.$': {\n    gettext: gettext('Could not delete application assigned to other tenants.')\n  },\n  '^Failed to extract certificate from PKCS12$': {\n    gettext: gettext('Failed to extract certificate from PKCS12.')\n  },\n  '^Failed to update domain at the platform$': {\n    gettext: gettext('Failed to update domain at the platform.')\n  },\n  \"^Finding device data from database failed : No managedObject for id '(.+?)'!$\": {\n    gettext: gettext('Could not find managed object with ID \"{{deviceId}}\".'),\n    placeholders: {\n      deviceId: '$1'\n    }\n  },\n  '^Following mandatory fields should be included: (.+?)$': {\n    gettext: gettext('Following mandatory fields should be included: {{fields}}'),\n    placeholders: {\n      fields: '$1'\n    }\n  },\n  '^Global Role updated$': {\n    gettext: gettext('Global role updated')\n  },\n  '^Global Role (.+?) updated$': {\n    gettext: gettext('Global role \"{{name}}\" updated'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Global Role (.+?) updated: (.+)$': {\n    gettext: gettext('Global role \"{{name}}\" updated: {{updatesList}}'),\n    placeholders: {\n      name: '$1',\n      updatesList: {\n        capture: '$2',\n        translate: {\n          'applications \\\\[([^\\\\]]+?)\\\\] added': {\n            gettext: gettext('applications {{list}} added'),\n            placeholders: {\n              list: '$1'\n            }\n          },\n          'applications \\\\[([^\\\\]]+?)\\\\] removed': {\n            gettext: gettext('applications {{list}} removed'),\n            placeholders: {\n              list: '$1'\n            }\n          },\n          'roles \\\\[([^\\\\]]+?)\\\\] added': {\n            gettext: gettext('roles {{list}} added'),\n            placeholders: {\n              list: '$1'\n            }\n          },\n          'roles \\\\[([^\\\\]]+?)\\\\] removed': {\n            gettext: gettext('roles {{list}} removed'),\n            placeholders: {\n              list: '$1'\n            }\n          }\n        }\n      }\n    }\n  },\n  '^Global Roles$': {\n    gettext: gettext('Global roles')\n  },\n  '^Operation updated: (.+)$': {\n    gettext: gettext('Operation updated: {{updatesList}}'),\n    placeholders: {\n      updatesList: {\n        capture: '$1',\n        translate: {\n          \"status='(.+?)'\": {\n            gettext: gettext('status=\"{{status | translate}}\"'),\n            placeholders: {\n              status: '$1'\n            }\n          },\n          \"description='(.+?)'\": {\n            gettext: gettext('description=\"{{description | translate}}\"'),\n            placeholders: {\n              description: '$1'\n            }\n          },\n          \"device name='(.+?)'\": {\n            gettext: gettext('device name=\"{{deviceName}}\"'),\n            placeholders: {\n              deviceName: '$1'\n            }\n          },\n          \"failure reason='(.+?)'\": {\n            gettext: gettext('failure reason=\"{{failureReason | translate}}\"'),\n            placeholders: {\n              failureReason: '$1'\n            }\n          }\n        }\n      }\n    }\n  },\n  '^ID \\\\[type=(.+?), value=(.+?)\\\\] was already bound to different Global ID.$': {\n    gettext: gettext('External ID \"{{value}}\" of the type \"{{type}}\" already exists.'),\n    placeholders: {\n      type: '$1',\n      value: '$2'\n    }\n  },\n  '^Invalid credentials! : Bad credentials$': {\n    gettext: gettext('Invalid credentials.')\n  },\n  '^Invalid credentials! : No phone number provided$': {\n    gettext: gettext('Log into the management tenant first and enter your phone number.')\n  },\n  '^Inventory Role removed$': {\n    gettext: gettext('Inventory role removed')\n  },\n  '^Inventory Role (.+?) removed': {\n    gettext: gettext('Inventory role \"{{name}}\" deleted.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Inventory Role updated$': {\n    gettext: gettext('Inventory role updated')\n  },\n  '^Inventory Role (.+?) updated': {\n    gettext: gettext('Inventory role \"{{name}}\" updated.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^I/O error: Connection refused; nested exception is Connection refused : Connection refused': {\n    gettext: gettext('Connection refused')\n  },\n  '^I/O error: Read timed out; nested exception is Read timed out : Read timed out': {\n    gettext: gettext('Read timed out')\n  },\n  '^Log file requested$': {\n    gettext: gettext('Log file requested.')\n  },\n  '^Managed object deleted$': {\n    gettext: gettext('Managed object deleted')\n  },\n  '^Managed object \"(.+?)\" deleted$': {\n    gettext: gettext('Managed object \"{{name}}\" deleted'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Maximum file size exceeded$': {\n    gettext: gettext('Maximum file size exceeded.')\n  },\n  \"^Message with ID (.+?) doesn't exist in smart rest template (.+?)$\": {\n    gettext: gettext(\n      'Message with ID \"{{messageId}}\" doesn\\'t exist in SmartREST template with ID \"{{templateId}}\"'\n    ),\n    placeholders: {\n      messageId: '$1',\n      templateId: '$2'\n    }\n  },\n  '^NewDeviceRequest for id = (.+?) already exists.$': {\n    gettext: gettext('Device registration request with ID {{id}} already exists.'),\n    placeholders: {\n      id: '$1'\n    }\n  },\n  '^No communication with device since (.+?)$': {\n    gettext: gettext('No communication with device since {{timestamp | absoluteDate}}.'),\n    placeholders: {\n      timestamp: '$1'\n    }\n  },\n  '^No data received from device within required interval.$': {\n    gettext: gettext('No data received from device within required interval.')\n  },\n  '^No LoRa provider settings are found. Please configure the connectivity settings.$': {\n    gettext: gettext(\n      'No LoRa provider settings are found. Please configure the connectivity settings.'\n    )\n  },\n  '^Not within any context!$': {\n    gettext: gettext('A problem occurred with microservice subscription.')\n  },\n  '^Maximum age cannot be bigger than 10 years.$': {\n    gettext: gettext('Maximum age cannot be bigger than 10 years.')\n  },\n  '^Microservice application name incorrect. Please use only lower-case letters, digits and dashes. Maximum length is (\\\\d+) characters.$': {\n    gettext: gettext(\n      'Microservice application name is incorrect: only lower case letters, digits and dashes allowed. Maximum length: {{maxLength}}.'\n    ),\n    placeholders: {\n      maxLength: '$1'\n    }\n  },\n  '^Microservice not available.*$': {\n    gettext: gettext('Microservice is not available.')\n  },\n  '^Operation created$': {\n    gettext: gettext('Operation created.')\n  },\n  '^Operation updated$': {\n    gettext: gettext('Operation updated.')\n  },\n  \"^Operation created: status='(.+?)'.\": {\n    gettext: gettext('Operation created: status=\"{{status | translate}}\".'),\n    placeholders: {\n      status: '$1'\n    }\n  },\n  '^Option created$': {\n    gettext: gettext('Option created.')\n  },\n  '^Option \"(.+?)\" created$': {\n    gettext: gettext('Option \"{{option}}\" created.'),\n    placeholders: {\n      option: '$1'\n    }\n  },\n  '^Option deleted$': {\n    gettext: gettext('Option deleted.')\n  },\n  '^Option \"(.+?)\" deleted$': {\n    gettext: gettext('Option \"{{option}}\" deleted.'),\n    placeholders: {\n      option: '$1'\n    }\n  },\n  '^Owner field error. : Cannot introduce cyclic dependency.': {\n    gettext: gettext('Could not introduce cyclic ownership dependency.')\n  },\n  '^Password change is temporary blocked.$': {\n    gettext: gettext('Password change is temporarily blocked.')\n  },\n  '^Password cipher does not match': {\n    gettext: gettext('Password cipher does not match.')\n  },\n  '^Platform application cannot be added to, nor removed from any tenant.$': {\n    gettext: gettext('Platform application cannot be added to, nor removed from any tenant.')\n  },\n  '^Private key must be provided in KEY_PAIR credentials$': {\n    gettext: gettext(\n      'Private key must be provided when \"Public / private keys\" option is selected.'\n    )\n  },\n  '^Private key cipher does not match': {\n    gettext: gettext('Private key cipher does not match')\n  },\n  '^Protocol \"(.+?)\" does not support \"(.+?)\" credentials type$': {\n    gettext: gettext(\n      'Protocol \"{{protocol}}\" does not support \"{{credentialsType}}\" credentials type.'\n    ),\n    placeholders: {\n      protocol: '$1',\n      credentialsType: '$2'\n    }\n  },\n  '^pulling image \"(.+)\"$': {\n    gettext: gettext('Pulling image: \"{{imageName}}\".'),\n    placeholders: {\n      imageName: '$1'\n    }\n  },\n  '^Real-time event processing is currently overloaded and may stop processing your events\\\\. Please contact support\\\\.$': {\n    gettext: gettext(\n      'Real-time event processing is currently overloaded and may stop processing your events. Please contact support.'\n    )\n  },\n  '^Resource ID \\\\[type=com_cumulocity_model_idtype_GId, value=(.+?)\\\\] for this request not found.$': {\n    gettext: gettext('Could not find the resource with ID \"{{id}}\".'),\n    placeholders: {\n      id: '$1'\n    }\n  },\n  '^Retrieve configuration snapshot from device (.+?)': {\n    gettext: gettext('Retrieve configuration snapshot from device {{deviceName}}'),\n    placeholders: {\n      deviceName: '$1'\n    }\n  },\n  '^Retrieve (.+?) configuration snapshot from device (.+?)': {\n    gettext: gettext(\n      'Retrieve {{configurationType}} configuration snapshot from device {{deviceName}}'\n    ),\n    placeholders: {\n      configurationType: '$1',\n      deviceName: '$2'\n    }\n  },\n  '^Scaled up replica set (.+) to (\\\\d+)$': {\n    gettext: gettext('Replica set \"{{replicaSetName}}\" scaled up to \"{{scaleNumber}}\".'),\n    placeholders: {\n      replicaSetName: '$1',\n      scaleNumber: '$2'\n    }\n  },\n  '^Send configuration snapshot (.+?) of configuration type (.+?) to device (.+?)': {\n    gettext: gettext(\n      'Send configuration snapshot {{snapshotName}} of configuration type {{configurationType}} to device {{deviceName}}'\n    ),\n    placeholders: {\n      snapshotName: '$1',\n      configurationType: '$2',\n      deviceName: '$3'\n    }\n  },\n  '^Send configuration snapshot (.+?) to device (.+?)': {\n    gettext: gettext('Send configuration snapshot {{snapshotName}} to device {{deviceName}}'),\n    placeholders: {\n      snapshotName: '$1',\n      deviceName: '$2'\n    }\n  },\n  '^Simulator state is invalid: (.+)$': {\n    gettext: gettext('Simulator state is invalid: {{violations}}'),\n    placeholders: {\n      violations: {\n        capture: '$1',\n        translate: {\n          '(\\\\w+?) - may not be null': {\n            gettext: gettext('\"{{field}}\" should not be null'),\n            placeholders: {\n              field: '$1'\n            }\n          },\n          '(\\\\w+?) - must be less than or equal to (\\\\d+)': {\n            gettext: gettext('\"{{field}}\" must be less than or equal to {{maxValue}}'),\n            placeholders: {\n              field: '$1',\n              maxValue: '$2'\n            }\n          },\n          '(\\\\w+?) - should not contain null values': {\n            gettext: gettext('\"{{field}}\" should not contain null values'),\n            placeholders: {\n              field: '$1'\n            }\n          }\n        }\n      }\n    }\n  },\n  \"^Smart rest template (.+?) doesn't exist$\": {\n    gettext: gettext('SmartREST template with id \"{{templateId}}\" doesn\\'t exist'),\n    placeholders: {\n      templateId: '$1'\n    }\n  },\n  '^Smart rule created$': {\n    gettext: gettext('Smart rule created.')\n  },\n  '^Smart rule updated$': {\n    gettext: gettext('Smart rule updated.')\n  },\n  '^Smart rule enabled$': {\n    gettext: gettext('Smart rule activated.')\n  },\n  '^Smart rule disabled$': {\n    gettext: gettext('Smart rule deactivated.')\n  },\n  '^Smart rule deleted$': {\n    gettext: gettext('Smart rule deleted.')\n  },\n  '^Smart rule \"(.+?)\" created$': {\n    gettext: gettext('Smart rule \"{{name}}\" created.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Smart rule \"(.+?)\" updated$': {\n    gettext: gettext('Smart rule \"{{name}}\" updated.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Smart rule \"(.+?)\" enabled$': {\n    gettext: gettext('Smart rule \"{{name}}\" activated.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Smart rule \"(.+?)\" disabled$': {\n    gettext: gettext('Smart rule \"{{name}}\" deactivated.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Smart rule \"(.+?)\" deleted$': {\n    gettext: gettext('Smart rule \"{{name}}\" deleted.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Started container$': {\n    gettext: gettext('Container started.')\n  },\n  '^Successfully assigned (.+) to (.+)$': {\n    gettext: gettext('\"{{imageName}}\" assigned to \"{{address}}\".'),\n    placeholders: {\n      imageName: '$1',\n      address: '$2'\n    }\n  },\n  '^Successfully pulled image \"(.+)\"$': {\n    gettext: gettext('Image \"{{imageName}}\" pulled.'),\n    placeholders: {\n      imageName: '$1'\n    }\n  },\n  '^Tenant creation failed. : Tenant with given id already exists.$': {\n    gettext: gettext('Could not create a tenant. Tenant with given domain/URL already exists.')\n  },\n  '^Tenant id cannot be a reserved sql keyword \"(.+?)\".$': {\n    gettext: gettext('Could not use a reserved SQL keyword \"{{tenantId}}\" as a domain name.'),\n    placeholders: {\n      tenantId: '$1'\n    }\n  },\n  '^Tenant \"(.+?)\" activated$': {\n    gettext: gettext('Tenant \"{{tenant}}\" activated.'),\n    placeholders: {\n      tenant: '$1'\n    }\n  },\n  '^Tenant (.+?) has sub-tenants, please remove them first!$': {\n    gettext: gettext('Could not remove tenant \"{{tenant}}\". Remove its subtenants first.'),\n    placeholders: {\n      tenant: '$1'\n    }\n  },\n  '^Tenant activated$': {\n    gettext: gettext('Tenant activated')\n  },\n  '^Tenant \"(.+?)\" created$': {\n    gettext: gettext('Tenant \"{{tenant}}\" created.'),\n    placeholders: {\n      tenant: '$1'\n    }\n  },\n  '^Tenant created$': {\n    gettext: gettext('Tenant created')\n  },\n  '^Tenant \"(.+?)\" deleted$': {\n    gettext: gettext('Tenant \"{{tenant}}\" deleted.'),\n    placeholders: {\n      tenant: '$1'\n    }\n  },\n  '^Tenant deleted$': {\n    gettext: gettext('Tenant deleted')\n  },\n  '^Tenant \"(.+?)\" suspended$': {\n    gettext: gettext('Tenant \"{{tenant}}\" suspended.'),\n    placeholders: {\n      tenant: '$1'\n    }\n  },\n  '^Tenant suspended$': {\n    gettext: gettext('Tenant suspended')\n  },\n  '^Tenant \"(.+?)\" updated: (.+?)$': {\n    gettext: gettext('Tenant \"{{tenant}}\" updated: {{properties}}.'),\n    placeholders: {\n      tenant: '$1',\n      properties: '$2'\n    }\n  },\n  '^Tenant updated$': {\n    gettext: gettext('Tenant updated')\n  },\n  '^Too Many Requests$': {\n    gettext: gettext('Too many requests. Try again later.')\n  },\n  \"^User alias equals username '(.+)'$\": {\n    gettext: gettext('Username and login alias must be different.')\n  },\n  '^User created$': {\n    gettext: gettext('User created')\n  },\n  '^User (.+?) created$': {\n    gettext: gettext('User \"{{name}}\" created'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^User deleted$': {\n    gettext: gettext('User deleted')\n  },\n  '^User (.+?) deleted$': {\n    gettext: gettext('User \"{{name}}\" deleted'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^User updated$': {\n    gettext: gettext('User updated')\n  },\n  '^User (.+?) updated: (.+)$': {\n    gettext: gettext('User \"{{name}}\" updated: {{updatesList}}'),\n    placeholders: {\n      name: '$1',\n      updatesList: {\n        capture: '$2',\n        translate: {\n          \"delegatedBy='(.+?)'\": {\n            gettext: gettext('delegated by: \"{{delegate}}\"'),\n            placeholders: {\n              delegate: '$1'\n            }\n          },\n          \"owner='(.+?)'\": {\n            gettext: gettext('owner: \"{{owner}}\"'),\n            placeholders: {\n              owner: '$1'\n            }\n          },\n          'inventory assignment \\\\[(.+?)\\\\] added': {\n            gettext: gettext('inventory assignment [{{inventoryAssignment}}] added'),\n            placeholders: {\n              inventoryAssignment: '$1'\n            }\n          },\n          'inventory assignment \\\\[(.+?)\\\\] removed': {\n            gettext: gettext('inventory assignment [{{inventoryAssignment}}] removed'),\n            placeholders: {\n              inventoryAssignment: '$1'\n            }\n          },\n          'applications \\\\[(.+?)\\\\] added$': {\n            gettext: gettext('applications [{{applicationsList}}] added'),\n            placeholders: {\n              applicationsList: '$1'\n            }\n          },\n          'applications \\\\[(.+?)\\\\] removed$': {\n            gettext: gettext('applications [{{applicationsList}}] removed'),\n            placeholders: {\n              applicationsList: '$1'\n            }\n          },\n          'global roles \\\\[(.+?)\\\\] added$': {\n            gettext: gettext('global roles [{{globalRolesList}}] added'),\n            placeholders: {\n              globalRolesList: '$1'\n            }\n          },\n          'global roles \\\\[(.+?)\\\\] removed$': {\n            gettext: gettext('global roles [{{globalRolesList}}] removed'),\n            placeholders: {\n              globalRolesList: '$1'\n            }\n          }\n        }\n      }\n    }\n  },\n  \"^User with username '(.+?)' already exists! : Duplicated: (.+?)$\": {\n    gettext: gettext('User \"{{username}}\" already exists.'),\n    placeholders: {\n      username: '$1'\n    }\n  },\n  \"^User with username or alias '(.+)' already exists! : Duplicated: (.+)$\": {\n    gettext: gettext('User with username or login alias \"{{usernameOrAlias}}\" already exists.'),\n    placeholders: {\n      usernameOrAlias: '$1'\n    }\n  },\n  \"^User with email '(.+?)' already exists! : Duplicated: (.+?)$\": {\n    gettext: gettext('User with email \"{{email}}\" already exists.'),\n    placeholders: {\n      email: '$1'\n    }\n  },\n  '^unable to find option with given key (.+?) : Could not find entity Option by ID (.+?)!$': {\n    gettext: gettext('Unable to get tenant option: \"{{option}}\".'),\n    placeholders: {\n      option: '$2'\n    }\n  },\n  '^unable to find option with given key (.+?) : There is no system property for key (.+?)$': {\n    gettext: gettext('Unable to get system option: \"{{option}}\".'),\n    placeholders: {\n      option: '$2'\n    }\n  },\n  '^Write failed with error code 16733 and error message \\'trying to index text where term list is too big, max is 4mb _id: \"(.+?)\"\\'$': {\n    gettext: gettext('The uploaded image cannot be bigger than 4 MB. Please upload a smaller one.')\n  },\n  '^Write failed with error code 17280 and error message \\'WiredTigerIndex::insert: key too large to index, failing (.+?) { : \"(.+?)\" }\\'$': {\n    gettext: gettext('The chosen name is too long. Please try a shorter one.')\n  },\n  '^You have reached devices limit. No more devices can be registered.$': {\n    gettext: gettext('You reached devices limit. No more devices can be registered.')\n  },\n  '^(.+) succeeded for volume \"(.+)\"': {\n    gettext: gettext('Operation \"{{operation}}\" succeeded for volume \"{{volume}}\".'),\n    placeholders: {\n      operation: '$1',\n      volume: '$2'\n    }\n  },\n  \"^Exception on tenant (.+) in statement '(.+)': Invocation exception when invoking method '(.+)' of class '(.+)' passing parameters \\\\[(.+)\\\\] for statement '(.+)': (.+) : (.+)$\": {\n    gettext: gettext(\n      'Exception on tenant {{tenantId}} in statement \"{{moduleName}}\": Invocation exception when invoking method \"{{methodName}}\" of class \"{{classPath}}\" passing parameters [{{parameters}}] for statement \"{{statement}}\": {{exceptionType}} : {{exceptionMessage}}.'\n    ),\n    placeholders: {\n      tenantId: '$1',\n      moduleName: '$2',\n      methodName: '$3',\n      classPath: '$4',\n      parameters: '$5',\n      statement: '$6',\n      exceptionType: '$7',\n      exceptionMessage: '$8'\n    }\n  },\n  '^No nodes are available that match all of the predicates: (.+).$': {\n    gettext: gettext('No nodes are available that match all of the predicates: [{{predicates}}].'),\n    placeholders: {\n      predicates: '$1'\n    }\n  },\n  '^Readiness probe failed: (.+) (.+): (.+): request canceled while waiting for connection \\\\(Client.Timeout exceeded while awaiting headers\\\\)$': {\n    gettext: gettext(\n      'Readiness probe failed: {{requestMethod}} {{uri}}: {{protocol}}: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).'\n    ),\n    placeholders: {\n      requestMethod: '$1',\n      uri: '$2',\n      protocol: '$3'\n    }\n  },\n  '^Liveness probe failed: (.+) (.+): (.+): request canceled while waiting for connection \\\\(Client.Timeout exceeded while awaiting headers\\\\)$': {\n    gettext: gettext(\n      'Liveness probe failed: {{requestMethod}} {{uri}}: {{protocol}}: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).'\n    ),\n    placeholders: {\n      requestMethod: '$1',\n      uri: '$2',\n      protocol: '$3'\n    }\n  },\n  '^Error syncing pod$': {\n    gettext: gettext('Pod synchronization error.')\n  },\n  '^Failed create pod sandbox.$': {\n    gettext: gettext('Pod sandbox creation failed.')\n  },\n  '^Exception on tenant (.+) in statement \\'(.+)\\': Http status code: (\\\\d+) \\\\{error=\"alarm/Unprocessable Entity\",message=\"(.+)\",info=\"https://www.cumulocity.com/guides/reference-guide/#error_reporting\",details=\"null\"\\\\}$': {\n    gettext: gettext(\n      'Exception on tenant {{tenantId}} in statement \"{{statement}}\": HTTP status code: {{httpStatusCode}} : {{message | translate}}'\n    ),\n    placeholders: {\n      tenantId: '$1',\n      statement: '$2',\n      httpStatusCode: '$3',\n      message: '$4'\n    }\n  },\n  \"^User '(.+)' is managed by a remote identity management service defined by an administrator, direct update is forbidden$\": {\n    gettext: gettext(\n      'User \"{{userName}}\" is managed by a remote identity management service defined by an administrator, direct update is forbidden.'\n    ),\n    placeholders: {\n      userName: '$1'\n    }\n  },\n  '^Added new child device to \"(.+)\" \\\\(ID: (.+)\\\\).$': {\n    gettext: gettext('Added new child device to \"{{parentDeviceName}}\" (ID: {{parentDeviceId}}).'),\n    placeholders: {\n      parentDeviceName: '$1',\n      parentDeviceId: '$2'\n    }\n  },\n  '^Updated child device of \"(.+)\" \\\\(ID: (.+)\\\\).$': {\n    gettext: gettext('Updated child device of \"{{parentDeviceName}}\" (ID: {{parentDeviceId}}).'),\n    placeholders: {\n      parentDeviceName: '$1',\n      parentDeviceId: '$2'\n    }\n  },\n  '^Added child device \"(.+)\" \\\\(ID: (.+)\\\\).$': {\n    gettext: gettext('Added child device \"{{name}}\" (ID: {{id}}).'),\n    placeholders: {\n      name: '$1',\n      id: '$2'\n    }\n  },\n  '^Removed child device \"(.+)\" \\\\(ID: (.+)\\\\).$': {\n    gettext: gettext('Removed child device \"{{name}}\" (ID: {{id}}).'),\n    placeholders: {\n      name: '$1',\n      id: '$2'\n    }\n  },\n  '^Change value of \"(.+)\" to (.+) (.+).$': {\n    gettext: gettext('Change value of \"{{name}}\" to {{value}}{{unit}}.'),\n    placeholders: {\n      name: '$1',\n      value: '$2',\n      unit: '$3'\n    }\n  },\n  '^Change value of \"(.+)\" to (.+).$': {\n    gettext: gettext('Change value of \"{{name}}\" to {{value}}.'),\n    placeholders: {\n      name: '$1',\n      value: '$2'\n    }\n  },\n  '^Change status of \"(.+)\" to \"(.+)\".$': {\n    gettext: gettext('Change status of \"{{name}}\" to \"{{label}}\".'),\n    placeholders: {\n      name: '$1',\n      label: '$2'\n    }\n  },\n  '^Send message \"(.+)\".$': {\n    gettext: gettext('Send message \"{{str}}\".'),\n    placeholders: {\n      str: '$1'\n    }\n  },\n  '^Close relay (.+).$': {\n    gettext: gettext('Close relay {{number}}.'),\n    placeholders: {\n      number: '$1'\n    }\n  },\n  '^Open relay (.+).$': {\n    gettext: gettext('Open relay {{number}}.'),\n    placeholders: {\n      number: '$1'\n    }\n  },\n  '^Change trace status to (.+).$': {\n    gettext: gettext('Change trace status to {{state | translate}}.'),\n    placeholders: {\n      state: '$1'\n    }\n  },\n  '^Change relay status to (.+).$': {\n    gettext: gettext('Change relay status to {{status | translate}}.'),\n    placeholders: {\n      status: '$1'\n    }\n  },\n  '^Closing relay (.+).$': {\n    gettext: gettext('Closing relay {{number}}.'),\n    placeholders: {\n      number: '$1'\n    }\n  },\n  '^Opening relay (.+).$': {\n    gettext: gettext('Opening relay {{number}}.'),\n    placeholders: {\n      number: '$1'\n    }\n  },\n  '^Update bulk operation$': {\n    gettext: gettext('Update bulk operation')\n  },\n  '^Update bulk operation: (.+)$': {\n    gettext: gettext('Update bulk operation: {{updatesList}}'),\n    placeholders: bulkOperationAuditLogTextPlaceholders\n  },\n  '^Update firmware to: \"?(.+?)\"? \\\\(version: (.+)\\\\)\\\\.?$': {\n    gettext: gettext('Update firmware to: \"{{ name }}\" (version: {{ version }})'),\n    placeholders: {\n      name: '$1',\n      version: '$2'\n    }\n  },\n  '^Update firmware to: \"?(.+?)\"?\\\\.?$': {\n    gettext: gettext('Update firmware to: \"{{ name }}\"'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Update configuration to (.+).$': {\n    gettext: gettext('Update configuration to: {{ name }}.'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Apply device profile: (.+).?$': {\n    gettext: gettext('Apply device profile: {{ name }}'),\n    placeholders: {\n      name: '$1'\n    }\n  },\n  '^Execute generic command: (.+).?$': {\n    gettext: gettext('Execute generic command: {{command}}'),\n    placeholders: {\n      command: '$1'\n    }\n  },\n  '^Failed to refresh application. : Cannot refresh non local-hosted application.$': {\n    gettext: gettext('Could not reactivate the application as it is not hosted locally.')\n  },\n  '^Failed to refresh application. : Cannot refresh application without active version id.$': {\n    gettext: gettext('Could not reactivate the application as it has no active version.')\n  },\n  // TODO: remove if we decide not to translate such messages:\n  // '^Killing container with id (.+):Need to kill Pod$': {\n  //   gettext: gettext('Killing container with ID \"{{containerId}}\". Need to kill Pod.'),\n  //   placeholders: {\n  //     containerId: '$1'\n  //   }\n  // },\n  '^Scaled down replica set (.+) to (\\\\d+)$': {\n    gettext: gettext('Replica set \"{{replicaSetName}}\" scaled down to \"{{scaleNumber}}\".'),\n    placeholders: {\n      replicaSetName: '$1',\n      scaleNumber: '$2'\n    }\n  },\n  '^Deleted pod: (.+)$': {\n    gettext: gettext('Pod \"{{imageName}}\" deleted.'),\n    placeholders: {\n      imageName: '$1'\n    }\n  },\n  '^Container image \"(.+)\" already present on machine$': {\n    gettext: gettext('Container image \"{{imageName}}\" already exists.'),\n    placeholders: {\n      imageName: '$1'\n    }\n  },\n  '^Error updating tenant! Cannot insert second configuration for Password code grant internal/Bad Request$': {\n    gettext: gettext(\n      'This login mode was already set by another administrator. Refresh the page to update the data.'\n    )\n  }\n};\n","import { HttpClient } from '@angular/common/http';\nimport { TranslateLoader } from '@ngx-translate/core';\nimport { Observable, of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { Optional, Inject, Injectable } from '@angular/core';\nimport { LOCALE_PATH } from './locale.path';\nimport { LANGUAGES } from './languages';\nimport { OptionsService } from '../common/options.service';\n\n@Injectable()\nexport class TranslateCustomLoader implements TranslateLoader {\n  constructor(\n    private http: HttpClient,\n    private optionsService: OptionsService,\n    @Inject(LOCALE_PATH) private path: string = null,\n    @Inject(LANGUAGES) private languages: any = null\n  ) {}\n\n  getTranslation(lang: string): Observable<any> {\n    const path = this.path || '';\n    let url = `${path}${lang}.json`;\n    if (this.languages && this.languages[lang] && this.languages[lang].url) {\n      url = this.languages[lang].url;\n    }\n\n    return this.http.get(url).pipe(\n      map(d => {\n        if (this.optionsService.langsDetails && this.optionsService.langsDetails[lang]) {\n          return { ...d[lang], ...this.optionsService.langsDetails[lang] };\n        }\n        return d[lang];\n      }),\n      catchError(() => of({}))\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TranslateDefaultParser } from '@ngx-translate/core';\nimport { get } from 'lodash-es';\n\nfunction isDefined(value: any): boolean {\n  return typeof value !== 'undefined' && value !== null;\n}\n\n@Injectable()\nexport class TranslateParserCustom extends TranslateDefaultParser {\n\n  getValue(target: any, key: string): any {\n    let translated = target[key];\n    if (!translated) {\n      const keys = key.split('.');\n      if (keys.length > 1) {\n        translated = get(target, key);\n      }\n    }\n    return translated;\n  }\n}\n","import { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { LOCALE_ID, NgModule } from '@angular/core';\nimport {\n  MissingTranslationHandler,\n  TranslateService as NgxTranslateService,\n  TranslateCompiler,\n  TranslateFakeCompiler,\n  TranslateLoader,\n  TranslateModule,\n  TranslateParser,\n  TranslateStore,\n  USE_DEFAULT_LANG,\n  USE_STORE,\n  USE_EXTEND,\n  DEFAULT_LANGUAGE\n} from '@ngx-translate/core';\nimport { OptionsService } from '../common/public-api';\nimport { AppStateService } from '../common/ui-state.service';\nimport { LANGUAGES } from './languages';\nimport { LOCALE_PATH } from './locale.path';\nimport { MissingTranslationCustomHandler } from './missing-translation-custom.handler';\nimport { MESSAGES } from './pattern-messages.data';\nimport { HOOK_PATTERN_MESSAGES } from './patterns-message.hook';\nimport { TranslateCustomLoader } from './translate.loader';\nimport { TranslateParserCustom } from './translate.parser';\n\n// Load these as a side effect\ntry {\n  // tslint:disable:no-var-requires\n  require('@c8y/ngx-components/locales/de.po');\n  require('@c8y/ngx-components/locales/en.po');\n  require('@c8y/ngx-components/locales/es.po');\n  require('@c8y/ngx-components/locales/fr.po');\n  require('@c8y/ngx-components/locales/ja_JP.po');\n  // tslint:enable:no-var-requires\n} catch (e) {\n  // empty block\n}\n\nconst angularLocalesLanguageMap = { en: 'en-GB', 'en-EN': 'en-GB' };\n\n// AoT requires an exported function for factories\nexport function translateLoaderFactory(\n  httpClient: HttpClient,\n  optionsService: OptionsService,\n  localePath: string,\n  languages: any\n) {\n  return new TranslateCustomLoader(httpClient, optionsService, localePath, languages);\n}\n\nexport function localePathFactory(options: OptionsService) {\n  return options.localePath;\n}\n\nexport function languagesFactory(options: OptionsService) {\n  return options.languages;\n}\n\nexport function localeId(appStateService: AppStateService) {\n  return {\n    get lang() {\n      return getAngularLocalesLanguageString(appStateService.state.lang || 'en');\n    },\n    toLowerCase() {\n      return this.lang.toLowerCase();\n    },\n    toString() {\n      return this.lang;\n    }\n  };\n}\n\nexport function getAngularLocalesLanguageString(language) {\n  return angularLocalesLanguageMap[language] || language;\n}\n\n/**\n * The angular module definition for i18n (translation).\n * @exports I18nModule\n */\n@NgModule({\n  exports: [TranslateModule],\n  imports: [HttpClientModule]\n})\nexport class I18nModule {\n  static providers() {\n    return [\n      { provide: LOCALE_ID, useFactory: localeId, deps: [AppStateService] },\n      { provide: HOOK_PATTERN_MESSAGES, useValue: MESSAGES, multi: true },\n      { provide: LOCALE_PATH, useFactory: localePathFactory, deps: [OptionsService] },\n      { provide: LANGUAGES, useFactory: languagesFactory, deps: [OptionsService] },\n\n      // Extracted from projects/ngx-translate/core/src/public_api.ts\n      {\n        provide: TranslateLoader,\n        useFactory: translateLoaderFactory,\n        deps: [HttpClient, OptionsService, LOCALE_PATH, LANGUAGES]\n      },\n      { provide: TranslateCompiler, useClass: TranslateFakeCompiler },\n      { provide: TranslateParser, useClass: TranslateParserCustom },\n      { provide: MissingTranslationHandler, useClass: MissingTranslationCustomHandler },\n      TranslateStore,\n      NgxTranslateService,\n      { provide: USE_STORE, useValue: undefined },\n      { provide: USE_DEFAULT_LANG, useValue: undefined },\n      { provide: USE_EXTEND, useValue: false },\n      { provide: DEFAULT_LANGUAGE, useValue: undefined }\n    ];\n  }\n  static forRoot() {\n    return {\n      ngModule: I18nModule,\n      providers: I18nModule.providers()\n    };\n  }\n}\n","import './import-locales';\nimport { parse } from './parse-module';\nconst cache = new Map();\n/**\n * @ignore\n */\nexport function loadLocale(moduleLang) {\n  return new Promise((resolve, reject) => {\n    if (cache.has(moduleLang)) {\n      resolve(cache.get(moduleLang));\n    } else {\n      fetch(`assets/locales/angular/${moduleLang}.js`)\n        .then((res) => res.text())\n        .then((src) => {\n          const module = parse(src);\n          cache.set(moduleLang, module);\n          resolve(module);\n        })\n        .catch(reject);\n    }\n  });\n}\n","export function parse(moduleSrc) {\n  const src = moduleSrc.split(/\\n/)\n    .map((l) => l.trim())\n    .filter(Boolean)\n    .filter((l) => !l.match(/^\\/?\\*/) && !l.match(/^\\/\\//))\n    .join('\\n');\n  const fn = new Function(`var exports = {};\nvar module = { exports: exports };\n${src}\nreturn exports;`);\n  return fn();\n}\n","import { registerLocaleData } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { TranslateService as NgxTranslateService } from '@ngx-translate/core';\nimport { keys } from 'lodash-es';\nimport { OptionsService } from '../common/options.service';\nimport { AppStateService } from '../common/ui-state.service';\nimport { getAngularLocalesLanguageString } from './i18n.module';\nimport { loadLocale } from './load-locale';\n\n/**\n * A service to manage the language of the application.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class TranslateService {\n  static SAVE_LANGUAGE_KEY = 'c8y_language';\n  static defaultLang() {\n    return window.localStorage.getItem(TranslateService.SAVE_LANGUAGE_KEY);\n  }\n  langsDetail: any =  this.options.get('languages', {});\n  langs: any = keys(this.langsDetail).filter((k) => this.langsDetail[k]);\n  private DEFAULT_SEPARATOR = '_';\n  constructor(\n    private ngxTranslate: NgxTranslateService,\n    private ui: AppStateService,\n    private options: OptionsService\n  ) {\n    const queryStringLang = this.queryStringLang();\n    if (queryStringLang) {\n      this.saveInLocalStorage(queryStringLang);\n    }\n  }\n\n  /**\n   * Switches to given language.\n   * @param lang The language as two-letter code.\n   */\n  async switchToLanguage(lang: string) {\n    const moduleLang = lang.replace('_', '-');\n\n    try {\n      await this.loadLocales(moduleLang);\n    } catch (e) {\n      const lessSpecificModuleLang = moduleLang.split('-').shift();\n      if (lessSpecificModuleLang !== moduleLang) {\n        await this.loadLocales(lessSpecificModuleLang);\n      } else {\n        throw e;\n      }\n    }\n\n    this.ngxTranslate.setDefaultLang('en');\n    this.ngxTranslate.use(lang).subscribe(() => {\n      this.ui.state$.next({ ...this.ui.state, lang });\n    });\n    // TODO: do we still need to set that lang on html?!\n    // document.querySelector('html').setAttribute('lang', lang);\n  }\n\n  async loadLocales(moduleLang) {\n    const module: any = await loadLocale(getAngularLocalesLanguageString(moduleLang));\n    registerLocaleData(module.default);\n  }\n\n  /**\n   * Finds the first supported language\n   */\n  firstSupportedLanguage() {\n    const languages = [\n        this.queryStringLang(),\n        this.localStorageLang()\n      ]\n      .concat([ this.options.get('defaultLanguage') ])\n      .concat(this.browserLangs())\n      .concat(['en'])\n      .filter(Boolean);\n    return languages.find((language) => this.isSupported(language));\n  }\n\n  /**\n   * Converts a iso language code to a PO language code (e.g. de-de gets de_de).\n   * @param lang The iso language code.\n   */\n  convertToLanguageCodePO(lang: string): string {\n    const sep = lang.indexOf('-') > -1 ? '-' : this.DEFAULT_SEPARATOR;\n    const [ langMain, langSpecific ] = lang.split(sep);\n    const langLast = langSpecific ? `${this.DEFAULT_SEPARATOR}${langSpecific}` : '';\n    return `${langMain}${langLast}`;\n  }\n\n  /**\n   * Returns the language in the native language.\n   * @param lang The language two-letter code.\n   * @return The native name.\n   */\n  getNativeLanguage(lang: string): string {\n    const langData = (this.langsDetail || {})[lang] || {};\n    return langData.nativeName || lang;\n  }\n\n  saveInLocalStorage(lang: string) {\n    window.localStorage.setItem(TranslateService.SAVE_LANGUAGE_KEY, lang);\n  }\n\n  isSupported(lang: string) {\n    return this.langs.includes(lang);\n  }\n\n  /**\n   * Gets the language from the query parameter.\n   * @return The language two-letter code.\n   */\n  queryStringLang() {\n    return this.getQueryParameter('lang');\n  }\n\n  /**\n   * Gets the language from local storage.\n   * @return The language two-letter code.\n   */\n  private localStorageLang() {\n    return window.localStorage.getItem(TranslateService.SAVE_LANGUAGE_KEY);\n  }\n\n  /**\n   * Determines which language is set in the browser.\n   * @return The languages the browser supports as string array.\n   */\n  private browserLangs() {\n    const { navigator } = window;\n    const browserLanguagePropertyKeys = [\n      'languages',\n      'language',\n      'browserLanguage',\n      'systemLanguage',\n      'userLanguage'\n    ];\n    return browserLanguagePropertyKeys.reduce((languages, property) => {\n      const propertyLanguages = navigator[property];\n      if (typeof propertyLanguages === 'string') {\n        languages.push(propertyLanguages);\n      } else if (Array.isArray(propertyLanguages)) {\n        languages = languages.concat(propertyLanguages);\n      }\n      return languages;\n    }, []);\n  }\n\n  private getQueryParameter(queryKey) {\n    // TODO: replace this with URLSearchParams, ie 11 still doesn't support :()\n    const query = window.location.search.substring(1);\n    let result;\n    query.split('&').find((pair) => {\n      const [key, value] = pair.split('=');\n      if (key === queryKey) {\n        result = value;\n      }\n      return result;\n    });\n    return result;\n  }\n\n}\n","import { OperationStatus } from '@c8y/client';\n\nexport enum Status {\n  SUCCESS = 'success',\n  WARNING = 'warning',\n  DANGER = 'danger',\n  INFO = 'info'\n}\n\nexport type StatusType = Status | 'success' | 'warning' | 'danger' | 'info';\n\nexport const statusIcons = {\n  [Status.SUCCESS]: 'check-circle',\n  [Status.WARNING]: 'exclamation-triangle',\n  [Status.DANGER]: 'exclamation-circle',\n  [Status.INFO]: 'info-circle'\n};\n\nexport const statusClasses = {\n  [Status.SUCCESS]: `text-${Status.SUCCESS}`,\n  [Status.WARNING]: `text-${Status.WARNING}`,\n  [Status.DANGER]: `text-${Status.DANGER}`,\n  [Status.INFO]: `text-${Status.INFO}`\n};\n\nexport const statusAlert = {\n  [Status.SUCCESS]: `alert-${Status.SUCCESS}`,\n  [Status.WARNING]: `alert-${Status.WARNING}`,\n  [Status.DANGER]: `alert-${Status.DANGER}`,\n  [Status.INFO]: `alert-${Status.INFO}`\n};\n\nexport const operationStatusIcons = {\n  [OperationStatus.PENDING]: 'clock-o',\n  [OperationStatus.EXECUTING]: 'refresh',\n  [OperationStatus.SUCCESSFUL]: 'check-circle',\n  [OperationStatus.FAILED]: 'exclamation-circle'\n};\n\nexport const operationStatusClasses = {\n  [OperationStatus.PENDING]: 'text-info',\n  [OperationStatus.EXECUTING]: 'text-info',\n  [OperationStatus.SUCCESSFUL]: 'text-success',\n  [OperationStatus.FAILED]: 'text-danger'\n};\n","import { DatePipe as NgDatePipe } from '@angular/common';\nimport { Inject, LOCALE_ID, Pipe } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { gettext } from '../i18n/gettext';\n\n/**\n * The range of times supported by ECMAScript Date objects in milliseconds.\n * @see http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1\n */\nexport const ES_MAX_TIME_MILLISECONDS: number = 8640000000000000;\n\n/**\n * @description\n * Formats a date value according to locale rules. If no other format specified it defaults to `medium`\n * used as standard date/time format.\n *\n * Extends Angular's DatePipe in a way so that date values exceeding the range supported by ECMAScript\n * are displayed as earliest/latest supported point in time printed in the desired format pre- or postfixed\n * by the word `before` ot `after`, respectively.\n * In all other cases the pipe behaves as the standard `DatePipe`.\n *\n * @see\n * `DatePipe`\n */\n@Pipe({ name: 'c8yDate' })\nexport class DatePipe extends NgDatePipe {\n  constructor(@Inject(LOCALE_ID) locale: string, private translateService: TranslateService) {\n    super(locale);\n  }\n\n  transform(value: any, format: string = 'medium', timezone?: string, locale?: string): string | null {\n    let valueInBounds = value;\n    let valueBefore: boolean = false;\n    let valueBeyond: boolean = false;\n\n    if (typeof value === 'number' && !isNaN(value)) {\n      valueInBounds = Math.min(value, ES_MAX_TIME_MILLISECONDS);\n      valueInBounds = Math.max(valueInBounds, -ES_MAX_TIME_MILLISECONDS);\n\n      valueBefore = value < -ES_MAX_TIME_MILLISECONDS;\n      valueBeyond = value > ES_MAX_TIME_MILLISECONDS;\n    }\n    let result: string = super.transform(valueInBounds, format, timezone, locale);\n\n    if (valueBefore) {\n      result = this.translateService.instant(gettext(`before {{date}}`), { date: result });\n    } else if (valueBeyond) {\n      result = this.translateService.instant(gettext(`after {{date}}`), { date: result });\n    }\n\n    return result;\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  Output,\n  TemplateRef\n} from '@angular/core';\nimport { IIdentified, Paging } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-load-more',\n  templateUrl: './load-more.component.html'\n})\nexport class LoadMoreComponent {\n  @Input()\n  paging: Paging<any>;\n  @Input()\n  useIntersection = true;\n  @Input()\n  hidden = false;\n  @Input()\n  container: ElementRef;\n  @Input()\n  class: string = 'c8y-list__item bg-transparent';\n  @Input()\n  maxIterations = 10;\n  @Input()\n  noMoreDataHint: TemplateRef<any>;\n  @Input()\n  loadNextLabel: string;\n  @Input()\n  loadingLabel: string;\n  @Output()\n  onLoad = new EventEmitter<IIdentified>();\n\n  isLoading = false;\n  counter = 0;\n  showNoMoreDataHint = false;\n  private loadUntilIntersected;\n  private readonly LOAD_SAME_PAGE_THRESHOLD = 50;\n  private intersectionObserver: IntersectionObserver;\n\n  @HostBinding('class')\n  get hostClass() {\n    return this.hidden || (!this.hasMore && !this.showNoMoreDataHint) ? '' : this.class;\n  }\n\n  get hasMore() {\n    return (\n      this.paging && (this.paging.totalPages > this.paging.currentPage || !!this.paging.nextPage)\n    );\n  }\n\n  constructor(private element: ElementRef) {}\n\n  ngAfterContentInit(): void {\n    if (this.useIntersection && 'IntersectionObserver' in window) {\n      this.intersectionObserver = new IntersectionObserver(event => this.buttonInView(event[0]), {\n        root: this.container ? this.container.nativeElement : null\n      });\n      this.intersectionObserver.observe(this.element.nativeElement);\n    }\n    this.showNoMoreDataHint = this.shouldShowNoMoreDataHint();\n  }\n\n  ngOnDestroy(): void {\n    if (this.intersectionObserver) {\n      this.intersectionObserver.disconnect();\n    }\n  }\n\n  async loadMore(event?) {\n    this.isLoading = true;\n    if (event) {\n      event.stopPropagation();\n    }\n    if (this.hasMore) {\n      const result = await this.paging.next();\n      this.counter++;\n      this.paging = result.paging;\n      this.onLoad.emit(result.data);\n      this.intersectionLoading();\n      this.showNoMoreDataHint = this.shouldShowNoMoreDataHint();\n    } else {\n      this.counter = 0;\n      this.isLoading = false;\n    }\n  }\n\n  private intersectionLoading() {\n    if (this.useIntersection && this.hasMore && this.loadUntilIntersected !== null) {\n      this.loadUntilIntersected = setTimeout(() => this.loadMore(), this.getLoadingThreshold());\n      this.useIntersection = this.shouldSwitchMode();\n    } else {\n      this.isLoading = false;\n      this.loadUntilIntersected = undefined;\n    }\n  }\n\n  private getLoadingThreshold(): number {\n    return this.LOAD_SAME_PAGE_THRESHOLD * this.counter;\n  }\n\n  private shouldShowNoMoreDataHint() {\n    return (this.counter !== 0 || this.noMoreDataHint) && !this.hasMore && !this.hidden;\n  }\n\n  private shouldSwitchMode() {\n    return this.counter < this.maxIterations || this.hidden;\n  }\n\n  private buttonInView(event) {\n    if (event.isIntersecting) {\n      this.loadMore();\n    } else if (this.loadUntilIntersected) {\n      clearTimeout(this.loadUntilIntersected);\n      this.loadUntilIntersected = null;\n      this.isLoading = false;\n    } else {\n      // avoiding a race condition when timeout is faster\n      // cleared then set\n      this.loadUntilIntersected = null;\n    }\n  }\n}\n","import { coerceNumberProperty } from '@angular/cdk/coercion';\nimport {\n  ComponentFactory,\n  ComponentFactoryResolver,\n  Directive,\n  EmbeddedViewRef,\n  Input,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef,\n  ViewRef\n} from '@angular/core';\nimport { IIdentified, IResultList, Paging } from '@c8y/client';\nimport { assign, get } from 'lodash-es';\nimport { isObservable, Observable, of, pipe, Subject, Subscription } from 'rxjs';\nimport { map, takeUntil, tap } from 'rxjs/operators';\nimport { RealtimeService } from '../realtime/public-api';\nimport { LoadMoreComponent } from './load-more.component';\nimport { LoadMoreMode } from './load-more.model';\n\n/**\n * A directive to iterate over IResultList<T> data from @c8y/client.\n * Depending on the [c8yForLoadMore] a load more button is:\n *  - auto: Tries to automatically load more data (default maximum 10 iterations; can be\n *          change with maxIterations settings).\n *  - show: Shows a load more button for the user to decide\n *  - none: Doesn't perform any load more action.\n *  - hidden: Loads more data automatically but with no visible button for the user.\n *\n * Additional, any rxjs operator pipe can be applied to the [c8yForPipe] input, e.g. to\n * filter the data displayed currently as well as the data loaded by subsequent requests.\n *\n * Example:\n * ```html\n * <div *c8yFor=\"let device of devices; loadMore: 'auto'; let i = index; pipe: filterPipe;\">\n *  {{ i + 1 }}. {{device.name}}\n * </div>\n * ```\n * The above example will list all entities that are applied to `devices`:\n * ```typescript\n * this.devices = this.inventoryService.list({ pageSize: 10, fragmentType: 'c8y_IsDevice' })\n * ```\n * It will display the first 10 items, if there is more space left on the screen, and there are more\n * than 10 devices, it will automatically load up to 10 pages more. If it still can't fit the screen\n * it will stop and switch to `show` mode.\n *\n * A pipe can be applied e.g. for filtering or grouping. This pipe is attached to every follow up\n * request done by the load more component:\n * ```typescript\n * this.filterPipe = pipe(\n *    map((data: []) => {\n *     return data.filter(\n *      (mo: any) => mo.name && mo.name.toLowerCase().indexOf(value.toLowerCase()) > -1\n *    );\n *  })\n * );\n * ```\n * The pipe must be an rxjs pipe and can take any operator.\n */\n@Directive({\n  selector: '[c8yFor]'\n})\nexport class ForOfDirective {\n  private cachedData: IIdentified[] = [];\n  private paging: Paging<IIdentified>;\n  private loadMoreMode: LoadMoreMode = 'auto';\n  private dataPipe = pipe(tap());\n  private pagingSub: Subscription;\n  private obs$: Observable<IIdentified[]>;\n  private loadMore: LoadMoreComponent;\n  private maxIterations = 10;\n  private notFoundTemplate: TemplateRef<any>;\n  private realtime: RealtimeService<any>;\n  private comparator: (itemA: object, itemB: object) => number;\n  private unsubscribe$: Subject<void> = new Subject();\n\n  private get shouldUseLoadMoreButton() {\n    return (\n      this.loadMoreMode === 'auto' || this.loadMoreMode === 'show' || this.loadMoreMode === 'hidden'\n    );\n  }\n\n  private get hasMoreData() {\n    return this.loadMore && this.loadMore.hasMore;\n  }\n\n  private get length() {\n    return this.cachedData.length;\n  }\n\n  /**\n   * The data setter. Must be a response from @c8y/data or an observable.\n   * You can pass an observable with null to explicitly clear the list.\n   */\n  @Input()\n  set c8yForOf(fetchData: IResultList<IIdentified> | Observable<IResultList<IIdentified>>) {\n    if (fetchData) {\n      this.obs$ = (isObservable(fetchData) ? fetchData : of(fetchData)).pipe(\n        map(result => {\n          if (result === null) {\n            this.paging = null;\n            return [];\n          }\n          const { paging, data } = result;\n          this.paging = paging;\n          return data;\n        })\n      );\n    }\n  }\n\n  /**\n   * The mode setter:\n   *  - auto: Tries to automatically load more data (default maximum 10 iterations; can be\n   *          change with maxIterations settings).\n   *  - show: Shows a load more button for the user to decide\n   *  - none: Doesn't perform any load more action.\n   *  - hidden: Loads more data automatically but with no visible button for the user.\n   */\n  @Input()\n  set c8yForLoadMore(type: LoadMoreMode) {\n    this.loadMoreMode = type;\n  }\n\n  /**\n   * The pipe setter to attach any rxjs pipe to the current and more loaded data.\n   */\n  @Input()\n  set c8yForPipe(dataPipe) {\n    if (dataPipe) {\n      this.dataPipe = dataPipe;\n    }\n  }\n\n  /**\n   * A template to use if no data is found at all (e.g. if you apply a filter pipe).\n   */\n  @Input()\n  set c8yForNotFound(notFoundTemplate: TemplateRef<any>) {\n    this.notFoundTemplate = notFoundTemplate;\n    if (this.loadMore) {\n      this.loadMore.noMoreDataHint = notFoundTemplate;\n    }\n  }\n\n  /**\n   * The maximum numbers of iterations to call data from the api.\n   */\n  @Input()\n  set c8yForMaxIterations(maxIterations: number) {\n    this.maxIterations = maxIterations;\n  }\n\n  /**\n   * A RealtimeService instance.\n   */\n  @Input()\n  set c8yForRealtime(source: RealtimeService<any>) {\n    this.realtime = source;\n  }\n\n  /**\n   * A comparator function for comparing list items. Used to determine\n   * the position at which a new element should be added to the list.\n   */\n  @Input()\n  set c8yForComparator(comparator: (itemA: object, itemB: object) => number) {\n    this.comparator = comparator;\n  }\n\n  constructor(\n    private tpl: TemplateRef<any>,\n    private vcr: ViewContainerRef,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) {}\n\n  ngOnInit(): void {\n    this.handleRealtime();\n  }\n\n  private ngOnChanges(changes: SimpleChanges): void {\n    if (this.obs$ && (changes.c8yForPipe || changes.c8yForOf)) {\n      this.unsubscribePaging();\n\n      // only re-rendering  on filtering if all data is already loaded\n      // from the backend\n      const reRender = !this.hasMoreData && !!changes.c8yForPipe && !changes.c8yForOf;\n\n      if (reRender) {\n        this.obs$ = of(this.cachedData);\n      }\n      this.pagingSub = this.obs$\n        .pipe(\n          tap(data => {\n            if (!reRender) {\n              this.cachedData = data;\n            }\n          })\n        )\n        .pipe(src => this.dataPipe(src))\n        .subscribe((data: []) => {\n          this.render(data, reRender);\n        });\n    }\n  }\n\n  private ngOnDestroy(): void {\n    this.unsubscribePaging();\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n  private handleRealtime() {\n    if (this.realtime) {\n      this.realtime\n        .onCreate$()\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(item => this.insert(item));\n      this.realtime\n        .onUpdate$()\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(item => this.update(item));\n      this.realtime\n        .onDelete$()\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(id => this.remove(coerceNumberProperty(id)));\n    }\n  }\n\n  private render(data, reRender = false): void {\n    this.vcr.clear();\n\n    data.forEach((item, index) => {\n      const context = {\n        $implicit: item,\n        index,\n        length: this.length,\n        hasMore: this.hasMoreData\n      };\n      this.vcr.createEmbeddedView(this.tpl, context);\n    });\n\n    if (this.shouldUseLoadMoreButton) {\n      this.loadMore = this.createLoadMoreButtonComponent(reRender);\n    }\n  }\n\n  private append(data) {\n    data.forEach(item => {\n      const index = this.shouldUseLoadMoreButton ? this.vcr.length - 1 : this.vcr.length;\n      const context = {\n        $implicit: item,\n        index,\n        length: this.length,\n        hasMore: this.hasMoreData\n      };\n      this.vcr.createEmbeddedView(this.tpl, context, index);\n    });\n  }\n\n  private loadMoreData(data) {\n    if (data.length > 0) {\n      this.append(data);\n    }\n  }\n\n  private createLoadMoreButtonComponent(reRender) {\n    const componentFactory: ComponentFactory<\n      any\n    > = this.componentFactoryResolver.resolveComponentFactory(LoadMoreComponent);\n    const componentRef = this.vcr.createComponent(componentFactory);\n    const instance = componentRef.instance as LoadMoreComponent;\n    instance.paging = this.paging;\n    instance.useIntersection = this.loadMoreMode === 'auto' || this.loadMoreMode === 'hidden';\n    instance.hidden = this.loadMoreMode === 'hidden';\n    instance.maxIterations = this.maxIterations;\n    instance.noMoreDataHint = this.notFoundTemplate;\n    this.pagingSub = instance.onLoad\n      .pipe(\n        map((data: []) => this.checkForDuplicates(data)),\n        tap((data: []) => {\n          this.cachedData = this.cachedData.concat(data);\n        })\n      )\n      .pipe(src => this.dataPipe(src))\n      .subscribe(data => this.loadMoreData(data));\n    if (reRender) {\n      assign(instance, this.loadMore);\n    }\n    return instance;\n  }\n\n  private insert(item) {\n    let index: number = 0;\n\n    if (this.comparator && this.cachedData.length) {\n      let comparisionResult: number;\n      do {\n        const view: EmbeddedViewRef<any> = this.vcr.get(index) as EmbeddedViewRef<any>;\n        const itemB = get(view, 'context.$implicit');\n        comparisionResult = item && itemB ? this.comparator(item, itemB) : 0;\n        if (comparisionResult <= 0) {\n          index++;\n        }\n      } while (comparisionResult <= 0 && index < this.cachedData.length);\n    }\n\n    // Do not append elements after the last one currently loaded,\n    // as it may belong further down there on the list and will\n    // be eventually loaded with one of the next pages.\n    if (index < this.cachedData.length || this.cachedData.length === 0) {\n      const context = {\n        $implicit: item,\n        index,\n        length: this.length,\n        hasMore: this.hasMoreData\n      };\n\n      this.cachedData.splice(index, 0, item);\n      const viewRef: ViewRef = this.tpl.createEmbeddedView(context);\n      this.vcr.insert(viewRef, index);\n    }\n  }\n\n  private update(updatedItem) {\n    this.forMatchingEmbeddedViewRef(\n      (item: IIdentified) => item && updatedItem && item.id === updatedItem.id,\n      (view: EmbeddedViewRef<any>) => {\n        view.context.$implicit = updatedItem;\n        view.markForCheck();\n      }\n    );\n  }\n\n  private remove(idToRemove) {\n    this.forMatchingEmbeddedViewRef(\n      (item: IIdentified) => item && coerceNumberProperty(item.id, NaN) === idToRemove,\n      (view: EmbeddedViewRef<any>) => view.destroy()\n    );\n  }\n\n  private forMatchingEmbeddedViewRef(\n    filter: (item: IIdentified) => boolean,\n    callback: (view: EmbeddedViewRef<any>) => void\n  ) {\n    for (let i = 0; i < this.vcr.length; i++) {\n      const view: EmbeddedViewRef<any> = this.vcr.get(i) as EmbeddedViewRef<any>;\n      const item: IIdentified = get(view, 'context.$implicit');\n      if (filter(item)) {\n        callback(view);\n      }\n    }\n  }\n\n  private checkForDuplicates(data: IIdentified[]): IIdentified[] {\n    return this.realtime\n      ? data.filter(item => !this.cachedData.some(cached => cached.id === item.id))\n      : data;\n  }\n\n  private unsubscribePaging() {\n    if (this.pagingSub) {\n      this.pagingSub.unsubscribe();\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { gettext } from '../i18n/gettext';\nimport { get, find, negate, isUndefined } from 'lodash';\nimport { HumanizePipe } from './humanize.pipe';\n\n/*\n * Humanize an application name and translates it.\n * Usage:\n *   appNameOrApp | humanizeAppName | async\n*/\n@Pipe({ name: 'humanizeAppName' })\nexport class HumanizeAppNamePipe implements PipeTransform {\n\n  private internalApps = {\n    administration: 'Administration',\n    cockpit: 'Cockpit',\n    devicemanagement: 'Device management'\n  };\n\n  constructor(private translateService: TranslateService) {}\n\n  transform(appNameOrApp: any = 'Cumulocity'): Observable<string> {\n    const appName = this.getAppName(appNameOrApp);\n\n    let text;\n    if (this.isPublicApp(appNameOrApp)) {\n      text = gettext('{{ appName | translate }} (public)');\n    } else {\n      text = appName;\n    }\n    return this.translateService.get(text, { appName });\n  }\n\n  private getAppName(appNameOrApp) {\n    const appName = this.getFirstDefined([\n      get(appNameOrApp, 'name'),\n      get(appNameOrApp, 'contextPath'),\n      appNameOrApp\n    ]) || '';\n    return this.internalApps[appName] || appName;\n  }\n\n  private getFirstDefined(values) {\n    return find(values, negate(isUndefined));\n  }\n\n  private isPublicApp(appNameOrApp) {\n    return Boolean(get(appNameOrApp, 'public'));\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { upperFirst } from 'lodash-es';\n\n/*\n * Humanize any string\n * Usage:\n *   'something' | humanize\n*/\n@Pipe({ name: 'humanize' })\nexport class HumanizePipe implements PipeTransform {\n  static humanize(str: string = ''): string {\n    str = str\n      .replace(/\\./g, ' ')\n      .replace(/c8y[\\s,_]*/gi, '')\n      .replace(/_/g, ' ')\n      .replace(/([A-Z][a-z])/g, ' $1')\n      .replace(/^\\$\\.?/, '')\n      .replace(/^\\s*/, '')\n      .replace(/\\s*$/, '')\n      .replace(/\\s+/g, ' ');\n\n    return upperFirst(str);\n  }\n\n  transform(str: string): string {\n    return HumanizePipe.humanize(str);\n  }\n}\n","import { Directive, Renderer2, Input, ElementRef } from '@angular/core';\n\n/**\n * Allows to set a icon. Switches between c8y default icons\n * and font awesome icons\n * @example <i [c8yIcon]=\"'rocket'\">\n */\n@Directive({\n  selector: '[c8yIcon]',\n})\nexport class IconDirective {\n\n  @Input()\n  set c8yIcon(icon: string) {\n    this.updateIcon(icon);\n  }\n  private c8yMatch = /^c8y-/;\n  private klasses = [];\n  private currentClasses = '';\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2\n  ) {}\n\n  private isC8y(icon) {\n    return this.c8yMatch.test(icon);\n  }\n\n  private getClasses(icon: string = '') {\n    let classes = '';\n    if (icon) {\n      const _icon = icon.trim();\n      const isC8y = this.isC8y(_icon);\n      const iconClass = isC8y ? _icon.replace(this.c8yMatch, 'c8y-icon-') : `fa-${_icon}`;\n      classes = `${isC8y ? 'c8y-icon' : 'fa fw'} ${iconClass}`;\n    }\n    return classes;\n  }\n\n  private updateIcon(icon: string) {\n    const newClasses = this.getClasses(icon);\n    if (newClasses !== this.currentClasses) {\n      this.currentClasses.split(/\\s/).filter((c) => c).forEach((klass) => {\n        this.renderer.removeClass(this.el.nativeElement, klass);\n      });\n      newClasses.split(/\\s/).filter((c) => c).forEach((klass) => {\n        this.renderer.addClass(this.el.nativeElement, klass);\n      });\n      this.currentClasses = newClasses;\n    }\n  }\n}\n\nexport const ICONS = [\n         'home',\n         'th',\n         'bar-chart-o',\n         'tasks',\n         'tachometer',\n         'bell',\n         'puzzle-piece',\n         'map-marker',\n         'location-arrow',\n         'globe',\n         'power-off',\n         'desktop',\n         'laptop',\n         'mobile',\n         'signal',\n         'qrcode',\n         'file',\n         'file-text',\n         'folder',\n         'folder-open',\n         'archive',\n         'hdd-o',\n         'book',\n         'bookmark',\n         'tag',\n         'flag',\n         'search',\n         'heart',\n         'star',\n         'bolt',\n         'rocket',\n         'cog',\n         'cogs',\n         'wrench',\n         'ban',\n         'user',\n         'users',\n         'sign-in',\n         'sign-out',\n         'upload',\n         'download',\n         'cloud-upload',\n         'cloud-download',\n         'cloud',\n         'spinner',\n         'refresh',\n         'repeat',\n         'undo',\n         'lock',\n         'unlock',\n         'info',\n         'question',\n         'exclamation',\n         'bug',\n         'calendar',\n         'random',\n         'asterisk',\n         'key',\n         'link',\n         'chain-broken',\n         'external-link',\n         'picture-o',\n         'comment',\n         'bullhorn',\n         'phone',\n         'lightbulb-o',\n         'flask',\n         'sitemap',\n         'exchange',\n         'code-fork',\n         'keyboard-o',\n         'terminal',\n         'code',\n         'clipboard',\n         'pencil',\n         'envelope',\n         'inbox',\n         'reply',\n         'share',\n         'thumbs-up',\n         'thumbs-down',\n         'check',\n         'plus',\n         'expand',\n         'compress',\n         'arrows',\n         'arrow-up',\n         'arrow-down',\n         'arrow-left',\n         'arrow-right',\n         'th-list',\n         'bars',\n         'table',\n         'columns',\n         'filter',\n         'sort',\n         'sort-up',\n         'sort-down',\n         'ellipsis-h',\n         'ellipsis-v',\n         'rss',\n         'apple',\n         'windows',\n         'android',\n         'linux'\n       ];\n","/*\n * Implementation of pure \"Mapping\" pipe based on\n * https://codeburst.io/angular-bad-practices-eab0e594ce92#389b\n */\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'map'\n})\nexport class MapFunctionPipe implements PipeTransform {\n  /*\n   * This will be a universal pipe for array mappings. You may add more\n   * type checkings and runtime checkings to make sure it works correctly everywhere.\n   */\n  transform(value, mappingFunction: (arg: any) => any, thisArg?: any) {\n    return mappingFunction.apply(thisArg || this, Array.isArray(value) ? value : [value]);\n  }\n}\n","import { assign } from 'lodash-es';\nimport {\n  ComponentFactory,\n  ComponentFactoryResolver,\n  Directive,\n  ElementRef,\n  Input,\n  Renderer2,\n  TemplateRef,\n  Type,\n  ViewContainerRef\n  } from '@angular/core';\n\n/**\n * Directive to set a DOM node, a TemplateRef or any Component to a container or any node.\n * @example\n * <div *c8yOutlet=\"template\"></div>\n * <div *c8yOutlet=\"DeviceStatusComponent; properties: { node }\"></div>\n * <div *c8yOutlet=\"nodes\"></div>\n */\n@Directive({\n  selector: '[c8yOutlet]',\n})\nexport class OutletDirective {\n  private properties = {};\n  private _element;\n\n  constructor(\n    private viewContainer: ViewContainerRef,\n    private resolver: ComponentFactoryResolver,\n    private renderer: Renderer2,\n    private el: ElementRef\n  ) { }\n\n  /**\n   * Directive to set a DOM node, a TemplateRef or any Component to a container or any node.\n   * @example\n   * <div *c8yOutlet=\"template\"></div>\n   * <div *c8yOutlet=\"DeviceStatusComponent; properties: { node }\"></div>\n   * <div *c8yOutlet=\"nodes\"></div>\n   */\n  @Input() set c8yOutlet(template: TemplateRef<any> | Type<any> | Element) {\n    if (!template) {\n      return;\n    }\n    if (this._element instanceof Element) {\n      this.renderer.removeChild(this._element.parentElement,  this._element);\n    }\n    this.viewContainer.clear();\n\n    // case TemplateRef -> <div *c8yOutlet=\"template\"></div>\n    if (template instanceof TemplateRef) {\n      this.viewContainer.createEmbeddedView(template);\n\n    // case DOM Element -> <div *c8yOutlet=\"nodes\"></div>\n    } else if (template instanceof Element) {\n      const parent = this.renderer.parentNode(this.el.nativeElement);\n      this.destroy();\n      this._element = template;\n      this.renderer.insertBefore(parent, this._element, this.el.nativeElement);\n\n    // case Component -> <div *c8yOutlet=\"DeviceStatusComponent; properties: { node }\"></div>\n    } else {\n      const factory: ComponentFactory<any> = this.resolver.resolveComponentFactory(template);\n      const component = this.viewContainer.createComponent(factory);\n      assign(component.instance, this.properties);\n    }\n  }\n\n  @Input() set c8yOutletProperties(value) {\n    this.properties = value;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n\n  private destroy() {\n    if (this._element) {\n      const _parent = this.renderer.parentNode(this._element);\n      this.renderer.removeChild(_parent, this._element);\n    }\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-progress-bar',\n  templateUrl: './progress-bar.component.html'\n})\nexport class ProgressBarComponent {\n  @Input() message: string = gettext('Loading…');\n  @Input() progress: number = null;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'shortenUserName' })\r\nexport class ShortenUserNamePipe implements PipeTransform {\r\n\r\n  transform({ firstName = '', lastName = '', userName = ''}: any): string {\r\n      let parsedFirstName = firstName.trim().split(/\\s+/).shift().substr(0, 1);\r\n      const parsedLastName = lastName.trim().split(/\\s+/).pop();\r\n\r\n      if (!parsedLastName) {\r\n        parsedFirstName = firstName.split(/\\s+/).shift();\r\n      } else {\r\n        parsedFirstName = parsedFirstName ? `${parsedFirstName}. ` : '';\r\n      }\r\n\r\n      return parsedFirstName || parsedLastName ? parsedFirstName + parsedLastName : userName;\r\n    }\r\n}\r\n","import { Component, Input } from '@angular/core';\nimport { IOperation } from '@c8y/client';\nimport { operationStatusClasses, operationStatusIcons } from './status.model';\n\n/**\n * Single operation component displays a single operation status, description and creationTime.\n *\n * Example:\n *\n * ```html\n * <c8y-single-operation [operation]=\"operation\"></c8y-single-operation>\n * ```\n */\n@Component({\n  selector: 'c8y-single-operation',\n  templateUrl: './single-operation.component.html'\n})\nexport class SingleOperationComponent {\n  @Input() operation: IOperation;\n  statusIcons: object;\n  statusClasses: object;\n\n  ngOnInit() {\n    this.statusIcons = operationStatusIcons;\n    this.statusClasses = operationStatusClasses;\n  }\n}\n","import { Observable, of } from 'rxjs';\n\nexport class UserPreferencesStorageLocal {\n  private LOCAL_STORAGE_KEY = 'userPreferences';\n  private store: any = {};\n  constructor() {\n    try {\n      const jsonStore = window.localStorage.getItem(this.LOCAL_STORAGE_KEY);\n      if (jsonStore) {\n        this.store = JSON.parse(jsonStore) || {};\n      }\n    } catch (e) {\n      // do nothing\n    }\n  }\n\n  get(key) {\n    return of(this.store[key]);\n  }\n\n  set(key, value) {\n    this.store[key] = value;\n    return this.saveJsonStore();\n  }\n\n  private saveJsonStore() {\n    return window.localStorage.setItem(this.LOCAL_STORAGE_KEY, JSON.stringify(this.store));\n  }\n}\n","import { InventoryService } from '@c8y/client';\n\nexport class UserPreferencesStorageInventory {\n  TYPE = 'c8y_UserPreference';\n\n  constructor(\n    private inventory: InventoryService\n  ) {}\n\n  async get(key) {\n    const { data } = await this.inventory.list({fragmentType: key});\n    return data.length ? data[0][key] : undefined;\n  }\n\n  async set(key, value) {\n    const { data } = await this.inventory.list({fragmentType: key});\n    const updateMo: any = {[key]: value, type: this.TYPE};\n    let out;\n\n    if (data.length) {\n      updateMo.id = data[0].id;\n      out =  this.inventory.update(updateMo);\n    } else {\n      out = this.inventory.create(updateMo);\n    }\n    return out;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { InventoryService, UserService } from '@c8y/client';\nimport { IUser } from '@c8y/client';\nimport { Observable, from, never } from 'rxjs';\nimport { switchMap, first } from 'rxjs/operators';\nimport { UserPreferencesStorageLocal } from './user-preferences-storage-local';\nimport { UserPreferencesStorageInventory } from './user-preferences-store-inventory';\nimport { AppStateService } from '../ui-state.service';\n\n@Injectable()\nexport class UserPreferencesService {\n  currentUser: Observable<IUser>;\n  private LOCAL_STORAGE_KEY = 'userPreferences';\n  private storage: {\n    local: UserPreferencesStorageLocal,\n    inventory: UserPreferencesStorageInventory\n  };\n  constructor(\n    private user: UserService,\n    private inventory: InventoryService,\n    private appState: AppStateService\n  ) {\n    this.storage = {\n      local: new UserPreferencesStorageLocal(),\n      inventory: new UserPreferencesStorageInventory(this.inventory)\n    };\n    this.currentUser = this.appState.currentUser;\n  }\n\n  get(key): Observable<any> {\n    return this.currentUser.pipe(\n      first(),\n      switchMap((user) => this.getForUser(key, user))\n    );\n  }\n\n  set(key, value): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.currentUser.pipe(\n        first()\n      ).subscribe((user) => {\n        resolve(this.setForUser(key, value, user));\n      }, reject);\n    });\n  }\n\n  getForUser(key, user): Observable<any> {\n    const rawKey = this.getRawKey(key, user);\n    const storage = this.getStorage(user);\n    return from(storage.get(rawKey));\n  }\n\n  setForUser(key, value, user): Promise<any> {\n    const rawKey = this.getRawKey(key, user);\n    const storage = this.getStorage(user);\n    return Promise.resolve(storage.set(rawKey, value));\n  }\n\n  private getRawKey(key, user) {\n    const username = user.userName.replace(/\\./g, '__');\n    return `${key}${username}`;\n  }\n\n  private getStorage(user) {\n    return  this.user.hasAllRoles(user, ['ROLE_INVENTORY_READ', 'ROLE_INVENTORY_ADMIN']) ?\n      this.storage.inventory : this.storage.local;\n  }\n\n}\n","import { CommonModule as NgCommonModule } from '@angular/common';\nimport { APP_INITIALIZER, InjectionToken, NgModule } from '@angular/core';\nimport { DataModule } from '@c8y/ngx-components/api';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { distinctUntilChanged, filter, map, startWith, switchMap } from 'rxjs/operators';\nimport { I18nModule } from '../i18n/i18n.module';\nimport { TranslateService } from '../i18n/public-api';\nimport { DatePipe } from './date.pipe';\nimport { ForOfDirective } from './forOf.directive';\nimport { HumanizeAppNamePipe } from './humanize-app-name.pipe';\nimport { HumanizePipe } from './humanize.pipe';\nimport { IconDirective, ICONS } from './icon.directive';\nimport { LoadMoreComponent } from './load-more.component';\nimport { MapFunctionPipe } from './map-function.pipe';\nimport { HOOK_OPTIONS, OptionsService } from './options.service';\nimport { OutletDirective } from './outlet.directive';\nimport { ProgressBarComponent } from './progress-bar.component';\nimport { ShortenUserNamePipe } from './shorten-user-name.pipe';\nimport { SingleOperationComponent } from './single-operation.component';\nimport { AppStateService } from './ui-state.service';\nimport { UserPreferencesService } from './user-preferences/user-preferences.service';\n\nexport function initializeServices(\n  translateService: TranslateService,\n  state: AppStateService,\n  userPreferences: UserPreferencesService\n) {\n  const initialize = () => {\n    const queryStringLanguage = translateService.queryStringLang();\n    const firstLanguage = translateService.firstSupportedLanguage();\n\n    /*\n      The ?lang parameter will prevent the user preference language from being activated\n    */\n    if (queryStringLanguage && translateService.isSupported(queryStringLanguage)) {\n      translateService.switchToLanguage(queryStringLanguage);\n    } else {\n      state.currentUser\n        .pipe(\n          map(user => user && user.userName),\n          filter(u => !!u),\n          distinctUntilChanged(),\n          switchMap(() => userPreferences.get('language')),\n          startWith(firstLanguage),\n          filter(lang => !!lang),\n          distinctUntilChanged()\n        )\n        .subscribe(lang => {\n          translateService.switchToLanguage(lang);\n        });\n    }\n  };\n  return initialize;\n}\n\nexport const ICON_LIST = new InjectionToken('iconList');\n\n/**\n * Commonly used directives, data access and translation. This module is the shared\n * module across all core components. It should be imported by default.\n *\n * @exports IconDirective A directive to set a c8y icon with [c8yIcon]=\"'rocket'\".\n * @exports OutletDirective A directive which allows to set DOM or Angular templates (used for upgrade).\n * @exports I18nModule Translation module.\n * @exports NgCommonModule Angular common module.\n * @exports DataModule The data layer to allow DI with @c8y/client\n * @exports HumanizeAppNamePipe Humanize an application name (e.g. in the app switcher)\n * @exports HumanizePipe Humanize a word. E.g. `device management` gets `Device management`\n * @exports ShortenUserNamePipe Allows a short name. E.g. `Foo Bar` gets `F. Bar`\n * @exports ForOfDirective A forOf directive like ngFor but with load-more function\n * @exports LoadMoreComponent A component to load more data from a certain data-source\n * @exports ProgressBarComponent Displays either defined or undefined progress.\n */\n@NgModule({\n  imports: [NgCommonModule, I18nModule, TooltipModule],\n  exports: [\n    IconDirective,\n    OutletDirective,\n    I18nModule,\n    NgCommonModule,\n    HumanizeAppNamePipe,\n    HumanizePipe,\n    ShortenUserNamePipe,\n    ForOfDirective,\n    LoadMoreComponent,\n    MapFunctionPipe,\n    ProgressBarComponent,\n    SingleOperationComponent,\n    DatePipe\n  ],\n  declarations: [\n    IconDirective,\n    OutletDirective,\n    HumanizePipe,\n    HumanizeAppNamePipe,\n    ShortenUserNamePipe,\n    ForOfDirective,\n    LoadMoreComponent,\n    MapFunctionPipe,\n    ProgressBarComponent,\n    SingleOperationComponent,\n    DatePipe\n  ],\n  entryComponents: [LoadMoreComponent]\n})\nexport class CommonModule {\n  static providers() {\n    return [\n      ...DataModule.providers(),\n      // TODO: maybe we can think of a way to remove this C8Y_APP global\n      { provide: HOOK_OPTIONS, useValue: (window as any).C8Y_APP || {}, multi: true },\n      {\n        provide: APP_INITIALIZER,\n        useFactory: initializeServices,\n        deps: [TranslateService, AppStateService, UserPreferencesService],\n        multi: true\n      },\n      { provide: ICON_LIST, useValue: ICONS, multi: false },\n      ...I18nModule.providers(),\n      UserPreferencesService,\n      OptionsService,\n      AppStateService\n    ];\n  }\n\n  static forRoot() {\n    return {\n      ngModule: CommonModule,\n      providers: CommonModule.providers()\n    };\n  }\n}\n","export interface LoginMessage {\n  message: string;\n  type: string;\n}\n\nexport enum LoginViews {\n  None,\n  Credentials,\n  RecoverPassword,\n  SmsChallenge,\n  ChangePassword,\n  TotpChallenge,\n  TotpSetup,\n  ProvidePhoneNumber\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { ActionBarItem } from './action-bar.model';\nimport { ActionBarService } from './action-bar.service';\n\n@Component({\n  selector: 'c8y-action-bar-item',\n  templateUrl: './action-bar-item.component.html'\n})\nexport class ActionBarItemComponent implements ActionBarItem {\n  @Input() placement: ('left' | 'right' | 'more') = 'left';\n  @Input() priority: number = 0;\n  @Input() itemClass = '';\n  @ViewChild('template', {static: false}) template: any;\n  private viewInitTimeout;\n\n  constructor(private actionBarService: ActionBarService) {}\n\n  ngAfterViewInit() {\n    this.viewInitTimeout = setTimeout(() =>\n      this.actionBarService.add(this as ActionBarItem)\n    );\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.viewInitTimeout);\n    this.actionBarService.remove(this as ActionBarItem);\n  }\n}\n","import { Component, HostBinding, Input, AfterContentInit } from '@angular/core';\nimport { filter, sortBy } from 'lodash-es';\nimport { ActionBarItem } from './action-bar.model';\n\n@Component({\n  selector: 'c8y-action-bar',\n  templateUrl: './action-bar.component.html',\n  host: { class: 'c8y-ui-action-bar' }\n})\nexport class ActionBarComponent {\n  @Input() @HostBinding('class.navigator-open') navigatorOpen = false;\n  @Input() @HostBinding('class.has-tabs') hasTabs = false;\n  @Input() @HostBinding('class.horizontal-tabs') isTabsHorizontal = false;\n  isPageToolbarExpanded = false;\n  @HostBinding('class.c8y-ui-action-bar') uiActionBar = true;\n  @Input() items: ActionBarItem[] = [];\n\n  @HostBinding() get hidden() {\n    return !(this.items && this.items.length);\n  }\n\n  getSortedItems(placement: 'left' | 'right' | 'more') {\n    return sortBy(filter(this.items, { placement }), this.byPriority);\n  }\n\n  private byPriority(item) {\n    return -item.priority;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { CommonModule } from '../common/common.module';\nimport { ActionBarItemComponent } from './action-bar-item.component';\nimport { ActionBarComponent } from './action-bar.component';\nimport { ActionBarService } from './action-bar.service';\n\n/**\n * The angular module definition for the action bar.\n * @exports ActionBarComponent\n * @exports ActionBarItemComponent\n */\n@NgModule({\n  declarations: [\n    ActionBarComponent,\n    ActionBarItemComponent\n  ],\n  imports: [\n    BsDropdownModule,\n    CommonModule,\n    CollapseModule,\n    RouterModule.forChild([])\n  ],\n  exports: [\n    ActionBarComponent,\n    ActionBarItemComponent\n  ]\n})\nexport class ActionBarModule { }\n","import { Component, Input } from '@angular/core';\nimport { Action } from './action.model';\nimport { sortBy } from 'lodash-es';\n\n@Component({\n  selector: 'c8y-action-outlet',\n  templateUrl: './action-outlet.component.html'\n})\n\nexport class ActionOutletComponent {\n  isPageToolbarExpanded = false;\n  @Input() items: Action[] = [];\n\n  getByPriority() {\n    return sortBy(this.items, this.byPriority);\n  }\n\n  invoke(action) {\n    if (action.action) {\n      action.action.call();\n    }\n  }\n\n  private byPriority(item) {\n    return -item.priority;\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { Action } from './action.model';\nimport { ActionService } from './action.service';\n\n@Component({\n  selector: 'c8y-action',\n  templateUrl: './action.component.html'\n})\nexport class ActionComponent implements Action {\n  @Input() disabled: boolean = false;\n  @Input() label: string;\n  @Input() priority: number = 0;\n  @Input() icon: string;\n  @ViewChild('template', {static: false}) template: any;\n  action: () => void;\n  private viewInitTimeout;\n\n  constructor(private actionService: ActionService) {}\n\n  ngAfterViewInit() {\n    this.viewInitTimeout = setTimeout(() =>\n      this.actionService.add(this as Action)\n      );\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.viewInitTimeout);\n    this.actionService.remove(this as Action);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { CommonModule } from '../common/common.module';\nimport { ActionOutletComponent } from './action-outlet.component';\nimport { ActionComponent } from './action.component';\nimport { ActionService } from './action.service';\n\n/**\n * The angular module definition for actions.\n * @exports ActionComponent\n * @exports ActionOutletComponent\n */\n@NgModule({\n  declarations: [\n    ActionOutletComponent,\n    ActionComponent\n  ],\n  imports: [\n    CommonModule,\n    BsDropdownModule,\n    RouterModule.forChild([])\n  ],\n  exports: [\n    ActionOutletComponent,\n    ActionComponent\n  ]\n})\nexport class ActionModule { }\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'c8y-alert-details',\r\n  template: `<ng-content></ng-content>`\r\n})\r\n\r\nexport class AlertDetailsComponent {}\r\n","import { Component, TemplateRef, Attribute, HostBinding } from '@angular/core';\nimport { Alert } from './alert.model';\nimport { AlertService } from './alert.service';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'c8y-alert-outlet',\n  templateUrl: './alert-outlet.component.html'\n})\n\nexport class AlertOutletComponent {\n\n  detailDisplayedAlert: any = {};\n  @HostBinding('class.static') isStatic = false;\n  get alerts(): BehaviorSubject<Alert[]> {\n    return this.alertService.state$;\n  }\n  constructor(\n    @Attribute('position') private position: string,\n    public alertService: AlertService\n  ) {\n    this.isStatic = this.position === 'static';\n  }\n\n  getClass(alert: Alert) {\n    const classes = [];\n    if (alert.type !== 'danger') {\n      classes.push('interact');\n    }\n    classes.push(`alert-${alert.type}`);\n    return classes.join(' ');\n  }\n\n  close(alert) {\n    if (alert.onClose) {\n      alert.onClose();\n    }\n    this.alertService.remove(alert);\n  }\n\n  showDetails(alert) {\n    if (alert.onDetail) {\n      return alert.onDetail();\n    }\n    this.detailDisplayedAlert = Object.assign({}, alert);\n    this.detailDisplayedAlert.mode = 'raw';\n    this.setDetailsContent(alert);\n  }\n\n  setDetailsContent(alert) {\n    if ( this.isTemplateRef(alert.detailedData) || typeof alert.detailedData === 'string' ) {\n      this.detailDisplayedAlert.contents = alert.detailedData;\n    } else {\n      this.detailDisplayedAlert.contents = JSON.stringify(alert.detailedData, null, 2);\n    }\n  }\n\n  hasDetails(alert) {\n    return (alert.detailedData || alert.onDetail);\n  }\n\n  closeDetails() {\n    this.detailDisplayedAlert = {};\n  }\n\n  isDetailsShow(alert) {\n    return this.alertService.areSame(alert, this.detailDisplayedAlert);\n  }\n\n  isTemplateRef(value): boolean {\n    return value instanceof TemplateRef;\n  }\n\n  template(content): any {\n    return this.isTemplateRef(content) ? content : undefined;\n  }\n}\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'c8y-alert-text',\r\n  template: `<ng-content></ng-content>`\r\n})\r\n\r\nexport class AlertTextComponent {}\r\n","import { Component, OnDestroy, Input, ViewChild, ContentChild } from '@angular/core';\nimport { Alert } from './alert.model';\nimport { AlertService } from './alert.service';\nimport { AlertDetailsComponent } from './alert-details.component';\n\n@Component({\n  selector: 'c8y-alert',\n  templateUrl: './alert.component.html'\n})\n\nexport class AlertComponent implements OnDestroy, Alert {\n\n  @Input() type: 'success' | 'warning' | 'danger' | 'info' | 'system';\n  @Input() onDetail: () => void;\n  @Input() onClose: () => void;\n  @ViewChild('detailedData', {static: false}) detailedData;\n  @ViewChild('text', {static: false}) text;\n  @ContentChild(AlertDetailsComponent, {static: false}) containDetailsComponent: AlertDetailsComponent;\n  private viewInitTimeout;\n\n  constructor(public alertService: AlertService) {}\n\n  ngAfterViewInit() {\n    if (!this.containDetailsComponent) {\n      this.detailedData = null;\n    }\n    this.viewInitTimeout = setTimeout(() =>\n      this.alertService.add(this)\n    );\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.viewInitTimeout);\n    this.alertService.remove(this);\n  }\n}\n","import { NgModule } from '@angular/core';\r\nimport { AlertDetailsComponent } from './alert-details.component';\r\nimport { AlertOutletComponent } from './alert-outlet.component';\r\nimport { AlertTextComponent } from './alert-text.component';\r\nimport { AlertComponent } from './alert.component';\r\nimport { AlertService } from './alert.service';\r\nimport { CommonModule } from '../common/common.module';\r\n\r\n/**\r\n * The angular module definition for alert.\r\n * @exports AlertComponent\r\n * @exports AlertOutletComponent\r\n * @exports AlertDetailsComponent\r\n * @exports AlertTextComponent\r\n */\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [\r\n    AlertOutletComponent,\r\n    AlertComponent,\r\n    AlertDetailsComponent,\r\n    AlertTextComponent\r\n  ],\r\n  declarations: [\r\n    AlertOutletComponent,\r\n    AlertComponent,\r\n    AlertDetailsComponent,\r\n    AlertTextComponent\r\n  ]\r\n})\r\nexport class AlertModule { }\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { AuditService, IAuditRecord, IResultList } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-audit-log',\n  templateUrl: './audit-log.component.html'\n})\nexport class AuditLogComponent implements OnInit {\n  @Input()\n  source: string | number;\n\n  records: IResultList<IAuditRecord>;\n\n  constructor(private audit: AuditService) {}\n\n  async ngOnInit() {\n    if (this.source) {\n      this.records = await this.audit.list({\n        withTotalPages: true,\n        source: this.source\n      });\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '../common/common.module';\nimport { AuditLogComponent } from './audit-log.component';\n\n/** The angular module definition for audit log. */\n@NgModule({\n  declarations: [AuditLogComponent],\n  imports: [CommonModule],\n  exports: [AuditLogComponent]\n})\nexport class AuditLogModule {}\n","import { Injectable, Optional } from '@angular/core';\nimport {\n  FetchClient,\n  BasicAuth,\n  ICredentials,\n  Realtime,\n  UserService,\n  TenantService,\n  IAuthentication,\n  CookieAuth,\n  ITenantLoginOption\n} from '@c8y/client';\nimport { AppStateService } from '../common/ui-state.service';\nimport { AlertService } from '../alert/alert.service';\nimport { gettext } from '../i18n/gettext';\nimport { ApiService } from '@c8y/ngx-components/api';\nimport { switchMap } from 'rxjs/operators';\nimport { EMPTY } from 'rxjs';\nimport { LocationStrategy } from '@angular/common';\nimport { TenantLoginOptionsService } from '@c8y/client';\nimport { get } from 'lodash-es';\n\n/**\n * Service to manage the login.\n */\n@Injectable()\nexport class LoginService {\n  rememberMe: boolean = false;\n  TOKEN_KEY: string = '_tcy8';\n  TFATOKEN_KEY: string = 'TFAToken';\n  OAUTH2_INTERNAL_TYPE: string = 'OAUTH2_INTERNAL';\n  loginMode: any;\n  oauthOptions: any;\n  isFirstLogin = true;\n  GREEN_MIN_LENGTH_DEFAULT = 8;\n\n  // tslint:disable:max-line-length\n  ERROR_MESSAGES = {\n    minlength: gettext('Password must have at least 8 characters and no more than 32.'),\n    password_missmatch: gettext('Password confirmation does not match.'),\n    maxlength: gettext('Password must have at least 8 characters and no more than 32.'),\n    password_strength: gettext(\n      'Your password is not strong enough. Please include numbers, lower and upper case characters'\n    ),\n    remote_error: gettext('Server error occurred.'),\n    email: gettext('Invalid email address.'),\n    password_change: gettext('Your password is expired. Please set a new password.'),\n    password_reset_token_expired: gettext(\n      'Password reset link expired. Please enter your email address to receive a new one.'\n    ),\n    tfa_pin_invalid: gettext('The code you entered is invalid. Please try again.'),\n    pattern_phonenumber: gettext(\n      'Invalid phone number format. Only digits, spaces, slashes (\"/\") and dashes (\"-\") allowed.'\n    ),\n    pattern_newPassword: gettext(\n      'Password must have at least 8 characters and no more than 32 and can only contain letters, numbers and following symbols: `~!@#$%^&*()_|+-=?;:\\'\",.<>{}[]\\\\/'\n    ),\n    international_number_required: gettext(\n      'International phone number required, in the format +49 9 876 543 210.'\n    ),\n    phone_number_error: gettext('Could not update phone number.'),\n    pinAlreadySent: gettext(\n      'The verification code was already sent. For a new verification code, please click on the link above.'\n    ),\n    passwordConfirm: gettext('Password confirmation does not match.'),\n    tfaExpired: gettext('Two-factor authentication token expired.')\n  };\n  // tslint:enable:max-line-length\n\n  private SUCCESS_MESSAGES = {\n    password_changed: gettext('Password changed. You can now log in using new password.'),\n    password_reset_requested: gettext(\n      'Password reset request has been sent. Please check your email.'\n    ),\n    resend_sms: gettext('Verification code SMS resent.'),\n    send_sms: gettext('Verification code SMS sent.')\n  };\n\n  private passwordStrengthSetting = {\n    enforcePasswordStrength: false,\n    greenMinLength: this.GREEN_MIN_LENGTH_DEFAULT\n  };\n\n  private localhostRegExp = new RegExp('localhost');\n  private localhostIpRegExp = new RegExp('127.0.0.1');\n  private showTenantRegExp = new RegExp('showTenant');\n\n  constructor(\n    private client: FetchClient,\n    private basicAuth: BasicAuth,\n    private cookieAuth: CookieAuth,\n    private ui: AppStateService,\n    private user: UserService,\n    private tenant: TenantService,\n    private realtime: Realtime,\n    private alert: AlertService,\n    private api: ApiService,\n    private tenantLoginOptionsService: TenantLoginOptionsService,\n    @Optional() private location: LocationStrategy\n  ) {\n    this.autoLogout();\n    this.initLoginOptions();\n  }\n\n  /**\n   * Returns the current tenant.\n   * @return The tenant name.\n   */\n  getTenant() {\n    return this.client.tenant;\n  }\n\n  initLoginOptions() {\n    const loginOptions = this.ui.state.loginOptions || [];\n    const isOAuth2 = ({ type, grantType }) =>\n      type === 'OAUTH2' && grantType === 'AUTHORIZATION_CODE';\n    this.loginMode = loginOptions.find(({ type }) => type === 'OAUTH2_INTERNAL') ||\n      loginOptions.find(({ type }) => type === 'BASIC') ||\n      loginOptions.find(isOAuth2) || { type: 'BASIC' };\n    this.oauthOptions = loginOptions.find(isOAuth2) || {};\n  }\n\n  redirectToOauth() {\n    const { initRequest } = this.oauthOptions;\n    const fullPath = (this.location ? (this.location as any)._platformLocation : window).location\n      .href;\n    const redirectUrl = encodeURIComponent(fullPath);\n    const originUriParam = `${initRequest.includes('?') ? '&' : '?'}originUri=${redirectUrl}`;\n    window.location.href = `${initRequest}${originUriParam}`;\n  }\n\n  autoLogout() {\n    const errorPattern = /invalid\\scredentials.*pin.*generate/i;\n    const isTfaExpired = data =>\n      data && typeof data.message === 'string' && errorPattern.test(data.message);\n    this.ui.currentUser\n      .pipe(\n        switchMap(u =>\n          u ? this.api.hookResponse(({ response }) => response.status === 401) : EMPTY\n        )\n      )\n      .subscribe(async (apiCall: any) => {\n        const { response } = apiCall;\n        let willLogout = false;\n        if (isTfaExpired(response.data)) {\n          willLogout = true;\n        } else {\n          if (typeof response.json === 'function') {\n            const data = await response.clone().json();\n            if (isTfaExpired(data)) {\n              willLogout = true;\n            }\n          }\n        }\n        if (willLogout) {\n          this.logout(false);\n          setTimeout(() => this.alert.danger(this.ERROR_MESSAGES.tfaExpired), 500);\n        }\n      });\n  }\n\n  /**\n   * Gets the minimal number of characters that a password should have to be considered a “green” strong one.\n   * @return The min length for password or default value.\n   */\n  getGreenMinLength() {\n    const loginOption = this.getLoginOption();\n    const greenMinLength = Number(get(loginOption, 'greenMinLength'));\n    this.passwordStrengthSetting.greenMinLength = isNaN(greenMinLength)\n      ? this.GREEN_MIN_LENGTH_DEFAULT\n      : greenMinLength;\n    return this.passwordStrengthSetting.greenMinLength;\n  }\n\n  /**\n   * Checks if password strength is enforced.\n   * @return true if enforced.\n   */\n  getEnforcePasswordStrength() {\n    const loginOption = this.getLoginOption();\n    this.passwordStrengthSetting.enforcePasswordStrength =\n      get(loginOption, 'enforceStrength', 'false') === 'true' ? true : false;\n    return this.passwordStrengthSetting.enforcePasswordStrength;\n  }\n\n  /**\n   * Clears all backend errors.\n   */\n  cleanMessages() {\n    this.alert.clearAll();\n  }\n\n  /**\n   * Adds a new success message\n   * @param successKey The key of the success message as used in SUCCESS_MESSAGES\n   */\n  addSuccessMessage(successKey: string) {\n    const successMessage = this.SUCCESS_MESSAGES[successKey];\n    if (successMessage) {\n      this.alert.add({\n        text: successMessage,\n        type: 'success',\n        timeout: 0\n      });\n    }\n  }\n\n  /**\n   * Returns the current strategy. Defaults to cookie, if a token\n   * is found in local or session storage we switch to basic auth.\n   * @returns The current auth strategy.\n   */\n  getAuthStrategy(): IAuthentication {\n    let authStrategy = this.cookieAuth as IAuthentication;\n    const token = this.getStoredToken();\n    const tfa = this.getStoredTfaToken();\n    if (token) {\n      authStrategy = this.basicAuth;\n      this.setCredentials({ token, tfa }, this.basicAuth);\n    }\n    return authStrategy;\n  }\n\n  /**\n   * Forces the use of basic auth as strategy with this credentials.\n   * @param credentials The credentials to use.\n   */\n  useBasicAuth(credentials: ICredentials) {\n    this.setCredentials(credentials, this.basicAuth);\n    return this.basicAuth;\n  }\n\n  /**\n   * Tries to login a user with the given credentials.\n   * If successful, the current tenant and user is set. If not an error\n   * is thrown. It also verifies if the user is allowed to open the\n   * current app.\n   * @param auth The authentication strategy used.\n   * @param credentials The credentials to try to login.\n   */\n  async login(auth: IAuthentication = this.getAuthStrategy(), credentials?: ICredentials) {\n    this.client.setAuth(auth);\n\n    const tenantRes = await this.tenant.current();\n    const tenant = tenantRes.data;\n\n    if (await this.switchLoginMode(credentials)) {\n      auth = this.cookieAuth;\n    }\n\n    const userRes = await this.user.current();\n    const user = userRes.data;\n    await this.verifyAppAccess();\n\n    const supportUserName = this.getSupportUserName(credentials);\n    const token = this.setCredentials(\n      {\n        tenant: tenant.name,\n        user: (supportUserName ? `${supportUserName}$` : '') + user.userName\n      },\n      auth\n    );\n\n    if (token) {\n      this.storeBasicAuthToken(token);\n    }\n\n    await this.authFulfilled(tenant, user, supportUserName);\n  }\n\n  /**\n   * Saves tenant, user and support user info to the app state.\n   * @param tenant The current tenant object.\n   * @param user The current user object.\n   * @param supportUserName The current support user name.\n   */\n  async authFulfilled(tenant?, user?, supportUserName?) {\n    if (!tenant) {\n      const { data } = await this.tenant.current();\n      tenant = data;\n      this.client.tenant = tenant.name;\n    }\n\n    if (!user) {\n      const { data } = await this.user.current();\n      user = data;\n    }\n\n    if (!supportUserName) {\n      supportUserName = null;\n    }\n\n    this.ui.setUser({ user, supportUserName });\n    this.ui.currentTenant.next(tenant);\n  }\n\n  /**\n   * Switch the login mode to CookieAuth if the\n   * user has configured to use it in loginOptions.\n   * @param credentials The credentials for that login\n   */\n  async switchLoginMode(credentials?: ICredentials) {\n    const isPasswordGrantLogin = this.isPasswordGrantLogin(credentials);\n    if (isPasswordGrantLogin && credentials) {\n      const params = new URLSearchParams({\n        grant_type: 'PASSWORD',\n        username: credentials.user,\n        password: credentials.password,\n        tfa_code: credentials.tfa\n      });\n      const urlParams = new URLSearchParams(this.loginMode.initRequest.split('?').pop());\n      credentials.tenant = urlParams.get('tenant_id');\n      const res = await this.client.fetch(`tenant/oauth?${urlParams.toString()}`, {\n        method: 'POST',\n        body: params.toString(),\n        headers: {\n          'content-type': 'application/x-www-form-urlencoded;charset=UTF-8'\n        }\n      });\n      if (!(res as Response).ok) {\n        try {\n          const data = await res.json();\n          throw { res, data };\n        } catch (ex) {\n          throw ex;\n        }\n      }\n      this.client.setAuth(this.cookieAuth);\n      this.cleanLocalStorage();\n      this.basicAuth.logout();\n    }\n    return isPasswordGrantLogin;\n  }\n\n  isPasswordGrantLogin(credentials?: ICredentials) {\n    const isSupportUser = credentials && credentials.user.includes('$');\n    return !!(\n      !isSupportUser &&\n      this.loginMode &&\n      this.loginMode.type === this.OAUTH2_INTERNAL_TYPE\n    );\n  }\n\n  /**\n   * Verifies if user is the support user or not.\n   * @param {ICredentials} credentials credentials given by user.\n   */\n  isSupportUser(credentials?: ICredentials): boolean {\n    return credentials && credentials.user.includes('$') ? true : false;\n  }\n\n  /**\n   * Verifies if the tenant input field should be shown\n   * or not.\n   * @returns If true, show the tenant input.\n   */\n  showTenant(): boolean {\n    return !this.ui.state.loginOptions || this.isLocal() || this.isShowTenant();\n  }\n\n  /**\n   * Logs the user out\n   * @param reload If set to false, the page will not reload\n   */\n  async logout(reload = true) {\n    let resData = null;\n    try {\n      const [basicRes, cookieRes] = await this.reset();\n      resData = await cookieRes.json();\n    } catch (ex) {\n      this.alert.removeLastDanger();\n    } finally {\n      if (resData && resData.url) {\n        this.redirect(resData.url);\n      } else if (reload) {\n        window.location.reload();\n      }\n    }\n  }\n\n  /**\n   * Resets the stored auth-data\n   */\n  async reset() {\n    this.cleanLocalStorage();\n    this.cleanSessionStorage();\n    this.realtime.disconnect();\n    this.ui.currentUser.next(null);\n    return Promise.all([this.basicAuth.logout(), this.cookieAuth.logout()]);\n  }\n\n  /**\n   * Saves the TFA token to local or session storage.\n   * @param tfaToken The tfa token to save.\n   * @param storage The storage to use (local or session).\n   */\n  saveTFAToken(tfaToken: string, storage: Storage) {\n    storage.setItem(this.TFATOKEN_KEY, tfaToken);\n  }\n\n  /**\n   * Request the manifest -> on 401 user has no access to that application\n   * and we throw the error up to the login form.\n   */\n  async verifyAppAccess() {\n    try {\n      await this.ui.loadManifest();\n    } catch (ex) {\n      if (!(ex.res && ex.res.status === 404 && this.isLocal())) {\n        throw ex;\n      }\n    }\n  }\n\n  /**\n   * Sets the tenant to the client and updates the credentials on the\n   * auth strategy.\n   * @param credentials The name of the tenant.\n   * @param authStrategy The authentication strategy used.\n   * @return Returns the token if basic auth, otherwise undefined.\n   */\n  private setCredentials(credentials: ICredentials, authStrategy: IAuthentication) {\n    if (credentials.tenant) {\n      this.client.tenant = credentials.tenant;\n    }\n    // Check if a token is already set (case for support user login)\n    // if yes -> we just need to update the user, and reuse the token\n    // of the support user.\n    // Therefore we need to pass user and tenant, to get\n    // just the stored token and nothing else (see BasicAuth.ts:31).\n    const token = this.basicAuth.updateCredentials({\n      tenant: credentials.tenant,\n      user: credentials.user\n    });\n    const newCredentials = { token, ...credentials };\n\n    return authStrategy.updateCredentials(newCredentials);\n  }\n\n  /**\n   * Verifies if the current user is a developer or not.\n   * Running on localhost means development mode.\n   */\n  private isLocal(): boolean {\n    const hostname = window.location.hostname;\n    return this.localhostIpRegExp.test(hostname) || this.localhostRegExp.test(hostname);\n  }\n\n  /**\n   * Save the token to local or session storage.\n   * @param token The token to save.\n   * @param storage The storage to use (local or session).\n   */\n  private saveToken(token: string, storage: Storage) {\n    storage.setItem(this.TOKEN_KEY, token);\n  }\n\n  private storeBasicAuthToken(token: string) {\n    this.saveToken(token, sessionStorage);\n    if (this.rememberMe) {\n      this.saveToken(token, localStorage);\n    }\n  }\n\n  private cleanLocalStorage() {\n    localStorage.removeItem(this.TOKEN_KEY);\n    localStorage.removeItem(this.TFATOKEN_KEY);\n  }\n\n  private cleanSessionStorage() {\n    sessionStorage.removeItem(this.TOKEN_KEY);\n    sessionStorage.removeItem(this.TFATOKEN_KEY);\n  }\n\n  private isShowTenant(): boolean {\n    return this.showTenantRegExp.test(window.location.href);\n  }\n\n  private redirect(url: string) {\n    window.location.href = url;\n  }\n\n  private getLoginOption(): ITenantLoginOption {\n    const loginOptions = this.ui.state.loginOptions || [];\n    const [loginOption] = loginOptions;\n    return loginOption;\n  }\n\n  /**\n   * Gets support user name from credentials.\n   * @param credentials Credentials object (defaults to the stored one).\n   * @returns Support user name.\n   */\n  private getSupportUserName(credentials: ICredentials = this.getStoredCredentials()): string {\n    if (!credentials) {\n      return null;\n    }\n    const supportUserName = credentials.user.match(/^(.+\\/)?((.+)\\$)?(.+)?$/)[3];\n    return supportUserName;\n  }\n\n  /**\n   * Gets credentials object from the stored token.\n   * @returns Credentials object.\n   */\n  private getStoredCredentials(): ICredentials {\n    const token = this.getStoredToken();\n    if (!token) {\n      return null;\n    }\n    return this.decodeToken(token);\n  }\n\n  /**\n   * Gets stored token from local storage or session storage.\n   * @returns Stored token.\n   */\n  private getStoredToken(): string {\n    return localStorage.getItem(this.TOKEN_KEY) || sessionStorage.getItem(this.TOKEN_KEY);\n  }\n\n  /**\n   * Gets stored TFA token from local storage or session storage.\n   * @returns Stored TFA token.\n   */\n  private getStoredTfaToken(): string {\n    return localStorage.getItem(this.TFATOKEN_KEY) || sessionStorage.getItem(this.TFATOKEN_KEY);\n  }\n\n  /**\n   * Decodes token to credentials object.\n   * @param token Token to decode.\n   * @returns Credentials object.\n   */\n  private decodeToken(token: string): ICredentials {\n    const decoded = decodeURIComponent(escape(window.atob(token)));\n    const split = decoded.match(/(([^/]*)\\/)?([^/:]+):(.+)/);\n\n    return {\n      tenant: split[2],\n      user: split[3],\n      password: split[4]\n    };\n  }\n}\n","import { Type } from '@angular/core';\nimport { IResultList } from '@c8y/client';\n\n/*\n * For reference: the structure of current device column-related objects.\n * TODO: Can be removed when \"All devices\" is fully migrated.\n *\n * Services involved:\n * - c8yFilteringSortingColumns\n * - c8yFilteringSortingInventoryQueries\n * - c8yDeviceListColumns\n * - c8yFilteringSortingCollections?? -> for other tables in tenant/cell ID usage statistics feature\n *\n * Components involved:\n * - c8yFilteredSortedList -> this needs to be gravely adapted\n *\n * States saved in user preferences:\n * - Columns config (ALL_DEVICES_COLUMNS_CONFIG_USER_PREFERENCES_KEY)\n * - Columns meta (ALL_DEVICES_COLUMNS_META_USER_PREFERENCES_KEY_PREFIX)\n *\n * States saved in dynamic group object:\n * - Columns config (COLUMNS_CONFIG_FRAGMENT)\n * - Columns meta (COLUMNS_META_FRAGMENT)\n * - Query string (QUERY_STRING_FRAGMENT)\n *\n * TO-FUTURE-SELF note:\n * - `col.config.filtering` and `col.config.sorting` (the models) populate\n * `col.filtering` and `col.sorting` (the views).\n * - `getFilter` can return a query object (for server-side filtering) or\n * a filter function (for server-side filtering).\n */\ninterface DeviceColumn {\n  name: string;\n  header: string;\n  config: {\n    filtering: object;\n    sorting: {\n      order: number;\n    };\n    override: DeviceColumn;\n  };\n  cell: {\n    class: string;\n    innerClass: string;\n    scopeExtensions: object;\n    template: string;\n    style: object;\n  };\n  filtering: {\n    form: object[];\n    schema: {\n      type: string;\n      properties: {\n        type: string;\n        [key: string]: any;\n      };\n    };\n    getFilter(filteringModel: object): object | FilterFunction;\n  };\n  sorting: {\n    path?: string;\n    paths?: string;\n  };\n  meta: {\n    custom: boolean;\n    key: string;\n    headerName: string;\n    fragmentPath: string;\n    active: boolean;\n    filteringMode: 'EQUALITY' | 'EXISTENCE';\n  };\n}\n\ntype FilterFunction = (item: object) => boolean;\n\nexport interface DataGrid {\n  columns: Column[];\n  rows: Row[];\n  pagination: Pagination;\n  serverSideDataCallback: ServerSideDataCallback;\n  selectable: boolean;\n  selectionPrimaryKey: string;\n  displayOptions: DisplayOptions;\n  actionControls: ActionControl[];\n  bulkActionControls: BulkActionControl[];\n}\n\n/*\n * Column\n */\nexport interface Column {\n  name: string | SpecialColumnName;\n  header?: string;\n  path?: string;\n  visible?: boolean;\n  positionFixed?: boolean;\n\n  /*\n   * Cosmetics\n   */\n  dataType?: ColumnDataType;\n  gridTrackSize?: string;\n  headerCSSClassName?: string | string[];\n  cellCSSClassName?: string | string[];\n\n  /*\n   * Sorting-Filtering\n   */\n  sortable?: boolean;\n  sortOrder?: SortOrder;\n\n  filterable?: boolean;\n  filterPredicate?: string | FilterPredicateFunction;\n  externalFilterQuery?: any;\n\n  /*\n   * Custom renderer\n   */\n  cellRendererComponent?: Type<any>;\n  headerCellRendererComponent?: Type<any>;\n  filteringFormRendererComponent?: Type<any>;\n}\n\nexport const enum SpecialColumnName {\n  Checkbox = 'checkbox',\n  Actions = 'actions'\n}\n\nexport const enum ColumnDataType {\n  Icon = 'icon',\n  Numeric = 'numeric',\n  TextShort = 'text-short',\n  TextLong = 'text-long'\n}\n\nexport const enum ColumnDataRecordClassName {\n  Icon = 'data-record-icon',\n  Header = 'data-record-header',\n  Default = ''\n}\n\nexport const minColumnGridTrackSize = 80;\n\nexport const ratiosByColumnTypes = {\n  icon: 1,\n  numeric: 1,\n  'text-short': 1.67,\n  'text-long': 3.33\n};\n\nexport type SortOrder = 'asc' | 'desc' | '';\n\nexport type FilterPredicateFunction = (item: object, path: string) => boolean;\n\nexport enum FilteringActionType {\n  ApplyFilter = 'APPLY_FILTER',\n  ResetFilter = 'RESET_FILTER'\n}\n\nexport interface Row {\n  id: string;\n  [key: string]: any;\n}\n\nexport interface Pagination {\n  currentPage: number;\n  nextPage?: number;\n  pageSize: number;\n}\n\nexport type ServerSideDataCallback = (\n  dataSourceModifier: DataSourceModifier\n) => ServerSideDataResult;\nexport interface DataSourceModifier {\n  columns: Column[];\n  searchText: string;\n  pagination: Pagination;\n  selection: {\n    enabled: boolean;\n    primaryKey: string;\n  };\n}\n\n/**\n * Describes result from server with data and additional statistics.\n */\nexport type ServerSideDataResult = IResultList<object> & {\n  /** The real grand total number of items (the whole dataset). */\n  size: number;\n\n  /** The number of items after filtering applied to the whole dataset (subset). */\n  filteredSize: number;\n\n  /** The list of ids of all filtered items (subset). */\n  filteredDataIds?: string[];\n};\n\nexport interface DataSourceStats {\n  /** The real grand total number of items (the whole dataset). */\n  size: number;\n\n  /** The number of items after filtering applied to the whole dataset (subset). */\n  filteredSize: number;\n\n  /** The number of the current page. */\n  currentPage: number;\n\n  /** The number of the next page. */\n  nextPage?: number;\n\n  /** The number of items currently shown in the list view, a.k.a. current page (what the user sees on screen). */\n  currentPageSize: number;\n\n  /** The number of items on the first page.  */\n  firstPageSize: number;\n}\n\nexport interface DisplayOptions {\n  striped: boolean;\n  bordered: boolean;\n  gridHeader: boolean;\n}\n\nexport interface ActionControl {\n  type: BuiltInActionType | string;\n  text?: string;\n  icon?: string;\n  // tslint:disable-next-line:ban-types\n  callback: ((item: Row, reload: () => void) => void) | Function;\n  [key: string]: any;\n}\n\nexport interface BulkActionControl extends ActionControl {\n  callback(selectedItemIds: string[], reload: () => void): void;\n}\n\nexport const enum BuiltInActionType {\n  Edit = 'EDIT',\n  Delete = 'DELETE',\n  Export = 'EXPORT'\n}\n","import { Component, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { UserService, ICredentials, FetchClient, Client, IAuthentication } from '@c8y/client';\nimport { AppStateService } from '../common/ui-state.service';\nimport { AlertService } from '../alert/alert.service';\nimport { ModalComponent } from '../modal/modal.component';\nimport { LoginService } from '../login/public-api';\nimport { clone } from 'lodash-es';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-password-confirm-modal',\n  templateUrl: './password-confirm-modal.component.html'\n})\nexport class PasswordConfirmModalComponent {\n  @Output() passwordConfirmedEmitter = new EventEmitter<boolean>();\n  loading = false;\n  password: string;\n\n  @ViewChild('modal', { static: false }) private modal: ModalComponent;\n\n  constructor(\n    public user: UserService,\n    public ui: AppStateService,\n    private client: FetchClient,\n    private alert: AlertService,\n    private loginService: LoginService\n  ) {}\n\n  async passwordConfirm() {\n    if (this.password) {\n      const supportUserName = this.ui.currentSupportUserName.value;\n      const userId = this.ui.currentUser.value.id;\n      const credentials: ICredentials = {\n        password: this.password,\n        user: `${supportUserName ? `${supportUserName}$` : ''}${userId}`,\n        tenant: this.client.tenant\n      };\n      try {\n        this.loading = true;\n        const strategy = clone(this.loginService.useBasicAuth({}));\n        delete credentials.tfa;\n        strategy.updateCredentials(credentials);\n        const newClient = this.createNewClient(strategy, this.client.baseUrl);\n        await newClient.user.current();\n        this.emitSuccessAndClose();\n      } catch (e) {\n        if (e.res && e.res.status === 401 && e.data && /pin|totp/i.test(e.data.message)) {\n          this.emitSuccessAndClose();\n        } else {\n          this.alert.danger(gettext(\"Provided password doesn't match your current one.\"));\n        }\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n\n  cancel() {\n    this.passwordConfirmedEmitter.emit(false);\n    this.modal._dismiss();\n  }\n\n  createNewClient(strategy: IAuthentication, baseUrl: string) {\n    return new Client(strategy, baseUrl);\n  }\n\n  private emitSuccessAndClose() {\n    this.passwordConfirmedEmitter.emit(true);\n    this.modal._dismiss();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { PasswordStrength } from '@c8y/client';\nimport { filter } from 'lodash-es';\nimport { PasswordStrengthColor } from './password.model';\nimport { gettext } from '../i18n/gettext';\nimport { PasswordConfirmModalComponent } from './password-confirm-modal.component';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { take } from 'rxjs/operators';\n\n@Injectable()\nexport class PasswordService {\n\n  private GREEN: PasswordStrengthColor = {\n    colorName: 'green',\n    color: 'rgb(0, 128, 0)',\n    description: gettext('strong'),\n    passwordStrength: PasswordStrength.GREEN\n  };\n  private YELLOW: PasswordStrengthColor = {\n    colorName: 'yellow',\n    color: 'rgb(255, 204, 51)',\n    description: gettext('medium'),\n    passwordStrength: PasswordStrength.YELLOW\n  };\n  private RED: PasswordStrengthColor = {\n    colorName: 'red',\n    color: 'rgb(170, 0, 51)',\n    description: gettext('weak'),\n    passwordStrength: PasswordStrength.RED\n  };\n\n  constructor(private modalService: BsModalService) {}\n\n  confirmPassword() {\n    const modalInstance: any = this.modalService.show(PasswordConfirmModalComponent);\n    return modalInstance.content.passwordConfirmedEmitter.pipe(take(1));\n  }\n\n  hasLowerCase(password: string) {\n    return (password.search(/[a-z]/) !== -1);\n  }\n\n  hasUpperCase(password: string) {\n    return (password.search(/[A-Z]/) !== -1);\n  }\n\n  hasNumbers(password: string) {\n    return (password.search(/[0-9]/) !== -1);\n  }\n\n  hasSpecialChars(password: string) {\n    return (password.search(/[^0-9a-zA-Z]+/) !== -1);\n  }\n\n  getStrengthColor(password: string): PasswordStrengthColor {\n    const passwordStrength = filter([\n      this.hasLowerCase(password),\n      this.hasUpperCase(password),\n      this.hasNumbers(password),\n      this.hasSpecialChars(password)\n    ]).length;\n\n    if (passwordStrength > 2) {\n      return this.GREEN;\n    } else if (passwordStrength >= 2) {\n      return this.YELLOW;\n    } else {\n      return this.RED;\n    }\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { PasswordService } from './password.service';\nimport { LoginService } from '../login/login.service';\nimport { assign, map } from 'lodash-es';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-password-check-list',\n  templateUrl: './password-check-list.component.html',\n  styles: []\n})\n\nexport class PasswordCheckListComponent implements OnInit {\n\n  @Input('password')\n  set password(password: string) {\n    if (typeof password === 'string') {\n      this.onPasswordChange(password);\n    }\n  }\n\n  minGreenLength: number = 0;\n\n  checklist = [\n    {\n      label: gettext('Include lowercase characters (e.g. abcdef)'),\n      check: this.passwordStrengthChecker.hasLowerCase,\n      icon: '',\n      contextualColor: ''\n\n    },\n    {\n      label: gettext('Include uppercase characters (e.g. ABCDEF)'),\n      check: this.passwordStrengthChecker.hasUpperCase,\n      icon: '',\n      contextualColor: ''\n    },\n    {\n      label: gettext('Include numbers (e.g. 123456)'),\n      check: this.passwordStrengthChecker.hasNumbers,\n      icon: '',\n      contextualColor: ''\n    },\n    {\n      label: gettext('Include symbols (e.g. !@#$%^)'),\n      check: this.passwordStrengthChecker.hasSpecialChars,\n      icon: '',\n      contextualColor: ''\n    },\n    {\n      label: gettext('Must have at least {{length}} characters'),\n      check: (password) => password.length >= this.minGreenLength,\n      icon: '',\n      contextualColor: ''\n    }\n  ];\n\n  constructor(public loginService: LoginService,\n              private passwordStrengthChecker: PasswordService) {\n  }\n\n  ngOnInit() {\n    this.minGreenLength = this.loginService.getGreenMinLength();\n  }\n\n  get translateParams() {\n    return {\n      length: this.minGreenLength\n    };\n  }\n\n  onPasswordChange(password) {\n    this.checklist = map(this.checklist, (requirement) => {\n      const checked = requirement.check(password);\n      assign(requirement, {\n        icon: checked ? 'check' : '',\n        contextualColor: checked ? '' : 'text-muted'\n      });\n      return requirement;\n    });\n  }\n}\n","import { Directive, forwardRef, Attribute } from '@angular/core';\r\nimport { NG_VALIDATORS, Validator, AbstractControl } from '@angular/forms';\r\n\r\n@Directive({\r\n  selector: '[passwordConfirm]',\r\n  providers: [\r\n    {\r\n      provide: NG_VALIDATORS,\r\n      useExisting: PasswordConfirm,\r\n      multi: true\r\n    }\r\n  ]\r\n})\r\n\r\nexport class PasswordConfirm implements Validator {\r\n\r\n  constructor(@Attribute('passwordConfirm') public passwordConfirm: string) {\r\n  }\r\n\r\n  validate(abControl: AbstractControl): { [key: string]: any } {\r\n    const value = abControl.value;\r\n    const controlToCompareWith = abControl.root.get(this.passwordConfirm);\r\n    if (controlToCompareWith && value !== controlToCompareWith.value) {\r\n      return { passwordConfirm: true };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { PasswordStrength } from '@c8y/client';\r\nimport { filter } from 'lodash-es';\r\nimport { PasswordStrengthColor } from './password.model';\r\nimport { gettext } from '../i18n/gettext';\r\n\r\n@Injectable()\r\nexport class PasswordStrengthCheckerService {\r\n\r\n  private GREEN: PasswordStrengthColor = {\r\n    colorName: 'green',\r\n    color: 'rgb(0, 128, 0)',\r\n    description: gettext('strong'),\r\n    passwordStrength: PasswordStrength.GREEN\r\n  };\r\n  private YELLOW: PasswordStrengthColor = {\r\n    colorName: 'yellow',\r\n    color: 'rgb(255, 204, 51)',\r\n    description: gettext('medium'),\r\n    passwordStrength: PasswordStrength.YELLOW\r\n  };\r\n  private RED: PasswordStrengthColor = {\r\n    colorName: 'red',\r\n    color: 'rgb(170, 0, 51)',\r\n    description: gettext('weak'),\r\n    passwordStrength: PasswordStrength.RED\r\n  };\r\n\r\n  hasLowerCase(password: string) {\r\n    return (password.search(/[a-z]/) !== -1);\r\n  }\r\n\r\n  hasUpperCase(password: string) {\r\n    return (password.search(/[A-Z]/) !== -1);\r\n  }\r\n\r\n  hasNumbers(password: string) {\r\n    return (password.search(/[0-9]/) !== -1);\r\n  }\r\n\r\n  hasSpecialChars(password: string) {\r\n    return (password.search(/[^0-9a-zA-Z]+/) !== -1);\r\n  }\r\n\r\n  getStrengthColor(password: string): PasswordStrengthColor {\r\n    const passwordStrength = filter([\r\n      this.hasLowerCase(password),\r\n      this.hasUpperCase(password),\r\n      this.hasNumbers(password),\r\n      this.hasSpecialChars(password)\r\n    ]).length;\r\n\r\n    if (passwordStrength > 2) {\r\n      return this.GREEN;\r\n    } else if (passwordStrength >= 2) {\r\n      return this.YELLOW;\r\n    } else {\r\n      return this.RED;\r\n    }\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { PasswordService } from './password.service';\n\n@Component({\n  selector: 'c8y-password-strength',\n  templateUrl: './password-strength.component.html'\n})\n\nexport class PasswordStrengthComponent {\n\n  @Input('password')\n  set password(password: string) {\n    if (typeof password === 'string') {\n      this.model = this.passwordStrengthCheckerService.getStrengthColor(password);\n      this.strength.emit(this.model);\n    }\n  }\n  @Output()\n  strength = new EventEmitter();\n\n  model;\n\n  constructor(private passwordStrengthCheckerService: PasswordService) {\n    this.password = '';\n  }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { NewPassword } from './password.model';\r\nimport { SystemOptionsService } from '@c8y/client';\r\nimport { ControlContainer, NgForm } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'c8y-new-password',\r\n  templateUrl: './new-password.component.html',\r\n  viewProviders: [{ provide: ControlContainer, useExisting: NgForm }]\r\n})\r\nexport class NewPasswordComponent implements OnInit {\r\n  @Output() password = new EventEmitter<NewPassword | {}>();\r\n  model: any = {};\r\n  enforcePasswordStrength: boolean = false;\r\n  changePassword: boolean = false;\r\n\r\n  constructor(private systemOptions: SystemOptionsService) {}\r\n\r\n  ngOnInit() {\r\n    this.loadEnforcePasswordStrength();\r\n  }\r\n\r\n  newPasswordChanged() {\r\n    this.password.emit({\r\n      password: this.model.newPassword,\r\n      passwordStrength: this.model.strength\r\n    });\r\n  }\r\n\r\n  async loadEnforcePasswordStrength() {\r\n    try {\r\n      const { data } = await this.systemOptions.detail({\r\n        category: 'password',\r\n        key: 'enforce.strength'\r\n      });\r\n      this.enforcePasswordStrength = data.value === 'true';\r\n    } catch (e) {\r\n      // do nothing;\r\n    }\r\n  }\r\n\r\n  toggleChangePassword() {\r\n    this.changePassword = !this.changePassword;\r\n    if (!this.changePassword) {\r\n      this.password.emit({});\r\n      this.model = {};\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, OnDestroy } from '@angular/core';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { StatusType, Status, statusIcons, statusAlert } from '../common/status.model';\nimport { ModalLabels } from '../select-modal/select-modal.model';\n\n/**\n * Labels to be used in the selection modal.\n * @deprecated This is going to be removed after 1007.7.0. Use ModalLabels instead.\n */\n// tslint:disable-next-line: no-empty-interface\nexport interface ILabels extends ModalLabels {}\n\n@Component({\n  selector: 'c8y-confirm-modal',\n  templateUrl: './modal-confirm.component.html'\n})\nexport class ConfirmModalComponent implements OnDestroy {\n  result: Promise<boolean>;\n  dismiss: () => void;\n  close: () => void;\n  @Input() title: string;\n  @Input() body: string;\n  @Input() status: StatusType = Status.INFO;\n  @Input() set labels(labels: ModalLabels) {\n    const { ok = 'OK', cancel = 'Cancel' } = labels || {};\n    this._labels = { ok, cancel };\n  }\n\n  get labels(): ModalLabels { return this._labels; }\n\n  get classIcon() {\n    return `fa-${statusIcons[this.status]}`;\n  }\n\n  get classAlert() {\n    return statusAlert[this.status];\n  }\n\n  private _labels: ModalLabels;\n\n  constructor(private modal: BsModalRef) {\n    this._labels = {\n      ok: 'OK',\n      cancel: 'Cancel'\n    };\n    this.result = new Promise((resolve, reject) => {\n      this.dismiss = () => {\n        reject();\n        this.modal.hide();\n      };\n      this.close = () => {\n        resolve(true);\n        this.modal.hide();\n      };\n    });\n  }\n\n  ngOnDestroy() {\n    this.dismiss();\n  }\n}\n","import { Component, Input, Optional, Output, EventEmitter, HostListener } from '@angular/core';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { gettext } from '../i18n/gettext';\nimport { isEmpty } from 'lodash';\nimport { ModalLabels } from '../select-modal/select-modal.model';\n\n/**\n * C8y modal component.\n * ## Example:\n *\n * Creating custom modal:\n * ```typescript\n *  import { Component } from \"@angular/core\";\n *  import { Subject } from 'rxjs';\n *\n * @Component({\n *  selector: \"my-modal\",\n *  template: `\n *    <c8y-modal title=\"CustomTitle\"\n *      (onClose)=\"onClose($event)\"\n *      (onDismiss)=\"onDismiss($event)\"\n *      [labels]=\"labels\"\n *      [disabled]=\"true\" <- will disable ok button\n *      >\n *        <span>I am body of modal</span>\n *        <span>For simple string use body=\"string\"</span>\n *    </c8y-modal>`\n * })\n *\n * export class MyModalComponent {\n *\n *  closeSubject: Subject<boolean> = new Subject();\n *  labels : ModalLabels = {ok: \"customOK\", cancel: \"customCancel\"};\n *\n *  onDismiss(event){\n *    this.closeSubject.next(false);\n *  }\n *\n *  onClose(event) {\n *    this.closeSubject.next(true);\n *  }\n * }\n * ```\n * Showing modal:\n * ```typescript\n * import { BsModalService } from \"ngx-bootstrap/modal\";\n *\n * constructor(\n *  public bsModalService: BsModalService,\n * ) {}\n *\n * showModal() {\n *  const modalRef = this.bsModalService.show(MyModalComponent);\n *  modalRef.content.closeSubject.subscribe(result => {\n *    console.log('results:', result);\n *  });\n * }\n * ```\n */\n@Component({\n  selector: 'c8y-modal',\n  templateUrl: './modal.component.html',\n})\n\nexport class ModalComponent {\n  @Output() onDismiss: EventEmitter<boolean> = new EventEmitter();\n  @Output() onClose: EventEmitter<boolean> = new EventEmitter();\n  @Input() disabled = false;\n  @Input() close: () => void;\n  @Input() dismiss: () => void;\n  @Input() title: string;\n  @Input() body: string;\n  @Input() customFooter: boolean = false;\n  @Input() set labels({ok, cancel}: ModalLabels) {\n    this._labels = {ok , cancel};\n  }\n\n  get labels(): ModalLabels { return this._labels; }\n\n  private _labels: ModalLabels =  { ok: gettext('OK'), cancel: gettext('Cancel') };\n\n  constructor(@Optional() private modal: BsModalRef) {}\n\n  _dismiss() {\n    let fn = this.dismiss;\n    if (!fn && this.modal) { fn = () => this.modal.hide(); }\n    if (fn) { fn(); }\n    this.onDismiss.emit(true);\n  }\n\n  _close() {\n    let fn = this.close;\n    if (!fn && this.modal) { fn = () => this.modal.hide(); }\n    if (fn) { fn(); }\n    this.onClose.emit(true);\n  }\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    const hasOnlyOneButton = isEmpty(this.labels.ok) !== isEmpty(this.labels.cancel);\n    const isCancelClickable = !this.customFooter && this.labels.cancel;\n    const isOkClickable = !this.customFooter && !this.disabled && this.labels.ok;\n    if (hasOnlyOneButton  && isCancelClickable) {\n      this._dismiss();\n    }\n    if (hasOnlyOneButton  && isOkClickable) {\n      this._close();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { ConfirmModalComponent } from './modal-confirm.component';\nimport { StatusType, Status } from '../common/status.model';\nimport { gettext } from '../i18n/gettext';\n\n/**\n * Service to shiow a modal.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ModalService {\n\n  constructor(private modalService: BsModalService) {}\n\n  /**\n   * Shows a quick confirm message modal.\n   * @param title The title of that modal.\n   * @param body The text body to display.\n   * @param status The status.\n   * @param labels The labels to use. Default: { ok: 'Confirm', cancel: 'Cancel'}\n   */\n  async confirm(title: string, body: string, status: StatusType = Status.INFO,  labels: any = {}) {\n    const modalLabels = {ok: labels.ok || gettext('Confirm'), cancel: labels.cancel || gettext('Cancel')};\n    const modalRef = this.modalService.show(ConfirmModalComponent, {initialState: {title, body, labels: modalLabels, status}});\n    return await modalRef.content.result;\n  }\n\n  /**\n   * Shows a quick acknowledge message modal.\n   * @param title The title of that modal.\n   * @param body The text body to display.\n   * @param status The status.\n   * @param acknowledgeLabel The label to use.\n   */\n  async acknowledge(title: string, body: string, status: StatusType = Status.INFO, acknowledgeLabel: string = gettext('Confirm') ) {\n    const labels = {ok: acknowledgeLabel, cancel: null};\n    const modalRef = this.modalService.show(ConfirmModalComponent, {initialState: {title, body, labels, status}});\n    return await modalRef.content.result;\n  }\n}\n","import { Component, Input, ViewChild, OnDestroy } from '@angular/core';\nimport { PopoverDirective } from 'ngx-bootstrap/popover';\nimport { StatusType } from '../common/status.model';\nimport { gettext } from '../i18n/gettext';\n\nexport interface PopoverConfirmButtons {\n  /**\n   * The label of the button\n   */\n  label: string;\n  /**\n   * Which action to perform.\n   */\n  action: () => Promise<any>;\n  /**\n   * The status class attached to the button.\n   */\n  status?: StatusType | 'primary';\n}\n\n/**\n * A component to show a popover right next to the\n * user action. Add this component where the confirm modal\n * should be shown and toggle isOpen to display it. You\n * can use `await isShow()` to wait for a result on the\n * click action.\n */\n@Component({\n  selector: 'c8y-popover-confirm',\n  templateUrl: './popover-confirm.component.html'\n})\nexport class PopoverConfirmComponent {\n  @ViewChild(PopoverDirective, {static: false}) popover: PopoverDirective;\n  @Input() buttons: PopoverConfirmButtons[] = [{ label: gettext('cancel'), action: () => Promise.reject()}];\n  @Input() message: string;\n  @Input() title: string;\n  @Input() isOpen = false;\n  @Input() containerClass = '';\n  @Input() placement = 'right';\n  @Input() outsideClick = false;\n\n  click: (action: () => Promise<any>) => void;\n\n  /**\n   * Show the popover. Wait until an action is performed on it.\n   */\n  async show(buttons?: PopoverConfirmButtons[]) {\n    this.buttons = buttons || this.buttons;\n    this.isOpen = true;\n    let result;\n    try {\n      result = await new Promise((resolve, reject) => {\n        return this.click = (action: () => Promise<any>) => action().then(resolve).catch(reject);\n      });\n    } catch (ex) {\n      throw(ex);\n    } finally {\n      this.isOpen = false;\n    }\n    return result;\n  }\n\n  buttonStatus(status) {\n    if (status) {\n      return `btn-${status}`;\n    }\n    return 'btn-link btn-clean';\n  }\n\n  handleOutsideClick() {\n    this.click(() => Promise.reject());\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ModalModule as BsModalModule } from 'ngx-bootstrap/modal';\nimport { ConfirmModalComponent } from './modal-confirm.component';\nimport { ModalComponent } from './modal.component';\nimport { ModalService } from './modal.service';\nimport { CommonModule } from '../common/common.module';\nimport { PopoverConfirmComponent } from './popover-confirm.component';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\n\n/**\n * The angular module definition for modal.\n * @exports ConfirmModalComponent\n * @exports ModalComponent\n * @exports PopoverConfirmComponent\n */\n@NgModule({\n  imports: [\n    BsModalModule.forRoot(),\n    CommonModule,\n    PopoverModule.forRoot()\n  ],\n  exports: [\n    ConfirmModalComponent,\n    ModalComponent,\n    PopoverConfirmComponent\n  ],\n  declarations: [\n    ConfirmModalComponent,\n    ModalComponent,\n    PopoverConfirmComponent\n  ],\n  providers: [\n    ModalService\n  ],\n  entryComponents: [\n    ConfirmModalComponent\n  ]\n})\nexport class ModalModule { }\n","import { NG_VALIDATORS, AbstractControl, Validator } from '@angular/forms';\nimport { Directive } from '@angular/core';\nimport { parsePhoneNumberFromString } from 'libphonenumber-js/max';\n\n@Directive({\n  selector: '[c8yPhoneValidation]',\n  providers: [{provide: NG_VALIDATORS, useExisting: PhoneValidationDirective, multi: true}]\n})\nexport class PhoneValidationDirective implements Validator {\n\n  validate(control: AbstractControl): {[key: string]: any} | null {\n    const valid = this.validateInternationalPhoneNumber(control);\n    return valid ? null : {\n      internationalPhoneNumber: true\n    };\n  }\n\n  private validateInternationalPhoneNumber(control: AbstractControl) {\n    let numberValid;\n    try {\n      const phoneNumber = parsePhoneNumberFromString(control.value);\n      numberValid = phoneNumber.isValid();\n      if (numberValid && control.value !== phoneNumber.format('E.164')) {\n        control.setValue(phoneNumber.format('E.164'), { emitEvent: false, emitModelToViewChange: false });\n      }\n    } catch (e) {\n      numberValid = !control.value;\n    }\n    return numberValid;\n  }\n}\n","// tslint:disable: max-line-length\nimport { gettext } from '../i18n/gettext';\n\nexport interface ValidationRules {\n  pattern?: RegExp;\n  message?: string;\n  maxLength?: number;\n  minLength?: number;\n}\n\n// @dynamic\nexport class ValidationPattern {\n  static readonly messages = {\n    deviceId: gettext('Device ID must not contain spaces or slashes (\"/\").'),\n    domain: gettext(\n      'Only lowercase letters, digits, hyphens and underscores allowed in the first part of the URI. ' +\n        'Must start with a letter; hyphens and underscores only allowed in the middle. Must be a valid URI.'\n    ),\n    email: gettext('Invalid email address.'),\n    internationalPhoneNumber: gettext(\n      'International phone number required, in the format +49 9 876 543 210.'\n    ),\n    loginAlias: gettext(\n      'Login alias must not contain slashes (\"/\", \"\\\\\") nor (\"+\"), (\":\"), (\"$\") signs.'\n    ),\n    max : gettext('Max value: {{ value }}'),\n    min : gettext('Min value: {{ value }}'),\n    opcuaBrowsePath: gettext('Invalid OPC UA URI.'),\n    password: gettext(\n      'Password must have at least 8 characters and no more than 32 and can only contain letters, numbers and following symbols: `~!@#$%^&*()_|+-=?;:\\'\",.<>{}[]\\\\/'\n    ),\n    passwordConfirm: gettext('Passwords do not match.'),\n    phoneNumber: gettext(\n      'Invalid phone number format. Only digits, spaces, slashes (\"/\") and dashes (\"-\") allowed.'\n    ),\n    required: gettext('This field is required.'),\n    tenantId: gettext(\n      'May contain lowercase letters, digits, hyphens and underscores. ' +\n        'Must start with a letter; hyphens and underscores only allowed in the middle; minimum 2 characters.'\n    ),\n    urlSegment: gettext('Slash, single or double dots and white space not allowed'),\n    user: gettext(\n      'Username must not contain spaces nor slashes (\"/\", \"\\\\\") nor (\"+\"), (\":\"), (\"$\") signs.'\n    )\n  };\n\n  static readonly rules = {\n    deviceId: {\n      pattern: /^[^\\s/]*$/\n    },\n    domain: {\n      pattern: /^[a-z]+[a-z0-9_-]*[a-z0-9]+\\.{1}.+$/\n    },\n    groupName: {\n      maxLength: 254\n    },\n    hostname: {\n      pattern: /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/\n    },\n    ip: {\n      pattern: /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/\n    },\n    opcuaBrowsePath: {\n      pattern: /^(opc.tcp|http|https):\\/\\/[^ \"]+$/\n    },\n    password: {\n      pattern: /^[a-zA-Z0-9`~!@#$%^&*()_|+\\-=?;:'\",.<>{}[\\]\\\\/]{8,32}$/\n    },\n    phoneNumber: {\n      pattern: /^$|^(\\+|0{2})[\\d\\s/-]{1,30}$/\n    },\n    tenantId: {\n      pattern: /^[a-z]+[a-z0-9_-]*[a-z0-9]+$/\n    },\n    user: {\n      pattern: /^[^\\\\/\\s$:+]*$/\n    },\n    urlSegment: {\n      pattern: /^(([.]{1,2})|([/])+|(([/]*)([.]{1,2})([/]*))|((.*)([/]|[ ]+)(.*))|(\\s+))$/\n    },\n    loginAlias: {\n      pattern: /^[^\\\\/$:+]*$/\n    }\n  };\n\n  static get(key: string) {\n    const pattern = this.rules[key];\n    return pattern as ValidationRules;\n  }\n}\n","import { NG_VALIDATORS, AbstractControl, Validator } from '@angular/forms';\nimport { Directive, Input } from '@angular/core';\nimport { ValidationPattern } from './validation-pattern';\n\n@Directive({\n  selector: '[c8yDefaultValidation]',\n  providers: [{provide: NG_VALIDATORS, useExisting: DefaultValidationDirective, multi: true}]\n})\nexport class DefaultValidationDirective implements Validator {\n  @Input() c8yDefaultValidation: string = '';\n\n  validate(control: AbstractControl): {[key: string]: any} | null {\n    if (!control.value) {\n      return null;\n    }\n    const validation = ValidationPattern.get(this.c8yDefaultValidation);\n    if (!validation) {\n      throw new Error(`Pattern ${this.c8yDefaultValidation} not found.`);\n    }\n\n    let valid = true;\n    if (validation.pattern) {\n      valid = validation.pattern.test(control.value);\n    }\n    if (validation.maxLength) {\n      valid = control.value.length < validation.maxLength;\n    }\n    if (validation.minLength) {\n      valid = control.value.length >= validation.minLength;\n    }\n    return valid ? null : {[this.c8yDefaultValidation]: true };\n  }\n}\n","import { AbstractControl, NG_VALIDATORS, Validator } from '@angular/forms';\nimport { Directive, ElementRef, Input } from '@angular/core';\n\nimport { isUndefined } from 'lodash-es';\n\n@Directive({\n  selector: '[min]',\n  providers: [{provide: NG_VALIDATORS, useExisting: MinValidationDirective, multi: true}]\n})\nexport class MinValidationDirective implements Validator {\n  @Input() min: string = '';\n\n  validate(control: AbstractControl): {[key: string]: any} | null {\n    const parsedMin = parseInt(this.min, 10);\n    if (isUndefined(control.value) || !this.min) {\n      return null;\n    }\n\n    let valid = true;\n    valid = (control.value !== null) ? !(control.value < parsedMin) : true;\n    return valid ? null : {min: { value: parsedMin } };\n  }\n}\n","import { AbstractControl, NG_VALIDATORS, Validator } from '@angular/forms';\nimport { Directive, Input } from '@angular/core';\n\nimport { isUndefined } from 'lodash-es';\n\n@Directive({\n  selector: '[max]',\n  providers: [{provide: NG_VALIDATORS, useExisting: MaxValidationDirective, multi: true}]\n})\nexport class MaxValidationDirective implements Validator {\n  @Input() max: string = '';\n\n  validate(control: AbstractControl): {[key: string]: any} | null {\n    const parsedMax = parseInt(this.max, 10);\n    if (isUndefined(control.value) || !this.max) {\n      return null;\n    }\n\n    let valid = true;\n    valid = !(control.value > parsedMax);\n    return valid ? null : {max: { value: parsedMax } };\n  }\n}\n","import { Directive, Input } from '@angular/core';\n\n@Directive({\n  selector: 'c8y-message',\n})\nexport class MessageDirective {\n  @Input() name: string;\n  @Input() text: string;\n}\n","import { Component, ContentChildren, Input, QueryList } from '@angular/core';\n\nimport { MessageDirective } from './message.directive';\nimport { ValidationPattern } from './validation-pattern';\nimport { isFunction } from 'lodash-es';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'c8y-messages',\n  templateUrl: './messages.component.html'\n})\nexport class MessagesComponent {\n  @Input() show: {} = {};\n  @Input() defaults: {} = ValidationPattern.messages;\n  @ContentChildren(MessageDirective) customMessages: QueryList<MessageDirective>;\n  messages = [];\n  messageMap: any = {};\n\n  constructor(private translateService: TranslateService) {}\n\n  ngAfterContentInit(): void {\n    this.messageMap = Object.assign({}, this.defaults, this.customMessages.reduce((messages, directive) => {\n      messages[directive.name] = directive.text;\n      return messages;\n    }, {}));\n  }\n\n  changVisibility(show: {}) {\n    this.show = show;\n    this.ngOnChanges();\n  }\n\n  ngOnChanges() {\n    if (this.show) {\n      this.messages = Object.keys(this.show)\n        .map((key) => this.toMessage(key, this.show[key]));\n    } else {\n      this.messages = [];\n    }\n  }\n\n  private toMessage(key, value) {\n    return this.translateService.instant(this.messageMap[key], value);\n  }\n}\n","import { Component, ContentChild, HostBinding, Input } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport { Subscription, timer, merge } from 'rxjs';\nimport { debounce, filter } from 'rxjs/operators';\nimport { MessagesComponent } from './messages.component';\n/**\n * A form group helps to validate an input of a form element.\n *\n * ## Example:\n *\n * ```html\n *  <c8y-form-group [hasWarning]=\"user.email.length === 0\">\n *   <label translate for=\"userEmail\">Email</label>\n *   <input\n *     id=\"userEmail\"\n *     class=\"form-control\"\n *     type=\"email\"\n *     name=\"email\"\n *     [maxlength]=\"254\"\n *     autocomplete=\"off\"\n *     placeholder=\"{{'e.g. joe.doe@example.com' | translate}}\"\n *     [(ngModel)]=\"user.email\"\n *     email\n *     required\n *   >\n *   <c8y-messages>\n *     <c8y-message *ngIf=\"user.email.length === 0\" translate></c8y-message>\n *     <c8y-message name=\"required\" text=\"The E-Mail is SUPER required\"></c8y-message>\n *   </c8y-messages>\n *  </c8y-form-group>\n * ```\n *\n * @param status The current status could be error, warning or success.\n * @param hasError Set this to true to display a error.\n * @param hasWarning Set this to true to display a warning.\n * @param hasSuccess Set this to true to display a success.\n * @param novalidation Set this to true to disable automatic validation by this component.\n */\n@Component({\n  selector: 'c8y-form-group',\n  templateUrl: './form-group.component.html',\n  host: {\n    class: 'form-group'\n  }\n})\nexport class FormGroupComponent {\n  @Input() hasError = false;\n  @Input() hasWarning = false;\n  @Input() hasSuccess = false;\n  @Input() novalidation = false;\n  @Input() status: string;\n  @HostBinding('class.has-error') get error() {\n    return this.status === 'error' || this.hasError;\n  }\n  @HostBinding('class.has-warning') get warning() {\n    return this.status === 'warning' || this.hasWarning;\n  }\n  @HostBinding('class.has-success') get success() {\n    return this.status === 'success' || this.hasSuccess;\n  }\n  @ContentChild(MessagesComponent, { static: false }) customErrorMessage: MessagesComponent;\n  @ContentChild(NgModel, { static: true }) model: NgModel;\n\n  errors: {};\n  private subscription: Subscription;\n  private readonly VALIDATION_DEBOUNCE_MS = 1000;\n\n  ngAfterContentInit(): void {\n    this.initNgModel();\n  }\n\n  initNgModel() {\n    if (this.model) {\n      this.model.valueAccessor.registerOnTouched(() => {\n        if (this.model.control && !this.model.control.dirty) {\n          this.model.control.markAsDirty();\n          this.model.control.updateValueAndValidity({onlySelf: true});\n        }\n      });\n      this.subscription = merge(this.model.valueChanges, this.model.statusChanges)\n        .pipe(\n          filter(() => this.model.dirty && !this.novalidation),\n          debounce(() => (this.hasError ? timer(10) : timer(this.VALIDATION_DEBOUNCE_MS)))\n        )\n        .subscribe(() => this.update());\n    }\n  }\n\n  update() {\n    this.hasError = this.model.status === 'INVALID';\n    if (this.customErrorMessage) {\n      this.customErrorMessage.changVisibility(this.model.errors);\n    } else {\n      this.errors = this.model.errors;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  QueryList,\n  TemplateRef,\n  ContentChild,\n  EventEmitter\n} from '@angular/core';\n\n@Component({\n  selector: 'c8y-input-group-list',\n  templateUrl: 'input-group-list.component.html'\n})\nexport class InputGroupListComponent {\n  @Input() plus: boolean = true;\n  @Input() minus: boolean = true;\n  @Input() index: number;\n\n  @Output() onRemove: EventEmitter<number> = new EventEmitter<number>();\n  @Output() onAdd: EventEmitter<number> = new EventEmitter<number>();\n  add() {\n    this.onAdd.emit(this.index);\n  }\n\n  remove() {\n    this.onRemove.emit(this.index);\n  }\n}\n","import {\n  Directive,\n  Input,\n  Output,\n  QueryList,\n  AfterContentInit,\n  ContentChildren,\n  EventEmitter\n} from '@angular/core';\nimport { map } from 'lodash-es';\nimport { InputGroupListComponent } from './input-group-list.component';\n\n@Directive({\n  selector: '[c8yInputGroupListContainer]'\n})\nexport class InputGroupListContainerDirective implements AfterContentInit {\n  @ContentChildren(InputGroupListComponent) listProjections: QueryList<InputGroupListComponent>;\n\n  ngAfterContentInit() {\n    this.listProjections.map(element => {\n      if (element !== this.listProjections.last) {\n        setTimeout(() => {\n          element.plus = false;\n        });\n      }\n    });\n\n    this.listProjections.changes.subscribe(elements => {\n      if (elements.length === 1) {\n        setTimeout(() => {\n          elements.first.plus = true;\n          elements.first.minus = false;\n        });\n\n        return;\n      }\n      elements.map(element => {\n        setTimeout(() => {\n          element.minus = true;\n        });\n\n        if (element !== elements.last) {\n          setTimeout(() => {\n            element.plus = false;\n          });\n        }\n        if (element === elements.last) {\n          setTimeout(() => {\n            element.plus = true;\n          });\n        }\n      });\n    });\n  }\n}\n","import { Directive, EventEmitter, Output, OnInit, OnDestroy } from '@angular/core';\nimport { NgControl, AbstractControl } from '@angular/forms';\n\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\nimport { gettext } from '../i18n/public-api';\n\n@Directive({\n  selector: 'textarea[prettyValidJson]'\n})\nexport class JsonValidationPrettifierDirective implements OnInit, OnDestroy {\n  @Output() invalidJSON: EventEmitter<string> = new EventEmitter();\n  private abstractCtrl: AbstractControl;\n  private message: string = gettext('Must be a valid JSON object.');\n  private debounceTimeInMs: number = 1000;\n  private subscription: Subscription;\n\n  constructor(ngCtrl: NgControl) {\n    this.abstractCtrl = ngCtrl.control;\n  }\n\n  ngOnInit() {\n    this.subscription = this.abstractCtrl.valueChanges\n      .pipe(\n        tap(() => this.clearValidationMessage()),\n        debounceTime(this.debounceTimeInMs),\n        distinctUntilChanged()\n      )\n      .subscribe(value => {\n        this.validateInputAndPrettify(value);\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.subscription && !this.subscription.closed) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  validateInputAndPrettify(value) {\n    if (value) {\n      try {\n        const validJsonObject = JSON.parse(value);\n        const pretty = JSON.stringify(validJsonObject, undefined, 2);\n        this.abstractCtrl.setValue(pretty);\n      } catch (ex) {\n        this.setErrorAndValidationMessage();\n      }\n    }\n  }\n\n  private setErrorAndValidationMessage() {\n    this.abstractCtrl.setErrors({ invalidBodyTemplate: true });\n    this.invalidJSON.emit(this.message);\n  }\n\n  private clearValidationMessage() {\n    this.invalidJSON.emit(undefined);\n  }\n}\n","import { Directive, ElementRef, Input, HostBinding, Renderer2 } from '@angular/core';\n\n@Directive({\n  selector: 'textarea[heightPerRow]'\n})\nexport class TextAreaRowHeightDirective {\n  @Input()\n  @HostBinding('rows')\n  rows: number = 1;\n\n  @Input('heightPerRow')\n  heightPerRow: string;\n\n  private minHeightPerRow = 20;\n\n  constructor(private elem: ElementRef, private renderer: Renderer2) {}\n\n  ngAfterViewInit() {\n    const convertedValue = Number(this.heightPerRow);\n    if (this.heightPerRow && convertedValue && convertedValue > this.minHeightPerRow) {\n      this.setHeight(`${this.rows * convertedValue}px`);\n    } else {\n      this.setHeight(`${this.rows * this.minHeightPerRow}px`);\n    }\n  }\n\n  private setHeight(value: string) {\n    this.renderer.setStyle(this.elem.nativeElement, 'height', value);\n  }\n}\n","import { Directive, ElementRef, Renderer2, AfterContentChecked } from '@angular/core';\nimport { gettext } from '../i18n/gettext';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Directive({\n  selector: 'input[required]'\n})\nexport class RequiredInputPlaceholderDirective implements AfterContentChecked {\n  private shouldSkipRequiredHint: boolean = false;\n  private placeholder: string;\n  private req: boolean;\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2,\n    private translationService: TranslateService\n  ) {\n     this.shouldSkipRequiredHint = !!this.el.nativeElement.closest('[placeholder-no-required-hint]');\n  }\n\n  ngAfterContentChecked(): void {\n    if (this.el && this.el.nativeElement && this.el.nativeElement.required !== undefined) {\n      const required = this.el.nativeElement.required && !this.shouldSkipRequiredHint;\n      const placeholder = this.el.nativeElement.placeholder;\n\n      if (this.placeholder !== placeholder || this.req !== required) {\n        this.updatePlaceholder(this.getTextForPlaceholder(placeholder, required));\n      }\n    }\n  }\n\n  private getTextForPlaceholder(placeholder = '', required = false) {\n    this.req = required;\n    const requiredText = `(${this.translationService.instant(gettext('required'))})`;\n    const requiredTextIndex = placeholder.lastIndexOf(requiredText);\n    if (requiredTextIndex > 0) {\n      placeholder = placeholder.slice(0, requiredTextIndex - 1);\n    }\n    if (requiredTextIndex === 0) {\n      placeholder = '';\n    }\n    if (!required) {\n      return placeholder;\n    }\n    return placeholder.trim() ? `${placeholder} ${requiredText}` : requiredText;\n  }\n\n  private updatePlaceholder(placeholder) {\n    this.renderer.setAttribute(this.el.nativeElement, 'placeholder', placeholder);\n    this.placeholder = placeholder;\n  }\n}\n","import { Component, Input, OnChanges } from '@angular/core';\nimport { cloneDeep } from 'lodash-es';\nimport { Observable, of } from 'rxjs';\n\n@Component({\n  selector: 'c8y-ip-range-input-list',\n  templateUrl: './ip-range-input-list.component.html'\n})\nexport class IpRangeInputListComponent {\n  @Input()\n  set data(list) {\n    this.ipRangeList = list;\n    if (this.ipRangeList.length === 0) {\n      this.add();\n    }\n  }\n\n  get data() {\n    return this.ipRangeList;\n  }\n\n  ipRangeList: Array<{ ip: string; cidr: number }>;\n\n  add() {\n    this.ipRangeList.push({ ip: '', cidr: undefined });\n  }\n\n  remove(index) {\n    this.ipRangeList.splice(index, 1);\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { Subject, timer } from 'rxjs';\nimport { debounce, distinctUntilChanged, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-filter',\n  templateUrl: './filter-input.component.html'\n})\nexport class FilterInputComponent implements OnInit, OnDestroy {\n  @Input() icon: string;\n  @Output() onSearch = new EventEmitter<string>();\n  filterChange$ = new Subject();\n  filterTerm: string = '';\n  private readonly CARRIAGE_RETURN_KEY = 13;\n  private readonly CARRIAGE_RETURN_CODE = 'Enter';\n\n  ngOnInit() {\n    this.reset();\n    this.filterChange$\n      .pipe(\n        debounce((event: any) =>\n          event.code === this.CARRIAGE_RETURN_CODE || event.keyCode === this.CARRIAGE_RETURN_KEY\n            ? timer(10)\n            : timer(300)\n        ),\n        map((e: any) => e.target.value),\n        distinctUntilChanged()\n      )\n      .subscribe(filterTerm => {\n        this.filterTerm = filterTerm;\n        this.onSearch.emit(filterTerm);\n      });\n  }\n\n  reset() {\n    this.filterTerm = '';\n    this.onSearch.emit('');\n  }\n\n  ngOnDestroy(): void {\n    this.filterChange$.complete();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { PhoneValidationDirective } from './phone-validation.directive';\nimport { DefaultValidationDirective } from './default-validation.directive';\nimport { MinValidationDirective } from './min-validation.directive';\nimport { MaxValidationDirective } from './max-validation.directive';\nimport { CommonModule } from '../common/common.module';\nimport { FormsModule as NgFormsModule } from '@angular/forms';\nimport { FormGroupComponent } from './form-group.component';\nimport { MessageDirective } from './message.directive';\nimport { MessagesComponent } from './messages.component';\nimport { InputGroupListComponent } from './input-group-list.component';\nimport { InputGroupListContainerDirective } from './input-group-list-container.directive';\nimport { JsonValidationPrettifierDirective } from './json-validation-prettifier.directive';\nimport { TextAreaRowHeightDirective } from './text-area-row-height.directive';\nimport { RequiredInputPlaceholderDirective } from './required-input-placeholder.directive';\nimport { IpRangeInputListComponent } from './ip-range-input-list.component';\nimport { FilterInputComponent } from './filter-input.component';\n\n/**\n * @exports FormGroupComponent A component that allows to group an input and can display warnings and errors.\n * @exports PhoneValidationDirective Allows to validate international phone numbers.\n * @exports NewsletterDirective Allows to subscribe to the newsletter.\n * @exports DefaultValidationDirective Allows to validate some predefined patterns.\n * @exports MessageDirective A directive that allows to define messages.\n * @exports MessagesComponent Allows to display error messages.\n */\n@NgModule({\n  imports: [CommonModule, NgFormsModule],\n  exports: [\n    PhoneValidationDirective,\n    DefaultValidationDirective,\n    MinValidationDirective,\n    MaxValidationDirective,\n    NgFormsModule,\n    FormGroupComponent,\n    MessageDirective,\n    MessagesComponent,\n    InputGroupListComponent,\n    InputGroupListContainerDirective,\n    JsonValidationPrettifierDirective,\n    TextAreaRowHeightDirective,\n    RequiredInputPlaceholderDirective,\n    IpRangeInputListComponent,\n    FilterInputComponent\n  ],\n  declarations: [\n    PhoneValidationDirective,\n    DefaultValidationDirective,\n    MinValidationDirective,\n    MaxValidationDirective,\n    FormGroupComponent,\n    MessageDirective,\n    MessagesComponent,\n    InputGroupListComponent,\n    InputGroupListContainerDirective,\n    JsonValidationPrettifierDirective,\n    TextAreaRowHeightDirective,\n    RequiredInputPlaceholderDirective,\n    IpRangeInputListComponent,\n    FilterInputComponent\n  ]\n})\nexport class FormsModule {}\n","import { Component, Output, EventEmitter, Input } from '@angular/core';\nimport { NewPassword } from './password.model';\nimport { ControlContainer, NgForm } from '@angular/forms';\nimport { LoginService } from '../login/login.service';\nimport { UserService, ICredentials } from '@c8y/client';\nimport { AlertService } from '../alert/alert.service';\nimport { LoginViews } from '../login/login.model';\n\n@Component({\n  selector: 'c8y-totp-challenge',\n  templateUrl: './totp-challenge.component.html',\n  viewProviders: [ { provide: ControlContainer, useExisting: NgForm } ]\n})\n\nexport class TotpChallengeComponent {\n  /**\n   * Calls the verify endpoint if set to true (default true)\n   */\n  @Input() verify = true;\n  /**\n   * Emits the token on success.\n   */\n  @Output() onSuccess = new EventEmitter();\n\n  model = {\n    token: ''\n  };\n  @Input()\n  loading = false;\n  @Input()\n  hasError = false;\n\n  constructor(\n    public loginService: LoginService,\n    private users: UserService,\n    private alert: AlertService\n  ) {}\n\n  async verifyCode() {\n    try {\n      this.loading = true;\n      this.hasError = false;\n      if (this.verify) {\n        await this.users.verifyTotpCode(this.model.token);\n      }\n      this.onSuccess.emit(this.model.token);\n    } catch (e) {\n      this.hasError = true;\n      this.alert.removeLastDanger();\n      this.loading = false;\n    }\n  }\n}\n","import { Component, Output, EventEmitter, Input } from '@angular/core';\nimport { UserService, ICredentials } from '@c8y/client';\nimport { LoginService } from '../login/login.service';\nimport { AlertService } from '../alert/public-api';\nimport { LoginViews } from '../login/login.model';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-sms-challenge',\n  templateUrl: './sms-challenge.component.html',\n  styles: []\n})\n\nexport class SmsChallengeComponent {\n\n  @Input() credentials: ICredentials;\n  @Output() onCancel = new EventEmitter();\n\n  model = {\n    smsToken: ''\n  };\n  isLoading = false;\n\n  private resendTfa: string = '0';\n\n  constructor(\n    public loginService: LoginService,\n    private users: UserService,\n    private alert: AlertService\n  ) {}\n\n  async verifyTFACode() {\n    this.isLoading = true;\n    if (this.useOAuthInternal()) {\n      await this.verifyCodeWithOauth();\n    } else {\n      await this.verifyCodeWithBasicAuth();\n    }\n    this.isLoading = false;\n  }\n\n  async resendTFASms() {\n    try {\n      this.isLoading = true;\n      await this.users.verifyTFACode(this.resendTfa);\n    } catch (e) {\n      if (e.res.status === 403) {\n        this.loginService.cleanMessages();\n        this.loginService.addSuccessMessage('resend_sms');\n      } else {\n        this.alert.addServerFailure(e);\n      }\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private useOAuthInternal() {\n    return this.loginService.isPasswordGrantLogin(this.credentials);\n  }\n\n  private async verifyCodeWithOauth() {\n    try {\n      const { credentials } = this;\n      await this.loginService.switchLoginMode({...credentials, tfa: this.model.smsToken});\n      await this.loginService.verifyAppAccess();\n      await this.loginService.authFulfilled();\n    } catch (e) {\n      const resStatus = e.res && e.res.status;\n      if (resStatus === 401) {\n        // it is assumed that the user and password are correct so it must be the tfa code\n        this.alert.danger(gettext('Invalid code'));\n      } else {\n        this.alert.addServerFailure(e);\n      }\n    }\n  }\n\n  private async verifyCodeWithBasicAuth() {\n    try {\n      const { res } = await this.users.verifyTFACode(this.model.smsToken);\n      const tfaToken = res.headers.get('tfatoken');\n      this.credentials.tfa = tfaToken;\n      this.loginWithTFA(tfaToken);\n    } catch (e) {\n      const resStatus = e.res && e.res.status;\n      // BE returns 403 in case of invalid tfa code\n      if (resStatus === 403) {\n        this.alert.danger(gettext('Invalid code'));\n      } else {\n        this.alert.addServerFailure(e);\n      }\n    }\n  }\n\n  private async loginWithTFA(tfaToken) {\n    try {\n      await this.loginService.login(this.loginService.useBasicAuth({tfa: tfaToken}), this.credentials);\n      this.loginService.saveTFAToken(tfaToken, sessionStorage);\n      if (this.loginService.rememberMe) {\n        this.loginService.saveTFAToken(tfaToken, localStorage);\n      }\n    } catch (e) {\n      this.alert.addServerFailure(e);\n    }\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ITotp, UserService } from '@c8y/client';\nimport { AlertService } from '../alert/alert.service';\n\n@Component({\n  selector: 'c8y-totp-setup',\n  templateUrl: './totp-setup.component.html'\n})\n\nexport class TotpSetupComponent implements OnInit {\n  totpSecret: ITotp;\n\n  get qrCodeImage() {\n    return this.totpSecret ? this.totpSecret.secretQrUrl : '';\n  }\n\n  get secret() {\n    return this.totpSecret ? this.totpSecret.rawSecret : '';\n  }\n\n  constructor(private user: UserService, private alert: AlertService) { }\n\n  async ngOnInit() {\n    try {\n      const { data } = await this.user.generateTotpSecret();\n      this.totpSecret = data;\n    } catch (ex) {\n      this.alert.addServerFailure(ex);\n    }\n  }\n}\n","import { Component, Output, EventEmitter, Input } from '@angular/core';\nimport { LoginService } from '../login/login.service';\nimport { AlertService } from '../alert/alert.service';\nimport { LoginViews } from '../login/login.model';\nimport { ICredentials, UserService } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-provide-phone-number',\n  templateUrl: './provide-phone-number.component.html'\n})\nexport class ProvidePhoneNumberComponent {\n  @Input() credentials: ICredentials;\n  @Output() onCancel = new EventEmitter();\n  @Output() onChangeView = new EventEmitter();\n\n  phoneNumber: string;\n  requestInProgress = false;\n  private sendTfa: string = '0';\n\n  constructor(\n    public loginService: LoginService,\n    public alert: AlertService,\n    private userService: UserService\n  ) {}\n\n  async sendTFASms() {\n    try {\n      await this.userService.verifyTFACode(this.sendTfa);\n    } catch (e) {\n      if (e.res.status === 403) {\n        this.loginService.cleanMessages();\n        this.loginService.addSuccessMessage('send_sms');\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  async save() {\n    try {\n      this.requestInProgress = true;\n      await this.userService.savePhoneNumber(this.phoneNumber);\n      await this.sendTFASms();\n      this.onChangeView.emit({\n        view: LoginViews.SmsChallenge,\n        credentials: this.credentials\n      });\n    } catch (e) {\n      this.alert.addServerFailure(e);\n    } finally {\n      this.requestInProgress = false;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\r\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\r\nimport { CommonModule } from '../common/common.module';\r\nimport { PasswordCheckListComponent } from './password-check-list.component';\r\nimport { PasswordConfirm } from './password-confirm.directive';\r\nimport { PasswordStrengthCheckerService } from './password-strength-checker.service';\r\nimport { PasswordStrengthComponent } from './password-strength.component';\r\nimport { NewPasswordComponent } from './new-password.component';\r\nimport { PasswordConfirmModalComponent } from './password-confirm-modal.component';\r\nimport { ModalModule } from '../modal/modal.module';\r\nimport { FormsModule } from '../forms/forms.module';\r\nimport { TotpChallengeComponent } from './totp-challenge.component';\r\nimport { SmsChallengeComponent } from './sms-challenge.component';\r\nimport { TotpSetupComponent } from './totp-setup.component';\r\nimport { PasswordService } from './password.service';\r\nimport { ProvidePhoneNumberComponent } from './provide-phone-number.component';\r\n\r\n/**\r\n * The angular module definition for new password.\r\n * @exports PasswordStrengthComponent\r\n * @exports PasswordCheckListComponent\r\n * @exports PasswordConfirm\r\n * @exports NewPasswordComponent\r\n * @exports PasswordConfirmModalComponent\r\n */\r\n@NgModule({\r\n  declarations: [\r\n    TotpChallengeComponent,\r\n    PasswordConfirm,\r\n    PasswordStrengthComponent,\r\n    PasswordCheckListComponent,\r\n    NewPasswordComponent,\r\n    PasswordConfirmModalComponent,\r\n    SmsChallengeComponent,\r\n    TotpSetupComponent,\r\n    ProvidePhoneNumberComponent\r\n  ],\r\n  imports: [\r\n    FormsModule,\r\n    TooltipModule,\r\n    CommonModule,\r\n    ModalModule\r\n  ],\r\n  exports: [\r\n    TotpChallengeComponent,\r\n    PasswordStrengthComponent,\r\n    PasswordCheckListComponent,\r\n    PasswordConfirm,\r\n    NewPasswordComponent,\r\n    PasswordConfirmModalComponent,\r\n    SmsChallengeComponent,\r\n    TotpSetupComponent,\r\n    ProvidePhoneNumberComponent\r\n  ],\r\n  entryComponents: [\r\n    PasswordConfirmModalComponent\r\n  ],\r\n  providers: [\r\n    PasswordStrengthCheckerService,\r\n    PasswordService\r\n  ]\r\n})\r\nexport class AuthenticationModule {}\r\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { BreadcrumbItem } from './breadcrumb.model';\n\n@Component({\n  selector: 'c8y-breadcrumb-item',\n  templateUrl: './breadcrumb-item.component.html'\n})\nexport class BreadcrumbItemComponent implements BreadcrumbItem {\n  @Input() icon: string;\n  @Input() translate: boolean;\n  @Input() label: string;\n  @Input() path: string;\n  @ViewChild('template', {static: false}) template: any;\n}\n","import { Component, Input } from '@angular/core';\nimport { Breadcrumb } from './breadcrumb.model';\n\n@Component({\n  selector: 'c8y-breadcrumb-outlet',\n  templateUrl: './breadcrumb-outlet.component.html'\n})\nexport class BreadcrumbOutletComponent {\n  showAll = false;\n  @Input() breadcrumbs: Breadcrumb[] = [];\n\n  /**\n   * For upgrade only. Old angularjs routes start with hash, new ones not.\n   */\n  normalizePath(path) {\n    return path.replace(/^#\\/?/, '');\n  }\n}\n","import { Component, ContentChildren, QueryList } from '@angular/core';\nimport { Breadcrumb, BreadcrumbItem } from './breadcrumb.model';\nimport { BreadcrumbService } from './breadcrumb.service';\nimport { BreadcrumbItemComponent } from './breadcrumb-item.component';\n\n@Component({\n  selector: 'c8y-breadcrumb',\n  templateUrl: './breadcrumb.component.html'\n})\nexport class BreadcrumbComponent implements Breadcrumb {\n  items: BreadcrumbItem[];\n  @ContentChildren(BreadcrumbItemComponent) private contentChildItems: QueryList<BreadcrumbItem>;\n  private viewInitTimeout;\n\n  constructor(private breadcrumbService: BreadcrumbService) {}\n\n  ngAfterViewInit() {\n    this.items = this.contentChildItems.toArray();\n    this.viewInitTimeout = setTimeout(() =>\n      this.breadcrumbService.add(this as Breadcrumb)\n    );\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.viewInitTimeout);\n    this.breadcrumbService.remove(this as Breadcrumb);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { CommonModule } from '../common/common.module';\nimport { BreadcrumbItemComponent } from './breadcrumb-item.component';\nimport { BreadcrumbOutletComponent } from './breadcrumb-outlet.component';\nimport { BreadcrumbComponent } from './breadcrumb.component';\nimport { BreadcrumbService } from './breadcrumb.service';\n\n/**\n * The angular module definition for breadcrumbs.\n * @exports BreadcrumbComponent\n * @exports BreadcrumbItemComponent\n * @exports BreadcrumbOutletComponent\n */\n@NgModule({\n  declarations: [\n    BreadcrumbComponent,\n    BreadcrumbItemComponent,\n    BreadcrumbOutletComponent\n  ],\n  imports: [\n    RouterModule.forChild([]),\n    CommonModule,\n    TooltipModule.forRoot()\n  ],\n  exports: [\n    BreadcrumbComponent,\n    BreadcrumbItemComponent,\n    BreadcrumbOutletComponent\n  ]\n})\nexport class BreadcrumbModule { }\n","import { Component, Input, ViewChild, ElementRef } from '@angular/core';\nimport { Search } from './search.model';\nimport { sortBy } from 'lodash';\nimport { AlertService } from '../alert/alert.service';\nimport { Alert } from '../alert/alert.model';\n\n@Component({\n  selector: 'c8y-search-outlet',\n  templateUrl: './search-outlet.component.html'\n})\nexport class SearchOutletComponent {\n  @Input() search: Search[] = [];\n\n  constructor(private alertService: AlertService) {}\n\n  openSearch() {\n    setTimeout(() => this.focusInputBox(), 100);\n  }\n\n  getByPriority() {\n    return sortBy(this.search, this.byPriority);\n  }\n\n  closeDropdown(dropdown) {\n    dropdown.hide();\n  }\n\n  verifyNotEmpty(term) {\n    if (!term || term === '') {\n      this.alertService.add({ text: 'Type something to execute a search.', type: 'warning' });\n    }\n  }\n\n  private byPriority(item) {\n    return -item.priority;\n  }\n\n  private focusInputBox() {\n    const elementToFocus: any = document.querySelector('#search-header-menu input');\n    if (elementToFocus) {\n      elementToFocus.focus();\n    }\n  }\n}\n","import { Injectable, InjectionToken, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { ExtensionPoint, fromTrigger, sortByPriority, stateToFactory } from '../common/extension-hooks';\nimport { StateService } from '../common/state-service.abstract';\nimport { Search } from './search.model';\n\n/**\n * A hook to use for Multi Provider extension.\n */\nexport const HOOK_SEARCH = new InjectionToken('SearchFactory');\n\n/**\n * A service which defines the dearch function.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchService extends StateService implements ExtensionPoint<Search> {\n  items$: Observable<Search[]>;\n  readonly refreshTrigger = new Subject();\n  protected state$ = new BehaviorSubject<Set<Search>>(new Set<Search>());\n\n  constructor(\n    private injector: Injector,\n    router: Router\n  ) {\n    super();\n    this.items$ = fromTrigger(router, this.refreshTrigger, [\n      () => this.injector.get(HOOK_SEARCH, []),\n      stateToFactory(this.state$)\n    ]).pipe(\n      map((items: Search[]) => sortByPriority(items)),\n      shareReplay(1)\n    );\n  }\n\n  /**\n   * Refresh the extension factories\n   */\n  refresh() {\n    this.refreshTrigger.next(1);\n  }\n\n  /**\n   * Returns the current state.\n   * @readonly\n   * @returns The current set of actions.\n   */\n  get state() {\n    return this.state$.value;\n  }\n\n  /**\n   * Adds a new item to the search in the header.\n   * @param item The item to add.\n   */\n  add(item: Search) {\n    this.state.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes an search from the header.\n   * @param item The item to remove.\n   */\n  remove(item: Search) {\n    this.state.delete(item);\n    this.emitNewState();\n  }\n}\n","import { Component, Input, Output, ViewChild, EventEmitter } from '@angular/core';\nimport { Search } from './search.model';\nimport { SearchService } from './search.service';\n\n@Component({\n  selector: 'c8y-search',\n  templateUrl: './search.component.html'\n})\nexport class SearchComponent implements Search {\n  @Input() name: string;\n  @Input() icon: string = 'search';\n  @Input() priority: number = 0;\n  @ViewChild('template', {static: false}) template: any;\n  @Output() search = new EventEmitter<Search>();\n  @Input() term: string = '';\n\n  private viewInitTimeout;\n\n  constructor(private searchService: SearchService) { }\n\n  onSearch() {\n    this.search.emit(this);\n  }\n\n  ngAfterViewInit() {\n    this.template = undefined;\n    this.viewInitTimeout = setTimeout(() => this.searchService.add(this as Search));\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.viewInitTimeout);\n    this.searchService.remove(this as Search);\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  SimpleChanges,\n  ViewChild,\n  SecurityContext\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'c8y-highlight',\n  template: '<span [innerHTML]=\"highlightedText\"></span>'\n})\nexport class HighlightComponent {\n  @ViewChild('text', { read: ElementRef, static: true })\n  container: ElementRef;\n\n  @Input()\n  pattern: string = '';\n\n  @Input()\n  text: string = '';\n\n  @Input()\n  elementClass: string = 'text-info';\n\n  highlightedText: string = '';\n\n  constructor(private domSanitizer: DomSanitizer) {}\n\n  ngOnChanges(): void {\n    let text = this.text;\n    if (this.pattern && this.pattern !== '') {\n      text = this.text.replace(new RegExp(this.pattern, 'i'), `<strong class=\"${this.elementClass}\">$&</strong>`);\n    }\n    this.highlightedText = this.domSanitizer.sanitize(SecurityContext.HTML, text);\n  }\n}\n","import { Component, Input} from '@angular/core';\r\nimport { gettext } from '../i18n/gettext';\r\n\r\n@Component({\r\n  selector: 'c8y-search-result-empty',\r\n  templateUrl: './search-result-empty.component.html'\r\n})\r\nexport class SearchResultEmptyComponent {\r\n  private readonly NO_RESULT_FOUND = gettext('No results found.');\r\n  private msg: string = this.NO_RESULT_FOUND;\r\n\r\n  @Input('message')\r\n  set _message(msg: string) {\r\n    if (msg && msg.length > 0) {\r\n      this.msg = msg;\r\n    } else {\r\n      this.msg = this.NO_RESULT_FOUND;\r\n    }\r\n  }\r\n\r\n  get message() {\r\n    return this.msg;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { CommonModule } from '../common/common.module';\nimport { SearchOutletComponent } from './search-outlet.component';\nimport { SearchComponent } from './search.component';\nimport { SearchService } from './search.service';\nimport { FormsModule } from '@angular/forms';\nimport { HighlightComponent } from './highlight.component';\nimport { SearchResultEmptyComponent } from './search-result-empty.component';\n\n/**\n * The angular module definition for the search.\n * @exports SearchComponent\n * @exports SearchOutletComponent\n * @exports HighlightComponent A component to highlight search results.\n */\n@NgModule({\n  declarations: [\n    SearchOutletComponent,\n    SearchComponent,\n    HighlightComponent,\n    SearchResultEmptyComponent\n  ],\n  imports: [\n    FormsModule,\n    BsDropdownModule,\n    CommonModule,\n    RouterModule.forChild([])\n  ],\n  exports: [\n    SearchOutletComponent,\n    SearchComponent,\n    HighlightComponent,\n    SearchResultEmptyComponent\n  ]\n})\nexport class SearchModule { }\n","import { Injectable } from '@angular/core';\nimport { StateService } from '../common/state-service.abstract';\nimport { BehaviorSubject } from 'rxjs';\nimport { UserMenuItem } from './user.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserMenuService extends StateService {\n  state$: BehaviorSubject<any> = new BehaviorSubject<any>({\n    userMenuItems: new Set<UserMenuItem>()\n  });\n\n  /**\n   * Returns the current state.\n   * @readonly\n   * @returns The current set of actions.\n   */\n  get state() {\n    return this.state$.value;\n  }\n\n  /**\n   * Adds a new item to the search in the header.\n   * @param item The item to add.\n   */\n  add(item: UserMenuItem) {\n    this.state.userMenuItems.add(item);\n    this.emitNewState();\n  }\n\n  /**\n   * Removes an search from the header.\n   * @param item The item to remove.\n   */\n  remove(item: UserMenuItem) {\n    this.state.userMenuItems.delete(item);\n    this.emitNewState();\n  }\n}\n","import { Component, Input, ViewChild, EventEmitter, Output } from '@angular/core';\nimport { UserMenuItem } from './user.model';\nimport { UserMenuService } from './user-menu.service';\n\n@Component({\n  selector: 'c8y-user-menu-item',\n  templateUrl: './user-menu-item.component.html'\n})\nexport class UserMenuItemComponent implements UserMenuItem  {\n  @Input()\n  icon: string;\n  @Input()\n  label: string;\n  @Input()\n  link: string;\n  @Input()\n  target: string;\n  @Input()\n  priority = 0;\n  @ViewChild('template', {static: false}) template: any;\n\n  @Output()\n  click = new EventEmitter<UserMenuItem>();\n  private viewInitTimeout;\n\n  constructor(private userService: UserMenuService) { }\n\n  ngAfterViewInit() {\n    this.viewInitTimeout = setTimeout(() =>\n      this.userService.add(this as UserMenuItem)\n    );\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.viewInitTimeout);\n    this.userService.remove(this as UserMenuItem);\n  }\n\n  onClick() {\n    this.click.emit(this);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { BasicAuth, FetchClient, ICredentials, IUser, UserService } from '@c8y/client';\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\nimport { AlertService } from '../alert/alert.service';\nimport { AppStateService } from '../common/ui-state.service';\nimport { UserPreferencesService } from '../common/user-preferences/user-preferences.service';\nimport { gettext } from '../i18n/gettext';\nimport { TranslateService } from '../i18n/translate.service';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-user-edit-modal',\n  templateUrl: './user-edit-modal.component.html'\n})\nexport class UserEditModalComponent implements OnInit {\n  currentUser: IUser;\n  lang: string;\n  changedLang: string;\n  loading = false;\n\n  constructor(\n    public modal: BsModalRef,\n    public user: UserService,\n    public ui: AppStateService,\n    private auth: BasicAuth,\n    private client: FetchClient,\n    private alert: AlertService,\n    private translate: TranslateService,\n    private userPreferences: UserPreferencesService,\n    private modalService: BsModalService\n  ) {\n    this.lang = this.ui.state.lang;\n    this.modalService.onHide.pipe(take(1)).subscribe(( reason: string ) => {\n      if (reason !== null && this.changedLang !== undefined) {\n        this.translate.switchToLanguage(this.lang);\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.updateUserInAppState();\n  }\n\n  onDismiss() {\n    if (this.changedLang !== undefined) {\n      this.translate.switchToLanguage(this.lang);\n    }\n    this.modal.hide();\n  }\n\n  onLanguage(lang) {\n    this.changedLang = lang;\n    this.translate.switchToLanguage(this.changedLang);\n  }\n\n  async updateAndClose(user) {\n    this.loading = true;\n    try {\n      await this.user.updateCurrent(user);\n      if (user.password) {\n        this.updateCredentials(user.password);\n      }\n      await this.updateUserInAppState();\n      if (this.changedLang && this.changedLang !== this.lang) {\n        await this.persistLanguage(this.changedLang);\n      }\n      this.modal.hide();\n      this.alert.success(gettext('User saved.'));\n    } catch (e) {\n      this.alert.addServerFailure(e);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  async persistLanguage(lang) {\n    this.translate.saveInLocalStorage(lang);\n    this.userPreferences.set('language', lang);\n  }\n\n  private async updateUserInAppState() {\n    const currentUserResult = await this.user.current();\n    this.ui.currentUser.next(currentUserResult.data);\n  }\n\n  private updateCredentials(password: string) {\n    const newCredentials: ICredentials = {\n      password,\n      user: this.ui.currentUser.value.id,\n      tenant: this.client.tenant\n    };\n    this.auth.updateCredentials(newCredentials);\n  }\n}\n","import { Component } from '@angular/core';\nimport { UserService } from '@c8y/client';\nimport { Status } from '../common/status.model';\nimport { gettext } from '../i18n/gettext';\nimport { ModalService } from '../modal/modal.service';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { LoginService } from '../login/public-api';\nimport { AlertService } from '../alert/public-api';\n\n@Component({\n  selector: 'c8y-user-totp-setup',\n  templateUrl: './user-totp-setup.component.html'\n})\nexport class UserTotpSetupComponent {\n  constructor(\n    private user: UserService,\n    private modalService: ModalService,\n    private modal: BsModalRef,\n    private loginService: LoginService) { }\n\n  async totpSetupVerified(token) {\n    await this.user.activateTotp();\n    this.modal.hide();\n    try {\n      await this.modalService.acknowledge(\n        gettext('Logout required'),\n        gettext('You must log out in order to apply your changes'),\n        Status.WARNING,\n        gettext('Log out')\n      );\n      await this.loginService.logout();\n    } catch (ex) {\n      // intended empty\n    }\n  }\n\n  close() {\n    this.modal.hide();\n  }\n}\n","import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\nimport {\n  IUser,\n  UserService,\n  TenantLoginOptionsService\n} from '@c8y/client';\nimport { clone } from 'lodash-es';\nimport { AppStateService } from '../common/ui-state.service';\nimport { TranslateService } from '../i18n/translate.service';\nimport { NewPassword } from '../authentication/password.model';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { PasswordService } from '../authentication/password.service';\nimport { UserTotpSetupComponent } from './user-totp-setup.component';\nimport { AlertService } from '../alert/alert.service';\nimport { ModalService } from '../modal/modal.service';\n\nexport interface User extends IUser {\n  phone: string;\n  sendPasswordResetEmail: boolean;\n  newsletter?: boolean;\n}\n\n@Component({\n  selector: 'c8y-user-edit',\n  templateUrl: './user-edit.component.html'\n})\nexport class UserEditComponent implements OnInit {\n  @Input() lang: string;\n  @Input() loading: boolean = false;\n  @Input() set user(u: User) {\n    this._user = clone(u);\n    this.userIsExternal = u.customProperties.userOrigin === 'OAUTH2';\n    this.isPhoneRequired = this.isPhoneRequired && u.twoFactorAuthenticationEnabled;\n  }\n  get user() { return this._user; }\n  @Output() onUser: EventEmitter<User> = new EventEmitter();\n  @Output() onLanguage: EventEmitter<string> = new EventEmitter();\n  @Output() onCancel: EventEmitter<void> = new EventEmitter();\n  userHasActiveTotp = false;\n  userCanSetupTotp = false;\n  isPhoneRequired = false;\n  userIsExternal;\n  private _user: User;\n\n  constructor(\n    public state: AppStateService,\n    public translate: TranslateService,\n    public passwordService: PasswordService,\n    public modalConfirmService: ModalService,\n    private bsModalService: BsModalService,\n    private alert: AlertService,\n    private userService: UserService,\n    private tenantLoginOptionsService: TenantLoginOptionsService,\n  ) {}\n\n  async ngOnInit() {\n    await this.initializeTotpSettings();\n    if (this.user.twoFactorAuthenticationEnabled && !this.userCanSetupTotp) {\n      this.isPhoneRequired = true;\n    }\n  }\n\n  get langs() {\n    return this.state.state.langs;\n  }\n\n  setupTotp() {\n    this.bsModalService.show(UserTotpSetupComponent, { class: 'modal-sm' });\n    this.cancel(); // to close the user edit modal and prevent console errors on logout\n  }\n\n  cancel() {\n    this.onCancel.emit();\n  }\n\n  save() {\n    if (!this.loading) {\n      this._user.password ? this.saveAfterPasswordConfirmation() : this.onUser.emit(this._user);\n    }\n  }\n\n  onNewPasswordChanged(newPassword: NewPassword) {\n    this._user.password = newPassword.password;\n  }\n\n  private async initializeTotpSettings() {\n    try {\n      this.userCanSetupTotp = await this.canUserSetupTotp();\n      if (this.userCanSetupTotp) {\n        const { data: totpActivity } = await this.userService.getActivityTotp();\n        this.userHasActiveTotp = totpActivity.isActive;\n      }\n    } catch (ex) {\n      this.alert.removeLastDanger();\n    }\n  }\n\n  private async canUserSetupTotp() {\n    // we don't check for tenant options here due to permission restrictions on that end-point\n    const { loginOptions } = (await this.tenantLoginOptionsService.detail()).data;\n    return loginOptions.some(({ tfaStrategy = '' }) =>  tfaStrategy.toLowerCase() === 'totp');\n  }\n\n  private saveAfterPasswordConfirmation() {\n    this.passwordService.confirmPassword().subscribe((confirmed) => {\n      if (confirmed) {\n        this.onUser.emit(this._user);\n      }\n    });\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { TenantService, UserService } from '@c8y/client';\n\nimport { AlertService } from '../alert/alert.service';\nimport { AppStateService } from '../common/ui-state.service';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { LoginService } from '../login/login.service';\nimport { ModalService } from '../modal/modal.service';\nimport { Observable } from 'rxjs';\nimport { OptionsService } from '../common/options.service';\nimport { Status } from '../common/status.model';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UserEditModalComponent } from './user-edit-modal.component';\nimport { UserMenuItem } from './user.model';\nimport { gettext } from '../i18n/gettext';\nimport { map } from 'rxjs/operators';\nimport { sortBy } from 'lodash-es';\n\n@Component({\n  selector: 'c8y-user-menu-outlet',\n  templateUrl: './user-menu-outlet.component.html'\n})\nexport class UserMenuOutletComponent {\n  @Input()\n  items: UserMenuItem[];\n  open: boolean;\n\n  constructor(\n    public ui: AppStateService,\n    private bsModalService: BsModalService,\n    private modalService: ModalService,\n    private loginService: LoginService,\n    private translateService: TranslateService,\n    private tenantService: TenantService,\n    private alertService: AlertService,\n    private user: UserService,\n    private optionsService: OptionsService\n  ) {}\n\n  copyIt(text: string) {\n    const handler: EventListenerObject = {\n      handleEvent: (e: ClipboardEvent) => {\n        e.clipboardData.setData('text/plain', text);\n        e.preventDefault();\n      }\n    };\n    document.addEventListener('copy', handler);\n\n    let copied;\n    try {\n      copied = document.execCommand('copy');\n    } catch (e) {\n      copied = false;\n    }\n\n    if (copied) {\n      this.alertService.addByText('success', gettext('Copied to clipboard.'));\n    } else {\n      this.alertService.addByText('danger', gettext('Could not copy to clipboard.'));\n    }\n\n    document.removeEventListener('copy', handler);\n  }\n\n  async editUser() {\n    this.bsModalService.show(UserEditModalComponent);\n  }\n\n  async logout() {\n    await this.loginService.logout();\n  }\n\n  async activateSupportAccess() {\n    const title = gettext('Activate support user access');\n\n    const companyName = this.optionsService.get('companyName', 'Cumulocity');\n    const textWithCompany = gettext(\n      // tslint:disable-next-line:max-line-length\n      'You are about to allow a support user from {{companyName}} to access your tenant to help you with your issue.'\n    );\n    const textWithoutCompany = gettext(\n      // tslint:disable-next-line:max-line-length\n      'You are about to allow a support user to access your tenant to help you with your issue.'\n    );\n    const finalQuestion = gettext('Do you want to proceed?');\n    const body = [\n      this.translateService.instant(companyName ? textWithCompany : textWithoutCompany, {\n        companyName\n      }),\n      this.translateService.instant(finalQuestion)\n    ].join(' ');\n\n    const labels = {\n      ok: gettext('Activate access'),\n      cancel: gettext('Cancel')\n    };\n\n    const successMsg = gettext('Support user access activated.');\n\n    try {\n      await this.modalService.confirm(title, body, Status.DANGER, labels);\n      await this.tenantService.enableSupportUser();\n      await this.refreshCurrentUser();\n      this.alertService.success(successMsg);\n    } catch (ex) {\n      // intended empty\n    }\n  }\n\n  async deactivateSupportAccess() {\n    const title = gettext('Deactivate support user access');\n\n    const companyName = this.optionsService.get('companyName', 'Cumulocity');\n    const textWithCompany = gettext(\n      // tslint:disable-next-line:max-line-length\n      'You are about to block a support user from {{companyName}} from accessing your tenant to help you with your issue.'\n    );\n    const textWithoutCompany = gettext(\n      // tslint:disable-next-line:max-line-length\n      'You are about to block a support user from accessing your tenant to help you with your issue.'\n    );\n    const { data: currentUser } = await this.user.current();\n    const isTenantAdmin = await this.user.hasRole(currentUser, 'ROLE_TENANT_ADMIN');\n    const tenantAdminNote = gettext(\n      // tslint:disable-next-line:max-line-length\n      'Deactivating support access as tenant admin will disable all other support requests on your tenant.'\n    );\n    const finalQuestion = gettext('Do you want to proceed?');\n    const body = [\n      this.translateService.instant(companyName ? textWithCompany : textWithoutCompany, {\n        companyName\n      }),\n      isTenantAdmin ? this.translateService.instant(tenantAdminNote) : '',\n      this.translateService.instant(finalQuestion)\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    const labels = {\n      ok: gettext('Deactivate access'),\n      cancel: gettext('Cancel')\n    };\n\n    const successMsg = gettext('Support user access deactivated.');\n\n    try {\n      await this.modalService.confirm(title, body, Status.DANGER, labels);\n      await this.tenantService.disableSupportUser();\n      await this.refreshCurrentUser();\n      this.alertService.success(successMsg);\n    } catch (ex) {\n      // intended empty\n    }\n  }\n\n  getSortedItems() {\n    return sortBy(Array.from(this.items), this.byPriority);\n  }\n\n  private async refreshCurrentUser() {\n    const currentUserResult = await this.user.current();\n    this.ui.currentUser.next(currentUserResult.data);\n  }\n\n  private byPriority(item) {\n    return -item.priority;\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { IUser, UserService } from '@c8y/client';\nimport { AlertService } from '../alert/public-api';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-user-totp-revoke',\n  templateUrl: './user-totp.component.html'\n})\nexport class UserTotpRevokeComponent {\n  @Input() user: IUser;\n  @Output('revoke') revokeEmitter = new EventEmitter<undefined>();\n  constructor(\n    private users: UserService,\n    private alert: AlertService,\n  ) { }\n\n  async revoke() {\n    try {\n      await this.users.totpRevokeSecret(this.user);\n      this.alert.success(gettext('User TOTP secret revoked.'));\n      this.revokeEmitter.next();\n    } catch (e) {\n      this.alert.addServerFailure(e);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '../common/common.module';\nimport { ModalModule } from '../modal/modal.module';\nimport { UserMenuItemComponent } from './user-menu-item.component';\nimport { UserEditModalComponent } from './user-edit-modal.component';\nimport { UserEditComponent } from './user-edit.component';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { UserMenuOutletComponent } from './user-menu-outlet.component';\nimport { AuthenticationModule } from '../authentication/authentication.module';\nimport { UserMenuService } from './user-menu.service';\nimport { AlertModule } from '../alert/alert.module';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '../forms/forms.module';\nimport { UserTotpSetupComponent } from './user-totp-setup.component';\nimport { UserTotpRevokeComponent } from './user-totp-revoke.component';\n\n/**\n * The angular module definition for the user menu.\n * @exports UserMenuComponent\n * @exports UserMenuItemComponent\n * @exports UserEditComponent\n * @exports UserEditModalComponent\n */\n@NgModule({\n  declarations: [\n    UserMenuOutletComponent,\n    UserEditComponent,\n    UserEditModalComponent,\n    UserMenuItemComponent,\n    UserTotpSetupComponent,\n    UserTotpRevokeComponent,\n  ],\n  imports: [\n    FormsModule,\n    CommonModule,\n    ModalModule,\n    BsDropdownModule,\n    AuthenticationModule,\n    AlertModule,\n    RouterModule,\n    TooltipModule.forRoot(),\n    PopoverModule\n  ],\n  exports: [\n    UserMenuOutletComponent,\n    UserMenuItemComponent,\n    UserEditComponent,\n    UserEditModalComponent,\n    UserTotpSetupComponent,\n    UserTotpRevokeComponent\n  ],\n  entryComponents: [\n    UserEditModalComponent,\n    UserTotpSetupComponent,\n    UserTotpRevokeComponent\n  ]\n})\nexport class UserModule { }\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { find, keys, get, assign, isEmpty } from 'lodash-es';\nimport { OptionsService } from '../../common/options.service';\n\n@Component({\n  selector: 'c8y-app-icon',\n  templateUrl: './app-icon.component.html',\n  host: { class: 'c8y-app-icon' }\n})\nexport class AppIconComponent implements OnChanges {\n  @Input() contextPath: string;\n  @Input() name: string = '';\n  @Input() app: any;\n\n  model = {\n    appIcon: '',\n    showIcon: true,\n    iconClass: ['c8y-icon'],\n    appNameAbbr: '',\n    iconStyle: {}\n  };\n\n  private c8yAppIconsList = {\n    analyticsbuilder: 'analytics-builder',\n    'analytics-builder': 'analytics-builder',\n    cockpit: 'cockpit',\n    devicemanagement: 'device-management',\n    administration: 'administration',\n    apamaepl: 'apama-epl'\n  };\n\n  private white: boolean = false;\n\n  private defaultIconStyle = {\n    'background-repeat': 'no-repeat',\n    'background-size': 'contain',\n    height: '36px',\n    width: '36px'\n  };\n\n  constructor(private options: OptionsService) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.model.appIcon = this.iconFromAppDefinition() || this.findStaticIcon();\n    const iconUrl = this.iconUrlFromAppDefinition();\n    if (iconUrl) {\n      this.model.iconStyle = assign(this.defaultIconStyle, {\n        'background-image': iconUrl\n      });\n    }\n    this.model.showIcon = !!this.model.appIcon || !isEmpty(this.model.iconStyle);\n    this.model.iconClass = [\n      'c8y-icon',\n      this.model.appIcon,\n      this.white ? 'c8y-icon-white' : 'c8y-icon-duocolor'\n    ].filter(c => !!c);\n    this.model.appNameAbbr = this.name.substr(0, 2);\n  }\n\n  private findStaticIcon() {\n    const contextPath = this.contextPath || this.name;\n    const appContextPathNormalized = find(keys(this.c8yAppIconsList), cp => {\n      return contextPath.indexOf(cp) > -1;\n    });\n    const appIcon = this.c8yAppIconsList[appContextPathNormalized];\n    return appIcon ? `c8y-icon-${appIcon}` : undefined;\n  }\n\n  private iconFromAppDefinition() {\n    const app = this.app || this.options;\n    const iconClassProperty = ['icon', 'class'];\n    const iconClass = get(app, iconClassProperty) || get(app, ['manifest', ...iconClassProperty]);\n    return iconClass;\n  }\n\n  private iconUrlFromAppDefinition() {\n    const app = this.app || this.options;\n    const iconUrlProperty = ['icon', 'url'];\n    const iconUrl = get(app, iconUrlProperty) || get(app, ['manifest', ...iconUrlProperty]);\n    return iconUrl;\n  }\n}\n","import { Component } from '@angular/core';\nimport { ApplicationService, IApplication, ICurrentTenant, IUser } from '@c8y/client';\nimport { get, includes, orderBy } from 'lodash-es';\nimport { combineLatest } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { AppStateService } from '../../common/ui-state.service';\n\n@Component({\n  selector: 'c8y-app-switcher',\n  templateUrl: './app-switcher.component.html'\n})\nexport class AppSwitcherComponent {\n  oneCloudApps?: Array<IApplication & {[key: string]: any}>;\n  apps: Array<IApplication & {[key: string]: any}>;\n  open: boolean;\n\n  private get hideCloudApps(): boolean {\n    return false;  // this should be configurable from outside\n  }\n  private tenant: ICurrentTenant;\n  constructor(\n    private ui: AppStateService,\n    private applications: ApplicationService) {\n      const { currentUser, currentTenant} = this.ui;\n      combineLatest(currentUser, currentTenant).pipe(\n        first()\n      ).subscribe(([ user, tenant ]) => {\n          this.tenant = tenant;\n          this.listAppsForUser(user);\n        });\n  }\n\n  isActive(app: IApplication) {\n    return app.contextPath === this.ui.state.app.contextPath;\n  }\n\n  getHref(app: IApplication) {\n    return this.applications.getHref(app);\n  }\n\n  private async listAppsForUser(user: IUser | null) {\n    if (user) {\n      const { data } = await this.applications.listByUser(user, { pageSize: 1000 });\n      this.apps = this.orderApps(this.filterApps(data));\n    }\n  }\n\n  private filterApps(apps) {\n    apps = this.filterVisible(apps);\n    apps = this.filterCloud(apps);\n    apps = this.filterDuplicates(apps);\n    return apps;\n  }\n\n  private filterVisible(apps) {\n    const visibleApplicationTypes = ['HOSTED', 'EXTERNAL'];\n    return apps.filter((app) => includes(visibleApplicationTypes, app.type) &&\n      !app.noAppSwitcher &&\n      !get(app, 'manifest.noAppSwitcher'));\n  }\n\n  private filterCloud(apps) {\n    const { hideCloudApps } = this;\n    const filterFn = (app) => !!app.cloud;\n    if (!hideCloudApps) {\n        this.oneCloudApps = this.orderApps(apps.filter(filterFn));\n    }\n    return apps.filter((app) => !filterFn(app));\n  }\n\n  private filterDuplicates(apps) {\n    // Filter out apps that have duplicate contextpaths and are not own owned but the current tenant;\n    const filterFn = (app) => !apps.some((otherApp) => (app !== otherApp) &&\n      (app.contextPath && app.contextPath === otherApp.contextPath) &&\n      (app.owner.tenant.id !== this.tenant.name));\n    return apps.filter(filterFn);\n  }\n\n  private orderApps(apps) {\n    return orderBy(apps, (({ name }) => name.toLowerCase()));\n  }\n}\n","import { gettext } from '../i18n/gettext';\n\nexport const documentationItems = [\n  {\n    icon: 'c8y-c8y-data', // double c8y- is correct!\n    label: gettext('Concepts guide`KEEP_ORIGINAL`'),\n    url: '/concepts/introduction',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-user',\n    label: gettext('User guide`KEEP_ORIGINAL`'),\n    url: '/users-guide/getting-started',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-device-management',\n    label: gettext('Device guides`KEEP_ORIGINAL`'),\n    url: '/devices/overview',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-book',\n    label: gettext('Cumulocity IoT Edge`KEEP_ORIGINAL`'),\n    url: '/edge/overview',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-tools',\n    label: gettext('Microservice SDK guide`KEEP_ORIGINAL`'),\n    url: '/microservice-sdk/introduction',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-tools',\n    label: gettext('Device SDK guide`KEEP_ORIGINAL`'),\n    url: '/device-sdk/introduction',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-smart-rest',\n    label: gettext('Web SDK guide`KEEP_ORIGINAL`'),\n    url: '/web/introduction',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-data-explorer',\n    label: gettext('Streaming analytics guide`KEEP_ORIGINAL`'),\n    url: '/apama/introduction',\n    type: 'doc'\n  },\n  {\n    icon: 'c8y-bookmark',\n    label: gettext('Reference guide`KEEP_ORIGINAL`'),\n    url: '/reference/rest-implementation',\n    type: 'doc'\n  },\n  {\n    icon: 'gavel',\n    label: gettext('Legal notices'),\n    url: 'https://documentation.softwareag.com/legal/',\n    type: 'doc'\n  }\n];\n","import { InjectionToken } from '@angular/core';\nimport { ExtensionFactory } from '../common/public-api';\n\nexport interface DocLink {\n  icon: string;\n  label: string;\n  url: string;\n  type: 'doc' | 'quicklink';\n  click?: any;\n}\n\nexport type DocLinkFactory = ExtensionFactory<DocLink>;\n\nexport const HOOK_DOCS = new InjectionToken<ExtensionFactory<DocLink>>('Hook docs');\n","import { Injectable, Inject, Optional } from '@angular/core';\nimport { OptionsService } from '../common/options.service';\nimport { documentationItems } from './defaults.items';\nimport { AppStateService } from '../common/ui-state.service';\nimport { gettext } from '../i18n/gettext';\nimport { DocLink, HOOK_DOCS, DocLinkFactory } from './docs.models';\nimport { ExtensionPoint, fromTrigger } from '../common/public-api';\nimport { Observable } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { shareReplay, startWith, first, filter } from 'rxjs/operators';\nimport { isUndefined } from 'lodash-es';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocsService implements ExtensionPoint<DocLink> {\n  items$: Observable<DocLink[]>;\n  constructor(\n    private options: OptionsService,\n    private app: AppStateService,\n    @Optional() @Inject(HOOK_DOCS) factories: DocLinkFactory[] = [],\n    router: Router\n  ) {\n    if (!factories) {\n      factories = [];\n    }\n    factories.push(this);\n    const refreshTrigger = this.app.map(({ supportUrl }) => supportUrl);\n    this.items$ = fromTrigger(router, refreshTrigger, factories).pipe(\n      startWith([]),\n      shareReplay(1)\n    );\n  }\n\n  getBaseUrl(): string {\n    return this.options.get('docsBaseUrl', 'https://www.cumulocity.com/guides');\n  }\n\n  get templateStr(): string {\n    return this.options.get('guideHrefTemplate', '${docsBaseUrl}${partialUrl}');\n  }\n\n  getUserGuideLink(link) {\n    if (/^https?:/.test(link)) {\n      return link;\n    }\n    if (this.getBaseUrl === null) {\n      return null;\n    }\n    return this.getLink(this.templateStr, link);\n  }\n\n  list() {\n    return this.items$\n      .pipe(\n        filter(i => !!i.length),\n        first()\n      )\n      .toPromise();\n  }\n\n  refresh() {\n    // no op\n  }\n\n  get() {\n    // use the function as a factory\n    const { links, noDefault, excludeDefault = [] } = this.options.get('docs', {});\n    const { supportUrl } = this.app.state;\n    let staticLinks = noDefault\n      ? []\n      : documentationItems\n          .map((item: DocLink) => ({ ...item, url: this.getUserGuideLink(item.url) }))\n          .filter(({ url }) => !excludeDefault.some(e => new RegExp(e).test(url)));\n\n    if (links) {\n      // backwards compatibility\n      links.map((lnk: DocLink) => {\n        if (isUndefined(lnk.type)) {\n          lnk.type = 'doc';\n          return lnk;\n        }\n      });\n      staticLinks = staticLinks.concat(links);\n    }\n    if (supportUrl) {\n      staticLinks.push({\n        icon: 'comments',\n        label: gettext('Forum support'),\n        url: supportUrl,\n        type: 'doc'\n      });\n    }\n    return staticLinks;\n  }\n\n  private getLink(templateStr, partialLink) {\n    if (!templateStr) {\n      return undefined;\n    }\n    return templateStr\n      .replace(/\\${docsBaseUrl}/, this.getBaseUrl())\n      .replace(/\\${partialUrl}/, this.prefixWithSlash(partialLink));\n  }\n\n  private prefixWithSlash(partialLink = '') {\n    const shouldPrefix = !(partialLink && /^\\//.test(partialLink));\n    const prefix = shouldPrefix ? '/' : '';\n    return `${prefix}${partialLink}`;\n  }\n}\n","import { AfterViewInit, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ActionService } from '../../action/action.service';\nimport { BreadcrumbService } from '../../breadcrumb/breadcrumb.service';\nimport { SearchService } from '../../search/search.service';\nimport { AppStateService } from '../../common/ui-state.service';\nimport { UserMenuService } from '../../user/user-menu.service';\nimport { HeaderService } from '../header.service';\nimport { DocsService } from '../../docs/docs.service';\n\n@Component({\n  selector: 'c8y-header-bar',\n  templateUrl: './header-bar.component.html'\n})\nexport class HeaderBarComponent implements AfterViewInit {\n  canToggle$: Observable<boolean> = this.headerService.hasItemsInNavigator$;\n  appState$: Observable<any> = this.appState.state$;\n  drawerOpen = false;\n  headerOpen = false;\n\n  constructor(\n    public headerService: HeaderService,\n    public actionService: ActionService,\n    public breadcrumbService: BreadcrumbService,\n    public searchService: SearchService,\n    private appState: AppStateService,\n    public userMenuService: UserMenuService,\n    public docs: DocsService\n  ) {}\n\n  ngAfterViewInit() {\n    this.headerService.verifyIfNavOpen();\n  }\n\n  toggle() {\n    this.headerOpen = !this.headerOpen;\n  }\n}\n","import { Component, ElementRef, NgZone } from '@angular/core';\nimport { HeaderService } from '../header.service';\nimport { debounceTime, map, filter } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-title-outlet',\n  templateUrl: './title-outlet.component.html'\n})\nexport class TitleOutletComponent {\n  title = undefined;\n\n  constructor(\n    private headerService: HeaderService,\n    private element: ElementRef,\n    private zone: NgZone\n  ) {\n    const title$ = this.headerService.map(state => state.title);\n    title$.subscribe(title => (this.title = title));\n    this.zone.runOutsideAngular(() => {\n      title$\n        .pipe(\n          debounceTime(100),\n          map(() => this.element.nativeElement.querySelector('h1')),\n          filter(el => el !== null),\n          map(el => el.innerText),\n          filter(Boolean)\n        )\n        .subscribe((title: string) => headerService.changePageTitle(title));\n    });\n  }\n}\n","import { AfterViewInit, Component, OnDestroy, ViewChild } from '@angular/core';\nimport { HeaderService } from '../header.service';\n\n@Component({\n  selector: 'c8y-title',\n  templateUrl: './title.component.html'\n})\nexport class TitleComponent implements AfterViewInit, OnDestroy {\n  @ViewChild('template', {static: true}) template;\n  private viewInitTimeout;\n\n  constructor(\n    private headerService: HeaderService\n  ) {}\n\n  ngAfterViewInit() {\n    this.viewInitTimeout = setTimeout(() =>\n      this.headerService.changeTitle(this.template)\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.headerService.state.title === this.template) {\n      clearTimeout(this.viewInitTimeout);\n      this.headerService.changeTitle();\n    }\n  }\n}\n","import { Component, TemplateRef, ViewChild, Input} from '@angular/core';\nimport { NavigatorNode } from './navigator-node';\nimport { NavigatorService } from './navigator.service';\n\n@Component({\n  selector: 'c8y-navigator-item',\n  template: '<ng-template #iconTpl><ng-content></ng-content></ng-template>',\n})\nexport class NavigatorItemComponent  {\n  @ViewChild('iconTpl', {static: true}) template: TemplateRef<any>;\n  @Input() label: string;\n  @Input() icon: string;\n  @Input() path: string;\n  @Input() priority = 0;\n  nodeData: NavigatorNode;\n  constructor(\n    private service: NavigatorService\n  ) {\n    this.nodeData = new NavigatorNode();\n  }\n\n  ngOnInit(): void {\n    this.ngOnChanges();\n    setTimeout(() => this.service.add(this.nodeData));\n  }\n\n  ngOnChanges(): void {\n    this.nodeData.icon = this.icon;\n    this.nodeData.label = this.label;\n    this.nodeData.path = this.path;\n    this.nodeData.priority = this.priority;\n    this.nodeData.iconTemplate = !this.icon ? this.template : undefined;\n    this.nodeData.icon = this.icon;\n  }\n\n  ngOnDestroy(): void {\n    this.service.remove(this.nodeData);\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { NavigatorNode } from './navigator-node';\n\n@Component({\n  selector: 'c8y-navigator-icon',\n  template: `<i class=\"icon\" [c8yIcon]=\"icon\"></i>`\n})\nexport class NavigatorIconComponent {\n  @Input() node: NavigatorNode;\n  get icon() {\n    const DEFAULT_ICON = 'cog';\n    return this.node.icon || DEFAULT_ICON;\n  }\n\n  get iconClass() {\n    return `fa-${this.icon}`;\n  }\n}\n","// tslint:disable-next-line:max-line-length\nimport { Component, ComponentFactoryResolver, Input, QueryList, ViewChild, ViewChildren, ViewContainerRef, Output, EventEmitter, OnDestroy, HostListener } from '@angular/core';\nimport { RouterLinkActive, Router } from '@angular/router';\nimport { NavigatorIconComponent } from './navigator-icon.component';\nimport { NavigatorNode, ClickOptions } from './navigator-node';\nimport { NavigatorService } from './navigator.service';\nimport { PopoverConfirmComponent } from '../modal/popover-confirm.component';\n\n@Component({\n  selector: 'c8y-navigator-node-display',\n  templateUrl: './navigator-node.component.html'\n})\nexport class NavigatorNodeComponent implements OnDestroy {\n  @ViewChild('icon', { read: ViewContainerRef, static: false }) iconSlot: ViewContainerRef;\n  @Input() node: NavigatorNode;\n  @Input() isRoot: boolean;\n  @ViewChild(RouterLinkActive, {static: false}) routerLinkActive: RouterLinkActive;\n  @ViewChildren(NavigatorNodeComponent) childrenNodes: QueryList<NavigatorNodeComponent>;\n  @Output() nodeClick: EventEmitter<string> = new EventEmitter();\n  @ViewChild(PopoverConfirmComponent, {static: false}) confirm: PopoverConfirmComponent;\n\n  parentNode: NavigatorNodeComponent;\n\n  private viewInitTimeout;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private navigator: NavigatorService\n  ) {}\n\n  ngAfterViewInit() {\n    this.childrenNodes.forEach((n) => n.parentNode = this);\n    this.viewInitTimeout = setTimeout(() => {\n      this.updateIcon();\n      this.openOnFirstUrl();\n      this.expandParentIfActive();\n      this.node.confirm = this.confirm;\n    });\n  }\n\n  openOnFirstUrl() {\n    if (this.navigator.openOnFirstUrl(this.node) && !this.node.open) {\n      this.expandCollapse(true);\n    }\n  }\n\n  get expandTitle() {\n    return !this.node.open ? 'Expand' : 'Collapse';\n  }\n\n  click(from: 'icon' | 'expander' | 'link' = 'link', $event?) {\n    let open;\n    if (from === 'expander') {\n      if ($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n      open = !this.node.open;\n    } else {\n      open = this.routerLinkActive && this.routerLinkActive.isActive ? true : !this.node.open;\n    }\n    if (open !== this.node.open) {\n      this.expandCollapse(open, false, { [from]: true, $event });\n    }\n    this.nodeClick.emit(from);\n  }\n\n  expandCollapse(open, recursive?, forNode: ClickOptions = {}) {\n    this.node.open = open;\n    // Also close children\n    if (recursive) {\n      this.childrenNodes.forEach((n) => n.expandCollapse(open, recursive));\n    }\n    forNode.open = open;\n    this.node.click(forNode);\n  }\n\n  ngOnDestroy(): void {\n    clearTimeout(this.viewInitTimeout);\n    this.node.destroy();\n  }\n\n  private expandParentIfActive() {\n    if (this.routerLinkActive && this.routerLinkActive.isActive && this.parentNode) {\n      this.parentNode.expandCollapse(true);\n    }\n  }\n\n  private updateIcon() {\n    if (this.node.iconTemplate) {\n      this.updateIconTemplate();\n    } else {\n      this.updateIconComponent();\n    }\n  }\n\n  private updateIconComponent() {\n    let componentType = NavigatorIconComponent;\n    if (this.node && this.node.iconComponent) {\n      componentType = this.node.iconComponent;\n    }\n    this.iconSlot.clear();\n    const iconComponentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n    const componentRef = this.iconSlot.createComponent(iconComponentFactory);\n    componentRef.instance.node = this.node;\n  }\n\n  private updateIconTemplate() {\n    this.iconSlot.clear();\n    this.iconSlot.createEmbeddedView(this.node.iconTemplate);\n  }\n}\n","import { Component, Input, SimpleChanges } from '@angular/core';\nimport { NavigatorNode } from './navigator-node';\nimport { HeaderService } from '../header/public-api';\n\n@Component({\n  selector: 'c8y-navigator-outlet, c8y-ui-navigator',\n  templateUrl: './navigator-outlet.template.html',\n})\nexport class NavigatorOutletComponent {\n  @Input() nodes: NavigatorNode[];\n  @Input() open = true;\n\n  constructor(private headerService: HeaderService) {}\n\n  /**\n   * Closes the navigator on click if the window is small.\n   */\n  collapseNavigator(from: 'icon' | 'expander' | 'link') {\n    if (from === 'link' && !this.headerService.largeWidth) {\n      this.headerService.closeNavigator();\n    }\n  }\n\n  trackByPathOrLabel(index, node) {\n    return node.path ? node.path : node.label;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { CommonModule } from '../common/common.module';\nimport { NavigatorItemComponent } from './navigator-entry.component';\nimport { NavigatorIconComponent } from './navigator-icon.component';\nimport { NavigatorNodeComponent } from './navigator-node.component';\nimport { NavigatorOutletComponent } from './navigator-outlet.component';\nimport { NavigatorService } from './navigator.service';\nimport { ModalModule } from '../modal/modal.module';\n\n/**\n * The angular module definition for the navigator.\n * @exports NavigatorOutletComponent\n * @exports NavigatorItemComponent\n */\n@NgModule({\n  declarations: [\n    NavigatorOutletComponent,\n    NavigatorNodeComponent,\n    NavigatorItemComponent,\n    NavigatorIconComponent\n  ],\n  imports: [\n    RouterModule,\n    CollapseModule.forRoot(),\n    CommonModule,\n    ModalModule\n  ],\n  exports: [\n    NavigatorOutletComponent,\n    NavigatorItemComponent\n  ],\n  entryComponents: [\n    NavigatorIconComponent\n  ]\n})\nexport class NavigatorModule { }\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'c8y-right-drawer',\n  templateUrl: './right-drawer.component.html'\n})\nexport class RightDrawerComponent {\n  @Input('quickLinks') set _quickLinks(data: any[]) {\n    if (data) {\n      this.quickLinks = data.filter(d => d.type === 'quicklink');\n    }\n  }\n  @Input('helpAndSupport') set _helpAndSupport(data: any[]) {\n    if (data) {\n      this.helpAndSupport = data.filter(d => d.type === 'doc');\n    }\n  }\n  @Input() app: any;\n  quickLinks: any[] = [];\n  helpAndSupport: any[] = [];\n}\n","import { NgModule } from '@angular/core';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { ActionModule } from '../action/action.module';\nimport { BreadcrumbModule } from '../breadcrumb/breadcrumb.module';\nimport { CommonModule } from '../common/common.module';\nimport { SearchModule } from '../search/search.module';\nimport { UserModule } from '../user/user.module';\nimport { AppIconComponent } from './application/app-icon.component';\nimport { AppSwitcherComponent } from './application/app-switcher.component';\nimport { HeaderBarComponent } from './header-bar/header-bar.component';\nimport { HeaderService } from './header.service';\nimport { TitleOutletComponent } from './title/title-outlet.component';\nimport { TitleComponent } from './title/title.component';\nimport { NavigatorModule } from '../navigator/navigator.module';\nimport { RightDrawerComponent } from './right-drawer/right-drawer.component';\n\n/**\n * The angular module definition for the header of the application.\n * @exports HeaderBarComponent\n * @exports TitleComponent\n * @exports TitleOutletComponent\n * @exports AppIconComponent\n * @exports AppSwitcherComponent\n */\n@NgModule({\n  declarations: [\n    TitleComponent,\n    HeaderBarComponent,\n    TitleOutletComponent,\n    AppIconComponent,\n    AppSwitcherComponent,\n    RightDrawerComponent\n  ],\n  imports: [\n    BsDropdownModule,\n    UserModule,\n    SearchModule,\n    CommonModule,\n    ActionModule,\n    BreadcrumbModule,\n    NavigatorModule\n  ],\n  exports: [\n    HeaderBarComponent,\n    TitleComponent,\n    TitleOutletComponent,\n    AppIconComponent,\n    AppSwitcherComponent,\n    RightDrawerComponent\n  ]\n})\nexport class HeaderModule {}\n","import { Component, OnInit, Output, Input, EventEmitter } from '@angular/core';\nimport { LoginService } from './login.service';\nimport { PasswordService } from '../authentication/password.service';\nimport { IResetPassword, ICredentials, UserService } from '@c8y/client';\nimport { OptionsService } from '../common/public-api';\nimport { AlertService } from '../alert/public-api';\nimport { LoginViews } from './login.model';\n\n@Component({\n  selector: 'c8y-change-password',\n  templateUrl: './change-password.component.html',\n  styles: []\n})\nexport class ChangePasswordComponent implements OnInit {\n  @Input() credentials: ICredentials;\n  @Output() onChangeView = new EventEmitter();\n\n  passwordPattern = /^[a-zA-Z0-9`~!@#$%^&*()_|+\\-=?;:'\",.<>{}[\\]\\\\/]{8,32}$/;\n  isLoading = false;\n  model = {\n    tenantId: '',\n    email: '',\n    newPassword: '',\n    newPasswordConfirm: ''\n  };\n  enforcePasswordStrength = false;\n  emailReadOnly = false;\n\n  private TOKEN_PARAM = 'token';\n  private EMAIL_PARAM = 'email';\n\n  constructor(\n    public loginService: LoginService,\n    private users: UserService,\n    private passwordStrengthCheckerService: PasswordService,\n    private options: OptionsService,\n    private alert: AlertService\n  ) { }\n\n  async ngOnInit() {\n    this.model.tenantId = this.loginService.getTenant();\n    this.model.email = this.options.get(this.EMAIL_PARAM, '');\n    this.emailReadOnly = !!this.model.email;\n    this.enforcePasswordStrength = this.loginService.getEnforcePasswordStrength();\n  }\n\n  async changePassword() {\n    const passwordStrengthColor: any = this.passwordStrengthCheckerService.getStrengthColor(\n      this.model.newPassword\n    );\n    const resetPassword: IResetPassword = {\n      token: this.credentials.token,\n      email: this.model.email,\n      newPassword: this.model.newPassword,\n      passwordStrength: passwordStrengthColor.passwordStrength\n    };\n    try {\n      this.isLoading = true;\n      const { res } = await this.users.resetPassword(resetPassword, this.model.tenantId);\n      if (res.status === 200) {\n        this.loginService.addSuccessMessage('password_changed');\n        this.credentials.token = undefined;\n        this.options.set(this.TOKEN_PARAM, undefined);\n        this.onChangeView.emit({ view: LoginViews.Credentials });\n      }\n    } catch (e) {\n      this.alert.addServerFailure(e);\n    } finally {\n      this.loginService.reset();\n      this.isLoading = false;\n    }\n  }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { LoginService } from './login.service';\nimport { ICredentials } from '@c8y/client';\nimport { AlertService } from '../alert/alert.service';\nimport { AppStateService } from '../common/ui-state.service';\nimport { gettext } from '../i18n/gettext';\nimport { LoginViews } from './login.model';\n\n@Component({\n  selector: 'c8y-credentials',\n  templateUrl: './credentials.component.html',\n  styles: []\n})\nexport class CredentialsComponent implements OnInit {\n  @Output() onChangeView = new EventEmitter();\n\n  LOGIN_VIEWS = LoginViews;\n  model: ICredentials = {};\n  isLoading: boolean = false;\n  showLoginForm: boolean = false;\n  showBasicAuth: boolean = false;\n  oauthOptions: any = {};\n\n  private readonly PASSWORD_RESET_HEADER_NAME = 'passwordresettoken';\n  private readonly NO_PHONE_HEADER_NAME = 'NoPhoneHeader';\n\n  constructor(\n    public loginService: LoginService,\n    public alert: AlertService,\n    public ui: AppStateService\n  ) {}\n\n  ngOnInit() {\n    const { oauthOptions, loginMode } = this.loginService;\n    this.model.tenant = this.loginService.getTenant();\n    this.showLoginForm =\n      typeof loginMode.visibleOnLoginPage === 'undefined' || loginMode.visibleOnLoginPage;\n    this.showBasicAuth = loginMode.type === 'BASIC';\n    this.oauthOptions = oauthOptions;\n  }\n\n  redirectToOauth() {\n    this.loginService.redirectToOauth();\n  }\n\n  /**\n   * Allows to login into the application using basic auth.\n   * If successful logged in the client is set in shared/cumulocity.service.ts\n   */\n  async login() {\n    try {\n      this.isLoading = true;\n      const basicAuth = this.loginService.useBasicAuth(this.model);\n      await this.loginService.login(basicAuth, this.model);\n    } catch (e) {\n      if (e.res && e.res.headers && e.res.headers.get(this.PASSWORD_RESET_HEADER_NAME)) {\n        this.handlePasswordReset(e.res);\n      } else if (e.res && e.res.status === 401 && /pin/i.test(e.data.message)) {\n        this.handleSmsChallenge(e.data.message);\n      } else if (e.res && e.res.status === 401 && /TOTP/i.test(e.data.message)) {\n        this.handleTotpChallenge(e.data.message);\n      } else if (\n        e.res &&\n        e.res.headers &&\n        e.res.headers.get(this.NO_PHONE_HEADER_NAME) &&\n        !this.loginService.isSupportUser(this.model)\n        ) {\n          this.handleNoPhoneNumberProvided();\n      } else {\n        this.loginService.reset();\n        this.alert.addServerFailure(e);\n      }\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  private handlePasswordReset(e: any) {\n    this.alert.removeLastDanger();\n    this.model.token = e.headers.get(this.PASSWORD_RESET_HEADER_NAME);\n    this.onChangeView.emit({ view: LoginViews.ChangePassword, credentials: this.model });\n  }\n\n  private handleTotpChallenge(message) {\n    if (/TOTP setup required/i.test(message)) {\n      this.onChangeView.emit({ view: LoginViews.TotpSetup, credentials: this.model });\n    } else {\n      this.onChangeView.emit({ view: LoginViews.TotpChallenge, credentials: this.model });\n    }\n  }\n\n  private handleSmsChallenge(message: string) {\n    if (/pin has already been generated/i.test(message)) {\n      this.alert.warning(\n        gettext(\n          'The verification code was already sent. For a new verification code, please click on the link above.'\n        )\n      );\n    }\n    this.alert.removeLastDanger();\n    this.onChangeView.emit({ view: LoginViews.SmsChallenge, credentials: this.model });\n  }\n\n  private handleNoPhoneNumberProvided() {\n    this.onChangeView.emit({ view: LoginViews.ProvidePhoneNumber, credentials: this.model });\n    this.alert.warning(\n      gettext(\n        'Two-factor authentication has been turned on for this account. Provide your phone number above to save it in your user profile and start receiving verification codes via SMS.'\n      )\n    );\n  }\n}\n","import { Component, Input, OnInit, HostBinding, HostListener, ViewChild } from '@angular/core';\nimport { ICredentials } from '@c8y/client';\nimport { LoginService } from './login.service';\nimport { OptionsService } from '../common/options.service';\nimport { LoginViews } from './login.model';\nimport { AlertService } from '../alert/alert.service';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-login',\n  templateUrl: './login.component.html',\n  styles: []\n})\nexport class LoginComponent implements OnInit {\n  currentView: LoginViews = LoginViews.None;\n  LOGIN_VIEWS = LoginViews;\n\n  disabled = false;\n\n  @Input() name: string;\n\n  credentials: ICredentials = {};\n  displayAlerts: boolean = false;\n  private TOKEN_PARAM = 'token';\n\n  /**\n   * Just DI.\n   */\n  constructor(\n    public loginService: LoginService,\n    private options: OptionsService,\n    private alert: AlertService\n  ) {}\n\n  ngOnInit() {\n    const token = this.getResetPasswordToken();\n    if (this.loginService.isFirstLogin) {\n      if (!token) {\n        this.loginAutomatically();\n      } else {\n        this.credentials.token = token;\n        this.reset();\n      }\n    }\n    this.loginService.isFirstLogin = false;\n  }\n\n  handleLoginTemplate(event) {\n    this.currentView = event.view;\n    this.credentials = event.credentials || {};\n  }\n\n  @HostListener('keyup', ['$event']) onkeyup(event: KeyboardEvent) {\n    if (event.key !== 'Enter') {\n      this.loginService.cleanMessages();\n    }\n  }\n\n  reset() {\n    this.loginService.reset();\n    this.setView();\n    this.loginService.cleanMessages();\n  }\n\n  private async loginAutomatically() {\n    try {\n      await this.loginService.login();\n    } catch (e) {\n      const loginMode = this.loginService.loginMode.type;\n      if (loginMode === 'OAUTH2') {\n        this.loginService.redirectToOauth();\n      } else {\n        this.reset();\n        if (loginMode === 'OAUTH2_INTERNAL' && window.location.protocol !== 'https:') {\n          this.alert.danger(gettext('Current login mode only supports HTTPS.'));\n        } else if (e.res && e.res.status === 403) {\n          this.alert.addServerFailure(e);\n        }\n      }\n    }\n  }\n\n  private setView() {\n    if (this.credentials && this.credentials.token) {\n      this.handleLoginTemplate({ view: LoginViews.ChangePassword, credentials: this.credentials });\n    } else {\n      this.handleLoginTemplate({ view: LoginViews.Credentials });\n    }\n  }\n\n  private getResetPasswordToken() {\n    const token = this.options.get(this.TOKEN_PARAM);\n    if (token) {\n      this.options.set(this.TOKEN_PARAM, undefined); // only use once\n    }\n    return token;\n  }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { UserService } from '@c8y/client';\nimport { LoginService } from './login.service';\nimport { LoginViews } from './login.model';\n\n@Component({\n  selector: 'c8y-recover-password',\n  templateUrl: './recover-password.component.html',\n  styles: []\n})\n\nexport class RecoverPasswordComponent implements OnInit {\n\n  @Output() onChangeView = new EventEmitter();\n  LOGIN_VIEWS = LoginViews;\n  isLoading = false;\n  model = {\n    email: '',\n    tenantId: ''\n  };\n\n  constructor(\n    private users: UserService,\n    public loginService: LoginService) {\n  }\n\n  ngOnInit() {\n    this.model.tenantId = this.loginService.getTenant();\n  }\n\n  async resetPassword() {\n    try {\n      this.isLoading = true;\n      const { res } = await this.users.sendPasswordResetMail(this.model.email, this.model.tenantId);\n      if (res.status === 200) {\n        this.loginService.addSuccessMessage('password_reset_requested');\n      }\n    } finally {\n      this.loginService.reset();\n      this.isLoading = false;\n    }\n  }\n\n}\n","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\nimport { ICredentials, UserService } from '@c8y/client';\nimport { AlertService } from '../alert/alert.service';\nimport { LoginService } from './login.service';\nimport { LoginViews } from './login.model';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-totp-auth',\n  templateUrl: './totp-auth.component.html'\n})\nexport class TotpAuthComponent implements OnInit {\n  @Input() credentials: ICredentials;\n  @Input() view: LoginViews;\n  @Output() onCancel = new EventEmitter();\n  LOGIN_VIEWS = LoginViews;\n  loading = false;\n  hasError = false;\n\n  get isSetup() {\n    return this.view === LoginViews.TotpSetup;\n  }\n\n  constructor(\n    public loginService: LoginService,\n    private userService: UserService,\n    private alert: AlertService\n  ) {}\n\n  /**\n   * In case of a setup we need the user to be authorized\n   * first.\n   */\n  async ngOnInit() {\n    if (this.view === this.LOGIN_VIEWS.TotpSetup) {\n      await this.loginService.switchLoginMode(this.credentials);\n    }\n  }\n\n  async onTotpSuccess(code) {\n    try {\n      this.loading = true;\n      this.hasError = false;\n      this.credentials.tfa = code;\n      if (this.isSetup) {\n        await this.userService.activateTotp();\n      }\n      await this.loginService.switchLoginMode(this.credentials);\n      await this.loginService.verifyAppAccess();\n      await this.loginService.authFulfilled();\n    } catch (e) {\n      this.alert.removeLastDanger();\n      if (e.data && e.data.message === 'Access is denied') {\n        this.alert.addServerFailure(e);\n      }\n      if (e.data && e.data.message === 'Authentication failed! : User account is locked') {\n        this.alert.addServerFailure(e);\n      } else {\n        this.hasError = true;\n      }\n    } finally {\n      this.loading = false;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { FormsModule as C8yFormsModule } from '../forms/public-api';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { CommonModule } from '../common/common.module';\nimport { ChangePasswordComponent } from './change-password.component';\nimport { CredentialsComponent } from './credentials.component';\nimport { LoginComponent } from './login.component';\nimport { LoginService } from './login.service';\nimport { RecoverPasswordComponent } from './recover-password.component';\nimport { AuthenticationModule } from '../authentication/authentication.module';\nimport { AlertModule } from '../alert/alert.module';\nimport { TotpAuthComponent } from './totp-auth.component';\n\n/**\n * The angular module definition for the login.\n * @exports LoginComponent\n */\n@NgModule({\n  declarations: [\n    LoginComponent,\n    RecoverPasswordComponent,\n    ChangePasswordComponent,\n    CredentialsComponent,\n    TotpAuthComponent\n  ],\n  imports: [\n    FormsModule,\n    TooltipModule,\n    CommonModule,\n    AuthenticationModule,\n    AlertModule,\n    C8yFormsModule\n  ],\n  exports: [LoginComponent]\n})\nexport class LoginModule {\n  static forRoot() {\n    return {\n      ngModule: LoginModule,\n      providers: LoginModule.providers()\n    };\n  }\n  static providers() {\n    return [LoginService];\n  }\n}\n","import {\n  Component,\n  ViewChild,\n  Input,\n  ViewContainerRef,\n  AfterContentInit,\n  OnDestroy\n} from '@angular/core';\nimport { TabsService } from './tabs.service';\nimport { Tab } from './tab.model';\n\n@Component({\n  selector: 'c8y-tab',\n  template: '<ng-template #tpl><ng-content></ng-content></ng-template>'\n})\nexport class TabComponent implements AfterContentInit, OnDestroy, Tab {\n  @ViewChild('tpl', { static: false }) template: ViewContainerRef;\n  @Input() path: string;\n  @Input() label: string = '';\n  @Input() icon: string;\n  @Input() priority: number;\n  @Input() orientation: 'horizontal' | 'vertical';\n  constructor(private tabs: TabsService) {}\n\n  ngAfterContentInit() {\n    setTimeout(() => this.tabs.add(this as Tab));\n  }\n\n  ngOnDestroy() {\n    this.tabs.remove(this as Tab);\n  }\n}\n","import {\n  Component,\n  Input,\n  HostBinding,\n  Renderer2,\n  ElementRef,\n  OnChanges,\n  ViewChild,\n  OnDestroy,\n  AfterContentInit,\n  AfterContentChecked} from '@angular/core';\nimport { debounceTime } from 'rxjs/operators';\nimport { fromEventPattern, fromEvent, merge, Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { Tab } from './tab.model';\n\n@Component({\n  selector: 'c8y-tabs-outlet,c8y-ui-tabs',\n  templateUrl: './tabs-outlet.component.html',\n})\nexport class TabsOutletComponent implements OnDestroy, AfterContentInit {\n  @Input() tabs: any[] = [];\n  @Input() orientation: 'vertical' | 'horizontal' = 'vertical';\n  @Input() navigatorOpen = false;\n  showLeft: boolean = false;\n  showRight: boolean = false;\n  @HostBinding('class.navigator-open') get isNavigatorOpen() {\n    return this.navigatorOpen;\n  }\n  @HostBinding('class.page-tabs') get hasTabs() {\n    return this.tabs && this.tabs.length;\n  }\n  @HostBinding('class.page-tabs-horizontal') get isHorizontal() {\n    return this.orientation === 'horizontal';\n  }\n  @HostBinding('class.page-tabs-vertical') get isVertical() {\n    return this.orientation !== 'horizontal';\n  }\n  @ViewChild('container', {read: ElementRef, static: true}) private container: ElementRef;\n  @ViewChild('left', {read: ElementRef, static: false}) private leftBtn: ElementRef;\n  @ViewChild('right', {read: ElementRef, static: false}) private rightBtn: ElementRef;\n  @ViewChild('tabsContainer', {read: ElementRef, static: false}) private tabsContainer: ElementRef;\n  private scrollSubscription: Subscription;\n\n  constructor(\n    private router: Router,\n    private renderer: Renderer2,\n    private el: ElementRef\n  ) {}\n\n  ngOnDestroy() {\n    if (this.scrollSubscription) {\n      this.scrollSubscription.unsubscribe();\n    }\n  }\n\n  ngAfterContentInit() {\n    if (this.orientation === 'horizontal') {\n      this.scrollSubscribe();\n    }\n\n  }\n\n  isActive(tab: Tab) {\n    if (tab && tab.path) {\n      return this.router.isActive(tab.path, false);\n    } else {\n      return false;\n    }\n  }\n\n  navigateTo(path) {\n    this.router.navigate([path]);\n  }\n\n  scroll(direction: 'right' | 'left' = 'right') {\n    const { widthScroll, width, scrollLeft } = this.getDimensions();\n    const multiplier = direction === 'left' ? -1 : 1;\n\n    let targetScroll = scrollLeft + width * multiplier;\n    if (targetScroll < 0) {\n      targetScroll = 0;\n    }\n    if (targetScroll > widthScroll - width) {\n      targetScroll = widthScroll - width;\n    }\n    // TODO: we should animate this\n    this.container.nativeElement.scrollLeft = targetScroll;\n  }\n\n  private scrollSubscribe() {\n    let unlisten;\n    this.scrollSubscription = merge(\n      fromEvent(this.container.nativeElement, 'scroll'),\n      fromEventPattern(\n        (handler: any) => {\n          unlisten = this.renderer.listen('window', 'resize', handler);\n        },\n        () => unlisten()\n      )\n    ).pipe(\n      debounceTime(250)\n    ).subscribe(() => this.updateScroll());\n  }\n\n  private updateScroll() {\n    const { widthScroll, width, scrollLeft } = this.getDimensions();\n    this.showLeft = !!scrollLeft;\n    this.showRight = widthScroll > width + scrollLeft;\n  }\n\n  private getDimensions() {\n    const elTabs = this.tabsContainer.nativeElement;\n    const el = this.container.nativeElement;\n    const widthScroll =   elTabs.scrollWidth;\n    const width = el.clientWidth;\n    const scrollLeft = el.scrollLeft;\n    return { widthScroll, width, scrollLeft };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '../common/common.module';\nimport { TabComponent } from './tab.component';\nimport { TabsOutletComponent } from './tabs-outlet.component';\nimport { TabsService } from './tabs.service';\n\n@NgModule({\n  declarations: [\n    TabsOutletComponent,\n    TabComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule.forChild([])\n  ],\n  exports: [\n    TabsOutletComponent,\n    TabComponent\n  ]\n})\nexport class TabsModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { OptionsService } from '../../common/options.service';\n\n@Component({\n  selector: 'c8y-cookie-banner',\n  templateUrl: './cookie-banner.template.html'\n})\nexport class CookieBannerComponent implements OnInit {\n  readonly storageKey: string = 'acceptCookieNotice';\n  readonly acceptValue: string = '1';\n  showBanner: boolean;\n  settings: { cookieBannerTitle?: string; cookieBannerText: string; policyUrl?: string };\n\n  constructor(private options: OptionsService) {}\n\n  ngOnInit() {\n    this.settings = this.options.get('cookieBanner');\n    if (this.settings && this.settings.cookieBannerText && !localStorage.getItem(this.storageKey)) {\n      this.showBanner = true;\n    }\n  }\n\n  acceptCookies() {\n    localStorage.setItem(this.storageKey, this.acceptValue);\n    this.showBanner = false;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { ActionBarModule } from '../action-bar/action-bar.module';\nimport { AlertModule } from '../alert/alert.module';\nimport { HeaderModule } from '../header/header.module';\nimport { LoginModule } from '../login/login.module';\nimport { NavigatorModule } from '../navigator/navigator.module';\nimport { TabsModule } from '../tabs/tabs.module';\nimport { BootstrapComponent } from './bootstrap.component';\nimport { CommonModule } from '../common/common.module';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { CookieBannerComponent } from './cookie-banner/cookie-banner.component';\n\n/**\n * The module which allows to bootstrap a custom application.\n * Use it as `bootstrap: []` component in your main app module\n * or as `<c8y-bootstrap>` in your main app.\n */\n@NgModule({\n  declarations: [\n    BootstrapComponent,\n    CookieBannerComponent\n  ],\n  imports: [\n    CommonModule,\n    HeaderModule,\n    LoginModule,\n    RouterModule,\n    TabsModule,\n    ActionBarModule,\n    AlertModule,\n    NavigatorModule,\n    TooltipModule\n  ],\n  exports: [\n    BootstrapComponent\n  ],\n  entryComponents: [\n    BootstrapComponent\n  ]\n})\nexport class BootstrapModule {}\n","import { Component, InjectionToken, Type } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n/**\n * A hook to add dynamic components to the UI (e.g. widgets).\n */\nexport const HOOK_COMPONENTS = new InjectionToken('Hook Dynamic Component');\n\n/**\n * A hook to add dynamic components to the UI (e.g. widgets).\n * @deprecated: Use HOOK_COMPONENTS\n */\nexport const HOOK_COMPONENT = new InjectionToken('Hook Dynamic Component @deprecated');\n\n/**\n * A dynamic component can be defined in a the HOOK_COMPONENTS to display any kind\n * of component dynamically just by referencing it's id. The most common use case is on dashboards,\n * where the `configComponent` is used to define what is displayed on the `component`\n * on the dashboard.\n *\n * To use the component you can use the c8y-dynamic-component.\n *\n * ```\n *   <c8y-dynamic-component\n *     componentId=\"angular.widget.demo\"\n *     [config]=\"{ text: 'Hello world' }\"\n *     [mode]=\"editComponent ? 'config' : 'component'\"\n *   ></c8y-dynamic-component>\n *   ```\n */\nexport interface DynamicComponentDefinition {\n  /**\n   * Unique serializable id\n   */\n  id: string;\n  /**\n   * The component which is used when the component should be displayed (e.g. on a dashboard)\n   */\n  component: Type<Component>;\n  /**\n   * The configuration component used when a widget is added or edited.\n   */\n  configComponent?: Type<Component>;\n  /**\n   * The label shown for this dynamic component on add widgets\n   */\n  label: string;\n  /**\n   * The description shown on add widget\n   */\n  description: string;\n  /**\n   * Add any random data, specially to angular.js dashboards.\n   * Should be searilzabled to allow to save it to the API.\n   */\n  data?: any;\n  /**\n   * An url to an preview image.\n   */\n  previewImage?: string;\n}\n\n/**\n * Use this interface on any component to define the interchange between\n * config and display component.\n */\nexport interface DynamicComponent {\n  /**\n   * The configuration which is shared between configuration component and display component.\n   * Should be searilzabled to allow to save it to the API.\n   */\n  config: any;\n  /**\n   * A reference to the ng1Form on angularjs dashboards to disable/enable the save button.\n   * @deprecated: Will not work on Angular-Dashboards (1.6.1.0). Use `ContextServiceDashboard.formDisabled` instead.\n   */\n  ng1FormRef?: any;\n}\n\n/**\n * An lifecycle hook which is called before an configuration is saved.\n */\nexport interface OnBeforeSave {\n  /**\n   * Called before a configuration object is saved. The function can be used to manipulate the\n   * passed config object or to cancel the saving (return false or Observable<boolean>).\n   */\n  onBeforeSave(config?: any): boolean | Promise<boolean> | Observable<boolean>;\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable, of, Subject } from 'rxjs';\nimport { filter, mergeMap, take } from 'rxjs/operators';\nimport { ExtensionPoint, fromFactories } from '../common/extension-hooks';\nimport { StateService } from '../common/state-service.abstract';\nimport {\n  DynamicComponentDefinition,\n  HOOK_COMPONENT,\n  HOOK_COMPONENTS\n} from './dynamic-component.model';\n\ndeclare const __MODE__: string;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DynamicComponentService extends StateService\n  implements ExtensionPoint<DynamicComponentDefinition> {\n  items$: Observable<DynamicComponentDefinition[]>;\n  readonly refreshTrigger = new Subject();\n  readonly state$ = new BehaviorSubject<Set<DynamicComponentDefinition>>(\n    new Set<DynamicComponentDefinition>()\n  );\n\n  constructor(private injector: Injector, router: Router) {\n    super();\n\n    this.items$ = fromFactories(\n      [() => this.injector.get(HOOK_COMPONENTS, []), () => this.getComponentsViaDeprecatedHook()],\n      router,\n      false\n    );\n    this.items$.subscribe(cmps => {\n      cmps.forEach(cmp => {\n        this.state.add(cmp);\n      });\n      this.emitNewState();\n    });\n  }\n\n  getComponentsViaDeprecatedHook() {\n    const componentsViaDeprecatedHook: DynamicComponentDefinition[] = this.injector.get(\n      HOOK_COMPONENT,\n      []\n    ) as DynamicComponentDefinition[];\n    if (\n      componentsViaDeprecatedHook &&\n      componentsViaDeprecatedHook.length &&\n      __MODE__ !== 'production'\n    ) {\n      console.warn('HOOK_COMPONENT is now deprecated. Use HOOK_COMPONENTS instead.');\n    }\n\n    return componentsViaDeprecatedHook;\n  }\n\n  refresh() {\n    this.refreshTrigger.next(1);\n  }\n\n  get state() {\n    return this.state$.value;\n  }\n\n  /**\n   * Returns a component by it's id as an observable.\n   * @param id The id of the component.\n   */\n  getById$(id) {\n    return this.state$.pipe(\n      filter((cmps: Set<DynamicComponentDefinition>) => cmps.size > 0),\n      mergeMap((cmps: Set<DynamicComponentDefinition>) =>\n        of(Array.from(cmps).find(cmp => cmp.id === id))\n      ),\n      take(1)\n    );\n  }\n\n  add(component: DynamicComponentDefinition) {\n    this.state.add(component);\n    this.emitNewState();\n  }\n\n  remove(component: DynamicComponentDefinition) {\n    this.state.delete(component);\n    this.emitNewState();\n  }\n}\n","import {\n  Component,\n  Input,\n  ViewChild,\n  ComponentFactoryResolver,\n  ViewContainerRef,\n  ComponentRef\n} from '@angular/core';\nimport {\n  DynamicComponent,\n  DynamicComponentDefinition,\n  OnBeforeSave\n} from './dynamic-component.model';\nimport { DynamicComponentService } from './dynamic-component.service';\nimport { of, isObservable, Observable } from 'rxjs';\nimport { isUndefined } from 'lodash-es';\n\n/**\n * C8y dynamic component.\n * ## Example:\n *\n * register component in HOOK in module:\n * ```typescript\n *  import { HOOK_COMPONENT } from '@c8y/ngx-components';\n *\n * @NgModule({\n *  ...,\n *  providers: [{\n *      provide: HOOK_COMPONENT,\n *      multi: true,\n *      useValue: [{\n *          id: 'test-component',\n *          label: 'My test component',\n *          description: 'this is test component',\n *          component: TestComponent\n *      }],\n *  ...\n *  }]\n *\n * ```\n * Showing dynamic component:\n * ```html\n * <c8y-dynamic-component [componentId]=\"'test-component'\" [config]=\"config\"></c8y-dynamic-component>\n * ```\n */\n@Component({\n  selector: 'c8y-dynamic-component',\n  templateUrl: './dynamic-component.component.html'\n})\nexport class DynamicComponentComponent {\n  /**\n   * The ID of the registered component. It needs to be a component that is hooked\n   * with the HOOK_COMPONENTS extension hook.\n   */\n  @Input() componentId: string;\n  /**\n   * The configuration to pass.\n   */\n  @Input() config: any;\n  /**\n   * DynamicComponents can have two modes, an edit (config) and an view (component) mode.\n   * By default it is shown in the component mode.\n   */\n  @Input() mode: 'config' | 'component' = 'component';\n  /**\n   * Disable this to hide the error that is shown if the component was not found.\n   */\n  @Input() notFoundError = true;\n  /**\n   * @ignore\n   */\n  @ViewChild('host', { read: ViewContainerRef, static: true }) host: ViewContainerRef;\n  /**\n   * @ignore\n   */\n  error: any;\n  /**\n   * @ignore\n   */\n  expandErrorDetails = false;\n  private componentRef: ComponentRef<Component>;\n\n  /**\n   * @ignore only DI\n   */\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private dynamicComponentService: DynamicComponentService\n  ) {}\n\n  /**\n   * Calls the dynamic component life cycle hook. Currently only\n   * supporting onBeforeSave, a hook which is called before a config component\n   * is saved.\n   */\n  callLifeCycleHooks() {\n    return this.callOnBeforeSaveHook();\n  }\n\n  /**\n   * @ignore\n   */\n  ngOnChanges(): void {\n    this.dynamicComponentService\n      .getById$(this.componentId)\n      .subscribe(cmp => this.loadComponent(cmp));\n  }\n\n  private loadComponent(dynamicComponent: DynamicComponentDefinition) {\n    try {\n      this.error = undefined;\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(\n        this.mode === 'component' ? dynamicComponent.component : dynamicComponent.configComponent\n      );\n      this.host.clear();\n      this.componentRef = this.host.createComponent(componentFactory);\n      (this.componentRef.instance as DynamicComponent).config = this.config;\n    } catch (ex) {\n      this.error = ex;\n    }\n  }\n\n  private callOnBeforeSaveHook() {\n    if (!this.componentRef) {\n      return of(true);\n    }\n    const hook = (this.componentRef.instance as OnBeforeSave).onBeforeSave;\n    if (hook) {\n      const result = hook(this.config);\n      if (isUndefined(result)) {\n        return of(true);\n      }\n      return isObservable(result) ? result : (of(result) as Observable<boolean>);\n    }\n    return of(true);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { DynamicComponentComponent } from './dynamic-component.component';\nimport { DynamicComponentService } from './dynamic-component.service';\nimport { I18nModule } from '../i18n/i18n.module';\n\n@NgModule({\n  declarations: [DynamicComponentComponent],\n  imports: [CommonModule, CollapseModule, RouterModule.forChild([]), I18nModule],\n  exports: [DynamicComponentComponent],\n  providers: [DynamicComponentService]\n})\nexport class DynamicComponentModule {}\n","import { Component, ViewChild } from '@angular/core';\n\n@Component({\n  selector: 'c8y-dashboard-child-action',\n  templateUrl: './dashboard-child-action.component.html'\n})\nexport class DashboardChildActionComponent {\n  @ViewChild('template', { static: false }) template: any;\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'c8y-dashboard-child-title',\n  templateUrl: './dashboard-child-title.component.html'\n})\nexport class DashboardChildTitleComponent {}\n","import {\n  Component,\n  ContentChildren,\n  ElementRef,\n  HostBinding,\n  Input,\n  AfterContentInit,\n  QueryList,\n  forwardRef,\n  Output,\n  EventEmitter,\n  HostListener,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { DashboardChildComponent } from './dashboard-child.component';\nimport { DashboardChange } from './dashboard.model';\n\n/**\n * Displays a CSS grid which is customizable by the customer. You can set\n * `c8y-dashboard-child`-components on it or position any element on it by\n * setting the grid CSS properties. On change (resize, or rearrange) the\n * component emits an change event.\n *\n * ## Example:\n *\n * ```html\n * <c8y-title>Hello from outlet</c8y-title>\n *\n * <c8y-action-bar-item [placement]=\"'right'\">\n *   <button class=\"btn btn-link\" (click)=\"addRandom()\"><i class=\"fa fa-plus\"></i> Add random</button>\n * </c8y-action-bar-item>\n * <c8y-action-bar-item [placement]=\"'right'\">\n *   <button class=\"btn btn-link\" (click)=\"isFrozen = !isFrozen\">\n *     <i [c8yIcon]=\"isFrozen ? 'lock' : 'unlock'\"></i> Toggle freeze\n *   </button>\n * </c8y-action-bar-item>\n *\n * <c8y-dashboard (dashboardChange)=\"dashboardChange($event)\">\n *   <c8y-dashboard-child\n *     [isFrozen]=\"isFrozen\"\n *     title=\"dynamic\"\n *     *ngFor=\"let widget of widgets\"\n *     #current\n *   >\n *     x: {{ current.x }}<br />\n *     y: {{ current.y }}<br />\n *     width: {{ current.width }}<br />\n *     height: {{ current.height }}<br />\n *   </c8y-dashboard-child>\n *   <c8y-dashboard-child\n *     #cpWidget\n *     [isFrozen]=\"isFrozen\"\n *     [x]=\"0\"\n *     [y]=\"1\"\n *     [width]=\"3\"\n *     [height]=\"2\"\n *     [data]=\"widget\"\n *     [class]=\"'card card-dashboard panel-title-regular panel-content-branded panel-title-overlay'\"\n *   >\n *     <c8y-dashboard-child-title>\n *       <span>World!</span>\n *     </c8y-dashboard-child-title>\n *     x: {{ cpWidget.x }}<br />\n *     y: {{ cpWidget.y }}<br />\n *     width: {{ cpWidget.width }}<br />\n *     height: {{ cpWidget.height }}<br />\n *   </c8y-dashboard-child>\n *   <c8y-dashboard-child\n *     #cpWidget2\n *     [isFrozen]=\"isFrozen\"\n *     [x]=\"8\"\n *     [y]=\"1\"\n *     [width]=\"4\"\n *     [height]=\"4\"\n *     [class]=\"'card card-dashboard panel-content-dark'\"\n *   >\n *     <c8y-dashboard-child-title>\n *       <span>Hello!</span>\n *     </c8y-dashboard-child-title>\n *     <c8y-dashboard-child-action>\n *       <a href=\"\" (click)=\"cpWidget2.isFrozen = !cpWidget2.isFrozen; (false)\">\n *         <i [c8yIcon]=\"cpWidget2.isFrozen ? 'lock' : 'unlock'\"></i> Toggle freeze\n *       </a>\n *     </c8y-dashboard-child-action>\n *     x: {{ cpWidget2.x }}<br />\n *     y: {{ cpWidget2.y }}<br />\n *     width: {{ cpWidget2.width }}<br />\n *     height: {{ cpWidget2.height }}<br />\n *   </c8y-dashboard-child>\n *\n *   <c8y-dashboard-child\n *     #cpWidget3\n *     [isFrozen]=\"isFrozen\"\n *     [x]=\"0\"\n *     [y]=\"3\"\n *     [width]=\"4\"\n *     [height]=\"4\"\n *     [class]=\"'card-dashboard panel-content-transparent'\"\n *   >\n *     <c8y-dashboard-child-title *ngIf=\"showTitle\">\n *       <span>Transparent!</span>\n *     </c8y-dashboard-child-title>\n *     <c8y-dashboard-child-action>\n *       <a href=\"\" (click)=\"showTitle = !showTitle; (false)\">\n *         <i [c8yIcon]=\"'heading'\"></i> Hide/show title\n *       </a>\n *     </c8y-dashboard-child-action>\n *     <c8y-dashboard-child-action>\n *       <a href=\"\" (click)=\"cpWidget3.isFrozen = !cpWidget3.isFrozen; (false)\">\n *         <i [c8yIcon]=\"cpWidget3.isFrozen ? 'lock' : 'unlock'\"></i> Toggle freeze\n *       </a>\n *     </c8y-dashboard-child-action>\n *     x: {{ cpWidget3.x }}<br />\n *     y: {{ cpWidget3.y }}<br />\n *     width: {{ cpWidget3.width }}<br />\n *     height: {{ cpWidget3.height }}<br />\n *   </c8y-dashboard-child>\n * </c8y-dashboard>\n * ```\n */\n@Component({\n  selector: 'c8y-dashboard',\n  templateUrl: './dashboard.component.html',\n  host: {\n    class: 'c8y-grid-dashboard dashboard-grid'\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DashboardComponent implements AfterContentInit {\n  /**\n   * All children in that dashboard.\n   */\n  @ContentChildren(forwardRef(() => DashboardChildComponent)) children: QueryList<\n    DashboardChildComponent\n  >;\n\n  /**\n   * The amount of columns on that dashboard.\n   */\n  @Input() columns = 12;\n\n  /**\n   * The spacing between each children in pixel.\n   */\n  @Input() gap = 12;\n\n  /**\n   * The amount of rows to dusplay. Set to auto to\n   * auto extend the rows.\n   */\n  @Input() rows: number | 'auto' = 'auto';\n\n  /**\n   * An event fired if the dashboard was changed.\n   */\n  @Output() dashboardChange = new EventEmitter<DashboardChange>();\n\n  dashboardRect;\n  private lastRow = 1;\n  private readonly DEFAULT_ROW_SIZE = 68;\n\n  /**\n   * The current column size.\n   */\n  get columnSize() {\n    return this.dashboardRect.width / this.columns;\n  }\n\n  /**\n   * The current row size.\n   */\n  get rowSize() {\n    return this.rows === 'auto' ? this.DEFAULT_ROW_SIZE : this.calculateRowSize();\n  }\n\n  /**\n   * Returns all positioning styles. Nasty workaround for that issue:\n   * https://github.com/angular/angular/issues/9343\n   */\n  @HostBinding('attr.style')\n  get inlineStyle() {\n    return this.sanitizer.bypassSecurityTrustStyle(\n      `\n        -ms-grid-columns: (1fr)[${this.columns}];\n        grid-template-columns: repeat(${this.columns}, 1fr);\n        ${this.rows !== 'auto' ? `grid-template-rows: repeat(${this.rows}, 1fr);` : ''}\n        grid-auto-rows: ${this.rowSize + this.gap}px;\n        -ms-grid-rows: (${this.rowSize + this.gap}px)[${\n        this.rows === 'auto' ? this.lastRow : this.rows\n      }];\n        margin: -${this.gap}px;\n      `\n    );\n  }\n\n  constructor(private element: ElementRef, private sanitizer: DomSanitizer) {}\n\n  ngAfterContentInit(): void {\n    this.onResize();\n    this.getLastRow();\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    this.updateRectSize();\n  }\n\n  /**\n   * Gets the last row\n   * (mainly for IE11 which doesn't support grid-auto-rows CSS property)\n   */\n  getLastRow() {\n    let lastRow = 1;\n    this.children.forEach(widget => {\n      if (lastRow < widget.y + widget.width) {\n        lastRow = widget.y + widget.width;\n      }\n    });\n    this.lastRow = lastRow + 1;\n  }\n\n  /**\n   * Updates the current rect size of the dashboard.\n   */\n  updateRectSize() {\n    const ele = this.element.nativeElement as HTMLElement;\n    this.dashboardRect =  ele.getBoundingClientRect();\n  }\n\n  emitChange(widget: DashboardChildComponent) {\n    this.dashboardChange.emit({ source: widget, children: this.children.toArray() });\n  }\n\n  private calculateRowSize() {\n    return this.dashboardRect.height / (this.rows as number);\n  }\n}\n","import { CdkDragMove } from '@angular/cdk/drag-drop';\nimport { sortBy } from 'lodash-es';\nimport { pipe } from 'rxjs';\nimport { distinctUntilChanged, expand, filter, map, tap } from 'rxjs/operators';\nimport { DashboardComponent } from './dashboard.component';\nimport {\n  DashboardChildDimension,\n  DashboardChildResizeDimension,\n  DashboardChildArrangement\n} from './dashboard.model';\nimport { DashboardChildComponent } from './dashboard-child.component';\n\nexport class DashboardChildChange {\n  child: DashboardChildComponent;\n  children: DashboardChildComponent[];\n  private dashboard: DashboardComponent;\n\n  private readonly MIN_WIDTH = 2;\n  private MIN_HEIGHT = 1;\n  private readonly PIXEL_SIZE_THRESHOLD = 10;\n\n  private diffX = 0;\n  private diffY = 0;\n\n  constructor(childToChange: DashboardChildComponent) {\n    this.dashboard = childToChange.dashboard;\n    this.children = childToChange.dashboard.children\n      ? childToChange.dashboard.children.filter(child => childToChange !== child)\n      : [];\n    this.child = childToChange;\n  }\n\n  get resize$() {\n    return this.child.dragSource.moved.pipe(\n      map(move => this.getPixelSize(move)),\n      tap(resizeDimension => this.setPixelSize(resizeDimension)),\n      map(resizeDimension => this.getDimensionSize(resizeDimension)),\n      distinctUntilChanged(\n        (prev, next) => prev.width === next.width && prev.height === next.height\n      ),\n      map(dimension => this.setDimension(dimension)),\n      this.arrangePipe()\n    );\n  }\n\n  get drag$() {\n    return this.child.dragSource.moved.pipe(\n      map(move => this.getDimensionPosition(move)),\n      filter(\n        dimension =>\n          dimension.x >= 0 &&\n          dimension.x <= this.dashboard.columns - this.child.width &&\n          dimension.y >= 0\n      ),\n      distinctUntilChanged((prev, next) => prev.x === next.x && prev.y === next.y),\n      this.arrangePipe()\n    );\n  }\n\n  findFreeDimension() {\n    let y = -1;\n    let x = 0;\n    let found = false;\n    const { width, height } = this.child;\n    if (width > this.dashboard.columns) {\n      throw new Error('The child does not fit on the current dashboard.');\n    }\n    do {\n      x = 0;\n      y++;\n      while (x + width <= this.dashboard.columns) {\n        if (this.getCollided({ x, y, width, height }).length === 0) {\n          found = true;\n          break;\n        }\n        x++;\n      }\n    } while (!found);\n    return { x, y, width, height } as DashboardChildDimension;\n  }\n\n  collapseUpAll(): void {\n    return sortBy([this.child, ...this.children], ['y']).forEach(w => {\n      const ds = new DashboardChildChange(w);\n      const newPosition = ds.collapseUp(w);\n      ds.setDimension(newPosition);\n    });\n  }\n\n  arrangeAll(arrange: DashboardChildArrangement) {\n    const { current, scan, spacing, origin } = arrange;\n    const collided = this.getCollided(current, sortBy(scan, ['y']));\n    return collided.map(child => {\n      const ds = new DashboardChildChange(child);\n      ds.setDimension({ ...child, y: spacing });\n      return {\n        current: child,\n        scan: scan.filter(w => w !== child),\n        spacing: child.y + child.height,\n        origin\n      };\n    });\n  }\n\n  private arrangePipe() {\n    return pipe(\n      map(\n        (dimension: DashboardChildDimension) =>\n          ({\n            current: dimension,\n            scan: this.children,\n            spacing: dimension.y + dimension.height,\n            origin: { ...dimension }\n          } as DashboardChildArrangement)\n      ),\n      expand((dimensions: DashboardChildArrangement) => this.arrangeAll(dimensions)),\n      map(({ origin }) => origin),\n      map(dimension => this.setDimension(dimension, true)),\n      tap(() => this.collapseUpAll()),\n      tap(() => this.dashboard.getLastRow())\n    );\n  }\n\n  private collapseUp(dimension: DashboardChildDimension) {\n    let { y } = dimension;\n    while (y > 0) {\n      if (this.getCollided({ ...dimension, y: y - 1 }).length !== 0) {\n        break;\n      }\n      y--;\n    }\n    return { ...dimension, y };\n  }\n\n  private setDimension(dimension: DashboardChildDimension, notIfColliding = false) {\n    if (notIfColliding && this.getCollided(dimension).length > 0) {\n      return;\n    }\n\n    this.child.x = dimension.x;\n    this.child.y = dimension.y;\n    if (\n      dimension.width >= this.MIN_WIDTH &&\n      dimension.x + dimension.width <= this.dashboard.columns\n    ) {\n      this.child.width = dimension.width;\n    } else if (dimension.width < this.MIN_WIDTH) {\n      dimension.width = this.MIN_WIDTH;\n    } else {\n      dimension.width = this.dashboard.columns - dimension.x;\n    }\n    if (dimension.height >= this.MIN_HEIGHT) {\n      this.child.height = dimension.height;\n    } else {\n      dimension.height = this.MIN_WIDTH;\n    }\n    return dimension;\n  }\n\n  private setPixelSize({ width, height }) {\n    if (width >= this.dashboard.columnSize * this.MIN_WIDTH - this.dashboard.gap) {\n      this.child.pxWidth = width + this.PIXEL_SIZE_THRESHOLD;\n    }\n    if (height >= this.dashboard.rowSize * this.MIN_HEIGHT - this.dashboard.gap) {\n      this.child.pxHeight = height + this.PIXEL_SIZE_THRESHOLD;\n    }\n  }\n\n  private getPixelSize(moveEvent: CdkDragMove) {\n    const draggedElement = moveEvent.source.element.nativeElement.parentNode as HTMLElement;\n    if (!this.diffX) {\n      const rect = draggedElement.getBoundingClientRect();\n      this.diffX =  rect.left;\n      this.diffY =  rect.top;\n    }\n    const { x, y } = moveEvent.pointerPosition;\n    const width = Math.round(x - this.diffX);\n    const height = Math.round(y - this.diffY);\n    return { width, height, pointer: { x, y } } as DashboardChildResizeDimension;\n  }\n\n  private getDimensionSize(resizePosition: DashboardChildResizeDimension) {\n    const { x, y } = this.child;\n    const ds = this.dashboard.dashboardRect;\n    const column = this.dashboard.columnSize;\n    const row = this.dashboard.rowSize + this.dashboard.gap;\n    const width =\n      Math.round((resizePosition.pointer.x - ds.left + this.dashboard.gap) / column) - x;\n    const height = Math.round((resizePosition.pointer.y - ds.top + this.dashboard.gap) / row) - y;\n    return { x, y, width, height } as DashboardChildDimension;\n  }\n\n  private getDimensionPosition(moveEvent: CdkDragMove) {\n    const draggedElement = moveEvent.source.element.nativeElement.nextElementSibling;\n    if (!this.diffX) {\n      const rect = draggedElement.getBoundingClientRect();\n      this.diffX =  moveEvent.pointerPosition.x - rect.left;\n      this.diffY =  moveEvent.pointerPosition.y - rect.top;\n    }\n\n    const left = moveEvent.pointerPosition.x - this.diffX;\n    const top = moveEvent.pointerPosition.y - this.diffY;\n    const { width, height } = this.child;\n    const ds = this.dashboard.dashboardRect;\n    const column = this.dashboard.columnSize;\n    const row = this.dashboard.rowSize + this.dashboard.gap / 2;\n    const x = Math.round((left - ds.left) / column);\n    const y = Math.round((top - ds.top) / row);\n    return { x, y, width, height } as DashboardChildDimension;\n  }\n\n  private doesCollide(a: DashboardChildDimension, b: DashboardChildDimension) {\n    if (b.x === undefined) {\n      return false;\n    }\n    return !(\n      a.y + a.height - 1 < b.y ||\n      a.y > b.y + b.height - 1 ||\n      a.x + a.width - 1 < b.x ||\n      a.x > b.x + b.width - 1\n    );\n  }\n\n  private getCollided(currentDimension: DashboardChildDimension, dimensions = this.children) {\n    const collided = dimensions.filter(dimension => this.doesCollide(currentDimension, dimension));\n    return collided;\n  }\n}\n","import { CdkDrag, CdkDragEnd, CdkDragStart } from '@angular/cdk/drag-drop';\nimport {\n  Component,\n  forwardRef,\n  HostBinding,\n  Inject,\n  Input,\n  ContentChildren,\n  Output,\n  EventEmitter,\n  ElementRef\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Subscription } from 'rxjs';\nimport { DashboardComponent } from './dashboard.component';\nimport { DashboardChildDimension, Widget } from './dashboard.model';\nimport { DashboardChildChange } from './dashboard-child-change';\nimport { DashboardChildActionComponent } from './dashboard-child-action.component';\n\n/**\n * A dashboard child allows to position elements\n * correctly on a grid. The user can then resize and\n * rearrange the elements, as long as they are not `frozen`.\n *\n * By setting `c8y-dashboard-child-actions` and\n * `c8y-dashboard-child-title` on the element you can add\n * custom actions or a custom title to the current child.\n *\n * By adding the correct branded classes, you can define\n * the look and feel of the child. By default it is displayed\n * as a card.\n *\n * Example:\n *\n * ```html\n *   <c8y-dashboard-child\n *     #cpWidget3\n *     [isFrozen]=\"isFrozen\"\n *     [x]=\"0\"\n *     [y]=\"3\"\n *     [width]=\"4\"\n *     [height]=\"4\"\n *     [class]=\"'card-dashboard panel-content-transparent'\"\n *   >\n *     <c8y-dashboard-child-title *ngIf=\"showTitle\">\n *       <span>Transparent!</span>\n *     </c8y-dashboard-child-title>\n *     <c8y-dashboard-child-action>\n *       <a href=\"\" (click)=\"showTitle = !showTitle; (false)\">\n *         <i [c8yIcon]=\"'heading'\"></i> Hide/show title\n *       </a>\n *     </c8y-dashboard-child-action>\n *     <c8y-dashboard-child-action>\n *       <a href=\"\" (click)=\"cpWidget3.isFrozen = !cpWidget3.isFrozen; (false)\">\n *         <i [c8yIcon]=\"cpWidget3.isFrozen ? 'lock' : 'unlock'\"></i> Toggle freeze\n *       </a>\n *     </c8y-dashboard-child-action>\n *     x: {{ cpWidget3.x }}<br />\n *     y: {{ cpWidget3.y }}<br />\n *     width: {{ cpWidget3.width }}<br />\n *     height: {{ cpWidget3.height }}<br />\n *   </c8y-dashboard-child>\n * ```\n */\n@Component({\n  selector: 'c8y-dashboard-child',\n  templateUrl: './dashboard-child.component.html',\n  host: {\n    class: 'dashboard-grid-child'\n  }\n})\nexport class DashboardChildComponent implements DashboardChildDimension {\n  @ContentChildren(DashboardChildActionComponent) actions = [];\n  dragSource: CdkDrag;\n  isResize = false;\n  isDragging = false;\n  klasses = {};\n\n  _pxWidth = '100%';\n  _pxHeight = '100%';\n\n  /**\n   * The x position of the child.\n   */\n  @Input() x;\n\n  /**\n   * The y position of the child.\n   */\n  @Input() y;\n\n  /**\n   * The width of the component in grid-columns.\n   */\n  @Input() width = 1;\n\n  /**\n   * The height of the component in grid-rows.\n   */\n  @Input() height = 1;\n\n  /**\n   * The data object can be used as a dataTransfer object for events of the child.\n   */\n  @Input() data: Widget | any;\n\n  /**\n   * The margin of the child in pixel.\n   */\n  @Input() margin = 12;\n\n  /**\n   * If a dashboard is frozen, all children cannot be moved\n   * or resized.\n   */\n  @Input() isFrozen = false;\n\n  /**\n   * The child content is initialized, as soon it is scrolled into viewport\n   */\n  @Input() useIntersection = false;\n\n  /**\n   * An event fired if a child change is started (dragging or resizing)\n   */\n  @Output() changeStart = new EventEmitter<DashboardChildComponent>();\n\n  /**\n   * An event fired if a child change is ended\n   */\n  @Output() changeEnd = new EventEmitter<DashboardChildComponent>();\n\n  /**\n   * All classes added to this child\n   */\n  @Input()\n  class: string[] | { [key: string]: boolean } = {};\n\n  /**\n   * Updates the pixel width of the child (used for resizing)\n   */\n  set pxWidth(value) {\n    this._pxWidth = `${value}px`;\n  }\n\n  /**\n   * Updates the pixel height of the child (used for resizing)\n   */\n  set pxHeight(value) {\n    this._pxHeight = `${value}px`;\n  }\n\n  /**\n   * An indicator if the child is intersected (that mean visible for the user)\n   */\n  intersected = false;\n\n  /**\n   * nasty workaround for that issue:\n   * https://github.com/angular/angular/issues/9343\n   */\n  @HostBinding('attr.style')\n  get inlineStyle() {\n    return this.sanitizer.bypassSecurityTrustStyle(`\n    grid-column-start: ${this.x + 1};\n    -ms-grid-column: ${this.x + 1};\n    grid-row-start: ${this.y + 1};\n    -ms-grid-row: ${this.y + 1};\n    grid-column-end: span ${this.width};\n    -ms-grid-column-span: ${this.width};\n    grid-row-end: span ${this.height};\n    -ms-grid-row-span: ${this.height};\n    display: block;\n    margin: ${this.margin || 12}px;\n    `);\n  }\n\n  /**\n   * The observable subscription which is listen to\n   * on changes (drag or resize).\n   */\n  changeSubscription: Subscription;\n\n  constructor(\n    @Inject(forwardRef(() => DashboardComponent)) public dashboard: DashboardComponent,\n    private sanitizer: DomSanitizer,\n    private element: ElementRef\n  ) {}\n\n  ngOnChanges(): void {\n    this.klasses = {\n      card: true,\n      'card-dashboard': true,\n      disabled: this.isFrozen,\n      'on-resize': this.isResize,\n      ...this.class\n    };\n  }\n\n  ngOnInit(): void {\n    if (this.x === undefined || this.y === undefined) {\n      setTimeout(() => this.setDynamicDimension());\n    }\n    if (this.useIntersection && 'IntersectionObserver' in window) {\n      const intersectionObserver = new IntersectionObserver(\n        event => (this.intersected = this.childInView(event[0], intersectionObserver))\n      );\n      intersectionObserver.observe(this.element.nativeElement);\n    } else {\n      this.intersected = true;\n    }\n  }\n\n  setDynamicDimension() {\n    const ds = new DashboardChildChange(this);\n    const { x, y } = ds.findFreeDimension();\n    this.x = x;\n    this.y = y;\n  }\n\n  resizeStarted($event: CdkDragStart) {\n    this.isResize = true;\n    this.dashboard.updateRectSize();\n    this.dragSource = $event.source;\n    const positioning = new DashboardChildChange(this);\n    this.changeSubscription = positioning.resize$.subscribe();\n    this.changeStart.emit(this);\n    this.ngOnChanges();\n  }\n\n  dragStarted($event: CdkDragStart) {\n    this.isDragging = true;\n    this.dashboard.updateRectSize();\n    this.dragSource = $event.source;\n    const positioning = new DashboardChildChange(this);\n    this.changeSubscription = positioning.drag$.subscribe();\n    this.changeStart.emit(this);\n  }\n\n  reset($event?: CdkDragEnd) {\n    this.isResize = false;\n    this.isDragging = false;\n    this._pxWidth = '100%';\n    this._pxHeight = '100%';\n    this.ngOnChanges();\n    if ($event) {\n      $event.source.reset();\n    }\n    if (this.changeSubscription) {\n      this.changeSubscription.unsubscribe();\n      this.dashboard.emitChange(this);\n      this.changeEnd.emit(this);\n    }\n  }\n\n  private childInView(event, observer) {\n    if (event.isIntersecting) {\n      observer.unobserve(event.target);\n      return true;\n    }\n    return false;\n  }\n}\n","import { Component, EventEmitter, Input, Output, SimpleChanges } from '@angular/core';\nimport { DashboardSettings, Widget, WidgetChange, DashboardChange } from './dashboard.model';\nimport { DashboardComponent } from './dashboard.component';\n\n@Component({\n  selector: 'c8y-widgets-dashboard',\n  templateUrl: './widgets-dashboard.component.html',\n  host: {\n    style: `\n      display: block;\n    `,\n    class: 'dashboard c8y-grid-dashboard'\n  }\n})\nexport class WidgetsDashboardComponent {\n  @Input()\n  widgets: Widget[];\n\n  @Input()\n  context: any;\n\n  @Input()\n  contextDashboard: any;\n\n  @Input('settings')\n  set _settings(settings: Partial<DashboardSettings>) {\n    this.settings = { ...this.settings, ...settings };\n  }\n  settings: DashboardSettings = {\n    isFrozen: false,\n    isDisabled: false,\n    widgetMargin: 12,\n    translateWidgetTitle: false,\n    defaultHeight: 4,\n    defaultWidth: 4,\n    allowFullscreen: false,\n    canDelete: true,\n    isLoading: false,\n  };\n\n  @Output()\n  onAddWidget: EventEmitter<DashboardComponent> = new EventEmitter();\n\n  @Output()\n  onEditWidget: EventEmitter<WidgetChange> = new EventEmitter();\n\n  @Output()\n  onDeleteWidget: EventEmitter<WidgetChange> = new EventEmitter();\n\n  @Output()\n  onChangeDashboard: EventEmitter<DashboardChange> = new EventEmitter();\n\n  @Output()\n  onEditDashboard: EventEmitter<DashboardComponent> = new EventEmitter();\n\n  @Output()\n  onDeleteDashboard: EventEmitter<DashboardComponent> = new EventEmitter();\n\n  @Output()\n  onFreeze: EventEmitter<DashboardSettings> = new EventEmitter();\n\n  @Output()\n  onChangeStart: EventEmitter<WidgetChange> = new EventEmitter();\n\n  @Output()\n  onChangeEnd: EventEmitter<WidgetChange> = new EventEmitter();\n\n  toggleFullscreen() {\n    const elem = document.body as any;\n    const doc = document as any;\n    if (!this.fullScreen()) {\n      if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n      } else if (elem.msRequestFullscreen) {\n        elem.msRequestFullscreen();\n      } else if (elem.mozRequestFullScreen) {\n        elem.mozRequestFullScreen();\n      } else if (elem.webkitRequestFullscreen) {\n        elem.webkitRequestFullscreen((Element as any).ALLOW_KEYBOARD_INPUT);\n      }\n    } else if (doc.exitFullscreen) {\n      doc.exitFullscreen();\n    } else if (doc.msExitFullscreen) {\n      doc.msExitFullscreen();\n    } else if (doc.mozCancelFullScreen) {\n      doc.mozCancelFullScreen();\n    } else if (doc.webkitExitFullscreen) {\n      doc.webkitExitFullscreen();\n    }\n  }\n\n  fullScreen() {\n    const doc: any = document;\n    return !!(\n      doc.fullscreenElement ||\n      doc.mozFullScreenElement ||\n      doc.webkitFullscreenElement ||\n      doc.msFullscreenElement\n    );\n  }\n}\n","import { Directive, Input, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[c8y-guide-href]'\n})\nexport class GuideHrefDirective {\n  @Input('c8y-guide-href')\n  c8yGuideHref;\n\n  private htmlAnchor: HTMLAnchorElement;\n\n  set baseHref(href) {\n    this.htmlAnchor.href = `${href}/${this.c8yGuideHref}`;\n  }\n\n  constructor(private elementRef: ElementRef) {\n    this.htmlAnchor = this.elementRef.nativeElement as HTMLAnchorElement;\n    if (!this.htmlAnchor.hasAttribute('target')) {\n      this.htmlAnchor.setAttribute('target', '_blank');\n    }\n  }\n}\n","import { Component, OnInit, ContentChildren, QueryList } from '@angular/core';\nimport { GuideHrefDirective } from './guide-href.directive';\nimport { DocsService } from './docs.service';\n\n@Component({\n  selector: '[c8y-guide-docs]',\n  templateUrl: './guide-docs.component.html'\n})\nexport class GuideDocsComponent implements OnInit {\n  baseUrl: string;\n  @ContentChildren(GuideHrefDirective, { descendants: true }) links: QueryList<GuideHrefDirective>;\n\n  constructor(private docs: DocsService) {}\n\n  ngOnInit(): void {\n    this.baseUrl = this.docs.getBaseUrl();\n  }\n\n  ngAfterViewInit(): void {\n    this.links.forEach(guide => {\n      guide.baseHref = this.baseUrl;\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DocsService } from './docs.service';\nimport { GuideHrefDirective } from './guide-href.directive';\nimport { GuideDocsComponent } from './guide-docs.component';\n\n@NgModule({\n  declarations: [\n    GuideHrefDirective,\n    GuideDocsComponent\n  ],\n  imports: [CommonModule],\n  exports: [\n    GuideHrefDirective,\n    GuideDocsComponent\n  ],\n  providers: [DocsService],\n})\nexport class DocsModule {}\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { NgModule } from '@angular/core';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { ActionBarModule } from '../action-bar/action-bar.module';\nimport { CommonModule } from '../common/common.module';\nimport { DynamicComponentModule } from '../dynamic-component/dynamic-component.module';\nimport { DashboardChildActionComponent } from './dashboard-child-action.component';\nimport { DashboardChildTitleComponent } from './dashboard-child-title.component';\nimport { DashboardChildComponent } from './dashboard-child.component';\nimport { DashboardComponent } from './dashboard.component';\nimport { WidgetsDashboardComponent } from './widgets-dashboard.component';\nimport { HeaderModule } from '../header/header.module';\nimport { DocsModule } from '../docs/docs.module';\n\n@NgModule({\n  declarations: [\n    DashboardChildComponent,\n    DashboardComponent,\n    DashboardChildTitleComponent,\n    DashboardChildActionComponent,\n    WidgetsDashboardComponent\n  ],\n  imports: [\n    CommonModule,\n    ActionBarModule,\n    DynamicComponentModule,\n    DragDropModule,\n    BsDropdownModule.forRoot(),\n    HeaderModule,\n    DocsModule\n  ],\n  exports: [\n    DashboardComponent,\n    DashboardChildComponent,\n    DashboardChildTitleComponent,\n    DashboardChildActionComponent,\n    WidgetsDashboardComponent\n  ]\n})\nexport class DashboardModule {}\n","/* tslint:disable:max-classes-per-file */\n\nimport { Directive, TemplateRef, Type } from '@angular/core';\n\nimport { Column } from '../data-grid.model';\n\nexport interface CellRendererDef {\n  template: TemplateRef<any>;\n}\n\nexport interface CellRendererSpec {\n  renderer: TemplateRef<CellRendererContext> | Type<any>;\n  context: CellRendererContext;\n}\n\nexport class CellRendererContext {\n  value: any;\n  item?: any;\n  property: Column;\n}\n\n@Directive({ selector: '[c8yCellRendererDef]' })\nexport class CellRendererDefDirective implements CellRendererDef {\n  constructor(public template: TemplateRef<any>) {}\n}\n\n@Directive({ selector: '[c8yHeaderCellRendererDef]' })\nexport class HeaderCellRendererDefDirective implements CellRendererDef {\n  constructor(public template: TemplateRef<any>) {}\n}\n","/* tslint:disable:max-classes-per-file */\n\nimport { Directive, TemplateRef, Type } from '@angular/core';\nimport { Column, FilterPredicateFunction } from '../data-grid.model';\n\nexport interface FilteringFormRendererSpec {\n  renderer: TemplateRef<FilteringFormRendererContext> | Type<any>;\n  context: FilteringFormRendererContext;\n}\n\nexport class FilteringFormRendererContext {\n  property: Column;\n  applyFilter: (filteringModifier: FilteringModifier) => void;\n  resetFilter: () => void;\n}\n\nexport interface FilteringModifier {\n  filterPredicate?: string | FilterPredicateFunction;\n  externalFilterQuery?: string | object;\n}\n\n@Directive({ selector: '[c8yFilteringFormRendererDef]' })\nexport class FilteringFormRendererDefDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { ContentChild, Directive, Input } from '@angular/core';\n\nimport { CellRendererDefDirective, HeaderCellRendererDefDirective } from './cell-renderer';\nimport { FilteringFormRendererDefDirective } from './filtering-form-renderer';\n\n@Directive({ selector: 'c8y-column' })\nexport class ColumnDirective {\n  @Input() name: string;\n\n  @ContentChild(CellRendererDefDirective, { static: false })\n  cellRendererDef: CellRendererDefDirective;\n\n  @ContentChild(HeaderCellRendererDefDirective, { static: false })\n  headerCellRendererDef: HeaderCellRendererDefDirective;\n\n  @ContentChild(FilteringFormRendererDefDirective, { static: false })\n  filteringFormRendererDef: FilteringFormRendererDefDirective;\n}\n","import { CollectionViewer, DataSource } from '@angular/cdk/collections';\nimport { IResultList } from '@c8y/client';\nimport { chunk, flow, get, isNil, mapValues, omitBy, orderBy, pick } from 'lodash-es';\nimport { BehaviorSubject, defer, from, isObservable, Observable, of, Subject } from 'rxjs';\nimport { catchError, finalize, map, switchMap, tap } from 'rxjs/operators';\nimport { Column, DataSourceStats, ServerSideDataResult } from './data-grid.model';\n\nexport class GridDataSource implements DataSource<object> {\n  loading$: Observable<boolean>;\n  data$: Observable<object[]>;\n  stats$: Observable<DataSourceStats>;\n  selection$: Observable<any>;\n  resultList$: Observable<IResultList<object>>;\n\n  private loadingSubject = new BehaviorSubject<boolean>(false);\n  private dataSourceSubject = new BehaviorSubject<object[]>([]);\n  private dataStatsSubject = new BehaviorSubject<DataSourceStats>({\n    size: 0,\n    filteredSize: 0,\n    currentPage: 0,\n    currentPageSize: 0,\n    firstPageSize: 0\n  });\n  private dataSelectionSubject = new BehaviorSubject<any>({\n    filteredDataIds: []\n  });\n  private resultListSubject = new Subject<IResultList<object>>();\n\n  constructor() {\n    this.loading$ = this.loadingSubject.asObservable();\n    this.data$ = this.dataSourceSubject.asObservable();\n    this.stats$ = this.dataStatsSubject.asObservable();\n    this.selection$ = this.dataSelectionSubject.asObservable();\n    this.resultList$ = this.resultListSubject.asObservable();\n  }\n\n  connect(collectionViewer: CollectionViewer): Observable<object[]> {\n    return this.data$;\n  }\n\n  disconnect(collectionViewer: CollectionViewer): void {\n    this.loadingSubject.complete();\n    this.dataSourceSubject.complete();\n    this.dataStatsSubject.complete();\n    this.dataSelectionSubject.complete();\n  }\n\n  loadData({\n    rows,\n    columns,\n    pagination,\n    searchText,\n    serverSideDataCallback,\n    selectable,\n    selectionPrimaryKey,\n    infiniteScroll,\n    reload = false\n  }) {\n    const clientSideData$ = this.toObservable(rows).pipe(\n      map(initialData => {\n        let filteredSize = 0;\n        let filteredDataIds = [];\n\n        const transformedData = flow(\n          data => this.doClientSideSearch({ data, columns, searchText }),\n          data => this.doClientSideFiltering({ data, columns }),\n          data => this.doClientSideSorting({ data, columns }),\n          data => {\n            filteredSize = data.length;\n            filteredDataIds = selectable\n              ? data.map(item => item[selectionPrimaryKey])\n              : filteredDataIds;\n\n            return data;\n          },\n          data => this.doClientSidePagination({ data, pagination })\n        )(initialData);\n\n        this.dataStatsSubject.next({\n          size: initialData.length,\n          filteredSize,\n          currentPage: pagination.currentPage,\n          currentPageSize: transformedData.length,\n          firstPageSize: pagination.pageSize\n        });\n        this.dataSelectionSubject.next({ filteredDataIds });\n\n        return transformedData;\n      })\n    );\n\n    const serverSideData$ = defer(() =>\n      this.toObservable(\n        serverSideDataCallback({\n          columns,\n          searchText,\n          pagination,\n          selection: { enabled: selectable, primaryKey: selectionPrimaryKey }\n        })\n      )\n    ).pipe(\n      map((result: ServerSideDataResult) => {\n        const { data, paging, size, filteredSize, filteredDataIds } = result;\n\n        this.dataStatsSubject.next({\n          size,\n          filteredSize,\n          currentPage: paging.currentPage,\n          currentPageSize: data.length,\n          nextPage: paging.nextPage,\n          firstPageSize: paging.pageSize\n        });\n        this.dataSelectionSubject.next({ filteredDataIds: filteredDataIds || [] });\n        this.resultListSubject.next(result);\n\n        return data;\n      })\n    );\n\n    const data$ = typeof serverSideDataCallback === 'function' ? serverSideData$ : clientSideData$;\n\n    of([])\n      .pipe(\n        tap(() => this.loadingSubject.next(true)),\n        switchMap(() => data$),\n        catchError(err => {\n          this.dataStatsSubject.next({\n            size: 0,\n            filteredSize: 0,\n            currentPage: 0,\n            currentPageSize: 0,\n            firstPageSize: 0\n          });\n          this.dataSelectionSubject.next({ filteredDataIds: [] });\n          return of([]);\n        }),\n        finalize(() => this.loadingSubject.next(false))\n      )\n      .subscribe(result => {\n        const data =\n          infiniteScroll && !reload ? [...this.dataSourceSubject.value, ...result] : result;\n        this.dataSourceSubject.next(data);\n      });\n  }\n\n  resolveValue(x, path) {\n    return get(x, path);\n  }\n\n  resolveFunction(x) {\n    return typeof x === 'function' ? x() : x;\n  }\n\n  normalizeNil(x) {\n    return isNil(x) ? '' : x;\n  }\n\n  private doClientSideFiltering({ data, columns }) {\n    return columns.reduce((result, column) => {\n      const { filterPredicate } = column;\n\n      if (typeof filterPredicate === 'string') {\n        return this.doClientSideSearch({\n          data: result,\n          columns: [column],\n          searchText: filterPredicate\n        });\n      }\n\n      if (typeof filterPredicate === 'function') {\n        return result.filter(item => filterPredicate(item, column.path));\n      }\n\n      return result;\n    }, data);\n  }\n\n  private doClientSideSearch({ data, columns, searchText }) {\n    const propPaths = columns.map(({ path }) => path).filter(column => !isNil(column));\n\n    const regexSearch = this.createRegexSearch(searchText);\n\n    return data.filter(item => {\n      const itemWithResolvedValues = flow(\n        x => pick(x, propPaths),\n        x => mapValues(x, this.resolveFunction),\n        x => omitBy(x, isNil)\n      )(item);\n\n      const cellValues = Object.values(itemWithResolvedValues);\n\n      return cellValues.some(cellValue => regexSearch.test(cellValue.toString()));\n    });\n  }\n\n  private doClientSideSorting({ data, columns }) {\n    const actives: Column[] = columns.filter(({ sortOrder }: Column) => !!sortOrder);\n\n    const sortingState = {\n      paths: actives.map(({ path }) => path),\n      orders: actives.map(({ sortOrder }) => sortOrder)\n    };\n\n    return orderBy(data, sortingState.paths, sortingState.orders);\n  }\n\n  private doClientSidePagination({ data, pagination }) {\n    return pagination\n      ? get(chunk(data, pagination.pageSize), pagination.currentPage - 1, [])\n      : data;\n  }\n\n  private createRegexSearch(filterValue) {\n    return RegExp(escapeRegExpPattern(filterValue), 'i');\n  }\n\n  private toObservable(x): Observable<any> {\n    return isObservable(x) ? x : x instanceof Promise ? from(x) : of(x);\n  }\n}\n\n/**\n *\n * @param string pattern Regex pattern.\n * @return string The escaped regex.\n * @see https://stackoverflow.com/a/3561711/2013891\n */\nfunction escapeRegExpPattern(pattern = '') {\n  return pattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n","import { gettext } from '../i18n/gettext';\nimport { formatDate } from '@angular/common';\n// TODO remove  when c8y-icon will works\n\nexport const deviceAvailabilityIconMap = {\n  sendData: {\n    AVAILABLE: {\n      icon: 'long-arrow-right',\n      class: 'statusOk'\n    },\n    UNAVAILABLE: {\n      icon: 'long-arrow-right',\n      class: 'statusNok'\n    },\n    UNKNOWN: {\n      icon: 'long-arrow-right',\n      class: 'statusUnknown'\n    },\n    NOT_MONITORED: {\n      icon: 'long-arrow-right',\n      class: 'statusUnknown'\n    }\n  },\n  push: {\n    CONNECTED: {\n      icon: 'long-arrow-left',\n      class: 'statusOk'\n    },\n    DISCONNECTED: {\n      icon: 'long-arrow-left',\n      class: 'statusUnknown'\n    },\n    UNKNOWN: {\n      icon: 'long-arrow-left',\n      class: 'statusUnknown'\n    },\n    MAINTENANCE: {\n      icon: 'wrench',\n      class: 'statusAlert'\n    }\n  },\n  device: {\n    MAINTENANCE: {\n      icon: 'wrench',\n      class: 'statusAlert'\n    }\n  }\n};\n\nexport const tooltips = {\n         sendStatusConnected: (lastMessage, translateService) => {\n           const date = formatDate(new Date(lastMessage), 'medium', translateService.currentLang);\n           return translateService.instant(gettext('Device last request:\\n{{date}}'), { date });\n         },\n         sendStatusDisconnected: gettext('Connection not monitored'),\n         pushStatusConnected: gettext('Connection to device established'),\n         pushStatusDisconnected: gettext(\n           'Connection to device not established (not supported by device or no connectivity)'\n         ),\n         maintenance: gettext('Device is under maintenance')\n       };\n\nexport enum PushStatusLabels {\n  CONNECTED = gettext('Push connection: active'),\n  DISCONNECTED = gettext('Push connection: inactive'),\n  UNKNOWN = gettext('Push connection: inactive')\n}\n\nexport enum SendStatusLabels {\n  AVAILABLE = gettext('Send connection: online'),\n  NOT_MONITORED = gettext('Send connection: not monitored'),\n  UNAVAILABLE = gettext('Send connection: offline'),\n  UNKNOWN = gettext('Send connection status unknown'),\n  MAINTENANCE = gettext('Device is under maintenance')\n}\n","import { CdkHeaderCell } from '@angular/cdk/table';\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ContentChildren,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n  ViewContainerRef\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { IResultList, Paging } from '@c8y/client';\nimport { flow, get, parseInt as _parseInt, union, without } from 'lodash-es';\nimport { combineLatest, Subject } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  first,\n  mergeMap,\n  take,\n  takeUntil,\n  tap\n} from 'rxjs/operators';\nimport { LoadMoreComponent } from '../common/load-more.component';\nimport { LoadMoreMode } from '../common/public-api';\nimport { gettext } from '../i18n/gettext';\nimport { CellRendererSpec } from './column/cell-renderer';\nimport { ColumnDirective } from './column/column.directive';\nimport { FilteringFormRendererSpec, FilteringModifier } from './column/filtering-form-renderer';\nimport {\n  ActionControl,\n  BuiltInActionType,\n  BulkActionControl,\n  Column,\n  ColumnDataType,\n  DataGrid,\n  DataSourceStats,\n  DisplayOptions,\n  FilteringActionType,\n  minColumnGridTrackSize,\n  Pagination,\n  ratiosByColumnTypes,\n  Row,\n  ServerSideDataCallback,\n  SortOrder,\n  SpecialColumnName\n} from './data-grid.model';\nimport { GridDataSource } from './grid-data-source';\n\n@Component({\n  selector: 'c8y-data-grid',\n  templateUrl: './data-grid.component.html'\n})\nexport class DataGridComponent implements DataGrid, OnChanges, AfterViewInit {\n  @Input() title: string = gettext('Items');\n  @Input() loadMoreItemsLabel: string = gettext('Load more items');\n  @Input() loadingItemsLabel: string = gettext('Loading items…');\n  @Input() noMatchingItemsLabel: string = gettext('No matching items.');\n\n  columns: Column[];\n  @Input('columns')\n  set _columns(columns) {\n    this.columns = columns || [];\n  }\n\n  dataSource = new GridDataSource();\n  rows: Row[];\n  @Input('rows')\n  set _rows(rows) {\n    this.rows = rows || [];\n  }\n\n  filteringLabelsParams = {\n    filteredItemsCount: 0,\n    allItemsCount: 0\n  };\n\n  pagination: Pagination;\n  paginationLabelParams = {\n    pageFirstItemIdx: 0,\n    pageLastItemIdx: 0,\n    itemsTotal: 0\n  };\n  readonly possiblePageSizes: number[] = [10, 15, 20, 30, 50];\n  readonly minPossiblePageSize = Math.min(...this.possiblePageSizes);\n  @Input('pagination')\n  set _pagination(pagination) {\n    this.pagination = pagination;\n    const pageSize = get(this.pagination, 'pageSize');\n\n    if (\n      pageSize &&\n      !this.possiblePageSizes.find(possiblePageSize => possiblePageSize === pageSize)\n    ) {\n      this.pagination = { ...this.pagination, pageSize: 10 };\n    }\n  }\n\n  infiniteScroll: LoadMoreMode;\n  @Input('infiniteScroll')\n  set _infiniteScroll(infiniteScroll: LoadMoreMode) {\n    this.infiniteScroll = infiniteScroll;\n  }\n\n  serverSideDataCallback: ServerSideDataCallback;\n  @Input('serverSideDataCallback')\n  set _serverSideDataCallback(serverSideDataCallback) {\n    this.serverSideDataCallback = serverSideDataCallback;\n  }\n\n  selectable = false;\n  @Input('selectable')\n  set _selectable(selectable) {\n    this.selectable = selectable;\n  }\n\n  selectionPrimaryKey = 'id';\n  @Input('selectionPrimaryKey')\n  set _selectionPrimaryKey(selectionPrimaryKey) {\n    this.selectionPrimaryKey = selectionPrimaryKey;\n  }\n\n  displayOptions: DisplayOptions = {\n    striped: true,\n    bordered: false,\n    gridHeader: true\n  };\n  @Input('displayOptions')\n  set _displayOptions(displayOptions) {\n    this.displayOptions = { ...this.displayOptions, ...displayOptions };\n  }\n\n  actionControls: ActionControl[];\n  @Input('actionControls')\n  set _actionControls(actionControls) {\n    this.actionControls = actionControls || [];\n  }\n\n  bulkActionControls: BulkActionControl[];\n  @Input('bulkActionControls')\n  set _bulkActionControls(bulkActionControls) {\n    this.bulkActionControls = bulkActionControls || [];\n  }\n\n  @Output() rowMouseOver = new EventEmitter<object>();\n  @Output() rowMouseLeave = new EventEmitter<object>();\n  @Output() rowClick = new EventEmitter<object>();\n\n  @Output() itemsSelect = new EventEmitter<string[]>();\n\n  @ContentChildren(ColumnDirective) columnRenderers: QueryList<ColumnDirective>;\n\n  @ViewChild('scroll', { static: true }) scrollContainer: ElementRef;\n\n  @ViewChild('infiniteScrollContainer', { static: false, read: ViewContainerRef })\n  infiniteScrollContainer: ViewContainerRef;\n\n  loadMoreComponent: LoadMoreComponent;\n\n  columnNames = [];\n\n  styles = {\n    tableCursor: 'auto',\n    gridTemplateColumns: undefined,\n    gridInfiniteScrollColumn: undefined\n  };\n\n  searchText$ = new EventEmitter<string>();\n  searchText = '';\n  filteringApplied = false;\n  totalPagesCount = Infinity;\n\n  selectedItemIds: string[] = [];\n  currentPageSelectionState = {\n    allSelected: false,\n    allDeselected: true\n  };\n\n  builtInActionType = {\n    Edit: BuiltInActionType.Edit,\n    Delete: BuiltInActionType.Delete,\n    Export: BuiltInActionType.Export\n  };\n\n  resizeHandleMouseDown$ = new EventEmitter<any>();\n  resizeHandleContainerMouseMove$ = new EventEmitter<any>();\n  resizeHandleContainerMouseUp$ = new EventEmitter<any>();\n  private headerBeingResized: {\n    columnName: string;\n    el: HTMLElement;\n  };\n  @ViewChildren(CdkHeaderCell, { read: ElementRef }) private thRefs: QueryList<ElementRef>;\n  private thEls;\n\n  private recreateLoadMoreComponent: boolean;\n\n  private unsubscribe$ = new Subject<any>();\n\n  constructor(\n    private sanitizer: DomSanitizer,\n    private hostRef: ElementRef,\n    private cd: ChangeDetectorRef,\n    private cfr: ComponentFactoryResolver\n  ) {}\n\n  ngOnInit() {\n    this.searchText$\n      .pipe(\n        takeUntil(this.unsubscribe$),\n        debounceTime(300),\n        distinctUntilChanged(),\n        tap(searchText => {\n          this.searchText = searchText;\n        })\n      )\n      .subscribe(() => {\n        this.reload();\n      });\n\n    if (this.selectable) {\n      combineLatest(this.dataSource.data$, this.itemsSelect.asObservable())\n        .pipe(takeUntil(this.unsubscribe$))\n        .subscribe(([data]) => {\n          const currentPageEmpty = data.length === 0;\n\n          this.currentPageSelectionState = {\n            allSelected: currentPageEmpty ? false : data.every(item => this.isItemSelected(item)),\n            allDeselected: currentPageEmpty ? true : data.every(item => !this.isItemSelected(item))\n          };\n        });\n    }\n    this.dataSource.stats$.pipe(takeUntil(this.unsubscribe$)).subscribe(stats => {\n      this.createLoadMoreComponent(stats);\n      this.updateFilteringLabelsParams(stats);\n      this.updatePaginationLabelParams(stats);\n    });\n  }\n\n  ngOnChanges() {\n    this.updateColumns();\n    this.loadData();\n  }\n\n  ngAfterViewInit() {\n    this.updateGridColumnsSize();\n    this.thEls = this.thRefs.toArray().map(({ nativeElement }) => nativeElement);\n    this.setupResizeHandle();\n  }\n\n  ngOnDestroy() {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n  trackByName(index, item) {\n    return item.name;\n  }\n\n  resolveCellValue(row, path) {\n    return flow([\n      x => this.dataSource.resolveValue(x, path),\n      this.dataSource.resolveFunction,\n      this.dataSource.normalizeNil\n    ])(row);\n  }\n\n  changeSortOrder(columnName) {\n    const column = this.columns.find(({ name }) => name === columnName);\n\n    if (column) {\n      const { sortOrder } = column;\n\n      if (!sortOrder) {\n        this.updateSorting([columnName], 'asc');\n      } else if (sortOrder === 'asc') {\n        this.updateSorting([columnName], 'desc');\n      } else {\n        this.updateSorting([columnName], '');\n      }\n    }\n  }\n\n  updateSorting(columnNames: string[], sortOrder: SortOrder) {\n    this.columns = this.columns.map(\n      (column): Column => {\n        if (columnNames.includes(column.name)) {\n          return { ...column, sortOrder };\n        }\n\n        return column;\n      }\n    );\n\n    this.reload();\n  }\n\n  applyFilter(columnName, dropdown, filteringModifier) {\n    this.updateFiltering([columnName], {\n      type: FilteringActionType.ApplyFilter,\n      payload: { filteringModifier }\n    });\n    dropdown.hide();\n  }\n\n  resetFilter(columnName, dropdown) {\n    this.updateFiltering([columnName], { type: FilteringActionType.ResetFilter });\n    dropdown.hide();\n  }\n\n  clearFilters() {\n    this.updateFiltering(this.columns.map(({ name }) => name), {\n      type: FilteringActionType.ResetFilter\n    });\n  }\n\n  updateFiltering(\n    columnNames: string[],\n    action: {\n      type: FilteringActionType;\n      payload?: { filteringModifier: FilteringModifier };\n    }\n  ) {\n    this.columns = this.columns.map(column => {\n      if (columnNames.includes(column.name)) {\n        return {\n          ...column,\n          ...(action.type === FilteringActionType.ApplyFilter\n            ? action.payload.filteringModifier\n            : { filterPredicate: undefined, externalFilterQuery: undefined })\n        };\n      }\n\n      return column;\n    });\n\n    this.updateFilteringApplied();\n    this.reload();\n  }\n\n  updateFilteringApplied() {\n    this.filteringApplied = this.columns.some(this.isColumnFilteringApplied);\n  }\n\n  isColumnFilteringApplied(column: Column): boolean {\n    const { filterable, filterPredicate, externalFilterQuery } = column;\n\n    return !!(filterable && (filterPredicate || externalFilterQuery));\n  }\n\n  updatePagination({ itemsPerPage, page }) {\n    this.pagination = { ...this.pagination, pageSize: itemsPerPage, currentPage: page };\n    this.loadData();\n  }\n\n  reload() {\n    this.pagination = { ...this.pagination, currentPage: 1 };\n    this.recreateLoadMoreComponent = true;\n    this.loadData(true);\n    this.scrollToTop();\n  }\n\n  loadNextPage(): Promise<IResultList<object>> {\n    this.pagination = { ...this.pagination, currentPage: this.pagination.nextPage };\n\n    this.loadData();\n\n    return this.dataSource.resultList$\n      .pipe(take(1)) // in order for `toPromise` to work, the observable needs to complete\n      .toPromise()\n      .then(result => {\n        return {\n          ...result,\n          paging: {\n            ...result.paging,\n            next: this.loadNextPage.bind(this)\n          }\n        } as IResultList<object>;\n      });\n  }\n\n  getCellRendererSpec({ value, row, columnName }): CellRendererSpec {\n    return this._getCellRendererSpec({ type: 'CELL', value, row, columnName });\n  }\n\n  getHeaderCellRendererSpec({ value, columnName }): CellRendererSpec {\n    return this._getCellRendererSpec({ type: 'HEADER', value, row: undefined, columnName });\n  }\n\n  getFilteringFormRendererSpec({ column, dropdown }): FilteringFormRendererSpec {\n    return {\n      renderer:\n        get(this.getColumnRenderer(column), 'filteringFormRendererDef.template') ||\n        column.filteringFormRendererComponent,\n      context: {\n        property: column,\n        applyFilter: this.applyFilter.bind(this, column.name, dropdown),\n        resetFilter: this.resetFilter.bind(this, column.name, dropdown)\n      }\n    };\n  }\n\n  setAllItemsSelected(selected) {\n    this.dataSource.selection$\n      .pipe(first())\n      .subscribe(({ filteredDataIds }) => this.setItemsSelected(filteredDataIds, selected));\n  }\n\n  setAllItemsInCurrentPageSelected(selected) {\n    this.dataSource.data$.pipe(first()).subscribe(data => this.setItemsSelected(data, selected));\n  }\n\n  setItemsSelected(items: any[], selected) {\n    const itemIds = items.map((item: object | string) =>\n      typeof item === 'object' ? item[this.selectionPrimaryKey] : item\n    );\n\n    this.selectedItemIds = selected\n      ? union(this.selectedItemIds, itemIds)\n      : without(this.selectedItemIds, ...itemIds);\n\n    this.itemsSelect.emit(this.selectedItemIds);\n  }\n\n  isItemSelected(item) {\n    return this.selectedItemIds.includes(item[this.selectionPrimaryKey]);\n  }\n\n  onColumnDrop({ previousIndex, currentIndex }) {\n    const differentIndex = previousIndex !== currentIndex;\n\n    if (differentIndex) {\n      const column = this.columns.splice(previousIndex, 1);\n      this.columns.splice(currentIndex, 0, column[0]);\n    }\n\n    this.updateColumnNames();\n    this.updateGridColumnsSize();\n  }\n\n  updateGridColumnsSize() {\n    this.styles = {\n      ...this.styles,\n      gridTemplateColumns: this.sanitizer.bypassSecurityTrustStyle(\n        this.columns\n          .filter(column => column.visible)\n          .map(({ gridTrackSize }) => gridTrackSize)\n          .join(' ')\n      ),\n      gridInfiniteScrollColumn: this.sanitizer.bypassSecurityTrustStyle(\n        `1 / span ${this.columns.length}`\n      )\n    };\n  }\n\n  private updateColumns() {\n    const specialColumn = {\n      gridTrackSize: '42px',\n      sortable: false,\n      positionFixed: true\n    };\n\n    this.columns = [\n      this.selectable ? { ...specialColumn, name: SpecialColumnName.Checkbox } : undefined,\n      ...this.columns,\n      this.actionControls.length > 0\n        ? { ...specialColumn, name: SpecialColumnName.Actions }\n        : undefined\n    ]\n      .filter(Boolean)\n      .map(this.withColumnDefaults);\n\n    this.updateColumnNames();\n    this.updateGridColumnsSize();\n    this.updateFilteringApplied();\n  }\n\n  private withColumnDefaults(column): Column {\n    const dataType = column.dataType || ColumnDataType.TextShort;\n    const { headerCSSClassName, cellCSSClassName } = column;\n\n    return {\n      visible: true,\n      positionFixed: false,\n      sortable: true,\n      sortOrder: '',\n      filterable: false,\n      ...column,\n      dataType,\n      gridTrackSize:\n        column.gridTrackSize ||\n        `minmax(${minColumnGridTrackSize}px, ${ratiosByColumnTypes[dataType]}fr)`,\n      headerCSSClassName:\n        (typeof headerCSSClassName === 'string'\n          ? headerCSSClassName.split(' ')\n          : headerCSSClassName) || [],\n      cellCSSClassName:\n        (typeof cellCSSClassName === 'string' ? cellCSSClassName.split(' ') : cellCSSClassName) ||\n        []\n    };\n  }\n\n  private updateColumnNames() {\n    this.columnNames = this.columns.map(({ name }) => name);\n  }\n\n  private setupResizeHandle() {\n    const resizeHandleDrag$ = this.resizeHandleMouseDown$.pipe(\n      takeUntil(this.unsubscribe$),\n      tap(() => this.clearMouseHighlights()),\n      mergeMap(({ event, targetColumnName }) => {\n        this.columns = this.columns.map(column => {\n          if (column.name === targetColumnName) {\n            return {\n              ...column,\n              headerCSSClassName: union(column.headerCSSClassName, ['header--being-resized'])\n            };\n          }\n\n          return column;\n        });\n\n        this.headerBeingResized = {\n          columnName: targetColumnName,\n          el: event.target.parentNode\n        };\n\n        this.styles = {\n          ...this.styles,\n          tableCursor: 'col-resize'\n        };\n\n        return this.resizeHandleContainerMouseMove$.pipe(\n          tap(() => this.clearMouseHighlights()),\n          takeUntil(this.resizeHandleContainerMouseUp$)\n        );\n      })\n    );\n\n    resizeHandleDrag$.subscribe(event => {\n      requestAnimationFrame(() => {\n        this.columns = this.columns.map((column, i) => {\n          if (column.name === this.headerBeingResized.columnName) {\n            const wrapper = this.hostRef.nativeElement;\n\n            // Read wrapper's offset left relative to the document.\n            const horizontalOffset = wrapper.getBoundingClientRect().left;\n\n            // Adjust with the wrapper horizontal scroll position.\n            const horizontalScrollOffset = wrapper.scrollLeft - horizontalOffset;\n\n            // Calculate the desired width.\n            const width =\n              horizontalScrollOffset + event.clientX - (this.headerBeingResized.el.offsetLeft || 0);\n\n            return {\n              ...column,\n              // Update the column object with the new size value, enforce our minimum size.\n              gridTrackSize: `${Math.max(minColumnGridTrackSize, width)}px`\n            };\n          }\n\n          // For the other headers which don't have a set width, fix it to their computed width.\n          if (column.gridTrackSize.startsWith('minmax')) {\n            return {\n              ...column,\n              // isn't fixed yet (it would be a px value)\n              gridTrackSize: `${_parseInt(this.thEls[i].clientWidth)}px`\n            };\n          }\n\n          return column;\n        });\n\n        /*\n         * Update the column sizes.\n         * Note: grid-template-columns sets the width for all columns in one value.\n         */\n        this.updateGridColumnsSize();\n      });\n    });\n\n    this.resizeHandleContainerMouseUp$.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {\n      if (this.headerBeingResized) {\n        this.columns = this.columns.map(column => {\n          if (column.name === this.headerBeingResized.columnName) {\n            return {\n              ...column,\n              headerCSSClassName: without(column.headerCSSClassName, 'header--being-resized')\n            };\n          }\n\n          return column;\n        });\n        this.headerBeingResized = undefined;\n\n        this.styles = {\n          ...this.styles,\n          tableCursor: 'auto'\n        };\n      }\n    });\n  }\n\n  private clearMouseHighlights() {\n    if (window.getSelection) {\n      window.getSelection().removeAllRanges();\n    }\n  }\n\n  private _getCellRendererSpec({ type, value, row, columnName }): CellRendererSpec {\n    const column = this.columns.find(({ name }) => name === columnName);\n    const columnRenderer = this.getColumnRenderer(column);\n    const rendererTemplate = get(\n      columnRenderer,\n      `${type === 'HEADER' ? 'headerCellRendererDef' : 'cellRendererDef'}.template`\n    );\n\n    const { cellRendererComponent, headerCellRendererComponent } = column;\n    const rendererComponent =\n      type === 'HEADER' ? headerCellRendererComponent : cellRendererComponent;\n\n    return {\n      renderer: rendererTemplate || rendererComponent,\n      context: {\n        value,\n        item: row,\n        property: column\n      }\n    };\n  }\n\n  private getColumnRenderer(column): ColumnDirective {\n    return this.columnRenderers.toArray().find(({ name }) => name === column.name);\n  }\n\n  private loadData(reload: boolean = false) {\n    const {\n      rows,\n      columns,\n      pagination,\n      searchText,\n      serverSideDataCallback,\n      selectable,\n      selectionPrimaryKey,\n      infiniteScroll\n    } = this;\n\n    this.dataSource.loadData({\n      rows,\n      columns,\n      pagination,\n      searchText,\n      serverSideDataCallback,\n      selectable,\n      selectionPrimaryKey,\n      infiniteScroll,\n      reload\n    });\n  }\n\n  private updateFilteringLabelsParams(stats: DataSourceStats) {\n    this.filteringLabelsParams = {\n      filteredItemsCount: stats.filteredSize,\n      allItemsCount: stats.size\n    };\n  }\n\n  private updatePaginationLabelParams(stats: DataSourceStats) {\n    this.pagination.nextPage = stats.nextPage;\n    const pageFirstItemIdx = (stats.currentPage - 1) * stats.firstPageSize + 1;\n    this.paginationLabelParams = {\n      pageFirstItemIdx,\n      pageLastItemIdx: pageFirstItemIdx + (stats.currentPageSize - 1),\n      itemsTotal: stats.filteredSize\n    };\n  }\n\n  private createLoadMoreComponent(stats: DataSourceStats) {\n    if (\n      this.infiniteScroll &&\n      stats &&\n      stats.nextPage &&\n      (!this.loadMoreComponent || this.recreateLoadMoreComponent)\n    ) {\n      this.recreateLoadMoreComponent = false;\n      this.infiniteScrollContainer.clear();\n      const componentFactory: ComponentFactory<any> = this.cfr.resolveComponentFactory(\n        LoadMoreComponent\n      );\n      const componentRef = this.infiniteScrollContainer.createComponent(componentFactory);\n      const instance = componentRef.instance as LoadMoreComponent;\n      instance.useIntersection = this.infiniteScroll === 'auto' || this.infiniteScroll === 'hidden';\n      instance.hidden = this.infiniteScroll === 'hidden';\n      instance.paging = {\n        nextPage: stats.nextPage,\n        next: this.loadNextPage.bind(this)\n      } as Paging<any>;\n      instance.loadNextLabel = this.loadMoreItemsLabel;\n      instance.loadingLabel = this.loadingItemsLabel;\n      this.loadMoreComponent = instance;\n    } else if (this.loadMoreComponent && !stats.nextPage) {\n      this.loadMoreComponent.paging = {\n        nextPage: null\n      } as Paging<any>;\n    }\n  }\n\n  private scrollToTop() {\n    if (this.infiniteScroll) {\n      this.scrollContainer.nativeElement.scrollTop = 0;\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  DoCheck,\n  Injector,\n  Input,\n  OnChanges,\n  TemplateRef,\n  Type\n} from '@angular/core';\n\nimport { CellRendererContext, CellRendererSpec } from './cell-renderer';\n\n@Component({\n  selector: 'c8y-cell-renderer',\n  templateUrl: './cell-renderer.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CellRendererComponent implements OnChanges, DoCheck {\n  spec: CellRendererSpec;\n  @Input('spec')\n  set _spec(spec: CellRendererSpec) {\n    this.spec = spec;\n  }\n  prevSpec: CellRendererSpec;\n\n  rendererType: 'TEMPLATE' | 'COMPONENT';\n  rendererInjector: Injector;\n\n  constructor(private injector: Injector, private cd: ChangeDetectorRef) {}\n\n  ngOnChanges() {\n    if (!this.prevSpec) {\n      this.prevSpec = this.spec;\n    }\n\n    const { renderer } = this.spec;\n\n    if (renderer instanceof TemplateRef) {\n      this.rendererType = 'TEMPLATE';\n    } else if (renderer instanceof Type) {\n      this.rendererType = 'COMPONENT';\n\n      this.rendererInjector = Injector.create({\n        providers: [{ provide: CellRendererContext, useValue: this.spec.context }],\n        parent: this.injector\n      });\n    }\n  }\n\n  ngDoCheck() {\n    if (!this.spec.context.value === this.prevSpec.context.value) {\n      this.prevSpec = this.spec;\n      this.cd.markForCheck();\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  DoCheck,\n  Injector,\n  Input,\n  OnChanges,\n  TemplateRef,\n  Type\n} from '@angular/core';\nimport { isEqual } from 'lodash-es';\n\nimport { FilteringFormRendererContext, FilteringFormRendererSpec } from './filtering-form-renderer';\n\n@Component({\n  selector: 'c8y-filtering-form-renderer',\n  templateUrl: './filtering-form-renderer.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FilteringFormRendererComponent implements OnChanges {\n  spec: FilteringFormRendererSpec;\n  @Input('spec')\n  set _spec(spec: FilteringFormRendererSpec) {\n    this.spec = spec;\n  }\n\n  rendererType: 'TEMPLATE' | 'COMPONENT';\n  rendererInjector: Injector;\n  defaultRendererFilterText = '';\n\n  constructor(private injector: Injector, private cd: ChangeDetectorRef) {}\n\n  ngOnChanges() {\n    const { renderer, context } = this.spec;\n\n    if (renderer instanceof TemplateRef) {\n      this.rendererType = 'TEMPLATE';\n    } else if (renderer instanceof Type) {\n      this.rendererType = 'COMPONENT';\n\n      this.rendererInjector = Injector.create({\n        providers: [{ provide: FilteringFormRendererContext, useValue: this.spec.context }],\n        parent: this.injector\n      });\n    }\n\n    const { filterPredicate } = context.property;\n    if (typeof filterPredicate === 'string') {\n      this.defaultRendererFilterText = filterPredicate;\n    }\n  }\n}\n","import { CdkTableModule } from '@angular/cdk/table';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { PaginationModule } from 'ngx-bootstrap/pagination';\nimport { CommonModule as C8YCommonModule } from '../common/common.module';\nimport { DataGridComponent } from './data-grid.component';\nimport { ColumnDirective } from './column/column.directive';\nimport { CellRendererDefDirective, HeaderCellRendererDefDirective } from './column/cell-renderer';\nimport { CellRendererComponent } from './column/cell-renderer.component';\nimport { FilteringFormRendererDefDirective } from './column/filtering-form-renderer';\nimport { FilteringFormRendererComponent } from './column/filtering-form-renderer.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CdkTableModule,\n    DragDropModule,\n    FormsModule,\n    ReactiveFormsModule,\n    C8YCommonModule,\n    BsDropdownModule.forRoot(),\n    PopoverModule.forRoot(),\n    PaginationModule.forRoot()\n  ],\n  declarations: [\n    CellRendererDefDirective,\n    HeaderCellRendererDefDirective,\n    CellRendererComponent,\n    FilteringFormRendererDefDirective,\n    FilteringFormRendererComponent,\n    ColumnDirective,\n    DataGridComponent\n  ],\n  exports: [\n    CellRendererDefDirective,\n    HeaderCellRendererDefDirective,\n    FilteringFormRendererDefDirective,\n    ColumnDirective,\n    DataGridComponent\n  ],\n  entryComponents: [DataGridComponent]\n})\nexport class DataGridModule {}\n","import {\n  Component,\n  ViewChild,\n  ElementRef,\n  Input,\n  OnInit,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { some, get, map } from 'lodash-es';\nimport { gettext } from '../i18n/gettext';\n\n@Component({\n  selector: 'c8y-drop-area',\n  templateUrl: './drop-area.component.html'\n})\nexport class DropAreaComponent implements OnInit {\n  @Input() title = gettext('Upload file');\n  @Input() message = gettext('Drop file here');\n  @Input() icon = 'plus-square';\n  @Input() loadingMessage = gettext('Uploading…');\n  /** Affects displaying both the drop zone and the list of dropped files. */\n  @Input() alwaysShow = false;\n  @Input() clickToOpen = true;\n  @Input() loading = false;\n  @Input() progress = -1; // -1 = spinner\n  @Output() dropped: EventEmitter<DroppedFile[]> = new EventEmitter();\n  @Input() maxAllowedFiles = Infinity;\n  @Input() files: FileList;\n  isOver: boolean = false;\n  errors: boolean = false;\n  errorMessage: string;\n  filesNameString: string;\n\n  @ViewChild('area', { static: true }) area: ElementRef;\n  @ViewChild('zone', { static: false }) zone: ElementRef;\n  @ViewChild('picker', { static: false }) picker: ElementRef;\n\n  ngOnInit() {\n    this.alwaysShow = this.alwaysShow || this.area.nativeElement.children.length === 0;\n    if (this.files && this.files.length > 0) {\n      this.onFilesSelected(this.files);\n    }\n  }\n\n  toggle($event?) {\n    this.zone.nativeElement.style.height = this.area.nativeElement.offsetHeight + 'px';\n    this.onOver();\n  }\n\n  showPicker($event?) {\n    this.preventDefault($event);\n    this.picker.nativeElement.value = '';\n    this.picker.nativeElement.click();\n  }\n\n  onOver() {\n    if (!this.isOver) {\n      this.isOver = true;\n      document.addEventListener('dragover', this.preventDefault);\n      document.addEventListener('drop', this.preventDefault);\n    }\n  }\n\n  onPick($event) {\n    this.errors = false;\n    this.preventDefault($event);\n    this.onFilesSelected($event.target.files);\n  }\n\n  onDrop($event) {\n    this.preventDefault($event);\n    this.onFilesSelected($event.dataTransfer.files);\n    this.stopDragging();\n  }\n\n  onFilesSelected(files: FileList) {\n    this.files = files;\n    this.filesNameString = this.getFilesNamesAsString(files);\n    this.errors = false;\n    if (!this.isFilesArrayEmpty() && !this.isTooManyFiles()) {\n      if (this.hasEmptyFiles()) {\n        this.errors = true;\n        this.errorMessage = gettext('File must not be empty, select another one.');\n      } else {\n        this.dropped.emit(this.compose(files));\n      }\n    } else {\n      this.errors = true;\n      this.errorMessage = gettext('Too many files selected.');\n    }\n  }\n\n  getFilesNamesAsString(files: FileList): string {\n    return map(files, ({ name }) => name).join(', ');\n  }\n\n  isFilesArrayEmpty() {\n    return get(this, 'files.length', 0) === 0;\n  }\n\n  isTooManyFiles() {\n    return get(this, 'files.length', 0) > this.maxAllowedFiles;\n  }\n\n  hasEmptyFiles() {\n    let result = true;\n    if (!this.isFilesArrayEmpty()) {\n      result = this.isAnyFileEmpty();\n    }\n    return result;\n  }\n\n  isAnyFileEmpty(): boolean {\n    return some(Array.from(this.files), ['size', 0]);\n  }\n\n  shouldShowFilesList() {\n    return (\n      this.alwaysShow &&\n      !this.isFilesArrayEmpty() &&\n      !this.hasEmptyFiles() &&\n      !this.isTooManyFiles()\n    );\n  }\n\n  stopDragging() {\n    document.removeEventListener('dragover', this.preventDefault);\n    document.removeEventListener('drop', this.preventDefault);\n    this.isOver = false;\n  }\n\n  onDelete() {\n    delete this.files;\n    delete this.filesNameString;\n    this.clearErrors();\n    this.dropped.emit(undefined);\n  }\n\n  clearErrors() {\n    delete this.errorMessage;\n    this.errors = false;\n  }\n\n  private preventDefault($event?) {\n    if ($event) {\n      $event.preventDefault();\n    }\n  }\n\n  private compose(files: FileList) {\n    return Array.from(files).map(file => ({\n      file,\n      readAsJson: async () => JSON.parse(await this.read(file, ReadAsType.TEXT)),\n      readAsText: async () => this.read(file, ReadAsType.TEXT),\n      readAsArrayBuffer: async () => this.read(file, ReadAsType.ARRAY_BUFFER),\n      readAsBinaryString: async () => this.read(file, ReadAsType.BINARY_STRING),\n      readAsDataURL: async () => this.read(file, ReadAsType.DATA_URL)\n    }));\n  }\n\n  private async read(file, type: ReadAsType): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      const reader = new FileReader();\n      switch (type) {\n        case ReadAsType.TEXT: {\n          reader.readAsText(file);\n          break;\n        }\n        case ReadAsType.ARRAY_BUFFER: {\n          reader.readAsArrayBuffer(file);\n          break;\n        }\n        case ReadAsType.BINARY_STRING: {\n          reader.readAsBinaryString(file);\n          break;\n        }\n        case ReadAsType.DATA_URL: {\n          reader.readAsDataURL(file);\n          break;\n        }\n      }\n      reader.onload = () => this.onLoad(reader, resolve, reject);\n    });\n  }\n\n  private onLoad(reader, resolve, reject) {\n    if (reader.readyState !== 2) {\n      return;\n    }\n    if (reader.error) {\n      reject(reader.error);\n    }\n    resolve(reader.result);\n  }\n}\n\nexport interface DroppedFile {\n  file: File;\n  readAsText();\n  readAsArrayBuffer();\n  readAsBinaryString();\n  readAsDataURL();\n  readAsJson();\n}\n\nenum ReadAsType {\n  TEXT,\n  DATA_URL,\n  ARRAY_BUFFER,\n  BINARY_STRING\n}\n","import { Component, Input, AfterContentInit, OnChanges } from '@angular/core';\nimport {\n  deviceAvailabilityIconMap,\n  PushStatusLabels,\n  SendStatusLabels,\n  tooltips\n} from './device-availability';\nimport { TranslateService } from '@ngx-translate/core';\nimport { get } from 'lodash-es';\n\n@Component({\n  selector: 'device-status',\n  templateUrl: './device-status.component.html'\n})\nexport class DeviceStatusComponent implements AfterContentInit, OnChanges {\n  @Input('mo') set node(value) {\n    this._mo = value.mo || value;\n  }\n\n  private _mo;\n  private requiredAvailability;\n  private availabilityStatus;\n  private pushStatus;\n  private sendStatus;\n\n  constructor(private translateService: TranslateService) {}\n\n  get() {\n    return this._mo;\n  }\n\n  ngOnChanges() {\n    this.setStatusProperites();\n  }\n\n  ngAfterContentInit() {\n    this.setStatusProperites();\n  }\n\n  setStatusProperites() {\n    this.requiredAvailability = get(this._mo, 'c8y_RequiredAvailability');\n    this.availabilityStatus = get(this._mo, 'c8y_Availability.status');\n\n    this.pushStatus = get(this._mo, 'c8y_Connection.status') || 'UNKNOWN';\n    this.sendStatus =\n      this.availabilityStatus || (this.requiredAvailability ? 'UNKNOWN' : 'NOT_MONITORED');\n  }\n\n  status() {\n    let statuses;\n\n    if (this.availabilityStatus === 'MAINTENANCE' || this.pushStatus === 'MAINTENANCE') {\n      statuses = this.getMaintenanceStatus();\n    } else {\n      statuses = this.getSendPushStatus();\n    }\n\n    return statuses;\n  }\n\n  getMaintenanceStatus() {\n    return {\n      sendStatus: false,\n      pushStatus: false,\n      maintenanceStatus: {\n        icon: deviceAvailabilityIconMap.device.MAINTENANCE.icon,\n        class: deviceAvailabilityIconMap.device.MAINTENANCE.class,\n        tooltip: tooltips.maintenance\n      }\n    };\n  }\n\n  private getSendPushStatus() {\n    return {\n      sendStatus: {\n        icon: deviceAvailabilityIconMap.sendData[this.sendStatus].icon,\n        class: deviceAvailabilityIconMap.sendData[this.sendStatus].class,\n        status: this.sendStatus,\n        label: SendStatusLabels[this.sendStatus],\n        tooltip: this.getSendStatusTooltip(this._mo)\n      },\n      pushStatus: {\n        icon: deviceAvailabilityIconMap.push[this.pushStatus].icon,\n        class: deviceAvailabilityIconMap.push[this.pushStatus].class,\n        status: this.pushStatus,\n        label: PushStatusLabels[this.pushStatus],\n        tooltip: this.getPushStatusTooltip(this.pushStatus === 'CONNECTED')\n      },\n      maintenanceStatus: false\n    };\n  }\n\n  private getSendStatusTooltip(device) {\n    const availability = device && device.c8y_Availability;\n    const lastMessage = availability && availability.lastMessage;\n    if (lastMessage) {\n      return tooltips.sendStatusConnected(lastMessage, this.translateService);\n    }\n    return tooltips.sendStatusDisconnected;\n  }\n\n  private getPushStatusTooltip(isActive) {\n    return isActive ? tooltips.pushStatusConnected : tooltips.pushStatusDisconnected;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { DeviceStatusComponent } from './device-status.component';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { CommonModule } from '../common/common.module';\n/**\n * The angular module definition for a device-status.\n * @exports DeviceStatusComponent\n */\n@NgModule({\n    imports: [\n        CommonModule,\n        TooltipModule\n    ],\n    exports: [\n        DeviceStatusComponent\n    ],\n    declarations: [\n        DeviceStatusComponent\n    ]\n})\nexport class DeviceStatusModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '../common/common.module';\nimport { DropAreaComponent } from './drop-area.component';\n\n/**\n * The angular module definition for a drop-area.\n * @exports DropAreaComponent\n */\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  exports: [\n    DropAreaComponent,\n  ],\n  declarations: [\n    DropAreaComponent,\n  ]\n})\nexport class DropAreaModule { }\n","import { IIdentified } from '@c8y/client';\n\nexport interface ISelectModalObject {\n  groupId: string | number;\n  body: ISelectModalBodyPart[];\n  options: ISelectModalOption[];\n  additionalInformation?: ISelectModalBodyPart;\n}\n\nexport interface ISelectModalOption {\n  body: ISelectModalBodyPart[];\n  obj: IIdentified;\n  selected?: boolean;\n}\n\nexport interface ISelectModalBodyPart {\n  value: string;\n  class?: string;\n}\n\nexport interface ModalLabels {\n  ok?: string;\n  cancel?: string;\n}\n\nexport enum ModalSelectionMode {\n  SINGLE = 'single',\n  MULTI = 'multi'\n}\n","import { Component, Output, Input, EventEmitter, ViewChild, OnInit } from '@angular/core';\nimport { DroppedFile, DropAreaComponent } from '../drop-area/drop-area.component';\nimport { PickedFiles } from './file-picker.model';\n\n@Component({\n  selector: 'c8y-file-picker',\n  templateUrl: './file-picker.component.html'\n})\nexport class FilePickerComponent implements OnInit {\n  @ViewChild(DropAreaComponent, {static: true}) dropArea: DropAreaComponent;\n  @Output() onFilesPicked: EventEmitter<PickedFiles> = new EventEmitter();\n  @Input() maxAllowedFiles = Infinity;\n  @Input() uploadChoice: 'uploadBinary' | 'uploadUrl' = 'uploadBinary';\n  @Input() fileUrl: string;\n  @Input() fileBinary: DroppedFile;\n\n  droppedFiles: DroppedFile[];\n  private fileToSave: PickedFiles;\n\n  ngOnInit() {\n   if (this.fileBinary) {\n     this.droppedFiles = [this.fileBinary];\n   }\n  }\n\n  onFileDropped(droppedFiles: DroppedFile[]) {\n    this.onFilesPicked.emit({\n      droppedFiles\n    });\n  }\n\n  clearInputFromUrl() {\n    delete this.fileUrl;\n    this.fileToSave = {\n      url: undefined\n    };\n    this.onFilesPicked.emit(this.fileToSave);\n  }\n\n  clearSelectedFiles() {\n    this.dropArea.onDelete();\n    this.fileToSave = {\n      droppedFiles: undefined\n    };\n    this.onFilesPicked.emit(this.fileToSave);\n  }\n\n  onFileUrlChange(urlStr) {\n    this.fileToSave = {\n      url: urlStr\n    };\n    this.onFilesPicked.emit(this.fileToSave);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule as C8yCommonModule } from '../common/common.module';\nimport { FilePickerComponent } from './file-picker.component';\nimport { DropAreaModule } from '../drop-area/drop-area.module';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule as C8yFormsModule } from '../forms/public-api';\n\n/**\n * The angular module definition for a drop-area.\n * @exports FilePickerComponent\n */\n@NgModule({\n  imports: [\n    C8yFormsModule,\n    CommonModule,\n    DropAreaModule,\n    FormsModule,\n    C8yCommonModule\n  ],\n  exports: [\n    FilePickerComponent,\n  ],\n  declarations: [\n    FilePickerComponent,\n  ]\n})\nexport class FilePickerModule { }\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-group',\n  templateUrl: './list-group.component.html',\n  host: {\n    class: 'c8y-list__group'\n  }\n})\nexport class ListGroupComponent {\n\n}\n","import { Component, Output, Input, ViewChild, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-action, c8y-li-action',\n  templateUrl: './list-item-action.component.html'\n})\nexport class ListItemActionComponent {\n  @ViewChild('template', { static: false })\n  template: any;\n  @Input()\n  label: string;\n  @Input()\n  icon: string;\n  @Output()\n  click = new EventEmitter<any>();\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-collapse, c8y-li-collapse',\n  templateUrl: './list-item-collapse.component.html'\n})\nexport class ListItemCollapseComponent {\n\n  @Input()\n  item: any;\n\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-footer, c8y-li-footer',\n  templateUrl: './list-item-footer.component.html'\n})\nexport class ListItemFooterComponent {\n\n  @Input()\n  footer: string;\n\n}\n","import {\n  Component,\n  ContentChild,\n  ElementRef,\n  ContentChildren,\n  HostBinding,\n  Input,\n  Output,\n  EventEmitter,\n  QueryList\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil, filter, tap, delay } from 'rxjs/operators';\nimport { ListItemActionComponent } from './list-item-action.component';\nimport { ListItemCollapseComponent } from './list-item-collapse.component';\nimport { ListItemFooterComponent } from './list-item-footer.component';\n\n@Component({\n  selector: 'c8y-list-item, c8y-li',\n  templateUrl: './list-item.component.html',\n  host: {\n    class: 'c8y-list__item'\n  }\n})\nexport class ListItemComponent {\n  @Input()\n  @HostBinding('class.active')\n  active: boolean = false;\n  @Input()\n  collapsed: boolean = true;\n  @Output()\n  collapsedChange = new EventEmitter<boolean>();\n  @ContentChild(ListItemFooterComponent, { static: false })\n  itemFooter: ListItemFooterComponent;\n  @ContentChildren(ListItemActionComponent)\n  itemActions: QueryList<ListItemActionComponent>;\n  @ContentChild(ListItemCollapseComponent, { static: false })\n  itemCollapse: ListItemCollapseComponent;\n\n  showFooter: boolean = false;\n  showActions: boolean = false;\n  showCollapse: boolean = false;\n  actions: ListItemActionComponent[];\n  dropdownUp: boolean = false;\n\n  private pulse$: Subject<boolean> = new Subject<boolean>();\n  private destroy$: Subject<any> = new Subject();\n  private readonly ACTION_ITEM_HEIGHT = 40;\n\n  constructor(public element: ElementRef) {}\n\n  ngOnInit(): void  {\n    this.pulse$.pipe(filter(apply => !!apply),\n    tap(() => this.element.nativeElement.classList.remove('c8y-list--pulse')),\n    delay(100),\n    tap(() => this.element.nativeElement.classList.add('c8y-list--pulse')),\n    takeUntil(this.destroy$)).subscribe();\n  }\n\n  ngAfterContentChecked(): void {\n    this.actions = this.itemActions.toArray();\n    this.showFooter = this.itemFooter != null;\n    this.showActions = this.itemActions.length > 0;\n    this.showCollapse = this.itemCollapse != null;\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  /**\n   * A helper function which helps to determine if the dropdown\n   * should toggle up.\n   */\n  showDropdownUp() {\n    const rect = this.element.nativeElement.getBoundingClientRect();\n    this.dropdownUp =\n      rect.bottom + this.itemActions.length * this.ACTION_ITEM_HEIGHT > window.innerHeight;\n  }\n\n  /**\n   * Toggles the collapse state and emits this state as\n   * collapsedChange output as boolean.\n   */\n  toggleCollapsed() {\n    this.collapsed = !this.collapsed;\n    this.collapsedChange.emit(this.collapsed);\n  }\n\n  /**\n   * Highlights the list-item. This method should be used to show the\n   * user that something within this item was changed.\n   */\n  pulse() {\n    this.pulse$.next(true);\n  }\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-icon, c8y-li-icon',\n  templateUrl: './list-item-icon.component.html',\n  host: {\n    class: 'c8y-list__item__icon'\n  }\n})\nexport class ListItemIconComponent {\n  @Input()\n  icon: string;\n\n  @Input()\n  status?: 'statusOk' | 'statusUnknown' | 'statusAlert' | 'statusNok' | 'status critical' | 'status warning' | 'status minor' | 'status major';\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-body, c8y-li-body',\n  templateUrl: './list-item-body.component.html'\n})\nexport class ListItemBodyComponent {\n\n  @Input()\n  body: string;\n\n}\n","import { Output, EventEmitter, Component, Input, SimpleChanges } from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-checkbox, c8y-li-checkbox',\n  templateUrl: './list-item-checkbox.component.html',\n  host: {\n    class: 'c8y-list__item__check'\n  }\n})\nexport class ListItemCheckboxComponent {\n  @Input()\n  selected = false;\n  @Output()\n  onSelect = new EventEmitter<boolean>();\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.selected && !changes.selected.firstChange) {\n      this.onSelect.emit(changes.selected.currentValue);\n    }\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\n\n@Component({\n  selector: 'c8y-list-item-radio, c8y-li-radio',\n  templateUrl: './list-item-radio.component.html',\n  host: {\n    class: 'c8y-list__item__radio'\n  }\n})\nexport class ListItemRadioComponent {\n  @ViewChild('radio', { static: true }) radio: ElementRef;\n  @Input()\n  selected = false;\n  @Input()\n  name = 'list_item_radio';\n  @Input()\n  disabled: boolean = false;\n  @Output()\n  onSelect = new EventEmitter<boolean>();\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.selected && !changes.selected.firstChange) {\n      this.onSelect.emit(changes.selected.currentValue);\n    }\n  }\n\n  reset() {\n    this.radio.nativeElement.checked = false;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ListGroupComponent } from './list-group.component';\nimport { ListItemComponent } from './list-item.component';\nimport { CommonModule } from '../common/common.module';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { ListItemIconComponent } from './list-item-icon.component';\nimport { ListItemBodyComponent } from './list-item-body.component';\nimport { ListItemFooterComponent } from './list-item-footer.component';\nimport { ListItemActionComponent } from './list-item-action.component';\nimport { ListItemCollapseComponent } from './list-item-collapse.component';\nimport { ListItemCheckboxComponent } from './list-item-checkbox.component';\nimport { ListItemRadioComponent } from './list-item-radio.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CollapseModule.forRoot(),\n    BsDropdownModule\n  ],\n  declarations: [\n    ListGroupComponent,\n    ListItemComponent,\n    ListItemIconComponent,\n    ListItemBodyComponent,\n    ListItemFooterComponent,\n    ListItemActionComponent,\n    ListItemCollapseComponent,\n    ListItemCheckboxComponent,\n    ListItemRadioComponent\n  ],\n  exports: [\n    ListGroupComponent,\n    ListItemComponent,\n    ListItemIconComponent,\n    ListItemBodyComponent,\n    ListItemFooterComponent,\n    ListItemActionComponent,\n    ListItemCollapseComponent,\n    ListItemCheckboxComponent,\n    ListItemRadioComponent\n  ]\n})\nexport class ListGroupModule {}\n","import { Component, Input } from '@angular/core';\nimport { RealtimeService } from './realtime.service';\n\n@Component({\n  selector: 'c8y-realtime-btn',\n  templateUrl: './realtime-button.component.html'\n})\nexport class RealtimeButtonComponent {\n  @Input()\n  service: RealtimeService<any>;\n\n  get active(): boolean {\n    return !!this.service && this.service.active;\n  }\n\n  toggle() {\n    if (this.service) {\n      this.active ? this.service.stop() : this.service.start();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '../common/common.module';\nimport { RealtimeButtonComponent } from './realtime-button.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [RealtimeButtonComponent],\n  exports: [RealtimeButtonComponent]\n})\nexport class RealtimeModule {}\n","import { Route as ngRoute } from '@angular/router';\nimport { ExtensionFactory } from '../common/extension-hooks';\nimport { Tab } from '../tabs/tab.model';\n\nexport enum ViewContext {\n  Device = 'device/:id',\n  Group = 'group/:id',\n  User = 'users/:id',\n  Application = 'applications/:id',\n  SubscribedApplications = 'subscribedApplications/:id',\n  Tenant = 'tenants/:id'\n}\n\nexport type Route = Partial<ngRoute> & {\n  path: string;\n  label?: string;\n  icon?: string;\n  context?: ViewContext;\n  priority?: number;\n\n  /**\n   * Allow to emit multiple tabs on one context route.\n   */\n  tabs?: Tab[];\n};\n\nexport type RouteFactory = ExtensionFactory<Route>;\n","import { Component, Input, EventEmitter, SimpleChanges, Output } from '@angular/core';\nimport { gettext } from '../i18n/gettext';\nimport { BsModalRef } from 'ngx-bootstrap';\nimport {\n  ISelectModalObject,\n  ModalSelectionMode,\n  ModalLabels\n} from './select-modal.model';\nimport { assign } from 'lodash-es';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { IIdentified } from '@c8y/client';\n\ninterface ISelectModalInternalObject extends ISelectModalObject {\n  selectedId: string | number;\n}\n\n@Component({\n  selector: 'c8y-select-modal',\n  templateUrl: './select-modal.component.html'\n})\nexport class SelectModalComponent {\n  @Input() icon: string;\n  @Input() title: string;\n  @Input() subTitle: string = gettext('Select from the list of items matching the device type');\n  @Input() items: ISelectModalInternalObject[];\n  @Input() mode: ModalSelectionMode = ModalSelectionMode.MULTI;\n  @Input() disableSelected: boolean = true;\n  @Input() showFilter: boolean = true;\n  @Input() areMoreEntries: boolean = false;\n  @Input() set labels(labels: ModalLabels) {\n    const { ok = this.labels.ok, cancel = this.labels.cancel } = labels || {};\n    this._labels = { ok, cancel };\n  }\n  get labels(): ModalLabels {\n    return this._labels;\n  }\n  @Output() result: EventEmitter<IIdentified | IIdentified[]> = new EventEmitter<\n    IIdentified | IIdentified[]\n  >();\n  @Output() search: EventEmitter<string> = new EventEmitter<string>();\n  selected = false;\n  filterTerm: string = '';\n  listItems = [];\n  private debouncer: Subject<string> = new Subject<string>();\n  private _labels: ModalLabels = { ok: gettext('Confirm'), cancel: gettext('Cancel') };\n\n  constructor(private bsModalRef: BsModalRef) {\n    this.debouncer.pipe(debounceTime(500)).subscribe(value => {\n      this.search.emit(value);\n    });\n  }\n\n  async ngOnChanges(changes: SimpleChanges) {\n    if (changes.items && changes.items.currentValue) {\n      const itemsPromise = changes.items.currentValue.map(async item => {\n        item.options = await item.options;\n        const selected = item.options.find(option => option.selected);\n        if (selected) {\n          item.selectedId = selected.obj.id;\n          if (this.disableSelected) {\n            item.options.map(option => assign(option, { disabled: true }));\n          }\n        }\n        return item;\n      });\n      this.listItems = await Promise.all(itemsPromise);\n    }\n  }\n\n  updatePipe(filterTerm: string) {\n    this.debouncer.next(filterTerm);\n    this.filterTerm = filterTerm;\n  }\n\n  updateChoice({ item, id }) {\n    if (this.mode === 'single') {\n      this.listItems.map(value => (value.selectedId = undefined));\n    }\n    item.selectedId = id;\n    this.selected = true;\n  }\n\n  dismiss() {\n    this.bsModalRef.hide();\n  }\n\n  select() {\n    const outputArray = this.getOutput();\n    const output = this.mode === 'single' ? outputArray[0] : outputArray;\n    this.result.emit(output);\n    this.bsModalRef.hide();\n  }\n\n  ngOnDestroy() {\n    this.debouncer.complete();\n    this.result.complete();\n    this.search.complete();\n  }\n\n  private getOutput(): IIdentified | IIdentified[] {\n    return this.listItems\n      .filter(item => item.selectedId)\n      .map(item => item.options.find(option => item.selectedId === option.obj.id))\n      .map(selectedOption => selectedOption.obj);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { ISelectModalObject } from './select-modal.model';\n\n@Pipe({\n  name: 'selectModalFilterPipe',\n})\nexport class SelectModalFilterPipe implements PipeTransform {\n  transform(items: ISelectModalObject[], filterTerm: string): any {\n    return filterTerm.trim().length === 0\n      ? items\n      : items.filter((item: ISelectModalObject) => {\n        const allValues = this.extractValues(item);\n        const filteredValues = allValues.filter((value) => this.filterContainString(value, filterTerm));\n        return filteredValues.length > 0;\n      });\n  }\n\n  private filterContainString(value: string, filterTerm: string) {\n    const term = filterTerm.toLowerCase().trim();\n    return value && value.toLowerCase().indexOf(term) > -1;\n  }\n\n  private extractValues(item) {\n    let values = [];\n    if ( item.value ) {\n      values.push(item.value);\n    }\n    Object.keys(item).forEach((key) => {\n      if (Array.isArray(item[key])) {\n        item[key].forEach( obj => values.concat(this.extractValues(obj)) );\n      }\n      if (item[key] instanceof Object) {\n        values = values.concat(this.extractValues(item[key]));\n      }\n    });\n    return values;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { CommonModule } from '../common/common.module';\nimport { ListGroupModule } from '../list-group/list-group.module';\nimport { FormsModule } from '../forms/forms.module';\nimport { SelectModalComponent } from './select-modal.component';\nimport { SelectModalFilterPipe } from './select-modal-filter.pipe';\nimport { SearchModule } from '../search/search.module';\n\n@NgModule({\n  imports: [\n    BsDropdownModule.forRoot(),\n    CommonModule,\n    ListGroupModule,\n    SearchModule,\n    FormsModule\n  ],\n  exports: [\n    SelectModalComponent,\n    SelectModalFilterPipe\n  ],\n  declarations: [\n    SelectModalComponent,\n    SelectModalFilterPipe\n  ]\n})\nexport class SelectModalModule { }\n","import { BsDropdownDirective } from 'ngx-bootstrap/dropdown';\nimport { gettext } from '../i18n/gettext';\nimport {\n  Component,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\n\nexport interface Item {\n  name: string;\n  _selected?: boolean;\n  [key: string]: any;\n}\n\nexport type selectedFunction = (item: Item) => boolean;\nexport type selectedLabelFunction = (items: Item[]) => string;\n\n@Component({\n  selector: 'c8y-select',\n  templateUrl: './select.component.html'\n})\nexport class SelectComponent implements OnChanges {\n  @Input() placeholder: string = gettext('Select item');\n  @Input() selectedLabel: string | selectedLabelFunction;\n  @Input() applyLabel: string = gettext('Apply');\n  @Input() items: Item[];\n  @Input() selected: Item[] | selectedFunction;\n  @Output() onChange: EventEmitter<Item[]> = new EventEmitter();\n  @ViewChild(BsDropdownDirective, { static: false }) dropdown: BsDropdownDirective;\n  textFilter = '';\n  labelText = '';\n  isOpen = false;\n  filteredItems: Item[] = [];\n  searchFilter = null;\n  readonly sizeToShowFilter: number = 5;\n  labelsForSelectAll: any = {\n    all: gettext('All'),\n    allFiltered: gettext('All filtered')\n  };\n  showAllLabel = false;\n  private itemsSelected: Set<Item> = new Set();\n  private stopClicks = false;\n\n  @HostListener('click', ['$event'])\n  preventClick(evt) {\n    if (this.stopClicks) {\n      evt.stopPropagation();\n    }\n    this.stopClicks = this.isOpen;\n  }\n\n  isOpenChange(isOpen: boolean) {\n    this.isOpen = isOpen;\n    if (isOpen) {\n      this.updateSelected();\n      this.searchFilter = null;\n    } else {\n      this.stopClicks = false;\n    }\n  }\n\n  outterSelected(item: Item) {\n    const { selected } = this;\n    let isSelected: any = () => false;\n    if (typeof selected === 'function') {\n      isSelected = selected;\n    } else if (Array.isArray(selected)) {\n      isSelected = (i: Item) => selected.indexOf(i) > -1;\n    }\n    return isSelected(item);\n  }\n\n  isSelected(item: Item) {\n    return this.itemsSelected.has(item);\n  }\n\n  isAllItemsSelected() {\n    return this.itemsSelected.size === this.items.length;\n  }\n\n  isAllFilteredSelected() {\n    return this.itemsSelected.size === this.filteredItems.length;\n  }\n\n  applyChanges() {\n    const selected = Array.from(this.itemsSelected.values());\n    this.onChange.emit(selected);\n    this.dropdown.hide();\n  }\n\n  selectAll(checked: boolean) {\n    this.filteredItems.forEach(item => this.onChangeItem(checked, item));\n  }\n\n  onChangeItem(checked: boolean, item: Item) {\n    if (checked) {\n      this.itemsSelected.add(item);\n    } else {\n      this.itemsSelected.delete(item);\n    }\n  }\n\n  updateFiltered(term: string) {\n    if (term) {\n      const search = new RegExp(term, 'i');\n      this.filteredItems = this.items.filter(({ name }) => search.test(name));\n    } else {\n      this.filteredItems = this.items;\n    }\n  }\n\n  getSelectAllToggleStatus() {\n    const label = this.getLabel();\n    const checked = this.isAllSelected();\n    const indeterminate = !checked && this.itemsSelected.size > 0;\n\n    return { label, checked, indeterminate};\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.isOpen) {\n      return;\n    }\n    if (changes.items || changes.selected || changes.applyLabel) {\n      this.updateSelected();\n      this.updateLabel();\n      this.showAllLabel = this.isAllItemsSelected();\n    }\n  }\n\n  private updateLabel() {\n    const outterSelected = this.items.filter(i => this.outterSelected(i));\n    if (typeof this.selectedLabel === 'string') {\n      this.labelText = this.selectedLabel;\n    } else if (typeof this.selectedLabel === 'function') {\n      this.labelText = this.selectedLabel(outterSelected);\n    } else {\n      this.labelText = outterSelected.map(({ name }) => name).join(', ');\n    }\n  }\n\n  private updateSelected() {\n    const { itemsSelected, items } = this;\n    itemsSelected.clear();\n    items.forEach(item => {\n      if (this.outterSelected(item)) {\n        itemsSelected.add(item);\n      }\n    });\n    this.filteredItems = items;\n  }\n\n  private isAllSelected() {\n    if (this.getLabel() === this.labelsForSelectAll.allFiltered) {\n      return this.isAllFilteredSelected();\n    } else {\n      return this.isAllItemsSelected();\n    }\n  }\n\n  private getLabel() {\n    return this.searchFilter ? this.labelsForSelectAll.allFiltered : this.labelsForSelectAll.all;\n  }\n}\n","import {\n  ContentChildren,\n  Input,\n  Output,\n  EventEmitter,\n  Component,\n  ViewChild,\n  ElementRef,\n  QueryList,\n  forwardRef\n} from '@angular/core';\nimport { NG_VALIDATORS, Validator, AbstractControl } from '@angular/forms';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { debounceTime, map, distinctUntilChanged, filter } from 'rxjs/operators';\nimport { IIdentified } from '@c8y/client';\nimport { BsDropdownDirective } from 'ngx-bootstrap/dropdown';\nimport { ListItemComponent } from '../list-group/list-item.component';\nimport { findIndex, get, set } from 'lodash-es';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Component({\n  selector: 'c8y-typeahead',\n  templateUrl: './typeahead.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: forwardRef(() => TypeaheadComponent)\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => TypeaheadComponent),\n      multi: true\n    }\n  ]\n})\nexport class TypeaheadComponent implements ControlValueAccessor, Validator {\n  @ViewChild('searchControl', { static: false }) searchControl: ElementRef;\n  @ViewChild('dropdown', { static: false }) dropdown: BsDropdownDirective;\n  @ContentChildren(ListItemComponent) list: QueryList<ListItemComponent>;\n\n  @Input()\n  required: boolean = false;\n\n  @Input()\n  disabled: boolean = false;\n\n  @Input()\n  allowFreeEntries: boolean = true;\n\n  @Input()\n  placeholder: string;\n\n  @Input()\n  displayProperty: string = 'name';\n\n  @Input()\n  name: string = this.displayProperty;\n\n  @Input()\n  selected: IIdentified = {\n    id: null\n  };\n\n  @Output()\n  selectedChange = new EventEmitter<IIdentified>();\n\n  @Output()\n  onSearch = new EventEmitter<string>();\n\n  private subscription: Subscription;\n  private onChange: (name) => void;\n  private onTouched: () => void;\n\n  private readonly KEYCODE_UP = 38;\n  private readonly KEYCODE_DOWN = 40;\n  private readonly KEYCODE_TAB = 9;\n  private readonly KEYCODE_ENTER = 13;\n  private readonly KEYCODE_ESC = 27;\n\n  writeValue(value) {\n    this.selected = value;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  doBlur() {\n    if (this.onTouched) {\n      this.onTouched();\n    }\n  }\n\n  getDisplayProperty() {\n    return get(this.selected, this.displayProperty, '');\n  }\n\n  onShown() {\n    this.searchControl.nativeElement.focus();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.subscription = fromEvent(this.searchControl.nativeElement, 'keydown')\n      .pipe(\n        map((e: any) => this.handleKeyboard(e)),\n        filter((e: any) => e),\n        debounceTime(200),\n        map((e: any) => e.target.value),\n        distinctUntilChanged()\n      )\n      .subscribe(value => {\n        this.selected = {\n          id: null\n        };\n        set(this.selected, this.displayProperty, value || '');\n\n        this.onChange(this.selected);\n        this.selectedChange.emit(this.selected);\n        this.onSearch.emit(value);\n      });\n  }\n\n  handleKeyboard(event): void {\n    const keyCode = event.keyCode;\n    if (\n      [this.KEYCODE_ENTER, this.KEYCODE_DOWN, this.KEYCODE_TAB, this.KEYCODE_UP].includes(keyCode)\n    ) {\n      const items = this.list.toArray();\n      const index = findIndex(items, item => item.active);\n      if (keyCode === this.KEYCODE_ENTER || keyCode === this.KEYCODE_TAB) {\n        if (index > -1) {\n          event.preventDefault();\n          items[index].element.nativeElement.click();\n        }\n        this.dropdown.hide();\n        this.searchControl.nativeElement.blur();\n      } else {\n        this.dropdown.show();\n        const upOrDown = keyCode === this.KEYCODE_DOWN ? 1 : -1;\n        if (index > -1) {\n          items[index].active = false;\n        }\n        if (items[index + upOrDown]) {\n          items[index + upOrDown].active = true;\n        }\n      }\n      return;\n    } else if (keyCode === this.KEYCODE_ESC) {\n      event.stopPropagation();\n      this.dropdown.hide();\n      this.searchControl.nativeElement.blur();\n      return;\n    } else {\n      this.dropdown.show();\n    }\n    return event;\n  }\n\n  validate(ctrl: AbstractControl): { [key: string]: any } {\n    if (this.required && !this.getDisplayProperty()) {\n      return { required: true };\n    }\n\n    if (!this.allowFreeEntries && this.selected && this.selected.id === null) {\n      return { notExisting: true };\n    }\n\n    return null;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { SelectComponent } from './select.component';\nimport { CommonModule } from '../common/common.module';\nimport { TypeaheadComponent } from './typeahead.component';\nimport { ListGroupModule } from '../list-group/list-group.module';\nimport { FormsModule } from '../forms/forms.module';\n\n/**\n * The angular module definition for a select.\n * @exports SelectComponent\n */\n@NgModule({\n  imports: [\n    BsDropdownModule.forRoot(),\n    CommonModule,\n    ListGroupModule,\n    FormsModule\n  ],\n  exports: [\n    SelectComponent,\n    TypeaheadComponent\n  ],\n  declarations: [\n    SelectComponent,\n    TypeaheadComponent\n  ]\n})\nexport class SelectModule { }\n","import { Directive, Input, TemplateRef } from '@angular/core';\nimport { StepState } from '@angular/cdk/stepper';\n\n/**\n * Template to be used to override the icons inside the step header.\n */\n@Directive({\n  selector: 'ng-template[c8yStepperIcon]'\n})\nexport class C8yStepperIcon {\n  /** Name of the icon to be overridden. */\n  @Input('c8yStepperIcon') name: StepState;\n\n  constructor(public templateRef: TemplateRef<any>) {}\n}\n","import {\n  Component,\n  TemplateRef,\n  Input,\n  Output,\n  ContentChildren,\n  QueryList,\n  AfterContentInit,\n  OnDestroy,\n  EventEmitter\n} from '@angular/core';\nimport { CdkStepper, StepState, STEP_STATE } from '@angular/cdk/stepper';\nimport { C8yStepperIcon } from './stepper-icon.directive';\nimport { Subject, Subscription } from 'rxjs';\n\n/**\n * C8yStepper extends the CdkStepper. You can use cdk based functionality and inputs.\n * Additional to that you are able to modify the behavior and also the look and feel when\n * using the C8yStepper.\n *\n * The C8yStepper is used to present any step-based process to the user.\n * A stepper, C8yStepper and/or CdkStepper is the parent of cdk-steps.\n * Each cdk-step represents one step in the whole process that you want to provide to the user.\n *\n * The C8yStepper will create, based on the given cdk-steps, a kind of stepper-progress which looks like this:\n * (1)---(2)---(3)---(n)\n * The stepper will handle the state of each step and provides styles for active steps, done-steps or in edit-mode.\n * You are able to override icons for each step in the stepper-progress with a template. You are also able to activate\n * default-icons for states like 'edit' and 'done'.\n *\n * To force users through every provided step, set the stepper to 'linear'.\n * This will disable the possibility to move for example from step one to step three.\n *\n * Whenever it comes to validation try to use formGroups. It is possible to\n * assign a formGroup to a cdk-step input called [stepControl], which automatically respects the\n * validation-rules that you created for this formGroup. If fields are required but not filled or\n * any other validation, like a pattern, is not matched the formGroup will be invalid. In this case\n * stepping in a linear stepper to the next step gets impossible.\n *\n * If there is the need to execute asynchronous code you have at least two possibilities.\n * First: As you learned, a cdk-step works with formGroups and Validators, so you are able to use\n * asyncValidators as well.\n * Second: The C8yStepper provides an event-emitter onStepChange which is called whenever a step-button (1)--(2)--(n)\n * in the stepper-progress is clicked. The event of this emitter holds the index of the step as number. You can\n * use this EventEmitter to call for example a custom navigate-method which performs first any async-call and then moves\n * on to the given step.\n *\n * @example\n * ```\n * <c8y-stepper\n * (onStepChange)=\"navigate($event)\"\n * [disableDefaultIcons]=\"{ edit: true, done: false }\"\n * [customClasses]=\"['m-l-40', 'm-r-40', 'm-t-32']\"\n * linear\n * >\n * <!-- override icons -->\n * <ng-template c8yStepperIcon=\"final\">\n *   <span [c8yIcon]=\"'hand-peace-o'\"></span>\n * </ng-template>\n *\n * <cdk-step [stepControl]=\"formGroupStepOne\" label=\"Name of the hero\">\n *   <div class=\"m-l-40 m-r-40 m-t-32\">\n *     <h4 class=\"p-b-8\" translate>What is the name of your hero?</h4>\n *     <c8y-form-group>\n *      <div [formGroup]=\"formGroupStepOne\">\n *       <input\n *         class=\"form-control\"\n *         type=\"text\"\n *         formControlName=\"name\"\n *         placeholder=\"Mister X\"\n *         #nameRef\n *         required\n *       />\n *       <c8y-messages>\n *         <c8y-message *ngIf=\"!formGroupStepOne.untouched && !nameRef.value\" translate\n *           >Enter the name of the Superhero</c8y-message\n *         >\n *       </c8y-messages>\n *      </div>\n *     </c8y-form-group>\n *   </div>\n *   <c8y-stepper-buttons></c8y-stepper-buttons>\n * </cdk-step>\n * <cdk-step>\n *  ...\n * </cdk-step state=\"final\">\n * </c8y-stepper>\n * ```\n */\n@Component({\n  selector: 'c8y-stepper',\n  templateUrl: './stepper.component.html',\n  providers: [{ provide: CdkStepper, useExisting: C8yStepper }]\n})\nexport class C8yStepper extends CdkStepper implements AfterContentInit, OnDestroy {\n  /**\n   * Optional\n   * Indicator if icons for edit and done state should be shown in step-header buttons\n   */\n  @Input() disableDefaultIcons?: { edit: boolean; done: boolean } = { edit: true, done: true };\n  /**\n   * Optional\n   * Possibility to add any kind of custom css classes to the step-header\n   */\n  @Input() customClasses?: [string];\n  /**\n   * Will emit the step index number whenever a step-header button was clicked\n   * It listens to the stepIndex Subject.\n   */\n  @Output() onStepChange = new EventEmitter<number>();\n\n  /**\n   * Holding a QueryList of C8yStepperIcons\n   * These are templateRefs which overrides any step-header button icon with matching state of cdk-step\n   *\n   * @example:\n   * ```\n   * <!-- override icons -->\n   *  <ng-template c8yStepperIcon=\"final\">\n   *   <span [c8yIcon]=\"'hand-peace-o'\"></span>\n   *  </ng-template>\n   *\n   * <cdk-step state=\"final\" label=\"Job done!\">\n   *  <div class=\"m-l-40 m-r-40 m-t-32\">\n   *    <h4 class=\"p-b-32\" style=\"text-align: center;\" translate>\n   *     Your Superhero is now ready to save the world!\n   *   </h4>\n   *  </div>\n   *  <c8y-stepper-buttons\n   *    [hidden]=\"!isModal\"\n   *    (onBack)=\"close()\"\n   *    [labels]=\"{ back: 'Got it!' }\"\n   *  ></c8y-stepper-buttons>\n   *  <c8y-stepper-buttons [hidden]=\"isModal\"></c8y-stepper-buttons>\n   * </cdk-step>\n   * ```\n   */\n  @ContentChildren(C8yStepperIcon, { descendants: true }) _icons: QueryList<C8yStepperIcon>;\n\n  /** Consumer-specified template-refs to be used to override the header icons. */\n  _iconOverrides: { [key: string]: TemplateRef<any> } = {};\n\n  private _stepIndex: Subject<number> = new Subject();\n  private _stepIndexSubscription: Subscription;\n\n  ngAfterContentInit() {\n    this._icons.forEach(({ name, templateRef }) => (this._iconOverrides[name] = templateRef));\n    this._stepIndexSubscription = this._stepIndex.subscribe(index => this.onStepChange.emit(index));\n  }\n\n  ngOnDestroy() {\n    if (this._stepIndexSubscription && !this._stepIndexSubscription.closed) {\n      this._stepIndexSubscription.unsubscribe();\n    }\n  }\n\n  /**\n   * Manipulates the state based on the disabledDefaultIcons Input()\n   * Changing edit or done to false will change the icons within step-header buttons\n   * @param index step index\n   * @param state step state, like 'done', 'edit', 'error'\n   */\n  getIndicatorType(index: number, state: StepState) {\n    const stepState = this._getIndicatorType(index, state);\n    let _state = state;\n    switch (stepState) {\n      case STEP_STATE.EDIT:\n        if (!this.disableDefaultIcons.edit) {\n          _state = STEP_STATE.EDIT;\n        }\n        break;\n\n      case STEP_STATE.DONE:\n        if (!this.disableDefaultIcons.done) {\n          _state = STEP_STATE.DONE;\n        } else {\n          _state = '_done';\n        }\n        break;\n    }\n    return _state;\n  }\n\n  /**\n   * Pushs the step index to the subject\n   * @param index step index\n   */\n  setIndex(index: number) {\n    this._stepIndex.next(index);\n  }\n}\n","import { Component, Input, Output, TemplateRef, EventEmitter } from '@angular/core';\nimport { StepState } from '@angular/cdk/stepper';\n\n@Component({\n  selector: 'c8y-stepper-progress',\n  templateUrl: './stepper-progress.component.html'\n})\nexport class C8yStepperProgress {\n  /** List of overriden icons as TemplateRef. Also default icons could be overriden.\n   *  The given overriden icons will replace an icon with matching state: StepState\n   *\n   * <ng-container\n   * *ngSwitchCase=\"true\"\n   * [ngTemplateOutlet]=\"iconOverrides[state]\"\n   * ></ng-container>\n   *\n   */\n  @Input() iconOverrides: { [key: string]: TemplateRef<any> };\n  /** The index of the current step */\n  @Input() index: number;\n  /** Whether the step is cuurently selected or not  */\n  @Input() selected: boolean;\n  /** The current state of the step */\n  @Input() state: StepState;\n\n  /** Emits the index: number of the step which was clicked */\n  @Output() onStepClicked = new EventEmitter<number>();\n\n  /** Called on click and emits the step index */\n  stepSelected() {\n    this.onStepClicked.emit(this.index);\n  }\n}\n","import { CdkStep } from '@angular/cdk/stepper';\nimport {\n  AfterContentInit,\n  Component,\n  EventEmitter,\n  Host,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { C8yStepper } from './stepper.component';\n\n/**\n * C8yStepperButtons provides a convinient way to have, according to\n * the C8yStepper and each cdk-step, buttons to navigate between steps or to cancel the whole\n * step-process. Buttons rendered with the help of this component will use the branding css.\n *\n * By default all steps with this component in use will render a next button, expect the last step.\n * The other way around, every step using this component will render a back button, expect the first step.\n * To get a cancel button rendered you need to handle the onCancel event.\n * For next and back button you don't need to handle the available events onNext and onBack because default behavior\n * is implemented. The default will just call, according to the button, the stepper.next() or stepper.previous()\n * methods and moves the stepper forth or back. Using the EventEmitter onNext and onBack will emit for you the following\n * object: {stepper: C8yStepper, step: CdkStep}. This is useful if you need to implement custom logic before moving\n * to the next step or sending data to a backend. In this case you need to tell the stepper to move forward or back\n * on your own.\n *\n * With the component input [labels] you can change the label of each button in each step. It takes an object like this:\n * {next?: string, back?: string, cancel?: string}\n *\n * The [pending] input is of type boolean and will enable css animation for the next button when true.\n *\n * If the cdk-step provides a stepControl the component will set the next button disabled when the formGroup\n * behind it is invalid. As long as the [pending] input is true the back and next button is also disabled.\n * This will prevent multiple clicks while running a request or stepping back while a request is ongoing.\n *\n * @example\n * ```\n * <c8y-stepper>\n *  <cdk-step>\n *    <!--\n *      your html code\n *          ...\n *          ...    -->\n *    <c8y-stepper-buttons\n *     (onNext)=\"save()\"\n *     [labels]=\"{ next: 'Save' }\"\n *     [pending]=\"pendingStatus\"\n *     ></c8y-stepper-buttons>\n *  </cdk-step>\n * </c8y-stepper>\n *\n * // in your component:\n * async save() {\n *   this.pendingStatus = true;\n *   // your async request goes here ...\n *   // await something();\n *   this.pendingStatus = false;\n *   this.stepper.next();\n * }\n * ```\n */\n@Component({\n  selector: 'c8y-stepper-buttons',\n  templateUrl: './stepper-buttons.component.html'\n})\nexport class C8yStepperButtons implements AfterContentInit, OnDestroy, OnChanges {\n  /**\n   * Optional\n   * Specify custom labels for each button (cancel, back or next)\n   */\n  @Input() labels?: { cancel?: string; back?: string; next?: string; custom?: string };\n  /**\n   * Optional\n   * Indicates if a request is pending and sets the next button\n   * to disabled when true\n   */\n  @Input() pending?: boolean = false;\n\n  /**\n   * Disabled state of a button\n   */\n  @Input() disabled?: boolean = false;\n\n  /**\n   * EventEmitter which emits when cancel button is clicked\n   */\n  @Output() onCancel = new EventEmitter();\n  /**\n   * EventEmitter which emits {stepper: C8yStepper; step: CdkStep} when next button is clicked.\n   */\n  @Output() onNext = new EventEmitter<{ stepper: C8yStepper; step: CdkStep }>();\n\n  /**\n   * EventEmitter which emits {stepper: C8yStepper; step: CdkStep} when back button is clicked.\n   */\n  @Output() onBack = new EventEmitter<{ stepper: C8yStepper; step: CdkStep }>();\n\n  /**\n   * EventEmitter which emits when the optional custom button is clicked\n   */\n  @Output() onCustom = new EventEmitter();\n\n  /**\n   * Indicator which button should be shown.\n   * Based on the cdk-steps within the c8y-stepper\n   * next and back buttons are rendered.\n   */\n  showBtns = {\n    cancel: false,\n    back: false,\n    next: false,\n    custom: false\n  };\n\n  private statusChangeSubscription: Subscription;\n\n  constructor(@Host() private stepper: C8yStepper, @Host() private step: CdkStep) {}\n\n  ngAfterContentInit() {\n    this.showBtns.cancel = this.onCancel.observers.length > 0;\n    this.showBtns.custom = this.onCustom.observers.length > 0;\n\n    if (this.stepper && this.stepper.steps && this.step) {\n      this.showBtns.back = this.stepper.steps.first !== this.step;\n      this.showBtns.next = this.stepper.steps.last !== this.step;\n    }\n\n    if (this.step && this.step.stepControl) {\n      this.disabled = this.step.stepControl.invalid;\n\n      this.statusChangeSubscription = this.step.stepControl.statusChanges.subscribe(status => {\n        this.disabled = this.step.stepControl.invalid;\n      });\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    /**\n     * Disable save/next button while the status is pending\n     * This will prevent multiple clicks and therefore multiple requests\n     */\n    if (changes && changes.pending) {\n      this.disabled = changes.pending.currentValue;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.statusChangeSubscription && !this.statusChangeSubscription.closed) {\n      this.statusChangeSubscription.unsubscribe();\n    }\n  }\n\n  /**\n   * Gets called when cancel button is clicked.\n   * It will emit immediate.\n   */\n  cancel() {\n    this.onCancel.emit();\n  }\n\n  /**\n   * Gets called when next button is clicked. When onNext EventEmitter has an observer registered\n   * it will emit the following object {stepper: C8yStepper; step: CdkStep}.\n   * Otherwise it will call stepper.next() as default.\n   */\n  next() {\n    if (this.onNext.observers.length > 0) {\n      this.onNext.emit({ stepper: this.stepper, step: this.step });\n    } else {\n      this.stepper.next();\n    }\n  }\n\n  /**\n   * Gets called when back button is clicked. When onBack EventEmitter has an observer registered\n   * it will emit the following object {stepper: C8yStepper; step: CdkStep}.\n   * Otherwise it will call stepper.previous() as default.\n   */\n  back() {\n    this.stepper.selected.completed = false;\n    if (this.onBack.observers.length > 0) {\n      this.onBack.emit({ stepper: this.stepper, step: this.step });\n    } else {\n      this.stepper.previous();\n    }\n  }\n\n  /**\n   * Gets called when the custom button is clicked.\n   * It will emit immediately.\n   */\n  custom() {\n    this.onCustom.emit();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CdkStepperModule, CdkStep, STEPPER_GLOBAL_OPTIONS } from '@angular/cdk/stepper';\nimport { C8yStepper } from './stepper.component';\nimport { CommonModule } from '../common/common.module';\nimport { C8yStepperIcon } from './stepper-icon.directive';\nimport { C8yStepperProgress } from './stepper-progress.component';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { C8yStepperButtons } from './stepper-buttons.component';\n\n/**\n * The angular module definition for c8y-stepper (Wizard).\n * @exports C8yStepper\n * @exports C8yStepperIcon\n * @exports C8yStepperButtons\n * @exports CdkStep\n */\n@NgModule({\n  imports: [CommonModule, CdkStepperModule, TooltipModule],\n  declarations: [C8yStepper, C8yStepperIcon, C8yStepperProgress, C8yStepperButtons],\n  exports: [C8yStepper, CdkStep, C8yStepperIcon, C8yStepperButtons],\n  providers: [\n    {\n      /**\n       * This emables additional states, like: edit, done and error\n       * These states are used to display custom icons, if needed.\n       * Any change in here will most probably result in not showing custom icons anymore\n       */\n      provide: STEPPER_GLOBAL_OPTIONS,\n      useValue: { displayDefaultIndicatorType: false }\n    }\n  ]\n})\nexport class StepperModule {}\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { PickedDates } from './date-picker.model';\n\n@Component({\n  selector: 'c8y-date-picker',\n  templateUrl: './date-picker.component.html'\n})\nexport class DatePickerComponent implements OnInit {\n  @Output() onDateSelected: EventEmitter<PickedDates> = new EventEmitter();\n\n  fgDatePicker: FormGroup;\n\n  ngOnInit() {\n    this.fgDatePicker = new FormGroup({\n      dateFrom: new FormControl(),\n      dateTo: new FormControl()\n    });\n  }\n\n  filter() {\n    this.onDateSelected.emit(this.fgDatePicker.value);\n  }\n\n  clearFilter() {\n    this.fgDatePicker.setValue({\n      dateFrom: null,\n      dateTo: null\n    });\n    this.onDateSelected.emit(null);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule as C8yCommonModule } from '../common/common.module';\nimport { DatePickerComponent } from './date-picker.component';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule as C8yFormsModule } from '../forms/public-api';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\n\n/**\n * The angular module definition for a date picker - it allows you to pick either one date or a range of two.\n * @exports DatePickerComponent\n */\n@NgModule({\n  imports: [\n    C8yFormsModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    BsDropdownModule.forRoot(),\n    BsDatepickerModule.forRoot(),\n    C8yCommonModule\n  ],\n  exports: [DatePickerComponent],\n  declarations: [DatePickerComponent]\n})\nexport class DatePickerModule {}\n","import { NgModule } from '@angular/core';\nimport { ActionBarModule } from './action-bar/action-bar.module';\nimport { ActionModule } from './action/action.module';\nimport { AlertModule } from './alert/alert.module';\nimport { AuditLogModule } from './audit-log/audit-log.module';\nimport { AuthenticationModule } from './authentication/authentication.module';\nimport { BootstrapModule } from './bootstrap/bootstrap.module';\nimport { BreadcrumbModule } from './breadcrumb/breadcrumb.module';\nimport { CommonModule } from './common/common.module';\nimport { DashboardModule } from './dashboard/dashboard.module';\nimport { DataGridModule } from './data-grid/data-grid.module';\nimport { DeviceStatusModule } from './device-status/device-status.module';\nimport { DocsModule } from './docs/docs.module';\nimport { DropAreaModule } from './drop-area/drop-area.module';\nimport { DynamicComponentModule } from './dynamic-component/dynamic-component.module';\nimport { FilePickerModule } from './file-picker/file-picker.module';\nimport { FormsModule as c8yFormsModule } from './forms/forms.module';\nimport { HeaderModule } from './header/header.module';\nimport { ListGroupModule } from './list-group/list-group.module';\nimport { LoginModule } from './login/login.module';\nimport { ModalModule } from './modal/modal.module';\nimport { NavigatorModule } from './navigator/navigator.module';\nimport { RealtimeModule } from './realtime/realtime.module';\nimport { SearchModule } from './search/search.module';\nimport { SelectModalModule } from './select-modal/select-modal.module';\nimport { SelectModule } from './select/select.module';\nimport { StepperModule as c8yStepperModule } from './stepper/stepper.module';\nimport { TabsModule } from './tabs/tabs.module';\nimport { UserModule } from './user/user.module';\nimport { DatePickerModule } from './date-picker/date-picker.module';\n\n@NgModule({\n  exports: [\n    ActionBarModule,\n    ActionModule,\n    AlertModule,\n    AuditLogModule,\n    BootstrapModule,\n    BreadcrumbModule,\n    CommonModule,\n    DataGridModule,\n    DropAreaModule,\n    HeaderModule,\n    LoginModule,\n    ModalModule,\n    NavigatorModule,\n    AuthenticationModule,\n    SearchModule,\n    SelectModule,\n    TabsModule,\n    UserModule,\n    c8yFormsModule,\n    DeviceStatusModule,\n    DocsModule,\n    c8yStepperModule,\n    DynamicComponentModule,\n    DashboardModule,\n    ListGroupModule,\n    SelectModalModule,\n    FilePickerModule,\n    RealtimeModule,\n    DatePickerModule\n  ]\n})\nexport class CoreModule {\n  static forRoot() {\n    return {\n      ngModule: CoreModule,\n      providers: [...CommonModule.providers(), ...LoginModule.providers()]\n    };\n  }\n}\n","import { Injector, Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\nimport { from, isObservable, of, Observable } from 'rxjs';\nimport { every, filter, map, mergeMap, toArray, tap, debounceTime } from 'rxjs/operators';\nimport { Tab } from '../tabs/tab.model';\nimport { Route } from './router.models';\n\n@Injectable()\nexport class RouterTabsResolver {\n  constructor(private injector: Injector, private router: Router) {}\n\n  get routerStateSnapshot() {\n    return this.router.routerState.snapshot;\n  }\n\n  resolve(route: ActivatedRouteSnapshot) {\n    const latestChildren = this.router.config.find(r => route.routeConfig.path === r.path).children;\n    return from(latestChildren || []).pipe(\n      mergeMap((child: Route) =>\n        from(this.getGuards(child)).pipe(\n          map((guard: CanActivate) => guard.canActivate(route, this.routerStateSnapshot)),\n          mergeMap((result: any) => {\n            if (isObservable(result)) {\n              return result;\n            }\n            if (result && typeof result.then === 'function') {\n              return from(result);\n            }\n            return of(result);\n          }),\n          tap(result => {\n            if (Array.isArray(result)) {\n              child.tabs = result;\n            }\n          }),\n          every(result => !!result),\n          filter(result => result),\n          mergeMap(() => (Array.isArray(child.tabs) ? from(child.tabs) : of(child as Tab))),\n          map(result =>\n            result.label\n              ? ({\n                  label: result.label,\n                  icon: result.icon,\n                  path: `${route.url.join('/')}/${result.path}`,\n                  priority: result.priority\n                } as Tab)\n              : undefined\n          )\n        )\n      ),\n      filter(tabs => !!tabs),\n      toArray()\n    ) as Observable<Tab[]>;\n  }\n\n  private getGuards(child: Route) {\n    const guards = (child.canActivate || []).map(guard => {\n      return this.injector.get(guard);\n    });\n    if (child.data && child.data.showIf) {\n      guards.push({ canActivate: child.data.showIf });\n    }\n    return guards;\n  }\n}\n","import {\n  InventoryService,\n  UserService,\n  ApplicationService,\n  TenantService,\n} from '@c8y/client';\nimport { ViewContext } from './router.models';\n\nexport class ViewContextServices {\n  static services = new Map<ViewContext, any>([\n    [ViewContext.Device, InventoryService],\n    [ViewContext.Group, InventoryService],\n    [ViewContext.User, UserService],\n    [ViewContext.Application, ApplicationService],\n    [ViewContext.SubscribedApplications, ApplicationService],\n    [ViewContext.Tenant, TenantService],\n  ]);\n\n  static contextToService(context: ViewContext) {\n    return ViewContextServices.services.get(context);\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  PRIMARY_OUTLET,\n  Router,\n  UrlSegmentGroup,\n  UrlTree\n} from '@angular/router';\nimport { ApiService, ApiCall } from '@c8y/ngx-components/api';\nimport { NEVER, Observable, Subject, Subscription } from 'rxjs';\nimport { filter, map, merge, switchMap, tap } from 'rxjs/operators';\nimport { Tab } from '../tabs/tab.model';\nimport { TabsService } from '../tabs/tabs.service';\nimport { RouterTabsResolver } from './router-tabs.resolver';\nimport { ViewContextServices } from './view-context.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ContextRouteService {\n  private dataSubscription: Subscription;\n  private routerSubscription: Subscription;\n  private lastAddedTabs = [];\n  private refreshTrigger = new Subject();\n\n  constructor(\n    private tabsResolver: RouterTabsResolver,\n    private tabsService: TabsService,\n    private router: Router,\n    private apiService: ApiService,\n    private injector: Injector\n  ) {}\n\n  init(route: ActivatedRoute): void {\n    this.routerSubscription = this.router.events\n      .pipe(filter(e => e instanceof NavigationEnd))\n      .subscribe(() => this.redirectToFirstTab());\n\n    this.dataSubscription = route.data\n      .pipe(\n        merge(this.updatedContext(route), this.refreshTrigger),\n        switchMap(() => this.tabsResolver.resolve(route.snapshot)),\n      )\n      .subscribe(tabs => this.updateTabs(tabs));\n  }\n\n  destroy(): void {\n    this.dataSubscription.unsubscribe();\n    this.routerSubscription.unsubscribe();\n    this.lastAddedTabs.forEach(t => this.tabsService.remove(t));\n  }\n\n  refreshContext() {\n    this.refreshTrigger.next();\n  }\n\n  updatedContext(route: ActivatedRoute): Observable<ApiCall> {\n    const { data } = route.snapshot;\n    const serviceInstance = ViewContextServices.contextToService(data.context);\n    if (serviceInstance) {\n      const service = this.injector.get(serviceInstance);\n      const detailsUrlRegex = service.getDetailUrl(data.contextData).replace(/\\d+/g, '?\\\\d*');\n      const contextRegex = new RegExp(detailsUrlRegex, 'i');\n      const childrenRegex = new RegExp(`${detailsUrlRegex}/child`, 'i');\n      const filterResponse = ({ url, method }) => {\n        const contextChanged = contextRegex.test(url) && ['POST', 'PUT'].includes(method);\n        const childrenAffected = childrenRegex.test(url) && ['POST', 'DELETE'].includes(method);\n        return contextChanged || childrenAffected;\n      };\n      return this.apiService.hookResponse(filterResponse);\n    }\n    return NEVER;\n  }\n\n  private updateTabs(tabs = []) {\n    this.lastAddedTabs.forEach(t => this.tabsService.remove(t));\n    this.lastAddedTabs = tabs;\n    tabs.forEach(t => this.tabsService.add(t));\n    this.redirectToFirstTab();\n  }\n\n  private redirectToFirstTab() {\n    if (this.needsRedirect()) {\n      this.tabsService.firstTab$.subscribe((tab: Tab) => {\n        if (tab) {\n          this.router.navigateByUrl(tab.path, { replaceUrl: true });\n        }\n      });\n    }\n  }\n\n  private needsRedirect() {\n    const tree: UrlTree = this.router.parseUrl(this.router.url);\n    const groups: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n    const isContextRoute = groups.segments.length === 2;\n    return isContextRoute;\n  }\n}\n","import { Inject, Injectable, InjectionToken, Optional } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { fromFactories } from '../common/extension-hooks';\nimport { RouteFactory, Route } from './router.models';\nimport { TabsService } from '../tabs/tabs.service';\nimport { ContextRouteService } from './context-route.service';\n\n/**\n * A hook to use for Multi Provider extension.\n */\nexport const HOOK_ONCE_ROUTE = new InjectionToken('RouteFactory');\n\n/**\n * A service which defines routes\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class RouterService {\n  constructor(\n    @Optional() @Inject(HOOK_ONCE_ROUTE) factories: RouteFactory[],\n    private router: Router,\n    public tabsService: TabsService,\n    private contextRouteService: ContextRouteService\n  ) {\n    fromFactories(factories).subscribe((routes: Route[]) => {\n      this.addRoute(routes);\n    });\n  }\n\n  /**\n   * Refresh the current context\n   */\n  refresh() {\n    this.contextRouteService.refreshContext();\n  }\n\n  /**\n   * Add a new route to the router configuration or a context.\n   * @param route The route to add\n   */\n  addRoute(route: Route | Route[]) {\n    this.addRoutes(Array.isArray(route) ? route : [route]);\n  }\n\n  private addRoutes(routes) {\n    const emptyRoute = this.router.config.find(r => r.path === '**');\n    this.router.resetConfig(\n      [\n        ...this.router.config.filter(r => r.path !== '**'),\n        ...routes.map((r: Route) => this.convertRoute(this.router.config, r)),\n        emptyRoute\n      ].filter(Boolean)\n    );\n  }\n\n  private convertRoute(initialConfig, route: Route) {\n    if (route.context) {\n      initialConfig.forEach((r: Route) => {\n        if (r.data && r.data.context === route.context) {\n          r.children = [route, ...(r.children || [])];\n        }\n      });\n      return;\n    }\n    return route;\n  }\n}\n","import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ContextRouteService } from './context-route.service';\n\n@Component({\n  selector: 'c8y-context-route',\n  templateUrl: './context-route.component.html'\n})\nexport class ContextRouteComponent {\n  constructor(private route: ActivatedRoute, private contextRouteService: ContextRouteService) {}\n\n  ngOnInit(): void {\n    this.contextRouteService.init(this.route);\n  }\n\n  ngOnDestroy(): void {\n    this.contextRouteService.destroy();\n  }\n\n  refreshTabs() {\n    this.contextRouteService.refreshContext();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FetchClient, IFetchOptions } from '@c8y/client';\nimport { Subject, Observable } from 'rxjs';\nimport { ApiCall, ApiCallOptions } from './api.model';\nimport { filter } from 'rxjs/operators';\n\n@Injectable()\nexport class ApiService {\n  calls: Observable<ApiCall>;\n  private callsSubject = new Subject<ApiCall>();\n\n  constructor(private client: FetchClient) {\n    this.calls = this.callsSubject.asObservable();\n    this.hookIntoClientFetch();\n  }\n\n  hookResponse(hookFilter: (call: ApiCall) => boolean) {\n    return this.callsSubject.pipe(\n      filter(({ phase }) => phase === 'finish'),\n      filter(hookFilter)\n    );\n  }\n\n  hookRequest(hookFilter: (call: ApiCall) => boolean) {\n    return this.callsSubject.pipe(\n      filter(({ phase }) => phase === 'start'),\n      filter(hookFilter)\n    );\n  }\n\n  async onFinish(call: ApiCall) {\n    this.callsSubject.next({ phase: 'finish', ...call });\n  }\n\n  onStart(call: ApiCall) {\n    this.callsSubject.next({ phase: 'start', ...call });\n  }\n\n  async resolveData(call: ApiCall): Promise<any> {\n    const { response, method } = call;\n    if ('data' in response) {\n      return Promise.resolve({ data: response.data, method });\n    } else {\n      const cb = (data) => ({ data, method});\n      return (response as Response).clone().json().then(cb, cb);\n    }\n  }\n\n  private hookIntoClientFetch() {\n    const fetch = this.client.fetch.bind(this.client);\n    this.client.fetch = async (url, options: ApiCallOptions & IFetchOptions = { method: 'GET'}) => {\n      const { method } = options;\n      this.onStart({ options, method, url });\n      let fetchPromise = fetch(url, options);\n      if (typeof options.responseInterceptor === 'function') {\n        fetchPromise = fetchPromise.then(options.responseInterceptor);\n      }\n      fetchPromise.then(\n        (response: Response) => this.onFinish({ response, url, options, method }),\n        (response: Response) => this.onFinish({ response, url, options, method })\n      );\n      return fetchPromise;\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BasicAuth, FetchClient, Realtime, CookieAuth } from '@c8y/client';\nimport { ApiService } from './api.service';\nimport * as services from './services';\n\nfunction toProvider(provide) {\n  let deps: any[] = [FetchClient, Realtime];\n  if (provide === FetchClient)  {\n    deps = [CookieAuth];\n  }\n  if (provide === BasicAuth || provide === CookieAuth)  {\n    deps = [];\n  }\n  if (provide === Realtime) {\n    deps = [FetchClient];\n  }\n  return {provide, useClass: provide, deps};\n}\n\nconst providers: any[] = (Object.keys(services).map((k) => toProvider(services[k])) as any[])\n  .concat([\n    { provide: ApiService, useClass: ApiService, deps: [FetchClient] }\n  ]);\n// @dynamic\n@NgModule()\nexport class DataModule {\n  static providers() {\n    return providers;\n  }\n  static forRoot() {\n    return {\n      ngModule: DataModule,\n      providers\n    };\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { from, of } from 'rxjs';\nimport { catchError, map, shareReplay, tap } from 'rxjs/operators';\nimport { ViewContextServices } from './view-context.service';\nimport { InventoryService } from '../../api';\n\n@Injectable()\nexport class ContextRouteGuard implements CanActivate {\n  private caches = new Map();\n  constructor(private injector: Injector) {}\n\n  canActivate(route: ActivatedRouteSnapshot) {\n    const id = route.paramMap.get('id');\n    const service = this.service(route);\n    this.clearDetailCached(service, id);\n    return this.detailCached(service, id).pipe(\n      tap(contextData => (route.data = { ...route.data, contextData })),\n      map(() => true),\n      catchError(ex => of(false))\n    );\n  }\n\n  private service(route) {\n    const serviceInstance = ViewContextServices.contextToService(route.data.context);\n    return this.injector.get(serviceInstance);\n  }\n\n  private detailCached(service, id) {\n    const cache = this.getCache(service);\n    let cached = cache[id];\n    if (!cached) {\n      const params = service instanceof InventoryService ? { withChildren: false } : undefined;\n      cached = from(service.detail(id, params)).pipe(\n        map(({ data }) => data),\n        shareReplay(1)\n      );\n      cache[id] = cached;\n    }\n    return cached;\n  }\n\n  private clearDetailCached(service, id) {\n    const cache: Map<any, any> = this.getCache(service);\n    delete cache[id];\n  }\n\n  private getCache(service) {\n    let cache = this.caches.get(service);\n    if (!cache) {\n      cache = {};\n      this.caches.set(service, cache);\n    }\n    return cache;\n  }\n}\n","import { Component } from '@angular/core';\n\n@Component({selector: 'empty', template: ''})\nexport class EmptyComponent {}\n","import { NgModule } from '@angular/core';\nimport { RouterModule as NgRouterModule } from '@angular/router';\nimport { RouterService } from './router.service';\nimport { ContextRouteComponent } from './context-route.component';\nimport { HeaderModule } from '../header/header.module';\nimport { CommonModule } from '../common/common.module';\nimport { ContextRouteGuard } from './context-route.guard';\nimport { ViewContext, Route } from './router.models';\nimport { RouterTabsResolver } from './router-tabs.resolver';\nimport { EmptyComponent } from './empty.component';\n\nexport const routes: Route[] = [{\n  path: 'users/new',\n  component: EmptyComponent\n},\n{\n  path: 'tenants/new',\n  component: EmptyComponent\n}];\n// tslint:disable-next-line: forin\nfor (const key in ViewContext) {\n  const context = ViewContext[key];\n  routes.push({\n    path: context,\n    component: ContextRouteComponent,\n    canActivate: [ ContextRouteGuard ],\n    data: { context, contextData: {} },\n    resolve: {\n      tabs: RouterTabsResolver,\n    }\n  });\n}\n\n@NgModule({\n  declarations: [ ContextRouteComponent, EmptyComponent],\n  imports: [\n    NgRouterModule.forRoot(routes),\n    HeaderModule,\n    CommonModule\n  ],\n  entryComponents: [ContextRouteComponent, EmptyComponent]\n})\nexport class RouterModule {\n  static providers() {\n    return [\n      ContextRouteGuard,\n      RouterTabsResolver,\n      RouterService\n    ];\n  }\n\n  static forRoot() {\n    return {\n      ngModule: RouterModule,\n      providers: RouterModule.providers()\n    };\n  }\n\n  constructor(routerService: RouterService) {\n    // Declared but never used is intended: to always have a instance of RouterService.\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { kebabCase } from 'lodash-es';\r\n\r\n@Component({\r\n  selector: 'c8y-quick-link',\r\n  templateUrl: './quick-link.component.html'\r\n})\r\nexport class QuickLinkComponent implements OnInit {\r\n  @Input() icon;\r\n  @Input() label;\r\n  classes = '';\r\n\r\n  ngOnInit(): void {\r\n    this.classes = `card-block text-center ${kebabCase(this.label)}`;\r\n  }\r\n}\r\n","import { CoreModule } from '../core.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { QuickLinkComponent } from './quick-link.component';\r\n\r\n@NgModule({\r\n  declarations: [QuickLinkComponent],\r\n  imports: [CoreModule],\r\n  exports: [QuickLinkComponent],\r\n  providers: []\r\n})\r\nexport class QuickLinkModule {}\r\n","import { coerceNumberProperty } from '@angular/cdk/coercion';\nimport { IIdentified, Realtime } from '@c8y/client';\nimport { Observable, Subject } from 'rxjs';\nimport { filter, finalize, map } from 'rxjs/operators';\nimport { RealtimeMessage } from './realtime.model';\n\n/**\n * A wrapper class for handling realtime notifications in RxJS fashion.\n */\nexport abstract class RealtimeService<T> {\n  /**\n   * A flag displaying if realtime notifications are currently active.\n   */\n  get active(): boolean {\n    return this.isActive;\n  }\n\n  private subjects$: Map<string, RealtimeSubject<T>> = new Map<string, RealtimeSubject<T>>();\n  private isActive: boolean = true;\n\n  constructor(protected realtime: Realtime) {}\n\n  /**\n   * Get an Observable of all realtime notifications.\n   *\n   * @param {string | number | IIdentified} entityOrId Entity object or id\n   *\n   * @returns An [[Observable]] of notifications wrapped as [[RealtimeMessage]]\n   */\n  onAll$(entityOrId?: string | number | IIdentified): Observable<RealtimeMessage<T>> {\n    const subject$: RealtimeSubject<T> = this.getSubjectForChannel(entityOrId);\n\n    return subject$.pipe(\n      finalize(() => {\n        if (subject$.observers.length === 1 && subject$.observers[0].closed) {\n          subject$.stop();\n          this.subjects$.delete(subject$.channel);\n        }\n      })\n    );\n  }\n\n  /**\n   * Subscribes again all realtime channels with active observers.\n   */\n  start() {\n    if (!this.isActive) {\n      this.subjects$.forEach(subject$ => {\n        subject$.start();\n      });\n      this.isActive = true;\n    }\n  }\n\n  /**\n   * Stops realtime notifications and unsubscribes all realtime channels.\n   */\n  stop() {\n    if (this.isActive) {\n      this.subjects$.forEach(subject$ => {\n        subject$.stop();\n      });\n\n      this.isActive = false;\n    }\n  }\n\n  /**\n   * Get an Observable of all CREATE realtime notifications.\n   *\n   * @returns An [[Observable]] of newly created entity objects.\n   */\n  onCreate$(): Observable<T> {\n    return this.onAll$().pipe(\n      filter(msg => msg.realtimeAction === 'CREATE'),\n      map(msg => msg.data as T)\n    );\n  }\n\n  /**\n   * Get an Observable of all UPDATE realtime notifications.\n   *\n   * @param {string | number | IIdentified} entityOrId Entity object or id\n   *\n   * @returns An [[Observable]] of updated entity objects.\n   */\n  onUpdate$(entityOrId?: string | number | IIdentified): Observable<T> {\n    return this.onAll$(entityOrId).pipe(\n      filter(msg => msg.realtimeAction === 'UPDATE'),\n      map(msg => msg.data as T)\n    );\n  }\n\n  /**\n   * Get an Observable of all DELETE realtime notifications.\n   *\n   * @param {string | number | IIdentified} entityOrId Entity object or id\n   *\n   * @returns An [[Observable]] of deleted entity objects.\n   */\n  onDelete$(entityOrId?: string | number | IIdentified): Observable<number> {\n    return this.onAll$(entityOrId).pipe(\n      filter(msg => msg.realtimeAction === 'DELETE'),\n      map(msg => coerceNumberProperty(msg.data))\n    );\n  }\n\n  protected getIdString(reference: number | string | IIdentified): string {\n    let id: string | number;\n    if (typeof reference === 'object') {\n      id = reference.id;\n    } else {\n      id = reference;\n    }\n    return String(id);\n  }\n\n  protected getChannel(entityOrId?: string | number | IIdentified) {\n    return entityOrId ? this.channel().replace('*', this.getIdString(entityOrId)) : this.channel();\n  }\n\n  protected abstract channel(): string;\n\n  private getSubjectForChannel(entityOrId?: string | number | IIdentified): RealtimeSubject<T> {\n    const channel: string = this.getChannel(entityOrId);\n    let subject$: RealtimeSubject<T>;\n    if (this.subjects$.has(channel)) {\n      subject$ = this.subjects$.get(channel);\n    } else {\n      subject$ = new RealtimeSubject(channel, this.realtime);\n      this.subjects$.set(channel, subject$);\n    }\n\n    return subject$;\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\nclass RealtimeSubject<T> extends Subject<RealtimeMessage<T>> {\n  realtimeSubscription: object;\n  get channel(): string {\n    return this.realtimeChannel;\n  }\n\n  constructor(private realtimeChannel: string, private realtime: Realtime) {\n    super();\n    this.start();\n  }\n\n  start() {\n    if (!this.realtimeSubscription) {\n      this.realtimeSubscription = this.realtime.subscribe(this.realtimeChannel, msg => {\n        const data: RealtimeMessage<T> = {\n          channel: msg.channel,\n          data: msg.data.data,\n          id: msg.id,\n          realtimeAction: msg.data.realtimeAction\n        };\n        this.next(data);\n      });\n    }\n  }\n\n  stop() {\n    if (this.realtimeSubscription) {\n      this.realtime.unsubscribe(this.realtimeSubscription);\n      this.realtimeSubscription = null;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { IOperationBulk, Realtime } from '@c8y/client';\nimport { RealtimeService } from './realtime.service';\n\n/**\n * A service for handling bulk operation realtime notifications in RxJS fashion.\n */\n@Injectable()\nexport class OperationBulkRealtimeService extends RealtimeService<IOperationBulk> {\n  constructor(realtime: Realtime) {\n    super(realtime);\n  }\n\n  protected channel(): string {\n    return '/bulkOperations/*';\n  }\n}\n","export class RealtimeMessage<T> {\n  id: string;\n  channel: string;\n  realtimeAction: RealtimeAction;\n  data: T | number;\n}\n\nexport type RealtimeAction = 'UPDATE' | 'DELETE' | 'CREATE';\n","import { memoize as _memoize } from 'lodash-es';\n\n/**\n * Decorator to memoize function results.\n * @param resolver Cache key resolver function, used by memoize from lodash.\n */\nexport function memoize(resolver?) {\n  return (target, fnName, descriptor) => {\n    const fn = descriptor.value;\n    descriptor.value = function(...args) {\n      const memoizedFnName = `_${fnName}Memoized`;\n      if (!this[memoizedFnName]) {\n        this[memoizedFnName] = _memoize(fn, resolver);\n      }\n      return this[memoizedFnName].apply(this, args);\n    };\n  };\n}\n"]}