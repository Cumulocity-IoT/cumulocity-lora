"use strict";function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var t=0,e=new Array(r.length);t<r.length;t++)e[t]=r[t];return e}}function _slicedToArray(r,t){return _arrayWithHoles(r)||_iterableToArrayLimit(r,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(r,t){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)){var e=[],n=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(r){o=!0,a=r}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return e}}function _arrayWithHoles(r){if(Array.isArray(r))return r}angular.module("c8y.ui").provider("httpCache",function(){function r(r,o,n){var a=500,i=r,t=["post","put"],e=["get","delete"],u=t.concat(e),l=["GET"],c=["POST","PUT","DELETE"],f={},s=function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return _.includes(l,t[0].method)?function(r){var t=_slicedToArray(r,1)[0],e=function(r,t){var e=r;return 0<t.length&&(e+=(-1===r.indexOf("?")?"?":"&")+t),e}(t.url,n(t))+function(r){return r.headers&&r.headers.Accept||""}(t);return void 0!==window.Rx?function(r,e,t){void 0===f[e]&&(f[e]=window.Rx.Subject.defer(function(){return r.apply(this,t)}).publishReplay(1,a).refCount().take(1));var n=o(function(r,t){f[e].toPromise().then(r,t)});return _.extend(f[e],n)}(i,e,r):(void 0===f[e]&&(f[e]=i.apply(void 0,_toConsumableArray(r)),function(r){setTimeout(function(){delete f[r]},a)}(e)),f[e].then(function(r){return _.cloneDeep(r)}))}(t):(_.includes(c,t[0].method)&&(f={}),i.apply(i,t))};return t.forEach(function(o){s[o]=function(r,t,e){var n={url:r,data:t,method:o.toUpperCase()};return _.assign(n,e),s(n)}}),e.forEach(function(n){s[n]=function(r,t){var e={url:r,method:n.toUpperCase()};return _.assign(e,t),s(e)}}),_.assign(s,_.omit(i,u)),s}r.$inject=["$delegate","$q","$httpParamSerializer"],this.$get=r});