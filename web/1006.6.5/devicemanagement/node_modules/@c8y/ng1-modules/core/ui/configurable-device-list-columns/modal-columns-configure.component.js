"use strict";function _objectSpread(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?Object(arguments[e]):{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){_defineProperty(n,e,o[e])})}return n}function _defineProperty(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var n=0,o=new Array(e.length);n<e.length;n++)o[n]=e[n];return o}}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,n){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var o=[],t=!0,r=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(t=(u=i.next()).done)&&(o.push(u.value),!n||o.length!==n);t=!0);}catch(e){r=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){function e(e,n,t){var o=n.FILTERING_MODE,r=n.SIMPLE_JSON_PATH_REGEX,a=this,u=[];function i(){var o=RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(a.filterText),"i");a.filteredConfigurableColumns=_(a.configurableColumns).filter("header").filter(function(e){var n=e.name;return(e.header||n||"").match(o)}).value()}function l(e){a.addingCustomColumn=e,a.customColumnMetaToAdd={key:"",headerName:"",fragmentPath:"",filteringMode:o.EQUALITY,custom:!0,active:!0}}_.assign(a,{$onInit:function(){var e=_slicedToArray(_.at(a.resolve,["dynamicGroupId","columnOptions"]),2),n=e[0],o=e[1];t.getConfigurableColumns({dynamicGroupId:n,options:o}).then(function(e){a.configurableColumns=e,u=_.cloneDeep(e)})},FILTERING_MODE:o,SIMPLE_JSON_PATH_REGEX:r,configurableColumns:[],filterText:"",updateFilteredConfigurableColumns:i,addCustomColumn:function(){l(!0)},addingCustomColumn:!1,customColumnMetaToAdd:{},cancelCustomColumnAdd:function(){l(!1)},confirmCustomColumnAdd:function(){a.configurableColumns=[].concat(_toConsumableArray(a.configurableColumns),[t.createConfigurableColumn({meta:_objectSpread({},a.customColumnMetaToAdd,{key:_.camelCase(a.customColumnMetaToAdd.headerName)}),options:_.get(a.resolve,"columnOptions")})]),a.configurableColumns=t.moveRemovalColumnToTheEnd(a.configurableColumns),l(!1)},removeCustomColumn:function(e){a.configurableColumns=_.without(a.configurableColumns,e)},getActiveConfigurableColumns:function(){return _.filter(a.configurableColumns,"meta.active")},formatColumnName:function(e){return _.capitalize(_.startCase(e))},columnHeaderUniquenessComparator:function(e,n){return _.camelCase(e)===_.camelCase(n)},areConfigurableColumnsChanged:function(){return!_.isEqual(a.configurableColumns,u)}}),e.$watchCollection("vm.configurableColumns",i)}e.$inject=["$scope","c8yConfigurableDeviceListColumnsConstants","c8yConfigurableDeviceListColumns"],angular.module("c8y.ui").component("c8yModalDeviceListColumnsConfigure",{templateUrl:":::PLUGIN_PATH:::/ui/configurable-device-list-columns/modal-columns-configure.component.html",bindings:{close:"&",dismiss:"&",resolve:"<"},controllerAs:"vm",controller:e})}();