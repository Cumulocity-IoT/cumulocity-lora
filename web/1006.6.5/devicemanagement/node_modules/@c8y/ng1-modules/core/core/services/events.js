"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){function e(i,o,c,e,n,t){var a=o.cleanFields,u="event/events",s={headers:o.contentHeaders("event","event")},l=["creationTime","id","self","source","text","time","type","c8y_IsBinary"],r={type:t("Type")};function y(e){var t=e.id||e;return o.url("".concat(u,"/").concat(t))}function f(e,t){var r=o.url(u),n=t||{};n.params=o.timeOrderFilter(o.pageSizeNoTotalFilter(e));var a=o.cleanListCallback("events",f,n.params);return i.get(r,n).then(a)}function p(e){var t=o.url(u),r=e,n=_.cloneDeep(s);return i.post(t,r,n)}function v(e){var t=y(e),r=a(e,l),n=_.cloneDeep(s);return i.put(t,r,n)}var d={list:f,detail:function(e){var t=y(e);return i.get(t)},create:p,update:v,save:function(e){return e.id?v(e):p(e)},createCounter:function(e){var t=_.get(e,"source"),r="/events/".concat(t||"*"),n=new c.Counter(f,r),a=[c.defaultPropertyMaps.date,c.defaultPropertyMaps.source];if(e.type){var i=e.type;a.push([function(e){return i===e.type}])}return delete e.type,n.filter(e,a),n},isEventBinary:function(e){return new RegExp("/event/events/[0-9]+/binaries").test(e)},getEventIdFromUrl:function(e){var t=new RegExp("([0-9]+)/binaries");return _slicedToArray(e.match(t),2)[1]},downloadAsText:function(e){var t=function(e){return o.url("".concat(u,"/").concat(e,"/binaries"))}(e),r={headers:n.headers(),responseType:"text",transformResponse:function(e){return e}};return i.get(t,r)}};return e.enhanceWithKeysUtil({target:d,reservedKeys:l,standardKeys:r})}e.$inject=["$http","c8yBase","c8yCounter","c8yUtil","c8yAuth","gettext"],angular.module("c8y.core").factory("c8yEvents",e)}();