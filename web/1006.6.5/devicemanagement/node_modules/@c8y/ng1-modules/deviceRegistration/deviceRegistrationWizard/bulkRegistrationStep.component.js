"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],a=!0,i=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(a=(n=s.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){i=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){function t(r,a,i,o){var n=this;function s(t){t.data.numberOfSuccessful===t.data.numberOfAll?function(t){a.setSuccessData(n.wizardCtrl.data,_.assign({},t,{message:o.getString("All devices processed successfully.")}))}(t):function(t){var e=_.assign(t.data,{numberOfFailures:t.data.numberOfAll-t.data.numberOfSuccessful}),r=o.getPlural(e.numberOfFailures,'Failed to process one of the devices.\n Click "Show details" to get more information.','Failed to process {{$count}} devices.\n Click "Show details" to get more information.',e);a.setErrorData(n.wizardCtrl.data,_.assign({},{data:{details:t.data}},{message:r}))}(t),_.assign(n.wizardCtrl.data,{bulkRegistrationReloadMessage:{body:i("You are about to reload the application in order to see changes. Do you want to proceed?")}})}function l(t){var e=t.data.message||i("Error occurred while processing the uploaded file.");a.setErrorData(n.wizardCtrl.data,_.assign({},t,{message:o.getString(e)}))}function c(){n.csvUpload={},n.wizardCtrl.setAllowUserInteraction(!0),n.wizardCtrl.goTo("finish"),a.doResize()}_.assign(n,{goTo:function(t){n.wizardCtrl.goTo(t)},onCSVUpload:function(t){var e=_slicedToArray(t,1)[0];n.csvUpload={inProgress:!0},n.wizardCtrl.setAllowUserInteraction(!1),r.bulkCreate(e,{silentError:!0}).then(s,l).finally(c)}})}t.$inject=["c8yDeviceRegistration","deviceRegistrationWizardUtils","gettext","gettextCatalog"],angular.module("c8y.deviceRegistration").component("bulkRegistrationStep",{require:{wizardCtrl:"^c8yWizardStep"},bindings:{backStep:"@?"},templateUrl:":::PLUGIN_PATH:::/deviceRegistrationWizard/bulkRegistrationStep.html",controller:t,controllerAs:"vm"})}();