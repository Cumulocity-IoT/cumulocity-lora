"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){function e(e,t,i){var a,o,c=this,l=t.THREE;_.assign(c,{$onChanges:function(e){var t=e.rotate&&e.rotate.currentValue;t&&function(e){var n=s;_.isUndefined(n&&e)||_.forIn(e,function(e,t){!function(e,t,n){e.rotation[t]=n}(n,t,e)})}(t);(e.objectModel||e.isWireframe||e.cameraType)&&(a&&_.forEach(a.children,function(e){a.remove(e)}),function(){a=new l.Scene,o=window.WebGLRenderingContext?new l.WebGLRenderer({canvas:f,alpha:!0}):new l.CanvasRenderer;var e=new l.AmbientLight(16777215,.5),t=new l.DirectionalLight(16777215),n=new l.DirectionalLight(16777215);switch(c.cameraType){case"OC":d=new l.OrthographicCamera(-15,15,15,-15,1,1e3);break;case"PC":default:d=new l.PerspectiveCamera(30,f.clientWidth/f.clientHeight,.1,1e3)}t.position.set(20,25,30),n.position.set(-20,-25,-30),a.add(t),a.add(n),a.add(e),d.rotateX(Math.PI/2),d.rotateY(Math.PI/2),d.position.z=23,d.position.x=14,d.position.y=7,a.add(d),i.load(c.objectModel).then(function(e){_.forEach(e.children,function(e){e.material&&!_.isUndefined(e.material.wireframe)&&(e.material.wireframe=c.isWireframe)}),s=e,a.add(s)});var r=new l.OrbitControls(d,o.domElement);r.enableDamping=!0,r.dampingFactor=.25,r.rotateSpeed=.35,o.setClearColor(16777215,0)}(),n())}});var d,s,f=_slicedToArray(e.find("canvas"),1)[0];function n(){!function(){var e=f.clientWidth,t=f.clientHeight;f.width===e&&f.height===t||o.setSize(e,t,!1)}(),o.render(a,d),requestAnimationFrame(n)}}e.$inject=["$element","$window","c8yWebSceneLoader"],angular.module("c8y.rotation3d").component("c8yWebScene",{template:'<canvas style="width:100%;"></canvas>',bindings:{rotate:"<",objectModel:"<",isWireframe:"<",cameraType:"<"},controller:e,controllerAs:"vm"})}();